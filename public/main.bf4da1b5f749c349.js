(self.webpackChunkasta_pixi=self.webpackChunkasta_pixi||[]).push([[179],{2011:(dt,Se,V)=>{"use strict";V.d(Se,{Dh:()=>ge,GT:()=>we,cc:()=>Le,hO:()=>nt,on:()=>Q,pX:()=>ue,xv:()=>Ie});var f=V(4650),re=V(127),F=V(2680);dt=V.hmd(dt);const he=["ngOnDestroy"],ue=(be,Je,Xe,xe={})=>new Proxy(be,{get:(Ce,Ae)=>Xe.runOutsideAngular(()=>{var Ze;if(be[Ae])return!(null===(Ze=xe?.spy)||void 0===Ze)&&Ze.get&&xe.spy.get(Ae,be[Ae]),be[Ae];if(he.indexOf(Ae)>-1)return()=>{};const K=Je.toPromise().then($=>{const pe=$&&$[Ae];return"function"==typeof pe?pe.bind($):pe&&pe.then?pe.then(Y=>Xe.run(()=>Y)):Xe.run(()=>pe)});return new Proxy(()=>{},{get:($,pe)=>K[pe],apply:($,pe,Y)=>K.then(ae=>{var ee;const ye=ae&&ae(...Y);return!(null===(ee=xe?.spy)||void 0===ee)&&ee.apply&&xe.spy.apply(Ae,Y,ye),ye})})})}),we=(be,Je)=>{Je.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(xe=>{Object.defineProperty(be.prototype,xe,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,xe))})})};class me{constructor(Je){return Je}}const ge=new f.OlP("angularfire2.app.options"),Ie=new f.OlP("angularfire2.app.name");function Q(be,Je,Xe){const Ce="object"==typeof Xe&&Xe||{};Ce.name=Ce.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const Ze=re.Z.apps.filter(K=>K&&K.name===Ce.name)[0]||Je.runOutsideAngular(()=>re.Z.initializeApp(be,Ce));try{JSON.stringify(be)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Ze)}const q=(be,...Je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[be](...Je)},ie={provide:me,useFactory:Q,deps:[ge,f.R0b,[new f.FiY,Ie]]};let nt=(()=>{class be{constructor(Xe){re.Z.registerVersion("angularfire",F.q4.full,"core"),re.Z.registerVersion("angularfire",F.q4.full,"app-compat"),re.Z.registerVersion("angular",f.q4F.full,Xe.toString())}static initializeApp(Xe,xe){return{ngModule:be,providers:[{provide:ge,useValue:Xe},{provide:Ie,useValue:xe}]}}}return be.\u0275fac=function(Xe){return new(Xe||be)(f.LFG(f.Lbi))},be.\u0275mod=f.oAB({type:be}),be.\u0275inj=f.cJS({providers:[ie]}),be})();function Le(be,Je,Xe,xe,Ce){const[,Ae,Ze]=globalThis.\u0275AngularfireInstanceCache.find(K=>K[0]===be)||[];if(Ae)return function Re(be,Je){try{return be.toString()===Je.toString()}catch{return be===Je}}(Ce,Ze)||(ve("error",`${Je} was already initialized on the ${Xe} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Ce,was:Ze})),Ae;{const K=xe();return globalThis.\u0275AngularfireInstanceCache.push([be,K,Ce]),K}}const Ye=!!dt.hot,ve=(be,...Je)=>{(0,f.X6Q)()&&typeof console<"u"&&console[be](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(dt,Se,V)=>{"use strict";V.d(Se,{q4:()=>fn,iC:()=>Ol,HU:()=>mu,vb:()=>Rl,JM:()=>Pl});var f=V(4650),re=V(5867),F=V(5861),he=V(9681),ue=V(2090),we=V(4859),me=V(1877),ge=V(8766);const Ie="@firebase/installations",Q="0.5.11",ie=`w:${Q}`,nt="FIS_v2",Je=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(A){return A instanceof ue.ZR&&A.code.includes("request-failed")}function xe({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Ce(A){return{token:A.token,requestStatus:2,expiresIn:ae(A.expiresIn),creationTime:Date.now()}}function Ae(A,T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,F.Z)(function*(A,T){const U=(yield T.json()).error;return Je.create("request-failed",{requestName:A,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function K({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function $(A,{refreshToken:T}){const P=K(A);return P.append("Authorization",function ee(A){return`${nt} ${A}`}(T)),P}function pe(A){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(A){const T=yield A();return T.status>=500&&T.status<600?A():T})).apply(this,arguments)}function ae(A){return Number(A.replace("s","000"))}function ye(A,T){return ce.apply(this,arguments)}function ce(){return(ce=(0,F.Z)(function*({appConfig:A,heartbeatServiceProvider:T},{fid:P}){const U=xe(A),te=K(A),le=T.getImmediate({optional:!0});if(le){const pt=yield le.getHeartbeatsHeader();pt&&te.append("x-firebase-client",pt)}const qe={method:"POST",headers:te,body:JSON.stringify({fid:P,authVersion:nt,appId:A.appId,sdkVersion:ie})},He=yield pe(()=>fetch(U,qe));if(He.ok){const pt=yield He.json();return{fid:pt.fid||P,registrationStatus:2,refreshToken:pt.refreshToken,authToken:Ce(pt.authToken)}}throw yield Ae("Create Installation",He)})).apply(this,arguments)}function Fe(A){return new Promise(T=>{setTimeout(T,A)})}const Wt=/^[cdef][\w-]{21}$/;function Ge(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const P=function Ht(A){return function ht(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Wt.test(P)?P:""}catch{return""}}function jn(A){return`${A.appName}!${A.appId}`}const Jt=new Map;function Vt(A,T){const P=jn(A);Pt(P,T),function Qr(A,T){const P=function cr(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=A=>{Pt(A.data.key,A.data.fid)}),Jr}();P&&P.postMessage({key:A,fid:T}),function _r(){0===Jt.size&&Jr&&(Jr.close(),Jr=null)}()}(P,T)}function Pt(A,T){const P=Jt.get(A);if(P)for(const U of P)U(T)}let Jr=null;const rr="firebase-installations-store";let En=null;function st(){return En||(En=(0,ge.X3)("firebase-installations-database",1,{upgrade:(A,T)=>{0===T&&A.createObjectStore(rr)}})),En}function Xr(A,T){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,F.Z)(function*(A,T){const P=jn(A),te=(yield st()).transaction(rr,"readwrite"),le=te.objectStore(rr),Me=yield le.get(P);return yield le.put(T,P),yield te.done,(!Me||Me.fid!==T.fid)&&Vt(A,T.fid),T})).apply(this,arguments)}function In(A){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,F.Z)(function*(A){const T=jn(A),U=(yield st()).transaction(rr,"readwrite");yield U.objectStore(rr).delete(T),yield U.done})).apply(this,arguments)}function Nr(A,T){return mt.apply(this,arguments)}function mt(){return(mt=(0,F.Z)(function*(A,T){const P=jn(A),te=(yield st()).transaction(rr,"readwrite"),le=te.objectStore(rr),Me=yield le.get(P),qe=T(Me);return void 0===qe?yield le.delete(P):yield le.put(qe,P),yield te.done,qe&&(!Me||Me.fid!==qe.fid)&&Vt(A,qe.fid),qe})).apply(this,arguments)}function sn(A){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,F.Z)(function*(A){let T;const P=yield Nr(A.appConfig,U=>{const te=ei(U),le=yt(A,te);return T=le.registrationPromise,le.installationEntry});return""===P.fid?{installationEntry:yield T}:{installationEntry:P,registrationPromise:T}})).apply(this,arguments)}function ei(A){return Gr(A||{fid:Ge(),registrationStatus:0})}function yt(A,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Je.create("app-offline"))};const P={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function Ve(A,T){return _t.apply(this,arguments)}(A,P);return{installationEntry:P,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:dr(A)}:{installationEntry:T}}function _t(){return(_t=(0,F.Z)(function*(A,T){try{const P=yield ye(A,T);return Xr(A.appConfig,P)}catch(P){throw Xe(P)&&409===P.customData.serverCode?yield In(A.appConfig):yield Xr(A.appConfig,{fid:T.fid,registrationStatus:0}),P}})).apply(this,arguments)}function dr(A){return nn.apply(this,arguments)}function nn(){return(nn=(0,F.Z)(function*(A){let T=yield It(A.appConfig);for(;1===T.registrationStatus;)yield Fe(100),T=yield It(A.appConfig);if(0===T.registrationStatus){const{installationEntry:P,registrationPromise:U}=yield sn(A);return U||P}return T})).apply(this,arguments)}function It(A){return Nr(A,T=>{if(!T)throw Je.create("installation-not-found");return Gr(T)})}function Gr(A){return function ir(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Pr(A,T){return an.apply(this,arguments)}function an(){return(an=(0,F.Z)(function*({appConfig:A,heartbeatServiceProvider:T},P){const U=X(A,P),te=$(A,P),le=T.getImmediate({optional:!0});if(le){const pt=yield le.getHeartbeatsHeader();pt&&te.append("x-firebase-client",pt)}const qe={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ie,appId:A.appId}})},He=yield pe(()=>fetch(U,qe));if(He.ok)return Ce(yield He.json());throw yield Ae("Generate Auth Token",He)})).apply(this,arguments)}function X(A,{fid:T}){return`${xe(A)}/${T}/authTokens:generate`}function H(A){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*(A,T=!1){let P;const U=yield Nr(A.appConfig,le=>{if(!bt(le))throw Je.create("not-registered");const Me=le.authToken;if(!T&&un(Me))return le;if(1===Me.requestStatus)return P=ne(A,T),le;{if(!navigator.onLine)throw Je.create("app-offline");const qe=Bt(le);return P=je(A,qe),qe}});return P?yield P:U.authToken})).apply(this,arguments)}function ne(A,T){return j.apply(this,arguments)}function j(){return(j=(0,F.Z)(function*(A,T){let P=yield Ee(A.appConfig);for(;1===P.authToken.requestStatus;)yield Fe(100),P=yield Ee(A.appConfig);const U=P.authToken;return 0===U.requestStatus?H(A,T):U})).apply(this,arguments)}function Ee(A){return Nr(A,T=>{if(!bt(T))throw Je.create("not-registered");return function or(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function je(A,T){return tt.apply(this,arguments)}function tt(){return(tt=(0,F.Z)(function*(A,T){try{const P=yield Pr(A,T),U=Object.assign(Object.assign({},T),{authToken:P});return yield Xr(A.appConfig,U),P}catch(P){if(!Xe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Xr(A.appConfig,U)}else yield In(A.appConfig);throw P}})).apply(this,arguments)}function bt(A){return void 0!==A&&2===A.registrationStatus}function un(A){return 2===A.requestStatus&&!function dn(A){const T=Date.now();return T<A.creationTime||A.creationTime+A.expiresIn<T+36e5}(A)}function Bt(A){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:T})}function Gn(){return(Gn=(0,F.Z)(function*(A){const T=A,{installationEntry:P,registrationPromise:U}=yield sn(T);return U?U.catch(console.error):H(T).catch(console.error),P.fid})).apply(this,arguments)}function Hn(){return(Hn=(0,F.Z)(function*(A,T=!1){const P=A;return yield Rr(P),(yield H(P,T)).token})).apply(this,arguments)}function Rr(A){return We.apply(this,arguments)}function We(){return(We=(0,F.Z)(function*(A){const{registrationPromise:T}=yield sn(A);T&&(yield T)})).apply(this,arguments)}function gi(A){return Je.create("missing-app-config-values",{valueName:A})}const At="installations",Mn=A=>{const T=A.getProvider("app").getImmediate(),P=function Dt(A){if(!A||!A.options)throw gi("App Configuration");if(!A.name)throw gi("App Name");const T=["projectId","apiKey","appId"];for(const P of T)if(!A.options[P])throw gi(P);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(T);return{app:T,appConfig:P,heartbeatServiceProvider:(0,he._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ss=A=>{const T=A.getProvider("app").getImmediate(),P=(0,he._getProvider)(T,At).getImmediate();return{getId:()=>function $t(A){return Gn.apply(this,arguments)}(P),getToken:te=>function hr(A){return Hn.apply(this,arguments)}(P,te)}};(function Ao(){(0,he._registerComponent)(new we.wA(At,Mn,"PUBLIC")),(0,he._registerComponent)(new we.wA("installations-internal",ss,"PRIVATE"))})(),(0,he.registerVersion)(Ie,Q),(0,he.registerVersion)(Ie,Q,"esm2017");const Vn="@firebase/remote-config",vr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ku{constructor(T,P,U,te){this.client=T,this.storage=P,this.storageCache=U,this.logger=te}isCachedDataFresh(T,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-P,te=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${te}.`),te}fetch(T){var P=this;return(0,F.Z)(function*(){const[U,te]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(te&&P.isCachedDataFresh(T.cacheMaxAgeMillis,U))return te;T.eTag=te&&te.eTag;const le=yield P.client.fetch(T),Me=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Me.push(P.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Me),le})()}}function _l(A=navigator){return A.languages&&A.languages[0]||A.language}class Hs{constructor(T,P,U,te,le,Me){this.firebaseInstallations=T,this.sdkVersion=P,this.namespace=U,this.projectId=te,this.apiKey=le,this.appId=Me}fetch(T){var P=this;return(0,F.Z)(function*(){var U,te,le;const[Me,qe]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ct={sdk_version:P.sdkVersion,app_instance_id:Me,app_instance_id_token:qe,app_id:P.appId,language_code:_l()},Jn={method:"POST",headers:xt,body:JSON.stringify(ct)},vi=fetch(pt,Jn),ol=new Promise((Ms,Zi)=>{T.signal.addEventListener(()=>{const Ho=new Error("The operation was aborted.");Ho.name="AbortError",Zi(Ho)})});let _u;try{yield Promise.race([vi,ol]),_u=yield vi}catch(Ms){let Zi="fetch-client-network";throw"AbortError"===(null===(U=Ms)||void 0===U?void 0:U.name)&&(Zi="fetch-timeout"),vr.create(Zi,{originalErrorMessage:null===(te=Ms)||void 0===te?void 0:te.message})}let xi=_u.status;const mo=_u.headers.get("ETag")||void 0;let Ss,Ki;if(200===_u.status){let Ms;try{Ms=yield _u.json()}catch(Zi){throw vr.create("fetch-client-parse",{originalErrorMessage:null===(le=Zi)||void 0===le?void 0:le.message})}Ss=Ms.entries,Ki=Ms.state}if("INSTANCE_STATE_UNSPECIFIED"===Ki?xi=500:"NO_CHANGE"===Ki?xi=304:("NO_TEMPLATE"===Ki||"EMPTY_CONFIG"===Ki)&&(Ss={}),304!==xi&&200!==xi)throw vr.create("fetch-status",{httpStatus:xi});return{status:xi,eTag:mo,config:Ss}})()}}class ed{constructor(T,P){this.client=T,this.storage=P}fetch(T){var P=this;return(0,F.Z)(function*(){const U=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:P,backoffCount:U}){var te=this;return(0,F.Z)(function*(){yield function So(A,T){return new Promise((P,U)=>{const te=Math.max(T-Date.now(),0),le=setTimeout(P,te);A.addEventListener(()=>{clearTimeout(le),U(vr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,P);try{const le=yield te.client.fetch(T);return yield te.storage.deleteThrottleMetadata(),le}catch(le){if(!function ti(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const T=Number(A.customData.httpStatus);return 429===T||500===T||503===T||504===T}(le))throw le;const Me={throttleEndTimeMillis:Date.now()+(0,ue.$s)(U),backoffCount:U+1};return yield te.storage.setThrottleMetadata(Me),te.attemptFetch(T,Me)}})()}}class nu{constructor(T,P,U,te,le){this.app=T,this._client=P,this._storageCache=U,this._storage=te,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ra(A,T){var P;const U=A.target.error||void 0;return vr.create(T,{originalErrorMessage:U&&(null===(P=U)||void 0===P?void 0:P.message)})}const oo="app_namespace_store";class rd{constructor(T,P,U,te=function nd(){return new Promise((A,T)=>{var P;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=te=>{T(Ra(te,"storage-open"))},U.onsuccess=te=>{A(te.target.result)},U.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(oo,{keyPath:"compositeKey"})}}catch(U){T(vr.create("storage-open",{originalErrorMessage:null===(P=U)||void 0===P?void 0:P.message}))}})}()){this.appId=T,this.appName=P,this.namespace=U,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var P=this;return(0,F.Z)(function*(){const U=yield P.openDbPromise;return new Promise((te,le)=>{var Me;const He=U.transaction([oo],"readonly").objectStore(oo),pt=P.createCompositeKey(T);try{const xt=He.get(pt);xt.onerror=ct=>{le(Ra(ct,"storage-get"))},xt.onsuccess=ct=>{const Jn=ct.target.result;te(Jn?Jn.value:void 0)}}catch(xt){le(vr.create("storage-get",{originalErrorMessage:null===(Me=xt)||void 0===Me?void 0:Me.message}))}})})()}set(T,P){var U=this;return(0,F.Z)(function*(){const te=yield U.openDbPromise;return new Promise((le,Me)=>{var qe;const pt=te.transaction([oo],"readwrite").objectStore(oo),xt=U.createCompositeKey(T);try{const ct=pt.put({compositeKey:xt,value:P});ct.onerror=Jn=>{Me(Ra(Jn,"storage-set"))},ct.onsuccess=()=>{le()}}catch(ct){Me(vr.create("storage-set",{originalErrorMessage:null===(qe=ct)||void 0===qe?void 0:qe.message}))}})})()}delete(T){var P=this;return(0,F.Z)(function*(){const U=yield P.openDbPromise;return new Promise((te,le)=>{var Me;const He=U.transaction([oo],"readwrite").objectStore(oo),pt=P.createCompositeKey(T);try{const xt=He.delete(pt);xt.onerror=ct=>{le(Ra(ct,"storage-delete"))},xt.onsuccess=()=>{te()}}catch(xt){le(vr.create("storage-delete",{originalErrorMessage:null===(Me=xt)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Oa{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const P=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),te=T.storage.getActiveConfig(),le=yield P;le&&(T.lastFetchStatus=le);const Me=yield U;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const qe=yield te;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Fa(){return so.apply(this,arguments)}function so(){return(so=(0,F.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Hi(){(0,he._registerComponent)(new we.wA("remote-config",function A(T,{instanceIdentifier:P}){const U=T.getProvider("app").getImmediate(),te=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,ue.hl)())throw vr.create("indexed-db-unavailable");const{projectId:le,apiKey:Me,appId:qe}=U.options;if(!le)throw vr.create("registration-project-id");if(!Me)throw vr.create("registration-api-key");if(!qe)throw vr.create("registration-app-id");const He=new rd(qe,U.name,P=P||"firebase"),pt=new Oa(He),xt=new me.Yd(Vn);xt.logLevel=me.in.ERROR;const ct=new Hs(te,he.SDK_VERSION,P,le,Me,qe),Jn=new ed(ct,He),vi=new Ku(Jn,He,pt,xt),ol=new nu(U,vi,pt,He,xt);return function tu(A){const T=(0,ue.m9)(A);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ol),ol},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Vn,"0.3.10"),(0,he.registerVersion)(Vn,"0.3.10","esm2017")}();const bl="/firebase-messaging-sw.js",ni="/firebase-cloud-messaging-push-scope",ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wl="google.c.a.c_id",hs="google.c.a.c_l",$s="google.c.a.ts",iu="google.c.a.e";var fs=(()=>{return(A=fs||(fs={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",fs;var A})();function An(A){const T=new Uint8Array(A);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $i(A){const P=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(P),te=new Uint8Array(U.length);for(let le=0;le<U.length;++le)te[le]=U.charCodeAt(le);return te}const La="fcm_token_details_db",ri="fcm_token_object_Store";function El(A){return Va.apply(this,arguments)}function Va(){return Va=(0,F.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(La))return null;let T=null;return(yield(0,ge.X3)(La,5,{upgrade:(U=(0,F.Z)(function*(te,le,Me,qe){var He;if(le<2||!te.objectStoreNames.contains(ri))return;const pt=qe.objectStore(ri),xt=yield pt.index("fcmSenderId").get(A);if(yield pt.clear(),xt)if(2===le){const ct=xt;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;T={token:ct.fcmToken,createTime:null!==(He=ct.createTime)&&void 0!==He?He:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:An(ct.vapidKey)}}}else if(3===le){const ct=xt;T={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:An(ct.auth),p256dh:An(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:An(ct.vapidKey)}}}else if(4===le){const ct=xt;T={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:An(ct.auth),p256dh:An(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:An(ct.vapidKey)}}}}),function(le,Me,qe,He){return U.apply(this,arguments)})})).close(),yield(0,ge.Lj)(La),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),ou(T)?T:null;var U}),Va.apply(this,arguments)}function ou(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:T}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const cn="firebase-messaging-store";let Mo=null;function gs(){return Mo||(Mo=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(A,T)=>{0===T&&A.createObjectStore(cn)}})),Mo}function Ws(A){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,F.Z)(function*(A){const T=sr(A),U=yield(yield gs()).transaction(cn).objectStore(cn).get(T);if(U)return U;{const te=yield El(A.appConfig.senderId);if(te)return yield bn(A,te),te}})).apply(this,arguments)}function bn(A,T){return mi.apply(this,arguments)}function mi(){return(mi=(0,F.Z)(function*(A,T){const P=sr(A),te=(yield gs()).transaction(cn,"readwrite");return yield te.objectStore(cn).put(T,P),yield te.done,T})).apply(this,arguments)}function Zs(A){return zi.apply(this,arguments)}function zi(){return(zi=(0,F.Z)(function*(A){const T=sr(A),U=(yield gs()).transaction(cn,"readwrite");yield U.objectStore(cn).delete(T),yield U.done})).apply(this,arguments)}function sr({appConfig:A}){return A.appId}const Tn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lo(A,T){return ar.apply(this,arguments)}function ar(){return(ar=(0,F.Z)(function*(A,T){var P;const U=yield ys(A),te=uo(T),le={method:"POST",headers:U,body:JSON.stringify(te)};let Me;try{Me=yield(yield fetch(ko(A.appConfig),le)).json()}catch(qe){throw Tn.create("token-subscribe-failed",{errorInfo:null===(P=qe)||void 0===P?void 0:P.toString()})}if(Me.error)throw Tn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Tn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Ys(A,T){return ms.apply(this,arguments)}function ms(){return(ms=(0,F.Z)(function*(A,T){var P;const U=yield ys(A),te=uo(T.subscriptionOptions),le={method:"PATCH",headers:U,body:JSON.stringify(te)};let Me;try{Me=yield(yield fetch(`${ko(A.appConfig)}/${T.token}`,le)).json()}catch(qe){throw Tn.create("token-update-failed",{errorInfo:null===(P=qe)||void 0===P?void 0:P.toString()})}if(Me.error)throw Tn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Tn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function xo(A,T){return zr.apply(this,arguments)}function zr(){return(zr=(0,F.Z)(function*(A,T){var P;const te={method:"DELETE",headers:yield ys(A)};try{const Me=yield(yield fetch(`${ko(A.appConfig)}/${T}`,te)).json();if(Me.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(le){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(P=le)||void 0===P?void 0:P.toString()})}})).apply(this,arguments)}function ko({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function ys(A){return ft.apply(this,arguments)}function ft(){return(ft=(0,F.Z)(function*({appConfig:A,installations:T}){const P=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function uo({p256dh:A,auth:T,endpoint:P,vapidKey:U}){const te={web:{endpoint:P,auth:T,p256dh:A}};return U!==ao&&(te.web.applicationPubKey=U),te}const Ba=6048e5;function qi(A){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,F.Z)(function*(A){const T=yield _s(A.swRegistration,A.vapidKey),P={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:T.endpoint,auth:An(T.getKey("auth")),p256dh:An(T.getKey("p256dh"))},U=yield Ws(A.firebaseDependencies);if(U){if(Sn(U.subscriptionOptions,P))return Date.now()>=U.createTime+Ba?No(A,{token:U.token,createTime:Date.now(),subscriptionOptions:P}):U.token;try{yield xo(A.firebaseDependencies,U.token)}catch(te){console.warn(te)}return ke(A.firebaseDependencies,P)}return ke(A.firebaseDependencies,P)})).apply(this,arguments)}function Qs(A){return ja.apply(this,arguments)}function ja(){return(ja=(0,F.Z)(function*(A){const T=yield Ws(A.firebaseDependencies);T&&(yield xo(A.firebaseDependencies,T.token),yield Zs(A.firebaseDependencies));const P=yield A.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function No(A,T){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,F.Z)(function*(A,T){try{const P=yield Ys(A.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:P,createTime:Date.now()});return yield bn(A.firebaseDependencies,U),P}catch(P){throw yield Qs(A),P}})).apply(this,arguments)}function ke(A,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,F.Z)(function*(A,T){const U={token:yield lo(A,T),createTime:Date.now(),subscriptionOptions:T};return yield bn(A,U),U.token})).apply(this,arguments)}function _s(A,T){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,F.Z)(function*(A,T){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$i(T)})})).apply(this,arguments)}function Sn(A,T){return T.vapidKey===A.vapidKey&&T.endpoint===A.endpoint&&T.auth===A.auth&&T.p256dh===A.p256dh}function Js(A){const T={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Po(A,T){if(!T.notification)return;A.notification={};const P=T.notification.title;P&&(A.notification.title=P);const U=T.notification.body;U&&(A.notification.body=U);const te=T.notification.image;te&&(A.notification.image=te)}(T,A),function yi(A,T){!T.data||(A.data=T.data)}(T,A),function Ha(A,T){var P,U,te,le,Me;if(!(T.fcmOptions||null!==(P=T.notification)&&void 0!==P&&P.click_action))return;A.fcmOptions={};const qe=null!==(te=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==te?te:null===(le=T.notification)||void 0===le?void 0:le.click_action;qe&&(A.fcmOptions.link=qe);const He=null===(Me=T.fcmOptions)||void 0===Me?void 0:Me.analytics_label;He&&(A.fcmOptions.analyticsLabel=He)}(T,A),T}function Xs(A){return"object"==typeof A&&!!A&&wl in A}function Zu(A,T){const P=[];for(let U=0;U<A.length;U++)P.push(A.charAt(U)),U<T.length&&P.push(T.charAt(U));return P.join("")}function ea(A){return Tn.create("missing-app-config-values",{valueName:A})}Zu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $a{constructor(T,P,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Yu(A){if(!A||!A.options)throw ea("App Configuration Object");if(!A.name)throw ea("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:P}=A;for(const U of T)if(!P[U])throw ea(U);return{appName:A.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:te,installations:P,analyticsProvider:U}}_delete(){return Promise.resolve()}}function lr(A){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(A){var T;try{A.swRegistration=yield navigator.serviceWorker.register(bl,{scope:ni}),A.swRegistration.update().catch(()=>{})}catch(P){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=P)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ta(A,T){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,F.Z)(function*(A,T){if(!T&&!A.swRegistration&&(yield lr(A)),T||!A.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");A.swRegistration=T}})).apply(this,arguments)}function oi(A,T){return na.apply(this,arguments)}function na(){return(na=(0,F.Z)(function*(A,T){T?A.vapidKey=T:A.vapidKey||(A.vapidKey=ao)})).apply(this,arguments)}function su(){return(su=(0,F.Z)(function*(A,T){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield oi(A,T?.vapidKey),yield ta(A,T?.serviceWorkerRegistration),qi(A)})).apply(this,arguments)}function qa(A,T,P){return ra.apply(this,arguments)}function ra(){return(ra=(0,F.Z)(function*(A,T,P){const U=Ro(T);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:P[wl],message_name:P[hs],message_time:P[$s],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ro(A){switch(A){case fs.NOTIFICATION_CLICKED:return"notification_open";case fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function vs(){return(vs=(0,F.Z)(function*(A,T){const P=T.data;if(!P.isFirebaseMessaging)return;A.onMessageHandler&&P.messageType===fs.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Js(P)):A.onMessageHandler.next(Js(P)));const U=P.data;Xs(U)&&"1"===U[iu]&&(yield qa(A,P.messageType,U))})).apply(this,arguments)}const bs="@firebase/messaging",ia=A=>{const T=new $a(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Wa(A,T){return vs.apply(this,arguments)}(T,P)),T},Oo=A=>{const T=A.getProvider("messaging").getImmediate();return{getToken:U=>function za(A,T){return su.apply(this,arguments)}(T,U)}};function Dl(){return Al.apply(this,arguments)}function Al(){return(Al=(0,F.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function oa(){(0,he._registerComponent)(new we.wA("messaging",ia,"PUBLIC")),(0,he._registerComponent)(new we.wA("messaging-internal",Oo,"PRIVATE")),(0,he.registerVersion)(bs,"0.9.15"),(0,he.registerVersion)(bs,"0.9.15","esm2017")}();const Ka="analytics",sd="firebase_id",Si="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",co="https://www.googletagmanager.com/gtag/js",Qn=new me.Yd("@firebase/analytics");function Ya(A){return Promise.all(A.map(T=>T.catch(P=>P)))}function Qu(A,T){const P=document.createElement("script");P.src=`${co}?l=${A}&id=${T}`,P.async=!0,document.head.appendChild(P)}function Or(A,T,P,U,te,le){return ho.apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(A,T,P,U,te,le){const Me=U[te];try{if(Me)yield T[Me];else{const He=(yield Ya(P)).find(pt=>pt.measurementId===te);He&&(yield T[He.appId])}}catch(qe){Qn.error(qe)}A("config",te,le)})).apply(this,arguments)}function ad(A,T,P,U,te){return Es.apply(this,arguments)}function Es(){return(Es=(0,F.Z)(function*(A,T,P,U,te){try{let le=[];if(te&&te.send_to){let Me=te.send_to;Array.isArray(Me)||(Me=[Me]);const qe=yield Ya(P);for(const He of Me){const pt=qe.find(ct=>ct.measurementId===He),xt=pt&&T[pt.appId];if(!xt){le=[];break}le.push(xt)}}0===le.length&&(le=Object.values(T)),yield Promise.all(le),A("event",U,te||{})}catch(le){Qn.error(le)}})).apply(this,arguments)}function ld(){const A=window.document.getElementsByTagName("script");for(const T of Object.values(A))if(T.src&&T.src.includes(co))return T;return null}const Wr=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),G=new class k{constructor(T={},P=1e3){this.throttleMetadata=T,this.intervalMillis=P}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,P){this.throttleMetadata[T]=P}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Te(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ke(A){return en.apply(this,arguments)}function en(){return(en=(0,F.Z)(function*(A){var T;const{appId:P,apiKey:U}=A,te={method:"GET",headers:Te(U)},le=Si.replace("{app-id}",P),Me=yield fetch(le,te);if(200!==Me.status&&304!==Me.status){let qe="";try{const He=yield Me.json();null!==(T=He.error)&&void 0!==T&&T.message&&(qe=He.error.message)}catch{}throw Wr.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:qe})}return Me.json()})).apply(this,arguments)}function Ut(A){return fr.apply(this,arguments)}function fr(){return(fr=(0,F.Z)(function*(A,T=G,P){const{appId:U,apiKey:te,measurementId:le}=A.options;if(!U)throw Wr.create("no-app-id");if(!te){if(le)return{measurementId:le,appId:U};throw Wr.create("no-api-key")}const Me=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new cd;return setTimeout((0,F.Z)(function*(){qe.abort()}),void 0!==P?P:6e4),Fr({appId:U,apiKey:te,measurementId:le},Me,qe,T)})).apply(this,arguments)}function Fr(A,T,P){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,F.Z)(function*(A,{throttleEndTimeMillis:T,backoffCount:P},U,te=G){var le,Me;const{appId:qe,measurementId:He}=A;try{yield Qa(U,T)}catch(pt){if(He)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${null===(le=pt)||void 0===le?void 0:le.message}]`),{appId:qe,measurementId:He};throw pt}try{const pt=yield Ke(A);return te.deleteThrottleMetadata(qe),pt}catch(pt){const xt=pt;if(!Xf(xt)){if(te.deleteThrottleMetadata(qe),He)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${xt?.message}]`),{appId:qe,measurementId:He};throw pt}const ct=503===Number(null===(Me=xt?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,ue.$s)(P,te.intervalMillis,30):(0,ue.$s)(P,te.intervalMillis),Jn={throttleEndTimeMillis:Date.now()+ct,backoffCount:P+1};return te.setThrottleMetadata(qe,Jn),Qn.debug(`Calling attemptFetch again in ${ct} millis`),Fr(A,Jn,U,te)}})).apply(this,arguments)}function Qa(A,T){return new Promise((P,U)=>{const te=Math.max(T-Date.now(),0),le=setTimeout(P,te);A.addEventListener(()=>{clearTimeout(le),U(Wr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Xf(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const T=Number(A.customData.httpStatus);return 429===T||500===T||503===T||504===T}class cd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Ml(){return la.apply(this,arguments)}function la(){return(la=(0,F.Z)(function*(){var A;if(!(0,ue.hl)())return Qn.warn(Wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(T){return Qn.warn(Wr.create("indexeddb-unavailable",{errorInfo:null===(A=T)||void 0===A?void 0:A.toString()}).message),!1}return!0})).apply(this,arguments)}function Rn(){return(Rn=(0,F.Z)(function*(A,T,P,U,te,le,Me){var qe;const He=Ut(A);He.then(vi=>{P[vi.measurementId]=vi.appId,A.options.measurementId&&vi.measurementId!==A.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${vi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vi=>Qn.error(vi)),T.push(He);const pt=Ml().then(vi=>{if(vi)return U.getId()}),[xt,ct]=yield Promise.all([He,pt]);ld()||Qu(le,xt.measurementId),te("js",new Date);const Jn=null!==(qe=Me?.config)&&void 0!==qe?qe:{};return Jn.origin="firebase",Jn.update=!0,null!=ct&&(Jn[sd]=ct),te("config",xt.measurementId,Jn),xt.measurementId})).apply(this,arguments)}class Vo{constructor(T){this.app=T}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},cu=[];const ua={};let Bo,Sr,Is="dataLayer",kl=!1;function Ju(A,T,P){!function Zh(){const A=[];if((0,ue.ru)()&&A.push("This is a browser extension environment."),(0,ue.zI)()||A.push("Cookies are not available."),A.length>0){const T=A.map((U,te)=>`(${te+1}) ${U}`).join(" "),P=Wr.create("invalid-analytics-context",{errorInfo:T});Qn.warn(P.message)}}();const U=A.options.appId;if(!U)throw Wr.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Wr.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[U])throw Wr.create("already-exists",{id:U});if(!kl){!function Mi(A){let T=[];Array.isArray(window[A])?T=window[A]:window[A]=T}(Is);const{wrappedGtag:le,gtagCore:Me}=function uu(A,T,P,U,te){let le=function(...Me){window[U].push(arguments)};return window[te]&&"function"==typeof window[te]&&(le=window[te]),window[te]=function aa(A,T,P,U){function le(){return(le=(0,F.Z)(function*(Me,qe,He){try{"event"===Me?yield ad(A,T,P,qe,He):"config"===Me?yield Or(A,T,P,U,qe,He):A("set",qe)}catch(pt){Qn.error(pt)}})).apply(this,arguments)}return function te(Me,qe,He){return le.apply(this,arguments)}}(le,A,T,P),{gtagCore:le,wrappedGtag:window[te]}}(si,cu,ua,Is,"gtag");Sr=le,Bo=Me,kl=!0}return si[U]=function Pn(A,T,P,U,te,le,Me){return Rn.apply(this,arguments)}(A,cu,ua,T,Bo,Is,P),new Vo(A)}function Cs(){return(Cs=(0,F.Z)(function*(A,T,P,U,te){if(te&&te.global)A("event",P,U);else{const le=yield T;A("event",P,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function da(){return jo.apply(this,arguments)}function jo(){return(jo=(0,F.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const pn="@firebase/analytics";!function Yh(){(0,he._registerComponent)(new we.wA(Ka,(T,{options:P})=>Ju(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,he._registerComponent)(new we.wA("analytics-internal",function A(T){try{const P=T.getProvider(Ka).getImmediate();return{logEvent:(U,te,le)=>function fd(A,T,P,U){A=(0,ue.m9)(A),function po(A,T,P,U,te){return Cs.apply(this,arguments)}(Sr,si[A.app.options.appId],T,P,U).catch(te=>Qn.error(te))}(P,U,te,le)}}catch(P){throw Wr.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,he.registerVersion)(pn,"0.7.11"),(0,he.registerVersion)(pn,"0.7.11","esm2017")}();var tg=V(4408),tc=V(7565);const nc=new class gd extends tc.v{}(class Qh extends tg.o{constructor(T,P){super(T,P),this.scheduler=T,this.work=P}schedule(T,P=0){return P>0?super.schedule(T,P):(this.delay=P,this.state=T,this.scheduler.flush(this),this)}execute(T,P){return P>0||this.closed?super.execute(T,P):this._execute(T,P)}requestAsyncId(T,P,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,P,U):T.flush(this)}});var rc=V(4986),Jh=V(576),zn=V(4482),Ds=V(5403),go=V(4671),hu=V(9468),wr=V(5363);const fn=new f.GfV("7.4.1"),_i="__angularfire_symbol__analyticsIsSupportedValue",ha="__angularfire_symbol__analyticsIsSupported",nl="__angularfire_symbol__remoteConfigIsSupportedValue",ic="__angularfire_symbol__remoteConfigIsSupported",As="__angularfire_symbol__messagingIsSupportedValue",pu="__angularfire_symbol__messagingIsSupported";function Pl(A,T,P){if(T){if(1===T.length)return T[0];const le=T.filter(Me=>Me.app===P);if(1===le.length)return le[0]}return P.container.getProvider(A).getImmediate({optional:!0})}globalThis[ha]||(globalThis[ha]=da().then(A=>globalThis[_i]=A).catch(()=>globalThis[_i]=!1)),globalThis[pu]||(globalThis[pu]=Dl().then(A=>globalThis[As]=A).catch(()=>globalThis[As]=!1)),globalThis[ic]||(globalThis[ic]=Fa().then(A=>globalThis[nl]=A).catch(()=>globalThis[nl]=!1));const Rl=(A,T)=>{const P=T?[T]:(0,re.C6)(),U=[];return P.forEach(te=>{te.container.getProvider(A).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function rl(){}class gu{constructor(T,P=nc){this.zone=T,this.delegate=P}now(){return this.delegate.now()}schedule(T,P,U){const te=this.zone;return this.delegate.schedule(function(Me){te.runGuarded(()=>{T.apply(this,[Me])})},P,U)}}class ng{constructor(T){this.zone=T,this.task=null}call(T,P){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rl,{},rl,rl)),P.pipe(function Xh(A,T,P){const U=(0,Jh.m)(A)||T||P?{next:A,error:T,complete:P}:A;return U?(0,zn.e)((te,le)=>{var Me;null===(Me=U.subscribe)||void 0===Me||Me.call(U);let qe=!0;te.subscribe((0,Ds.x)(le,He=>{var pt;null===(pt=U.next)||void 0===pt||pt.call(U,He),le.next(He)},()=>{var He;qe=!1,null===(He=U.complete)||void 0===He||He.call(U),le.complete()},He=>{var pt;qe=!1,null===(pt=U.error)||void 0===pt||pt.call(U,He),le.error(He)},()=>{var He,pt;qe&&(null===(He=U.unsubscribe)||void 0===He||He.call(U)),null===(pt=U.finalize)||void 0===pt||pt.call(U)}))}):go.y}({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let mu=(()=>{class A{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new gu(Zone.current)),this.insideAngular=P.run(()=>new gu(Zone.current,rc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(P){return new(P||A)(f.LFG(f.R0b))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function il(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Ol(A){return il(),function yd(A){return function(P){return(P=P.lift(new ng(A.ngZone))).pipe((0,hu.R)(A.outsideAngular),(0,wr.Q)(A.insideAngular))}}(il())(A)}},2090:(dt,Se,V)=>{"use strict";V.d(Se,{$s:()=>Gr,BH:()=>nt,DV:()=>Yt,Dv:()=>Ui,G6:()=>K,GJ:()=>Vt,L:()=>ge,LL:()=>ce,Mn:()=>Ae,Pz:()=>Nt,Sg:()=>Le,UG:()=>ve,UI:()=>Qr,US:()=>we,Wj:()=>sn,Yr:()=>Ze,ZB:()=>q,ZR:()=>ye,b$:()=>Xe,cI:()=>Wt,d:()=>xe,dS:()=>ei,eu:()=>pe,g5:()=>F,gK:()=>Nr,gQ:()=>rr,h$:()=>me,hl:()=>$,hu:()=>re,jU:()=>be,lb:()=>Zn,m9:()=>an,ne:()=>En,p$:()=>Q,pd:()=>no,r3:()=>nr,ru:()=>Je,tV:()=>Ie,uI:()=>Ye,ug:()=>yt,vZ:()=>Jr,w1:()=>Ce,w9:()=>Jt,xO:()=>_r,xb:()=>Pt,z$:()=>Re,zI:()=>Y,zd:()=>jr});const re=function(X,H){if(!X)throw F(H)},F=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},he=function(X){const H=[];let Z=0;for(let ne=0;ne<X.length;ne++){let j=X.charCodeAt(ne);j<128?H[Z++]=j:j<2048?(H[Z++]=j>>6|192,H[Z++]=63&j|128):55296==(64512&j)&&ne+1<X.length&&56320==(64512&X.charCodeAt(ne+1))?(j=65536+((1023&j)<<10)+(1023&X.charCodeAt(++ne)),H[Z++]=j>>18|240,H[Z++]=j>>12&63|128,H[Z++]=j>>6&63|128,H[Z++]=63&j|128):(H[Z++]=j>>12|224,H[Z++]=j>>6&63|128,H[Z++]=63&j|128)}return H},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,H){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let j=0;j<X.length;j+=3){const Ee=X[j],je=j+1<X.length,tt=je?X[j+1]:0,bt=j+2<X.length,un=bt?X[j+2]:0;let or=(15&tt)<<2|un>>6,$t=63&un;bt||($t=64,je||(or=64)),ne.push(Z[Ee>>2],Z[(3&Ee)<<4|tt>>4],Z[or],Z[$t])}return ne.join("")},encodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(X):this.encodeByteArray(he(X),H)},decodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(X):function(X){const H=[];let Z=0,ne=0;for(;Z<X.length;){const j=X[Z++];if(j<128)H[ne++]=String.fromCharCode(j);else if(j>191&&j<224){const Ee=X[Z++];H[ne++]=String.fromCharCode((31&j)<<6|63&Ee)}else if(j>239&&j<365){const bt=((7&j)<<18|(63&X[Z++])<<12|(63&X[Z++])<<6|63&X[Z++])-65536;H[ne++]=String.fromCharCode(55296+(bt>>10)),H[ne++]=String.fromCharCode(56320+(1023&bt))}else{const Ee=X[Z++],je=X[Z++];H[ne++]=String.fromCharCode((15&j)<<12|(63&Ee)<<6|63&je)}}return H.join("")}(this.decodeStringToByteArray(X,H))},decodeStringToByteArray(X,H){this.init_();const Z=H?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let j=0;j<X.length;){const Ee=Z[X.charAt(j++)],tt=j<X.length?Z[X.charAt(j)]:0;++j;const un=j<X.length?Z[X.charAt(j)]:64;++j;const Bt=j<X.length?Z[X.charAt(j)]:64;if(++j,null==Ee||null==tt||null==un||null==Bt)throw Error();ne.push(Ee<<2|tt>>4),64!==un&&(ne.push(tt<<4&240|un>>2),64!==Bt&&ne.push(un<<6&192|Bt))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},me=function(X){const H=he(X);return we.encodeByteArray(H,!0)},ge=function(X){return me(X).replace(/\./g,"")},Ie=function(X){try{return we.decodeString(X,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function Q(X){return q(void 0,X)}function q(X,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return H}for(const Z in H)!H.hasOwnProperty(Z)||!ie(Z)||(X[Z]=q(X[Z],H[Z]));return X}function ie(X){return"__proto__"!==X}class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Z)=>{this.resolve=H,this.reject=Z})}wrapCallback(H){return(Z,ne)=>{Z?this.reject(Z):this.resolve(ne),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Z):H(Z,ne))}}}function Le(X,H){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=H||"demo-project",j=X.iat||0,Ee=X.sub||X.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:j,exp:j+3600,auth_time:j,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},X);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(je)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function Je(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function Xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Re().indexOf("Electron/")>=0}function Ce(){const X=Re();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Ae(){return Re().indexOf("MSAppHost/")>=0}function Ze(){return!1}function K(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function pe(){return new Promise((X,H)=>{try{let Z=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(ne);j.onsuccess=()=>{j.result.close(),Z||self.indexedDB.deleteDatabase(ne),X(!0)},j.onupgradeneeded=()=>{Z=!1},j.onerror=()=>{var Ee;H((null===(Ee=j.error)||void 0===Ee?void 0:Ee.message)||"")}}catch(Z){H(Z)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ye extends Error{constructor(H,Z,ne){super(Z),this.code=H,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(H,Z,ne){this.service=H,this.serviceName=Z,this.errors=ne}create(H,...Z){const ne=Z[0]||{},j=`${this.service}/${H}`,Ee=this.errors[H],je=Ee?function Fe(X,H){return X.replace(ht,(Z,ne)=>{const j=H[ne];return null!=j?String(j):`<${ne}?>`})}(Ee,ne):"Error";return new ye(j,`${this.serviceName}: ${je} (${j}).`,ne)}}const ht=/\{\$([^}]+)}/g;function Wt(X){return JSON.parse(X)}function Nt(X){return JSON.stringify(X)}const Ge=function(X){let H={},Z={},ne={},j="";try{const Ee=X.split(".");H=Wt(Ie(Ee[0])||""),Z=Wt(Ie(Ee[1])||""),j=Ee[2],ne=Z.d||{},delete Z.d}catch{}return{header:H,claims:Z,data:ne,signature:j}},Jt=function(X){const Z=Ge(X).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},Vt=function(X){const H=Ge(X).claims;return"object"==typeof H&&!0===H.admin};function nr(X,H){return Object.prototype.hasOwnProperty.call(X,H)}function Yt(X,H){if(Object.prototype.hasOwnProperty.call(X,H))return X[H]}function Pt(X){for(const H in X)if(Object.prototype.hasOwnProperty.call(X,H))return!1;return!0}function Qr(X,H,Z){const ne={};for(const j in X)Object.prototype.hasOwnProperty.call(X,j)&&(ne[j]=H.call(Z,X[j],j,X));return ne}function Jr(X,H){if(X===H)return!0;const Z=Object.keys(X),ne=Object.keys(H);for(const j of Z){if(!ne.includes(j))return!1;const Ee=X[j],je=H[j];if(cr(Ee)&&cr(je)){if(!Jr(Ee,je))return!1}else if(Ee!==je)return!1}for(const j of ne)if(!Z.includes(j))return!1;return!0}function cr(X){return null!==X&&"object"==typeof X}function _r(X){const H=[];for(const[Z,ne]of Object.entries(X))Array.isArray(ne)?ne.forEach(j=>{H.push(encodeURIComponent(Z)+"="+encodeURIComponent(j))}):H.push(encodeURIComponent(Z)+"="+encodeURIComponent(ne));return H.length?"&"+H.join("&"):""}function jr(X){const H={};return X.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[j,Ee]=ne.split("=");H[decodeURIComponent(j)]=decodeURIComponent(Ee)}}),H}function no(X){const H=X.indexOf("?");if(!H)return"";const Z=X.indexOf("#",H);return X.substring(H,Z>0?Z:void 0)}class rr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Z){Z||(Z=0);const ne=this.W_;if("string"==typeof H)for(let Bt=0;Bt<16;Bt++)ne[Bt]=H.charCodeAt(Z)<<24|H.charCodeAt(Z+1)<<16|H.charCodeAt(Z+2)<<8|H.charCodeAt(Z+3),Z+=4;else for(let Bt=0;Bt<16;Bt++)ne[Bt]=H[Z]<<24|H[Z+1]<<16|H[Z+2]<<8|H[Z+3],Z+=4;for(let Bt=16;Bt<80;Bt++){const or=ne[Bt-3]^ne[Bt-8]^ne[Bt-14]^ne[Bt-16];ne[Bt]=4294967295&(or<<1|or>>>31)}let un,dn,j=this.chain_[0],Ee=this.chain_[1],je=this.chain_[2],tt=this.chain_[3],bt=this.chain_[4];for(let Bt=0;Bt<80;Bt++){Bt<40?Bt<20?(un=tt^Ee&(je^tt),dn=1518500249):(un=Ee^je^tt,dn=1859775393):Bt<60?(un=Ee&je|tt&(Ee|je),dn=2400959708):(un=Ee^je^tt,dn=3395469782);const or=(j<<5|j>>>27)+un+bt+dn+ne[Bt]&4294967295;bt=tt,tt=je,je=4294967295&(Ee<<30|Ee>>>2),Ee=j,j=or}this.chain_[0]=this.chain_[0]+j&4294967295,this.chain_[1]=this.chain_[1]+Ee&4294967295,this.chain_[2]=this.chain_[2]+je&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+bt&4294967295}update(H,Z){if(null==H)return;void 0===Z&&(Z=H.length);const ne=Z-this.blockSize;let j=0;const Ee=this.buf_;let je=this.inbuf_;for(;j<Z;){if(0===je)for(;j<=ne;)this.compress_(H,j),j+=this.blockSize;if("string"==typeof H){for(;j<Z;)if(Ee[je]=H.charCodeAt(j),++je,++j,je===this.blockSize){this.compress_(Ee),je=0;break}}else for(;j<Z;)if(Ee[je]=H[j],++je,++j,je===this.blockSize){this.compress_(Ee),je=0;break}}this.inbuf_=je,this.total_+=Z}digest(){const H=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let j=this.blockSize-1;j>=56;j--)this.buf_[j]=255&Z,Z/=256;this.compress_(this.buf_);let ne=0;for(let j=0;j<5;j++)for(let Ee=24;Ee>=0;Ee-=8)H[ne]=this.chain_[j]>>Ee&255,++ne;return H}}function En(X,H){const Z=new st(X,H);return Z.subscribe.bind(Z)}class st{constructor(H,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{H(this)}).catch(ne=>{this.error(ne)})}next(H){this.forEachObserver(Z=>{Z.next(H)})}error(H){this.forEachObserver(Z=>{Z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Z,ne){let j;if(void 0===H&&void 0===Z&&void 0===ne)throw new Error("Missing Observer.");j=function Xt(X,H){if("object"!=typeof X||null===X)return!1;for(const Z of H)if(Z in X&&"function"==typeof X[Z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Z,complete:ne},void 0===j.next&&(j.next=In),void 0===j.error&&(j.error=In),void 0===j.complete&&(j.complete=In);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch{}}),this.observers.push(j),Ee}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,H)}sendOne(H,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Z(this.observers[H])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}const Ui=function(X,H,Z,ne){let j;if(ne<H?j="at least "+H:ne>Z&&(j=0===Z?"none":"no more than "+Z),j)throw new Error(X+" failed: Was called with "+ne+(1===ne?" argument.":" arguments.")+" Expects "+j+".")};function Nr(X,H){return`${X} failed: ${H} argument `}function sn(X,H,Z,ne){if((!ne||Z)&&"function"!=typeof Z)throw new Error(Nr(X,H)+"must be a valid function.")}function Zn(X,H,Z,ne){if((!ne||Z)&&("object"!=typeof Z||null===Z))throw new Error(Nr(X,H)+"must be a valid context object.")}const ei=function(X){const H=[];let Z=0;for(let ne=0;ne<X.length;ne++){let j=X.charCodeAt(ne);if(j>=55296&&j<=56319){const Ee=j-55296;ne++,re(ne<X.length,"Surrogate pair missing trail surrogate."),j=65536+(Ee<<10)+(X.charCodeAt(ne)-56320)}j<128?H[Z++]=j:j<2048?(H[Z++]=j>>6|192,H[Z++]=63&j|128):j<65536?(H[Z++]=j>>12|224,H[Z++]=j>>6&63|128,H[Z++]=63&j|128):(H[Z++]=j>>18|240,H[Z++]=j>>12&63|128,H[Z++]=j>>6&63|128,H[Z++]=63&j|128)}return H},yt=function(X){let H=0;for(let Z=0;Z<X.length;Z++){const ne=X.charCodeAt(Z);ne<128?H++:ne<2048?H+=2:ne>=55296&&ne<=56319?(H+=4,Z++):H+=3}return H};function Gr(X,H=1e3,Z=2){const ne=H*Math.pow(Z,X),j=Math.round(.5*ne*(Math.random()-.5)*2);return Math.min(144e5,ne+j)}function an(X){return X&&X._delegate?X._delegate:X}},5699:(dt,Se,V)=>{"use strict";var f=V(4650);let re=null;function F(){return re}const me=new f.OlP("DocumentToken");class Us{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,l,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Us(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===l?void 0:l);else if(null!==l){const m=r.get(l);r.move(m,c),Bn(m,o)}});for(let o=0,l=r.length;o<l;o++){const m=r.get(o).context;m.index=o,m.count=l,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Bn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Bn(n,e){n.context.$implicit=e.item}let Yn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $r,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){js("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){js("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class $r{constructor(){this.$implicit=null,this.ngIf=null}}function js(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class ed{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Gi{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const td=new Gi,nu=new ed;let Ra=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return td;if((0,f.F4k)(t))return nu;throw function ti(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})(),fs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function El(n){return"server"===n}class mi extends class bn extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){re||(re=n)}(new mi)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zi(){return Zs=Zs||document.querySelector("base"),Zs?Zs.getAttribute("href"):null}();return null==t?null:function Il(n){sr=sr||document.createElement("a"),sr.setAttribute("href",n);const e=sr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function eu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let sr,Zs=null;const Tn=new f.OlP("TRANSITION_ID"),ar=[{provide:f.ip1,useFactory:function lo(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=F(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[Tn,me,f.zs3],multi:!0}];let ms=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const xo=new f.OlP("EventManagerPlugins");let zr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const c=o[l];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xo),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=F().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ys=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ft=(()=>{class n extends ys{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const c=this._doc.createElement("style");c.textContent=l,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(uo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(uo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function uo(n){F().remove(n)}const Ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qi=/%COMP%/g;function Mt(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Mt(n,o,t):(o=o.replace(qi,n),t.push(o))}return t}function _s(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Js(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Xs(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Zu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Mt(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zr),f.LFG(ft),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Js{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ba[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ha(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ha(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=Ba[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ba[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_s(r)):this.eventManager.addEventListener(e,t,_s(r))}}function Ha(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xs extends Js{constructor(e,t,r,o){super(e),this.component=r;const l=Mt(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Cl(n){return"_ngcontent-%COMP%".replace(qi,n)}(o+"-"+r.id),this.hostAttr=function ke(n){return"_nghost-%COMP%".replace(qi,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Zu extends Js{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Mt(o.id,o.styles,[]);for(let c=0;c<l.length;c++){const m=document.createElement("style");m.textContent=l[c],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yu=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ea=["alt","control","meta","shift"],lr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ii={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ta={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ti=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),c=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,l.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let c="";if(ea.forEach(v=>{const E=r.indexOf(v);E>-1&&(r.splice(E,1),c+=v+".")}),c+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=c,m}static getEventFullKey(t){let r="",o=function oi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ii.hasOwnProperty(e)&&(e=ii[e]))}return lr[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ea.forEach(l=>{l!=o&&ta[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vs=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function qa(){mi.makeCurrent()},multi:!0},{provide:me,useFactory:function Ro(){return(0,f.RDi)(document),document},deps:[]}]),bs=new f.OlP(""),ws=[{provide:f.rWj,useClass:class Ys{addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let l=o.length,c=!1;const m=function(v){c=c||v,l--,0==l&&r(c)};o.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],ia=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ra(){return new f.qLn},deps:[]},{provide:xo,useClass:Yu,multi:!0,deps:[me,f.R0b,f.Lbi]},{provide:xo,useClass:Ti,multi:!0,deps:[me]},{provide:Sn,useClass:Sn,deps:[zr,ft,f.AFp]},{provide:f.FYo,useExisting:Sn},{provide:ys,useExisting:ft},{provide:ft,useClass:ft,deps:[me]},{provide:zr,useClass:zr,deps:[xo,f.R0b]},{provide:class Ks{},useClass:ms,deps:[]},[]];let Oo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Tn,useExisting:f.AFp},ar]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bs,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...ia,...ws],imports:[fs,f.hGG]}),n})();typeof window<"u"&&window;var Ke=V(2011),en=V(8996),Ut=V(8306);const{isArray:fr}=Array,{getPrototypeOf:Fr,prototype:Lo,keys:Qa}=Object;var Ml=V(8421),la=V(7669),Pn=V(5403),Rn=V(4004);const{isArray:Vo}=Array;function ua(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let xl=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Bo=(()=>{class n extends xl{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Sr=new f.OlP("NgValueAccessor"),Zh={provide:Sr,useExisting:(0,f.Gpc)(()=>Cs),multi:!0},po=new f.OlP("CompositionEventMode");let Cs=(()=>{class n extends xl{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ju(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(po,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[f._Bn([Zh]),f.qOj]}),n})();function Wi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const br=new f.OlP("NgValidators"),fo=new f.OlP("NgAsyncValidators");function pd(n){return null}function fd(n){return null!=n}function pn(n){return(0,f.QGY)(n)?(0,en.D)(n):n}function ec(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Yh(n,e){return e.map(t=>t(n))}function Qh(n){return n.map(e=>function tg(n){return!n.validate}(e)?e:t=>e.validate(t))}function gd(n){return null!=n?function tc(n){if(!n)return null;const e=n.filter(fd);return 0==e.length?null:function(t){return ec(Yh(t,e))}}(Qh(n)):null}function nc(n){if(!n)return null;const e=n.filter(fd);return 0==e.length?null:function(t){return function Is(...n){const e=(0,la.jO)(n),{args:t,keys:r}=function Xf(n){if(1===n.length){const e=n[0];if(fr(e))return{args:e,keys:null};if(function cd(n){return n&&"object"==typeof n&&Fr(n)===Lo}(e)){const t=Qa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),o=new Ut.y(l=>{const{length:c}=t;if(!c)return void l.complete();const m=new Array(c);let v=c,E=c;for(let S=0;S<c;S++){let N=!1;(0,Ml.Xf)(t[S]).subscribe((0,Pn.x)(l,B=>{N||(N=!0,E--),m[S]=B},()=>v--,void 0,()=>{(!v||!N)&&(E||l.next(r?ua(r,m):m),l.complete())}))}});return e?o.pipe(function cu(n){return(0,Rn.U)(e=>function si(n,e){return Vo(e)?n(...e):n(e)}(n,e))}(e)):o}(Yh(t,e).map(pn)).pipe((0,Rn.U)(ec))}}function tl(n){return null!=n?nc(Qh(n)):null}function rc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ds(n){return n?Array.isArray(n)?n:[n]:[]}function go(n,e){return Array.isArray(n)?n.includes(e):n===e}function Xh(n,e){const t=Ds(e);return Ds(n).forEach(o=>{go(t,o)||t.push(o)}),t}function hu(n,e){return Ds(e).filter(t=>!go(n,t))}class wr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fn extends wr{get formDirective(){return null}get path(){return null}}class _i extends wr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let As=(()=>{class n extends class ha{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_i,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})();const pa="VALID",A="INVALID",T="PENDING",P="DISABLED";function te(n){return Array.isArray(n)?gd(n):n||null}function Me(n){return Array.isArray(n)?tl(n):n||null}function qe(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function mo(n,e){(function Zi(n,e){const t=function Jh(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function zn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ki(e._rawValidators,o),Ki(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function _d(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&vd(n,e)})}(n,e),function o_(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ig(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&vd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ms(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ki(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ip(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function l_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ap={provide:_i,useExisting:(0,f.Gpc)(()=>Ll)},lp=(()=>Promise.resolve(null))();let Ll=(()=>{class n extends _i{constructor(t,r,o,l,c){super(),this._changeDetectorRef=c,this.control=new class extends class xt{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=te(this._rawValidators),this._composedAsyncValidatorFn=Me(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pa}get invalid(){return this.status===A}get pending(){return this.status==T}get disabled(){return this.status===P}get enabled(){return this.status!==P}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=te(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Me(e)}addValidators(e){this.setValidators(Xh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hu(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hu(e,this._rawAsyncValidators))}hasValidator(e){return go(this._rawValidators,e)}hasAsyncValidator(e){return go(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=T,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=P,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pa||this.status===T)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P:pa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=T,this._hasOwnPendingAsyncValidator=!0;const t=pn(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?P:this.errors?A:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(T)?T:this._anyControlsHaveStatus(A)?A:pa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qe(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function U(n){return(qe(n)?n.validators:n)||null}(t),function le(n,e){return(qe(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qe(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=l_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ip(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ip(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){l_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function np(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Cs?t=l:function s_(n){return Object.getPrototypeOf(n.constructor)===Bo}(l)?r=l:o=l}),o||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function og(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){lp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,f.D6c)(r);lp.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function xi(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fn,9),f.Y36(br,10),f.Y36(fo,10),f.Y36(Sr,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([ap]),f.qOj,f.TTD]}),n})();const cg={provide:Sr,useExisting:(0,f.Gpc)(()=>uc),multi:!0};let uc=(()=>{class n extends Bo{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([cg]),f.qOj]}),n})(),Eu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const pc={provide:Sr,useExisting:(0,f.Gpc)(()=>Ul),multi:!0};function pp(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ul=(()=>{class n extends Bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=pp(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function fp(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([pc]),f.qOj]}),n})(),p_=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pp(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Ul,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const tw={provide:Sr,useExisting:(0,f.Gpc)(()=>gc),multi:!0};function gp(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gc=(()=>{class n extends Bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(l=>this._getOptionId(l));r=(l,c)=>{l._setSelected(o.indexOf(c.toString())>-1)}}else r=(o,l)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],l=r.selectedOptions;if(void 0!==l){const c=l;for(let m=0;m<c.length;m++){const E=this._getOptionValue(c[m].value);o.push(E)}}else{const c=r.options;for(let m=0;m<c.length;m++){const v=c[m];if(v.selected){const E=this._getOptionValue(v.value);o.push(E)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function fc(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([tw]),f.qOj]}),n})(),Ed=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(gp(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gp(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(gc,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let jl=(()=>{class n{constructor(){this._validator=pd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const g_={provide:br,useExisting:(0,f.Gpc)(()=>mc),multi:!0};let mc=(()=>{class n extends jl{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function mp(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function Nl(n){return e=>{if(Wi(e.value)||Wi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[f._Bn([g_]),f.qOj]}),n})(),yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Eu]}),n})(),fa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[yo]}),n})();var yg=V(4986);function Gl(...n){const e=(0,la.yG)(n);return(0,en.D)(n,e)}var Ep=V(6451),vc=V(3099),Xn=V(4482);function zo(n,e){return(0,Xn.e)((t,r)=>{let o=null,l=0,c=!1;const m=()=>c&&!o&&r.complete();t.subscribe((0,Pn.x)(r,v=>{o?.unsubscribe();let E=0;const S=l++;(0,Ml.Xf)(n(v,S)).subscribe(o=(0,Pn.x)(r,N=>r.next(e?e(v,N,S,E++):N),()=>{o=null,m()}))},()=>{c=!0,m()}))})}function Ip(n,e,t,r,o){return(l,c)=>{let m=t,v=e,E=0;l.subscribe((0,Pn.x)(c,S=>{const N=E++;v=m?n(v,S,N):(m=!0,S),r&&c.next(v)},o&&(()=>{m&&c.next(v),c.complete()})))}}function Cu(n,e){return(0,Xn.e)(Ip(n,e,arguments.length>=2,!0))}var qo=V(4671);function Du(n,e=qo.y){return n=n??li,(0,Xn.e)((t,r)=>{let o,l=!0;t.subscribe((0,Pn.x)(r,c=>{const m=e(c);(l||!n(o,m))&&(l=!1,o=m,r.next(c))}))})}function li(n,e){return n===e}var Td=V(5032),zt=V(2680),Md=(V(3677),V(3942)),ga=V(4859),y=V(5861),p=V(9681),h=V(2090),b=V(1877);const x="@firebase/database",O="0.13.2";let J="";function fe(n){J=n}class $e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,h.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,h.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class it{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,h.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const vt=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $e(e)}}catch{}return new it},lt=vt("localStorage"),On=vt("sessionStorage"),qn=new b.Yd("@firebase/database"),wc=function(){let n=1;return function(){return n++}}(),vg=function(n){const e=(0,h.dS)(n),t=new h.gQ;t.update(e);const r=t.digest();return h.US.encodeByteArray(r)},Au=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Au.apply(null,r):e+="object"==typeof r?(0,h.Pz)(r):r,e+=" "}return e};let ma=null,bg=!0;const Yi=function(n,e){(0,h.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(qn.logLevel=b.in.VERBOSE,ma=qn.log.bind(qn),e&&On.set("logging_enabled",!0)):"function"==typeof n?ma=n:(ma=null,On.remove("logging_enabled"))},gr=function(...n){if(!0===bg&&(bg=!1,null===ma&&!0===On.get("logging_enabled")&&Yi(!0)),ma){const e=Au.apply(null,n);ma(e)}},al=function(n){return function(...e){gr(n,...e)}},Ec=function(...n){const e="FIREBASE INTERNAL ERROR: "+Au(...n);qn.error(e)},_o=function(...n){const e=`FIREBASE FATAL ERROR: ${Au(...n)}`;throw qn.error(e),new Error(e)},Ir=function(...n){const e="FIREBASE WARNING: "+Au(...n);qn.warn(e)},Ic=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ya="[MIN_NAME]",_a="[MAX_NAME]",kd=function(n,e){if(n===e)return 0;if(n===ya||e===_a)return-1;if(e===ya||n===_a)return 1;{const t=Pd(n),r=Pd(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Nd=function(n,e){return n===e?0:n<e?-1:1},Cc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,h.Pz)(e))},wg=function(n){if("object"!=typeof n||null===n)return(0,h.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,h.Pz)(e[r]),t+=":",t+=wg(n[e[r]]);return t+="}",t},ow=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Lr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sw=function(n){(0,h.hu)(!Ic(n),"Invalid JSON number");const r=1023;let o,l,c,m,v;0===n?(l=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=m+r,c=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(l=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(v=52;v;v-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(v=11;v;v-=1)E.push(l%2?1:0),l=Math.floor(l/2);E.push(o?1:0),E.reverse();const S=E.join("");let N="";for(v=0;v<64;v+=8){let B=parseInt(S.substr(v,8),2).toString(16);1===B.length&&(B="0"+B),N+=B}return N.toLowerCase()},RD=new RegExp("^-?(0*)\\d{1,10}$"),aw=-2147483648,Eg=2147483647,Pd=function(n){if(RD.test(n)){const e=Number(n);if(e>=aw&&e<=Eg)return e}return null},Dc=function(n){try{n()}catch(e){setTimeout(()=>{throw Ir("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Cp=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class OD{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ir(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lw{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ir(e)}}let Rd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Dp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A_="websocket",Cg="long_polling";class Dg{constructor(e,t,r,o,l=!1,c="",m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lt.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ap(n,e,t){let r;if((0,h.hu)("string"==typeof e,"typeof type must == string"),(0,h.hu)("object"==typeof t,"typeof params must == object"),e===A_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Cg)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Ag(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Lr(t,(l,c)=>{o.push(l+"="+c)}),r+o.join("&")}class dw{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,h.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,h.p$)(this.counters_)}}const Tp={},Tg={};function Sp(n){const e=n.toString();return Tp[e]||(Tp[e]=new dw),Tp[e]}class FD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Dc(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tu{constructor(e,t,r,o,l,c,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=c,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=al(e),this.stats_=Sp(t),this.urlFn=v=>(this.appCheckToken&&(v.ac=this.appCheckToken),Ap(t,Cg,v))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new FD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,h.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new M_((...l)=>{const[c,m,v,E,S]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=m,this.password=v;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[c,m]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Dp.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tu.forceAllow_=!0}static forceDisallow(){Tu.forceDisallow_=!0}static isAvailable(){return!((0,h.Yr)()||!Tu.forceAllow_&&(Tu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,h.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,h.h$)(t),o=ow(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,h.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,h.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class M_{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,h.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=wc(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=M_.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(m){gr("frame writing exception"),m.stack&&gr(m.stack),gr(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,h.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Mg=null;typeof MozWebSocket<"u"?Mg=MozWebSocket:typeof WebSocket<"u"&&(Mg=WebSocket);let Od=(()=>{class n{constructor(t,r,o,l,c,m,v){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=al(this.connId),this.stats_=Sp(r),this.connURL=n.connectionURL_(r,m,v,l,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l,c){const m={v:"5"};return!(0,h.Yr)()&&typeof location<"u"&&location.hostname&&Dp.test(location.hostname)&&(m.r="f"),r&&(m.s=r),o&&(m.ls=o),l&&(m.ac=l),c&&(m.p=c),Ap(t,A_,m)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lt.set("previous_websocket_failure",!0);try{let o;if((0,h.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${J}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const m=process.env,v=0===this.connURL.indexOf("wss://")?m.HTTPS_PROXY||m.https_proxy:m.HTTP_PROXY||m.http_proxy;v&&(c.proxy={origin:v})}this.mySock=new Mg(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Mg&&!n.forceDisallow_}static previouslyFailed(){return lt.isInMemoryStorage||!0===lt.get("previous_websocket_failure")}markConnectionHealthy(){lt.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,h.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,h.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,h.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=ow(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Rt=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Tu,Od]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Od&&Od.isAvailable();let o=r&&!Od.previouslyFailed();if(t.webSocketOnly&&(r||Ir("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Od];else{const l=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class O_{constructor(e,t,r,o,l,c,m,v,E,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=c,this.onReady_=m,this.onDisconnect_=v,this.onKill_=E,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=al("c:"+this.id+":"),this.transportManager_=new Rt(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Cp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Cc("t",e),r=Cc("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Cc("t",e),r=Cc("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Cc("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Ec("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ec("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ir("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class F_{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class xg{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,h.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,h.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class L_ extends xg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,h.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new L_}getInitialEvent(e){return(0,h.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new wn("")}function Ot(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Su(n){return n.pieces_.length-n.pieceNum_}function xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function Ng(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Mu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Iw(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function Wn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new wn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function Kr(n,e){const t=Ot(n),r=Ot(e);if(null===t)return e;if(t===r)return Kr(xn(n),xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Cw(n,e){const t=Mu(n,0),r=Mu(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=kd(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function xp(n,e){if(Su(n)!==Su(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ks(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Su(n)>Su(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class QD{constructor(e,t){this.errorPrefix_=t,this.parts_=Mu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,h.ug)(this.parts_[r]);Aw(this)}}function Aw(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ac(n))}function Ac(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class B_ extends xg{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new B_}getInitialEvent(e){return(0,h.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kp=1e3;let $_,Tc=(()=>{class n extends F_{constructor(t,r,o,l,c,m,v,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=m,this.appCheckTokenProvider_=v,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=al("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,h.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");B_.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&L_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,c={r:l,a:t,b:r};this.log_((0,h.Pz)(c)),(0,h.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new h.BH,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:m=>{const v=m.d;"ok"===m.s?r.resolve(v):r.reject(v)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[c];void 0===m||l!==m||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,l){this.initConnection_();const c=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+c),this.listens.has(m)||this.listens.set(m,new Map),(0,h.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,h.hu)(!this.listens.get(m).has(c),"listen() called twice for same path/queryId.");const v={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(m).set(c,v),this.connected_&&this.sendListen_(v)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,v=>{const E=v.d,S=v.s;n.warnOnListenWarnings_(E,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",v),"ok"!==S&&this.removeListen_(o,l),t.onComplete&&t.onComplete(S,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,h.r3)(t,"w")){const o=(0,h.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ir(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,h.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,h.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const c=l.s,m=l.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,h.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const c={p:t};l&&(c.q=o,c.t=l),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,m=>{l&&setTimeout(()=>{l(m.s,m.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,c){this.initConnection_();const m={p:r,d:o};void 0!==c&&(m.h=c),this.outstandingPuts_.push({action:t,request:m,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,h.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Ec("Unrecognized action received from server: "+(0,h.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,h.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,y.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let v=!1,E=null;const S=function(){E?E.close():(v=!0,l())};t.realtime_={close:S,sendRequest:function(W){(0,h.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(W)}};const B=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[W,oe]=yield Promise.all([t.authTokenProvider_.getToken(B),t.appCheckTokenProvider_.getToken(B)]);v?gr("getToken() completed but was canceled"):(gr("getToken() completed. Creating connection."),t.authToken_=W&&W.accessToken,t.appCheckToken_=oe&&oe.token,E=new O_(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Ne=>{Ir(Ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(W){t.log_("Failed to get token: "+W),v||(t.repoInfo_.nodeAdmin&&Ir(W),S())}}})()}interrupt(t){gr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,h.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>wg(c)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new wn(t).toString();let l;if(this.listens.has(o)){const c=this.listens.get(o);l=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){gr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,h.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+J.replace(/\./g,"-")]=1,(0,h.uI)()?t["framework.cordova"]=1:(0,h.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=L_.getInstance().currentlyOnline();return(0,h.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tn(e,t)}}class H_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tn(ya,e),o=new tn(ya,t);return 0!==this.compare(r,o)}minPost(){return tn.MIN}}class Sw extends H_{static get __EMPTY_NODE(){return $_}static set __EMPTY_NODE(e){$_=e}compare(e,t){return kd(e.name,t.name)}isDefinedOn(e){throw(0,h.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tn.MIN}maxPost(){return new tn(_a,$_)}makePost(e,t){return(0,h.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new tn(e,$_)}toString(){return".key"}}const va=new Sw;class z_{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let q_,ba=(()=>{class n{constructor(t,r,o,l,c){this.key=t,this.value=r,this.color=o??n.RED,this.left=l??vo.EMPTY_NODE,this.right=c??vo.EMPTY_NODE}copy(t,r,o,l,c){return new n(t??this.key,r??this.value,o??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const c=o(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===c?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return vo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return vo.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class vo{constructor(e,t=vo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new vo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ba.BLACK,null,null))}remove(e){return new vo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ba.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new z_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new z_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new z_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new z_(this.root_,null,this.comparator_,!0,e)}}function Mw(n,e){return kd(n.name,e.name)}function Vd(n,e){return kd(n,e)}vo.EMPTY_NODE=new class Ld{copy(e,t,r,o,l){return this}insert(e,t,r){return new ba(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const kw=function(n){return"number"==typeof n?"number:"+sw(n):"string:"+n},Nw=function(n){if(n.isLeafNode()){const e=n.val();(0,h.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,h.r3)(e,".sv"),"Priority must be a string or number.")}else(0,h.hu)(n===q_||n.isEmpty(),"priority of unexpected type.");(0,h.hu)(n===q_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Pw,Rw,W_,Bd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,h.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nw(this.priorityNode_)}static set __childrenNodeConstructor(t){Pw=t}static get __childrenNodeConstructor(){return Pw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Ot(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Ot(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,h.hu)(".priority"!==o||1===Su(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+kw(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?sw(this.value_):this.value_,this.lazyHash_=vg(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,h.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,h.hu)(l>=0,"Unknown leaf type: "+r),(0,h.hu)(c>=0,"Unknown leaf type: "+o),l===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fn=new class Fw extends H_{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?kd(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tn.MIN}maxPost(){return new tn(_a,new Bd("[PRIORITY-POST]",W_))}makePost(e,t){const r=Rw(e);return new tn(t,new Bd("[PRIORITY-POST]",r))}toString(){return".priority"}},MM=Math.log(2);class K_{constructor(e){this.count=parseInt(Math.log(e+1)/MM,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Rg=function(n,e,t,r){n.sort(e);const o=function(v,E){const S=E-v;let N,B;if(0===S)return null;if(1===S)return N=n[v],B=t?t(N):N,new ba(B,N.node,ba.BLACK,null,null);{const W=parseInt(S/2,10)+v,oe=o(v,W),Ne=o(W+1,E);return N=n[W],B=t?t(N):N,new ba(B,N.node,ba.BLACK,oe,Ne)}},m=function(v){let E=null,S=null,N=n.length;const B=function(oe,Ne){const ze=N-oe,St=N;N-=oe;const Lt=o(ze+1,St),Zt=n[ze],Gt=t?t(Zt):Zt;W(new ba(Gt,Zt.node,Ne,null,Lt))},W=function(oe){E?(E.left=oe,E=oe):(S=oe,E=oe)};for(let oe=0;oe<v.count;++oe){const Ne=v.nextBitIsOne(),ze=Math.pow(2,v.count-(oe+1));Ne?B(ze,ba.BLACK):(B(ze,ba.BLACK),B(ze,ba.RED))}return S}(new K_(n.length));return new vo(r||e,m)};let Lw;const wa={};class Hl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,h.hu)(wa&&Fn,"ChildrenNode.ts has not been loaded"),Lw=Lw||new Hl({".priority":wa},{".priority":Fn}),Lw}get(e){const t=(0,h.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof vo?t:null}hasIndex(e){return(0,h.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,h.hu)(e!==va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(tn.Wrap);let m,c=l.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=l.getNext();m=o?Rg(r,e.getCompare()):wa;const v=e.toString(),E=Object.assign({},this.indexSet_);E[v]=e;const S=Object.assign({},this.indexes_);return S[v]=m,new Hl(S,E)}addToIndexes(e,t){const r=(0,h.UI)(this.indexes_,(o,l)=>{const c=(0,h.DV)(this.indexSet_,l);if((0,h.hu)(c,"Missing index implementation for "+l),o===wa){if(c.isDefinedOn(e.node)){const m=[],v=t.getIterator(tn.Wrap);let E=v.getNext();for(;E;)E.name!==e.name&&m.push(E),E=v.getNext();return m.push(e),Rg(m,c.getCompare())}return wa}{const m=t.get(e.name);let v=o;return m&&(v=v.remove(new tn(e.name,m))),v.insert(e,e.node)}});return new Hl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,h.UI)(this.indexes_,o=>{if(o===wa)return o;{const l=t.get(e.name);return l?o.remove(new tn(e.name,l)):o}});return new Hl(r,this.indexSet_)}}let Np,jt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Nw(this.priorityNode_),this.children_.isEmpty()&&(0,h.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Np||(Np=new n(new vo(Vd),null,Hl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Np}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Np:r}}getChild(t){const r=Ot(t);return null===r?this:this.getImmediateChild(r).getChild(xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,h.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new tn(t,r);let l,c;r.isEmpty()?(l=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const m=l.isEmpty()?Np:this.priorityNode_;return new n(l,m,c)}}updateChild(t,r){const o=Ot(t);if(null===o)return r;{(0,h.hu)(".priority"!==Ot(t)||1===Su(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(xn(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,c=!0;if(this.forEachChild(Fn,(m,v)=>{r[m]=v.val(t),o++,c&&n.INTEGER_REGEXP_.test(m)?l=Math.max(l,Number(m)):c=!1}),!t&&c&&l<2*o){const m=[];for(const v in r)m[v]=r[v];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+kw(this.getPriority().val())+":"),this.forEachChild(Fn,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":vg(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const c=l.getPredecessorKey(new tn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new tn(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,tn.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,tn.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)>0;)l.getNext(),c=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Og?-1:0}withIndex(t){if(t===va||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===va||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Fn),l=r.getIterator(Fn);let c=o.getNext(),m=l.getNext();for(;c&&m;){if(c.name!==m.name||!c.node.equals(m.node))return!1;c=o.getNext(),m=l.getNext()}return null===c&&null===m}return!1}return!1}}resolveIndex_(t){return t===va?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Og=new class Z_ extends jt{constructor(){super(new vo(Vd),jt.EMPTY_NODE,Hl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return jt.EMPTY_NODE}isEmpty(){return!1}};function er(n,e=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,h.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Bd(n,er(e));if(n instanceof Array){let t=jt.EMPTY_NODE;return Lr(n,(r,o)=>{if((0,h.r3)(n,r)&&"."!==r.substring(0,1)){const l=er(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(er(e))}{const t=[];let r=!1;if(Lr(n,(c,m)=>{if("."!==c.substring(0,1)){const v=er(m);v.isEmpty()||(r=r||!v.getPriority().isEmpty(),t.push(new tn(c,v)))}}),0===t.length)return jt.EMPTY_NODE;const l=Rg(t,Mw,c=>c.name,Vd);if(r){const c=Rg(t,Fn.getCompare());return new jt(l,er(e),new Hl({".priority":c},{".priority":Fn}))}return new jt(l,er(e),Hl.Default)}}Object.defineProperties(tn,{MIN:{value:new tn(ya,jt.EMPTY_NODE)},MAX:{value:new tn(_a,Og)}}),Sw.__EMPTY_NODE=jt.EMPTY_NODE,Bd.__childrenNodeConstructor=jt,function xw(n){q_=n}(Og),function Ow(n){W_=n}(Og),function XD(n){Rw=n}(er);class Vw extends H_{constructor(e){super(),this.indexPath_=e,(0,h.hu)(!qt(e)&&".priority"!==Ot(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?kd(e.name,t.name):l}makePost(e,t){const r=er(e),o=jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new tn(t,o)}maxPost(){const e=jt.EMPTY_NODE.updateChild(this.indexPath_,Og);return new tn(_a,e)}toString(){return Mu(this.indexPath_,0).join("/")}}const Bw=new class kM extends H_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?kd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tn.MIN}maxPost(){return tn.MAX}makePost(e,t){const r=er(e);return new tn(t,r)}toString(){return".value"}},Pp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jw=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Pp.charAt(t%64),t=Math.floor(t/64);(0,h.hu)(0===t,"Cannot push at time == 0");let c=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=Pp.charAt(e[o]);return(0,h.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Gw=function(n){if(n===""+Eg)return"-";const e=Pd(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return _a;const l=Pp.charAt(Pp.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},Q_=function(n){if(n===""+aw)return ya;const e=Pd(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Eg:(delete t[t.length-1],t.join("")):(t[t.length-1]=Pp.charAt(Pp.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function J_(n){return{type:"value",snapshotNode:n}}function $l(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Qi(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ud(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Rp{constructor(e){this.index_=e}updateChild(e,t,r,o,l,c){(0,h.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Qi(t,m)):(0,h.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?c.trackChildChange($l(t,r)):c.trackChildChange(Ud(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Fn,(o,l)=>{t.hasChild(o)||r.trackChildChange(Qi(o,l))}),t.isLeafNode()||t.forEachChild(Fn,(o,l)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(l)||r.trackChildChange(Ud(o,l,c))}else r.trackChildChange($l(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Wo{constructor(e){this.indexedFilter_=new Rp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Wo.getStartPost_(e),this.endPost_=Wo.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,c){return this.matches(new tn(t,r))||(r=jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=jt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(jt.EMPTY_NODE);const l=this;return t.forEachChild(Fn,(c,m)=>{l.matches(new tn(c,m))||(o=o.updateImmediateChild(c,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class X_{constructor(e){this.rangedFilter_=new Wo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,c){return this.rangedFilter_.matches(new tn(t,r))||(r=jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,c):this.fullLimitUpdateChild_(e,t,r,l,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=jt.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const m=l.getNext();let v;if(v=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!v)break;o=o.updateImmediateChild(m.name,m.node),c++}}else{let l,c,m,v;if(o=t.withIndex(this.index_),o=o.updatePriority(jt.EMPTY_NODE),this.reverse_){v=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const N=this.index_.getCompare();m=(B,W)=>N(W,B)}else v=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let E=0,S=!1;for(;v.hasNext();){const N=v.getNext();!S&&m(l,N)<=0&&(S=!0),S&&E<this.limit_&&m(N,c)<=0?E++:o=o.updateImmediateChild(N.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let c;if(this.reverse_){const N=this.index_.getCompare();c=(B,W)=>N(W,B)}else c=this.index_.getCompare();const m=e;(0,h.hu)(m.numChildren()===this.limit_,"");const v=new tn(t,r),E=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),S=this.rangedFilter_.matches(v);if(m.hasChild(t)){const N=m.getImmediateChild(t);let B=o.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=B&&(B.name===t||m.hasChild(B.name));)B=o.getChildAfterChild(this.index_,B,this.reverse_);const W=null==B?1:c(B,v);if(S&&!r.isEmpty()&&W>=0)return l?.trackChildChange(Ud(t,r,N)),m.updateImmediateChild(t,r);{l?.trackChildChange(Qi(t,N));const Ne=m.updateImmediateChild(t,jt.EMPTY_NODE);return null!=B&&this.rangedFilter_.matches(B)?(l?.trackChildChange($l(B.name,B.node)),Ne.updateImmediateChild(B.name,B.node)):Ne}}return r.isEmpty()?e:S&&c(E,v)>=0?(null!=l&&(l.trackChildChange(Qi(E.name,E.node)),l.trackChildChange($l(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(E.name,jt.EMPTY_NODE)):e}}class Op{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,h.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,h.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ya}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,h.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,h.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_a}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,h.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const e=new Op;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $w(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function jd(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Gd(n,e){const t=n.copy();return t.index_=e,t}function Vg(n){const e={};if(n.isDefault())return e;let t;return n.index_===Fn?t="$priority":n.index_===Bw?t="$value":n.index_===va?t="$key":((0,h.hu)(n.index_ instanceof Vw,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,h.Pz)(t),n.startSet_&&(e.startAt=(0,h.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,h.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,h.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,h.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function tA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fn&&(e.i=n.index_.toString()),e}class Bg extends F_{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=al("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,h.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=Bg.getListenId_(e,r),m={};this.listens_[c]=m;const v=Vg(e._queryParams);this.restRequest_(l+".json",v,(E,S)=>{let N=S;if(404===E&&(N=null,E=null),null===E&&this.onDataUpdate_(l,N,!1,r),(0,h.DV)(this.listens_,c)===m){let B;B=E?401===E?"permission_denied":"rest_error:"+E:"ok",o(B,null)}})}unlisten(e,t){const r=Bg.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Vg(e._queryParams),r=e._path.toString(),o=new h.BH;return this.restRequest_(r+".json",t,(l,c)=>{let m=c;404===l&&(m=null,l=null),null===l?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,h.xO)(t);this.log_("Sending REST request for "+c);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+c+" received. status:",m.status,"response:",m.responseText);let v=null;if(m.status>=200&&m.status<300){try{v=(0,h.cI)(m.responseText)}catch{Ir("Failed to parse JSON response for "+c+": "+m.responseText)}r(null,v)}else 401!==m.status&&404!==m.status&&Ir("Got unsuccessful REST response for "+c+" Status: "+m.status),r(m.status);r=null}},m.open("GET",c,!0),m.send()})}}class nA{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ug(){return{value:null,children:new Map}}function Hd(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ot(e);n.children.has(r)||n.children.set(r,Ug()),Hd(n.children.get(r),e=xn(e),t)}}function jg(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fn,(r,o)=>{Hd(n,new wn(r),o)}),jg(n,e)}}if(n.children.size>0){const t=Ot(e);return e=xn(e),n.children.has(t)&&jg(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function zw(n,e,t){null!==n.value?t(e,n.value):function rA(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{zw(o,new wn(e.toString()+"/"+r),t)})}class PM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Lr(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class rv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PM(e);const r=1e4+2e4*Math.random();Cp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Lr(e,(o,l)=>{l>0&&(0,h.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),Cp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ea=(()=>{return(n=Ea||(Ea={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ea;var n})();function Zw(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iv{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ea.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,h.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new iv(gn(),t,this.revert)}}return(0,h.hu)(Ot(this.path)===e,"operationForChild called for unrelated child."),new iv(xn(this.path),this.affectedTree,this.revert)}}class Gg{constructor(e,t){this.source=e,this.path=t,this.type=Ea.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new Gg(this.source,gn()):new Gg(this.source,xn(this.path))}}class $d{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ea.OVERWRITE}operationForChild(e){return qt(this.path)?new $d(this.source,gn(),this.snap.getImmediateChild(e)):new $d(this.source,xn(this.path),this.snap)}}class Fp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ea.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new $d(this.source,gn(),t.value):new Fp(this.source,gn(),t)}return(0,h.hu)(Ot(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fp(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ot(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class RM{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Mc(n,e,t,r,o,l){const c=r.filter(m=>m.type===t);c.sort((m,v)=>function Yw(n,e,t){if(null==e.childName||null==t.childName)throw(0,h.g5)("Should only compare child_ events.");const r=new tn(e.childName,e.snapshotNode),o=new tn(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,m,v)),c.forEach(m=>{const v=function oA(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,l);o.forEach(E=>{E.respondsTo(m.type)&&e.push(E.createEvent(v,n.query_))})})}function zd(n,e){return{eventCache:n,serverCache:e}}function qd(n,e,t,r){return zd(new Sc(e,t,r),n.serverCache)}function Hg(n,e,t,r){return zd(n.eventCache,new Sc(e,t,r))}function $g(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let zg;class Ln{constructor(e,t=(()=>(zg||(zg=new vo(Nd)),zg))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return Lr(e,(r,o)=>{t=t.set(new wn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(qt(e))return null;{const r=Ot(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(xn(e),t);return null!=l?{path:Wn(new wn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Ot(e),r=this.children.get(t);return null!==r?r.subtree(xn(e)):new Ln(null)}}set(e,t){if(qt(e))return new Ln(t,this.children);{const r=Ot(e),l=(this.children.get(r)||new Ln(null)).set(xn(e),t),c=this.children.insert(r,l);return new Ln(this.value,c)}}remove(e){if(qt(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=Ot(e),r=this.children.get(t);if(r){const o=r.remove(xn(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new Ln(null):new Ln(this.value,l)}return this}}get(e){if(qt(e))return this.value;{const t=Ot(e),r=this.children.get(t);return r?r.get(xn(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Ot(e),l=(this.children.get(r)||new Ln(null)).setTree(xn(e),t);let c;return c=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Ln(this.value,c)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(Wn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(qt(e))return null;{const l=Ot(e),c=this.children.get(l);return c?c.findOnPath_(xn(e),Wn(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const o=Ot(e),l=this.children.get(o);return l?l.foreachOnPath_(xn(e),Wn(t,o),r):new Ln(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ia{constructor(e){this.writeTree_=e}static empty(){return new Ia(new Ln(null))}}function Wd(n,e,t){if(qt(e))return new Ia(new Ln(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const c=Kr(o,e);return l=l.updateChild(c,t),new Ia(n.writeTree_.set(o,l))}{const o=new Ln(t),l=n.writeTree_.setTree(e,o);return new Ia(l)}}}function ov(n,e,t){let r=n;return Lr(t,(o,l)=>{r=Wd(r,Wn(e,o),l)}),r}function Qw(n,e){if(qt(e))return Ia.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new Ia(t)}}function xc(n,e){return null!=Ns(n,e)}function Ns(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Kr(t.path,e)):null}function qg(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fn,(r,o)=>{e.push(new tn(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new tn(r,o.value))}),e}function Ko(n,e){if(qt(e))return n;{const t=Ns(n,e);return new Ia(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function kc(n){return n.writeTree_.isEmpty()}function Ca(n,e){return Jw(gn(),n.writeTree_,e)}function Jw(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,h.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=Jw(Wn(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function Lp(n,e){return oE(e,n)}function Wg(n,e){if(n.snap)return ks(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ks(Wn(n.path,t),e))return!0;return!1}function tE(n){return n.visible}function lA(n,e,t){let r=Ia.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const c=l.path;let m;if(l.snap)ks(t,c)?(m=Kr(t,c),r=Wd(r,m,l.snap)):ks(c,t)&&(m=Kr(c,t),r=Wd(r,gn(),l.snap.getChild(m)));else{if(!l.children)throw(0,h.g5)("WriteRecord should have .snap or .children");if(ks(t,c))m=Kr(t,c),r=ov(r,m,l.children);else if(ks(c,t))if(m=Kr(c,t),qt(m))r=ov(r,gn(),l.children);else{const v=(0,h.DV)(l.children,Ot(m));if(v){const E=v.getChild(xn(m));r=Wd(r,gn(),E)}}}}}return r}function lv(n,e,t,r,o){if(r||o){const l=Ko(n.visibleWrites,e);return!o&&kc(l)?t:o||null!=t||xc(l,gn())?Ca(lA(n.allWrites,function(E){return(E.visible||o)&&(!r||!~r.indexOf(E.writeId))&&(ks(E.path,e)||ks(e,E.path))},e),t||jt.EMPTY_NODE):null}{const l=Ns(n.visibleWrites,e);if(null!=l)return l;{const c=Ko(n.visibleWrites,e);return kc(c)?t:null!=t||xc(c,gn())?Ca(c,t||jt.EMPTY_NODE):null}}}function Kg(n,e,t,r){return lv(n.writeTree,n.treePath,e,t,r)}function uv(n,e){return function nE(n,e,t){let r=jt.EMPTY_NODE;const o=Ns(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Fn,(l,c)=>{r=r.updateImmediateChild(l,c)}),r;if(t){const l=Ko(n.visibleWrites,e);return t.forEachChild(Fn,(c,m)=>{const v=Ca(Ko(l,new wn(c)),m);r=r.updateImmediateChild(c,v)}),qg(l).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return qg(Ko(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function hA(n,e,t,r){return function uA(n,e,t,r,o){(0,h.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=Wn(e,t);if(xc(n.visibleWrites,l))return null;{const c=Ko(n.visibleWrites,l);return kc(c)?o.getChild(t):Ca(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Zg(n,e){return function cA(n,e){return Ns(n.visibleWrites,e)}(n.writeTree,Wn(n.treePath,e))}function Yg(n,e,t){return function rE(n,e,t,r){const o=Wn(e,t),l=Ns(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?Ca(Ko(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function iE(n,e){return oE(Wn(n.treePath,e),n.writeTree)}function oE(n,e){return{treePath:n,writeTree:e}}class pA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,h.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,h.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,Ud(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,Qi(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,$l(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,h.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,Ud(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const aE=new class sE{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Qg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yg(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bo(this.viewCache_),l=function cv(n,e,t,r,o,l){return function dA(n,e,t,r,o,l,c){let m;const v=Ko(n.visibleWrites,e),E=Ns(v,gn());if(null!=E)m=E;else{if(null==t)return[];m=Ca(v,t)}if(m=m.withIndex(c),m.isEmpty()||m.isLeafNode())return[];{const S=[],N=c.getCompare(),B=l?m.getReverseIteratorFrom(r,c):m.getIteratorFrom(r,c);let W=B.getNext();for(;W&&S.length<o;)0!==N(W,r)&&S.push(W),W=B.getNext();return S}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function cE(n,e,t,r,o,l){const c=e.eventCache;if(null!=Zg(r,t))return e;{let m,v;if(qt(t))if((0,h.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=bo(e),N=uv(r,E instanceof jt?E:jt.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),N,l)}else{const E=Kg(r,bo(e));m=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const E=Ot(t);if(".priority"===E){(0,h.hu)(1===Su(t),"Can't have a priority with additional path components");const S=c.getNode();v=e.serverCache.getNode();const N=hA(r,t,S,v);m=null!=N?n.filter.updatePriority(S,N):c.getNode()}else{const S=xn(t);let N;if(c.isCompleteForChild(E)){v=e.serverCache.getNode();const B=hA(r,t,c.getNode(),v);N=null!=B?c.getNode().getImmediateChild(E).updateChild(S,B):c.getNode().getImmediateChild(E)}else N=Yg(r,E,e.serverCache);m=null!=N?n.filter.updateChild(c.getNode(),E,N,S,o,l):c.getNode()}}return qd(e,m,c.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function Yo(n,e,t,r,o,l,c,m){const v=e.serverCache;let E;const S=c?n.filter:n.filter.getIndexedFilter();if(qt(t))E=S.updateFullNode(v.getNode(),r,null);else if(S.filtersNodes()&&!v.isFiltered()){const W=v.getNode().updateChild(t,r);E=S.updateFullNode(v.getNode(),W,null)}else{const W=Ot(t);if(!v.isCompleteForPath(t)&&Su(t)>1)return e;const oe=xn(t),ze=v.getNode().getImmediateChild(W).updateChild(oe,r);E=".priority"===W?S.updatePriority(v.getNode(),ze):S.updateChild(v.getNode(),W,ze,oe,aE,null)}const N=Hg(e,E,v.isFullyInitialized()||qt(t),S.filtersNodes());return cE(n,N,t,o,new Qg(o,N,l),m)}function Vp(n,e,t,r,o,l,c){const m=e.eventCache;let v,E;const S=new Qg(o,e,l);if(qt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),v=qd(e,E,!0,n.filter.filtersNodes());else{const N=Ot(t);if(".priority"===N)E=n.filter.updatePriority(e.eventCache.getNode(),r),v=qd(e,E,m.isFullyInitialized(),m.isFiltered());else{const B=xn(t),W=m.getNode().getImmediateChild(N);let oe;if(qt(B))oe=r;else{const Ne=S.getCompleteChild(N);oe=null!=Ne?".priority"===Ng(B)&&Ne.getChild(Iw(B)).isEmpty()?Ne:Ne.updateChild(B,r):jt.EMPTY_NODE}v=W.equals(oe)?e:qd(e,n.filter.updateChild(m.getNode(),N,oe,B,S,c),m.isFullyInitialized(),n.filter.filtersNodes())}}return v}function dE(n,e){return n.eventCache.isCompleteForChild(e)}function yA(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function Jg(n,e,t,r,o,l,c,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,v=e;E=qt(t)?r:new Ln(null).setTree(t,r);const S=e.serverCache.getNode();return E.children.inorderTraversal((N,B)=>{if(S.hasChild(N)){const oe=yA(0,e.serverCache.getNode().getImmediateChild(N),B);v=Yo(n,v,new wn(N),oe,o,l,c,m)}}),E.children.inorderTraversal((N,B)=>{const W=!e.serverCache.isCompleteForChild(N)&&void 0===B.value;if(!S.hasChild(N)&&!W){const Ne=yA(0,e.serverCache.getNode().getImmediateChild(N),B);v=Yo(n,v,new wn(N),Ne,o,l,c,m)}}),v}class dv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Rp(r.getIndex()),l=function ev(n){return n.loadsAllData()?new Rp(n.getIndex()):n.hasLimit()?new X_(n):new Wo(n)}(r);this.processor_=function fA(n){return{filter:n}}(l);const c=t.serverCache,m=t.eventCache,v=o.updateFullNode(jt.EMPTY_NODE,c.getNode(),null),E=l.updateFullNode(jt.EMPTY_NODE,m.getNode(),null),S=new Sc(v,c.isFullyInitialized(),o.filtersNodes()),N=new Sc(E,m.isFullyInitialized(),l.filtersNodes());this.viewCache_=zd(N,S),this.eventGenerator_=new RM(this.query_)}get query(){return this.query_}}function Xg(n,e){const t=bo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Ot(e)).isEmpty())?t.getChild(e):null}function em(n){return 0===n.eventRegistrations_.length}function tm(n,e,t){const r=[];if(t){(0,h.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function nm(n,e,t,r){e.type===Ea.MERGE&&null!==e.source.queryId&&((0,h.hu)(bo(n.viewCache_),"We should always have a full cache before handling merges"),(0,h.hu)($g(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function lE(n,e,t,r,o){const l=new pA;let c,m;if(t.type===Ea.OVERWRITE){const E=t;E.source.fromUser?c=Vp(n,e,E.path,E.snap,r,o,l):((0,h.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered()&&!qt(E.path),c=Yo(n,e,E.path,E.snap,r,o,m,l))}else if(t.type===Ea.MERGE){const E=t;E.source.fromUser?c=function mA(n,e,t,r,o,l,c){let m=e;return r.foreach((v,E)=>{const S=Wn(t,v);dE(e,Ot(S))&&(m=Vp(n,m,S,E,o,l,c))}),r.foreach((v,E)=>{const S=Wn(t,v);dE(e,Ot(S))||(m=Vp(n,m,S,E,o,l,c))}),m}(n,e,E.path,E.children,r,o,l):((0,h.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered(),c=Jg(n,e,E.path,E.children,r,o,m,l))}else if(t.type===Ea.ACK_USER_WRITE){const E=t;c=E.revert?function bA(n,e,t,r,o,l){let c;if(null!=Zg(r,t))return e;{const m=new Qg(r,e,o),v=e.eventCache.getNode();let E;if(qt(t)||".priority"===Ot(t)){let S;if(e.serverCache.isFullyInitialized())S=Kg(r,bo(e));else{const N=e.serverCache.getNode();(0,h.hu)(N instanceof jt,"serverChildren would be complete if leaf node"),S=uv(r,N)}E=n.filter.updateFullNode(v,S,l)}else{const S=Ot(t);let N=Yg(r,S,e.serverCache);null==N&&e.serverCache.isCompleteForChild(S)&&(N=v.getImmediateChild(S)),E=null!=N?n.filter.updateChild(v,S,N,xn(t),m,l):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(v,S,jt.EMPTY_NODE,xn(t),m,l):v,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Kg(r,bo(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,l)))}return c=e.serverCache.isFullyInitialized()||null!=Zg(r,gn()),qd(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,o,l):function _A(n,e,t,r,o,l,c){if(null!=Zg(o,t))return e;const m=e.serverCache.isFiltered(),v=e.serverCache;if(null!=r.value){if(qt(t)&&v.isFullyInitialized()||v.isCompleteForPath(t))return Yo(n,e,t,v.getNode().getChild(t),o,l,m,c);if(qt(t)){let E=new Ln(null);return v.getNode().forEachChild(va,(S,N)=>{E=E.set(new wn(S),N)}),Jg(n,e,t,E,o,l,m,c)}return e}{let E=new Ln(null);return r.foreach((S,N)=>{const B=Wn(t,S);v.isCompleteForPath(B)&&(E=E.set(S,v.getNode().getChild(B)))}),Jg(n,e,t,E,o,l,m,c)}}(n,e,E.path,E.affectedTree,r,o,l)}else{if(t.type!==Ea.LISTEN_COMPLETE)throw(0,h.g5)("Unknown operation type: "+t.type);c=function vA(n,e,t,r,o){const l=e.serverCache;return cE(n,Hg(e,l.getNode(),l.isFullyInitialized()||qt(t),l.isFiltered()),t,r,aE,o)}(n,e,t.path,r,l)}const v=l.getChanges();return function uE(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=$g(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(J_($g(e)))}}(e,c,v),{viewCache:c,changes:v}}(n.processor_,o,e,t,r);return function gA(n,e){(0,h.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,h.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,h.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,CA(n,l.changes,l.viewCache.eventCache.getNode(),null)}function CA(n,e,t,r){return function xu(n,e,t,r){const o=[],l=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(function eA(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Mc(n,o,"child_removed",e,r,t),Mc(n,o,"child_added",e,r,t),Mc(n,o,"child_moved",l,r,t),Mc(n,o,"child_changed",e,r,t),Mc(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let hv,Bp;class rm{constructor(){this.views=new Map}}function im(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,h.hu)(null!=l,"SyncTree gave us an op for an invalid query."),nm(l,e,t,r)}{let l=[];for(const c of n.views.values())l=l.concat(nm(c,e,t,r));return l}}function om(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let m=Kg(t,o?r:null),v=!1;m?v=!0:r instanceof jt?(m=uv(t,r),v=!1):(m=jt.EMPTY_NODE,v=!1);const E=zd(new Sc(m,v,!1),new Sc(r,o,!1));return new dv(e,E)}return c}function cl(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Da(n,e){let t=null;for(const r of n.views.values())t=t||Xg(r,e);return t}function mE(n,e){return e._queryParams.loadsAllData()?Kd(n):n.views.get(e._queryIdentifier)}function yE(n,e){return null!=mE(n,e)}function Nc(n){return null!=Kd(n)}function Kd(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let bE=1;class wE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function Zo(){return{visibleWrites:Ia.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pv(n,e,t,r,o){return function Xw(n,e,t,r,o){(0,h.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Wd(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?ki(n,new $d({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ku(n,e,t=!1){const r=function av(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function eE(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,h.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const m=n.allWrites[c];m.visible&&(c>=t&&Wg(m,r.path)?o=!1:ks(r.path,m.path)&&(l=!0)),c--}return!!o&&(l?(function aA(n){n.visibleWrites=lA(n.allWrites,tE,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Qw(n.visibleWrites,r.path):Lr(r.children,v=>{n.visibleWrites=Qw(n.visibleWrites,Wn(r.path,v))}),!0))}(n.pendingWriteTree_,e)){let l=new Ln(null);return null!=r.snap?l=l.set(gn(),!0):Lr(r.children,c=>{l=l.set(new wn(c),!0)}),ki(n,new iv(r.path,l,t))}return[]}function Zd(n,e,t){return ki(n,new $d({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function sm(n,e,t,r){const o=e._path,l=n.syncPointTree_.get(o);let c=[];if(l&&("default"===e._queryIdentifier||yE(l,e))){const m=function gE(n,e,t,r){const o=e._queryIdentifier,l=[];let c=[];const m=Nc(n);if("default"===o)for(const[v,E]of n.views.entries())c=c.concat(tm(E,t,r)),em(E)&&(n.views.delete(v),E.query._queryParams.loadsAllData()||l.push(E.query));else{const v=n.views.get(o);v&&(c=c.concat(tm(v,t,r)),em(v)&&(n.views.delete(o),v.query._queryParams.loadsAllData()||l.push(v.query)))}return m&&!Nc(n)&&l.push(new(function DA(){return(0,h.hu)(hv,"Reference.ts has not been loaded"),hv}())(e._repo,e._path)),{removed:l,events:c}}(l,e,t,r);(function pE(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const v=m.removed;c=m.events;const E=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(N,B)=>Nc(B));if(E&&!S){const N=n.syncPointTree_.subtree(o);if(!N.isEmpty()){const B=function yv(n){return n.fold((e,t,r)=>{if(t&&Nc(t))return[Kd(t)];{let o=[];return t&&(o=cl(t)),Lr(r,(l,c)=>{o=o.concat(c)}),o}})}(N);for(let W=0;W<B.length;++W){const oe=B[W],Ne=oe.query,ze=gv(n,oe);n.listenProvider_.startListening(Gp(Ne),Yd(n,Ne),ze.hashFn,ze.onComplete)}}}!S&&v.length>0&&!r&&(E?n.listenProvider_.stopListening(Gp(e),null):v.forEach(N=>{const B=n.queryToTagMap.get(jp(N));n.listenProvider_.stopListening(Gp(N),B)})),function _v(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=jp(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,v)}return c}function SA(n,e,t,r){const o=mv(n,r);if(null!=o){const l=CE(o),c=l.path,m=l.queryId,v=Kr(c,e);return am(n,c,new $d(Zw(m),v,t))}return[]}function IE(n,e){const t=n._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(t,(E,S)=>{const N=Kr(E,t);r=r||Da(S,N),o=o||Nc(S)});let c,l=e.syncPointTree_.get(t);l?(o=o||Nc(l),r=r||Da(l,gn())):(l=new rm,e.syncPointTree_=e.syncPointTree_.set(t,l)),null!=r?c=!0:(c=!1,r=jt.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((S,N)=>{const B=Da(N,gn());B&&(r=r.updateImmediateChild(S,B))}));const m=yE(l,n);if(!m&&!n._queryParams.loadsAllData()){const E=jp(n);(0,h.hu)(!e.queryToTagMap.has(E),"View does not exist, but we have a tag");const S=function NA(){return bE++}();e.queryToTagMap.set(E,S),e.tagToQueryMap.set(S,E)}return{syncPoint:l,writesCache:Lp(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:c,foundAncestorDefaultView:o,viewAlreadyExists:m}}function fv(n,e,t){const{syncPoint:r,serverCache:o,writesCache:l,serverCacheComplete:c,viewAlreadyExists:m,foundAncestorDefaultView:v}=IE(e,n);let E=function fE(n,e,t,r,o,l){const c=om(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function IA(n,e){n.eventRegistrations_.push(e)}(c,t),function hE(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fn,(l,c)=>{r.push($l(l,c))}),t.isFullyInitialized()&&r.push(J_(t.getNode())),CA(n,r,t.getNode(),e)}(c,t)}(r,e,t,l,o,c);if(!m&&!v){const S=mE(r,e);E=E.concat(function PA(n,e,t){const r=e._path,o=Yd(n,e),l=gv(n,t),c=n.listenProvider_.startListening(Gp(e),o,l.hashFn,l.onComplete),m=n.syncPointTree_.subtree(r);if(o)(0,h.hu)(!Nc(m.value),"If we're adding a query, it shouldn't be shadowed");else{const v=m.fold((E,S,N)=>{if(!qt(E)&&S&&Nc(S))return[Kd(S).query];{let B=[];return S&&(B=B.concat(cl(S).map(W=>W.query))),Lr(N,(W,oe)=>{B=B.concat(oe)}),B}});for(let E=0;E<v.length;++E){const S=v[E];n.listenProvider_.stopListening(Gp(S),Yd(n,S))}}return c}(n,e,S))}return E}function Up(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,m)=>{const E=Da(m,Kr(c,e));if(E)return E});return lv(o,e,l,t,!0)}function ki(n,e){return xA(e,n.syncPointTree_,null,Lp(n.pendingWriteTree_,gn()))}function xA(n,e,t,r){if(qt(n.path))return kA(n,e,t,r);{const o=e.get(gn());null==t&&null!=o&&(t=Da(o,gn()));let l=[];const c=Ot(n.path),m=n.operationForChild(c),v=e.children.get(c);if(v&&m){const E=t?t.getImmediateChild(c):null,S=iE(r,c);l=l.concat(xA(m,v,E,S))}return o&&(l=l.concat(im(o,n,r,t))),l}}function kA(n,e,t,r){const o=e.get(gn());null==t&&null!=o&&(t=Da(o,gn()));let l=[];return e.children.inorderTraversal((c,m)=>{const v=t?t.getImmediateChild(c):null,E=iE(r,c),S=n.operationForChild(c);S&&(l=l.concat(kA(S,m,v,E)))}),o&&(l=l.concat(im(o,n,r,t))),l}function gv(n,e){const t=e.query,r=Yd(n,t);return{hashFn:()=>(function wA(n){return n.viewCache_.serverCache.getNode()}(e)||jt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function TA(n,e,t){const r=mv(n,t);if(r){const o=CE(r),l=o.path,c=o.queryId,m=Kr(l,e);return am(n,l,new Gg(Zw(c),m))}return[]}(n,t._path,r):function EE(n,e){return ki(n,new Gg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function PD(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return sm(n,t,null,l)}}}}function Yd(n,e){const t=jp(e);return n.queryToTagMap.get(t)}function jp(n){return n._path.toString()+"$"+n._queryIdentifier}function mv(n,e){return n.tagToQueryMap.get(e)}function CE(n){const e=n.indexOf("$");return(0,h.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function am(n,e,t){const r=n.syncPointTree_.get(e);return(0,h.hu)(r,"Missing sync point for query tag that we're tracking"),im(r,t,Lp(n.pendingWriteTree_,e),null)}function Gp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function vE(){return(0,h.hu)(Bp,"Reference.ts has not been loaded"),Bp}())(n._repo,n._path):n}class vv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vv(t)}node(){return this.node_}}class bv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wn(this.path_,e);return new bv(this.syncTree_,t)}node(){return Up(this.syncTree_,this.path_)}}const DE=function(n,e,t){return n&&"object"==typeof n?((0,h.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?lm(n[".sv"],e,t):"object"==typeof n[".sv"]?Pc(n[".sv"],e):void(0,h.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},lm=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,h.hu)(!1,"Unexpected server value: "+n)},Pc=function(n,e,t){n.hasOwnProperty("increment")||(0,h.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,h.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,h.hu)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},OA=function(n,e,t,r){return wv(e,new bv(t,n),r)},Rc=function(n,e,t){return wv(n,new vv(e),t)};function wv(n,e,t){const r=n.getPriority().val(),o=DE(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,m=DE(c.getValue(),e,t);return m!==c.getValue()||o!==c.getPriority().val()?new Bd(m,er(o)):n}{const c=n;return l=c,o!==c.getPriority().val()&&(l=l.updatePriority(new Bd(o))),c.forEachChild(Fn,(m,v)=>{const E=wv(v,e.getImmediateChild(m),t);E!==v&&(l=l.updateImmediateChild(m,E))}),l}}class Ev{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Qd(n,e){let t=e instanceof wn?e:new wn(e),r=n,o=Ot(t);for(;null!==o;){const l=(0,h.DV)(r.node.children,o)||{children:{},childCount:0};r=new Ev(o,r,l),t=xn(t),o=Ot(t)}return r}function Oc(n){return n.node.value}function Ps(n,e){n.node.value=e,Nu(n)}function Jd(n){return n.node.childCount>0}function dl(n,e){Lr(n.node.children,(t,r)=>{e(new Ev(t,n,r))})}function Hp(n,e,t,r){t&&!r&&e(n),dl(n,o=>{Hp(o,e,!0,r)}),t&&r&&e(n)}function Fc(n){return new wn(null===n.parent?n.name:Fc(n.parent)+"/"+n.name)}function Nu(n){null!==n.parent&&function Xd(n,e,t){const r=function Ni(n){return void 0===Oc(n)&&!Jd(n)}(t),o=(0,h.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,Nu(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Nu(n))}(n.parent,n.name,n)}const eh=/[\[\].#$\/\u0000-\u001F\u007F]/,th=/[\[\].#$\u0000-\u001F\u007F]/,Pu=10485760,zl=function(n){return"string"==typeof n&&0!==n.length&&!eh.test(n)},Lc=function(n){return"string"==typeof n&&0!==n.length&&!th.test(n)},hl=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ic(n)||n&&"object"==typeof n&&(0,h.r3)(n,".sv")},Aa=function(n,e,t,r){r&&void 0===e||rh((0,h.gK)(n,"value"),e,t)},rh=function(n,e,t){const r=t instanceof wn?new QD(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ac(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ac(r)+" with contents = "+e.toString());if(Ic(e))throw new Error(n+"contains "+e.toString()+" "+Ac(r));if("string"==typeof e&&e.length>Pu/3&&(0,h.ug)(e)>Pu)throw new Error(n+"contains a string greater than "+Pu+" utf8 bytes "+Ac(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if(Lr(e,(c,m)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(l=!0,!zl(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ac(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Dw(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,h.ug)(e),Aw(n)})(r,c),rh(n,m,r),function Fd(n){const e=n.parts_.pop();n.byteLength_-=(0,h.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+Ac(r)+" in addition to actual children.")}},Iv=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,h.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];Lr(e,(c,m)=>{const v=new wn(c);if(rh(o,m,Wn(t,v)),".priority"===Ng(v)&&!hl(m))throw new Error(o+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(v)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=Mu(r);for(let c=0;c<l.length;c++)if((".priority"!==l[c]||c!==l.length-1)&&!zl(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Cw);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&ks(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},um=function(n,e,t){if(!t||void 0!==e){if(Ic(e))throw new Error((0,h.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hl(e))throw new Error((0,h.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ih=function(n,e,t,r){if(!(r&&void 0===t||zl(t)))throw new Error((0,h.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oh=function(n,e,t,r){if(!(r&&void 0===t||Lc(t)))throw new Error((0,h.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qo=function(n,e){if(".info"===Ot(e))throw new Error(n+" failed = Can't modify data under /.info/")},SE=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!zl(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lc(n)}(t))throw new Error((0,h.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ME{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cm(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!xp(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function Cv(n,e,t){cm(n,t),dm(n,r=>xp(r,e))}function wo(n,e,t){cm(n,t),dm(n,r=>ks(r,e)||ks(e,r))}function dm(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(FA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function FA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ma&&gr("event: "+t.toString()),Dc(r)}}}const $p="repo_interrupt";class Dv{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ME,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ug(),this.transactionQueueTree_=new Ev,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zp(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ru(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:zp(n)})}function Av(n,e,t,r,o){n.dataUpdateCount++;const l=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const v=(0,h.UI)(t,E=>er(E));c=function MA(n,e,t,r){const o=mv(n,r);if(o){const l=CE(o),c=l.path,m=l.queryId,v=Kr(c,e),E=Ln.fromObject(t);return am(n,c,new Fp(Zw(m),v,E))}return[]}(n.serverSyncTree_,l,v,o)}else{const v=er(t);c=SA(n.serverSyncTree_,l,v,o)}else if(r){const v=(0,h.UI)(t,E=>er(E));c=function FM(n,e,t){const r=Ln.fromObject(t);return ki(n,new Fp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,v)}else{const v=er(t);c=Zd(n.serverSyncTree_,l,v)}let m=l;c.length>0&&(m=Vc(n,l)),wo(n.eventQueue_,m,c)}function Tv(n,e){pm(n,"connected",e),!1===e&&function xE(n){Ou(n,"onDisconnectEvents");const e=Ru(n),t=Ug();zw(n.onDisconnect_,gn(),(o,l)=>{const c=OA(o,l,n.serverSyncTree_,e);Hd(t,o,c)});let r=[];zw(t,gn(),(o,l)=>{r=r.concat(Zd(n.serverSyncTree_,o,l));const c=Pv(n,o);Vc(n,c)}),n.onDisconnect_=Ug(),wo(n.eventQueue_,gn(),r)}(n)}function pm(n,e,t){const r=new wn("/.info/"+e),o=er(t);n.infoData_.updateSnapshot(r,o);const l=Zd(n.infoSyncTree_,r,o);wo(n.eventQueue_,r,l)}function qp(n){return n.nextWriteId_++}function Mv(n,e){const t=function VM(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,S)=>{const N=Kr(E,t);r=r||Da(S,N)});let o=n.syncPointTree_.get(t);o?r=r||Da(o,gn()):(o=new rm,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,c=l?new Sc(r,!0,!1):null;return function EA(n){return $g(n.viewCache_)}(om(o,e,Lp(n.pendingWriteTree_,e._path),l?c.getNode():jt.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=er(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Zd(n.serverSyncTree_,e._path,o);else{const c=function LM(n,e){const{syncPoint:t,serverCache:r,writesCache:o,serverCacheComplete:l}=IE(e,n),c=om(t,e,o,r,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),e._queryParams.loadsAllData()?null:Yd(n,e)}(n.serverSyncTree_,e);SA(n.serverSyncTree_,e._path,o,c)}return sm(n.serverSyncTree_,e,null).length>0&&Ou(n,"unexpected cancel events in repoGetValue"),o},r=>(Ou(n,"get for query "+(0,h.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function fm(n,e,t,r,o){Ou(n,"set",{path:e.toString(),value:t,priority:r});const l=Ru(n),c=er(t,r),m=Up(n.serverSyncTree_,e),v=Rc(c,m,l),E=qp(n),S=pv(n.serverSyncTree_,e,v,E,!0);cm(n.eventQueue_,S),n.server_.put(e.toString(),c.val(!0),(B,W)=>{const oe="ok"===B;oe||Ir("set at "+e+" failed: "+B);const Ne=ku(n.serverSyncTree_,E,!oe);wo(n.eventQueue_,e,Ne),ql(0,o,B,W)});const N=Pv(n,e);Vc(n,N),wo(n.eventQueue_,N,[])}function kE(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&jg(n.onDisconnect_,e),ql(0,t,r,o)})}function gm(n,e,t,r){const o=er(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,c)=>{"ok"===l&&Hd(n.onDisconnect_,e,o),ql(0,r,l,c)})}function xv(n,e,t){let r;r=".info"===Ot(e._path)?sm(n.infoSyncTree_,e,t):sm(n.serverSyncTree_,e,t),Cv(n.eventQueue_,e._path,r)}function kv(n){n.persistentConnection_&&n.persistentConnection_.interrupt($p)}function Ou(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gr(t,...e)}function ql(n,e,t,r){e&&Dc(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const c=new Error(l);c.code=o,e(c)}})}function mm(n,e,t){return Up(n.serverSyncTree_,e,t)||jt.EMPTY_NODE}function Wp(n,e=n.transactionQueueTree_){if(e||Kp(n,e),Oc(e)){const t=FE(n,e);(0,h.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function RE(n,e,t){const r=t.map(E=>E.currentWriteId),o=mm(n,e,r);let l=o;const c=o.hash();for(let E=0;E<t.length;E++){const S=t[E];(0,h.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const N=Kr(e,S.path);l=l.updateChild(N,S.currentOutputSnapshotRaw)}const m=l.val(!0),v=e;n.server_.put(v.toString(),m,E=>{Ou(n,"transaction put response",{path:v.toString(),status:E});let S=[];if("ok"===E){const N=[];for(let B=0;B<t.length;B++)t[B].status=2,S=S.concat(ku(n.serverSyncTree_,t[B].currentWriteId)),t[B].onComplete&&N.push(()=>t[B].onComplete(null,!0,t[B].currentOutputSnapshotResolved)),t[B].unwatcher();Kp(n,Qd(n.transactionQueueTree_,e)),Wp(n,n.transactionQueueTree_),wo(n.eventQueue_,e,S);for(let B=0;B<N.length;B++)Dc(N[B])}else{if("datastale"===E)for(let N=0;N<t.length;N++)t[N].status=3===t[N].status?4:0;else{Ir("transaction at "+v.toString()+" failed: "+E);for(let N=0;N<t.length;N++)t[N].status=4,t[N].abortReason=E}Vc(n,e)}},c)}(n,Fc(e),t)}else Jd(e)&&dl(e,t=>{Wp(n,t)})}function Vc(n,e){const t=jA(n,e),r=Fc(t);return function OE(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const v=e[m],E=Kr(t,v.path);let N,S=!1;if((0,h.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===v.status)S=!0,N=v.abortReason,o=o.concat(ku(n.serverSyncTree_,v.currentWriteId,!0));else if(0===v.status)if(v.retryCount>=25)S=!0,N="maxretry",o=o.concat(ku(n.serverSyncTree_,v.currentWriteId,!0));else{const B=mm(n,v.path,c);v.currentInputSnapshot=B;const W=e[m].update(B.val());if(void 0!==W){rh("transaction failed: Data returned ",W,v.path);let oe=er(W);"object"==typeof W&&null!=W&&(0,h.r3)(W,".priority")||(oe=oe.updatePriority(B.getPriority()));const ze=v.currentWriteId,St=Ru(n),Lt=Rc(oe,B,St);v.currentOutputSnapshotRaw=oe,v.currentOutputSnapshotResolved=Lt,v.currentWriteId=qp(n),c.splice(c.indexOf(ze),1),o=o.concat(pv(n.serverSyncTree_,v.path,Lt,v.currentWriteId,v.applyLocally)),o=o.concat(ku(n.serverSyncTree_,ze,!0))}else S=!0,N="nodata",o=o.concat(ku(n.serverSyncTree_,v.currentWriteId,!0))}wo(n.eventQueue_,t,o),o=[],S&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===N?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(N),!1,null)))}Kp(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)Dc(r[m]);Wp(n,n.transactionQueueTree_)}(n,FE(n,t),r),r}function jA(n,e){let t,r=n.transactionQueueTree_;for(t=Ot(e);null!==t&&void 0===Oc(r);)r=Qd(r,t),t=Ot(e=xn(e));return r}function FE(n,e){const t=[];return LE(n,e,t),t.sort((r,o)=>r.order-o.order),t}function LE(n,e,t){const r=Oc(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);dl(e,o=>{LE(n,o,t)})}function Kp(n,e){const t=Oc(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Ps(e,t.length>0?t:void 0)}dl(e,r=>{Kp(n,r)})}function Pv(n,e){const t=Fc(jA(n,e)),r=Qd(n.transactionQueueTree_,e);return function Rs(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{Mr(n,o)}),Mr(n,r),Hp(r,o=>{Mr(n,o)}),t}function Mr(n,e){const t=Oc(e);if(t){const r=[];let o=[],l=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,h.hu)(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):((0,h.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(ku(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===l?Ps(e,void 0):t.length=l+1,wo(n.eventQueue_,Fc(e),o);for(let c=0;c<r.length;c++)Dc(r[c])}}const Rv=function(n,e){const t=BE(n),r=t.namespace;return"firebase.com"===t.domain&&_o(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_o("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ir("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Dg(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new wn(t.pathString)}},BE=function(n){let e="",t="",r="",o="",l="",c=!0,m="https",v=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(m=n.substring(0,E-1),n=n.substring(E+2));let S=n.indexOf("/");-1===S&&(S=n.length);let N=n.indexOf("?");-1===N&&(N=n.length),e=n.substring(0,Math.min(S,N)),S<N&&(o=function VE(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}(n.substring(S,N)));const B=function GA(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ir(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,N)));E=e.indexOf(":"),E>=0?(c="https"===m||"wss"===m,v=parseInt(e.substring(E+1),10)):E=e.length;const W=e.slice(0,E);if("localhost"===W.toLowerCase())t="localhost";else if(W.split(".").length<=2)t=W;else{const oe=e.indexOf(".");r=e.substring(0,oe).toLowerCase(),t=e.substring(oe+1),l=r}"ns"in B&&(l=B.ns)}return{host:e,port:v,domain:t,subdomain:r,secure:c,scheme:m,pathString:o,namespace:l}};class UE{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,h.Pz)(this.snapshot.exportVal())}}class Ov{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Fv{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,h.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Bc{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new h.BH;return kE(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qo("OnDisconnect.remove",this._path);const e=new h.BH;return gm(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qo("OnDisconnect.set",this._path),Aa("OnDisconnect.set",e,this._path,!1);const t=new h.BH;return gm(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Qo("OnDisconnect.setWithPriority",this._path),Aa("OnDisconnect.setWithPriority",e,this._path,!1),um("OnDisconnect.setWithPriority",t,!1);const r=new h.BH;return function NE(n,e,t,r,o){const l=er(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(c,m)=>{"ok"===c&&Hd(n.onDisconnect_,e,l),ql(0,o,c,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Qo("OnDisconnect.update",this._path),Iv("OnDisconnect.update",e,this._path,!1);const t=new h.BH;return function BA(n,e,t,r){if((0,h.xb)(t))return gr("onDisconnect().update() called with empty data.  Don't do anything."),void ql(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&Lr(t,(c,m)=>{const v=er(m);Hd(n.onDisconnect_,Wn(e,c),v)}),ql(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Eo{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return qt(this._path)?null:Ng(this._path)}get ref(){return new Jo(this._repo,this._path)}get _queryIdentifier(){const e=tA(this._queryParams),t=wg(e);return"{}"===t?"default":t}get _queryObject(){return tA(this._queryParams)}isEqual(e){if(!((e=(0,h.m9)(e))instanceof Eo))return!1;const t=this._repo===e._repo,r=xp(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function V_(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ym(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Wl(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===va){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ya)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==_a)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Fn){if(null!=e&&!hl(e)||null!=t&&!hl(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,h.hu)(n.getIndex()instanceof Vw||n.getIndex()===Bw,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _m(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Jo extends Eo{constructor(e,t){super(e,t,new Op,!1)}get parent(){const e=Iw(this._path);return null===e?null:new Jo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class sh{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=Pi(this.ref,e);return new sh(this._node.getChild(t),r,Fn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new sh(o,Pi(this.ref,r),Fn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lv(n,e){return(n=(0,h.m9)(n))._checkNotDeleted("ref"),void 0!==e?Pi(n._root,e):n._root}function vm(n,e){(n=(0,h.m9)(n))._checkNotDeleted("refFromURL");const t=Rv(e,n._repo.repoInfo_.nodeAdmin);SE("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&_o("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Lv(n,t.path.toString())}function Pi(n,e){return null===Ot((n=(0,h.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oh("child","path",t,!1)):oh("child","path",e,!1),new Jo(n._repo,Wn(n._path,e));var t}function Xo(n,e){n=(0,h.m9)(n),Qo("set",n._path),Aa("set",e,n._path,!1);const t=new h.BH;return fm(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function GE(n,e){Iv("update",e,n._path,!1);const t=new h.BH;return function VA(n,e,t,r){Ou(n,"update",{path:e.toString(),value:t});let o=!0;const l=Ru(n),c={};if(Lr(t,(m,v)=>{o=!1,c[m]=OA(Wn(e,m),er(v),n.serverSyncTree_,l)}),o)gr("update() called with empty data.  Don't do anything."),ql(0,r,"ok",void 0);else{const m=qp(n),v=function AA(n,e,t,r){!function sv(n,e,t,r){(0,h.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ov(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Ln.fromObject(t);return ki(n,new Fp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,m);cm(n.eventQueue_,v),n.server_.merge(e.toString(),t,(E,S)=>{const N="ok"===E;N||Ir("update at "+e+" failed: "+E);const B=ku(n.serverSyncTree_,m,!N),W=B.length>0?Vc(n,e):e;wo(n.eventQueue_,W,B),ql(0,r,E,S)}),Lr(t,E=>{const S=Pv(n,Wn(e,E));Vc(n,S)}),wo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class bm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new UE("value",this,new sh(e.snapshotNode,new Jo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ov(this,e,t):null}matches(e){return e instanceof bm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class wm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ov(this,e,t):null}createEvent(e,t){(0,h.hu)(null!=e.childName,"Child events should have a childName.");const r=Pi(new Jo(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new UE(e.type,this,new sh(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof wm&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Zp(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const v=t,E=(S,N)=>{xv(n._repo,n,m),v(S,N)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new Fv(t,l||void 0),m="value"===e?new bm(c):new wm(e,c);return function UA(n,e,t){let r;r=".info"===Ot(e._path)?fv(n.infoSyncTree_,e,t):fv(n.serverSyncTree_,e,t),Cv(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>xv(n._repo,n,m)}function Yp(n,e,t,r){return Zp(n,"value",e,t,r)}function ah(n,e,t,r){return Zp(n,"child_added",e,t,r)}function HE(n,e,t,r){return Zp(n,"child_changed",e,t,r)}function Vv(n,e,t,r){return Zp(n,"child_moved",e,t,r)}function $E(n,e,t,r){return Zp(n,"child_removed",e,t,r)}function Bv(n,e,t){let r=null;const o=t?new Fv(t):null;"value"===e?r=new bm(o):e&&(r=new wm(e,o)),xv(n._repo,n,r)}class Os{}class Qp extends Os{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Aa("endAt",this._value,e._path,!0);const t=jd(e._queryParams,this._value,this._key);if(_m(t),Wl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Eo(e._repo,e._path,t,e._orderByCalled)}}class zE extends Os{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Aa("endBefore",this._value,e._path,!1);const t=function tv(n,e,t){let r,o;return n.index_===va?("string"==typeof e&&(e=Q_(e)),o=jd(n,e,t)):(r=null==t?ya:Q_(t),o=jd(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(_m(t),Wl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Eo(e._repo,e._path,t,e._orderByCalled)}}class Em extends Os{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Aa("startAt",this._value,e._path,!0);const t=$w(e._queryParams,this._value,this._key);if(_m(t),Wl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Eo(e._repo,e._path,t,e._orderByCalled)}}class WE extends Os{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Aa("startAfter",this._value,e._path,!1);const t=function Lg(n,e,t){let r;if(n.index_===va)"string"==typeof e&&(e=Gw(e)),r=$w(n,e,t);else{let o;o=null==t?_a:Gw(t),r=$w(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(_m(t),Wl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Eo(e._repo,e._path,t,e._orderByCalled)}}class ZE extends Os{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Eo(e._repo,e._path,function NM(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class QE extends Os{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Eo(e._repo,e._path,function Hw(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class XE extends Os{constructor(e){super(),this._path=e}_apply(e){ym(e,"orderByChild");const t=new wn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Vw(t),o=Gd(e._queryParams,r);return Wl(o),new Eo(e._repo,e._path,o,!0)}}class qA extends Os{_apply(e){ym(e,"orderByKey");const t=Gd(e._queryParams,va);return Wl(t),new Eo(e._repo,e._path,t,!0)}}class KA extends Os{_apply(e){ym(e,"orderByPriority");const t=Gd(e._queryParams,Fn);return Wl(t),new Eo(e._repo,e._path,t,!0)}}class YA extends Os{_apply(e){ym(e,"orderByValue");const t=Gd(e._queryParams,Bw);return Wl(t),new Eo(e._repo,e._path,t,!0)}}class JA extends Os{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Aa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qp(this._value,this._key)._apply(new Em(this._value,this._key)._apply(e))}}function Sa(n,...e){let t=(0,h.m9)(n);for(const r of e)t=r._apply(t);return t}(function OM(n){(0,h.hu)(!hv,"__referenceConstructor has already been defined"),hv=n})(Jo),function _E(n){(0,h.hu)(!Bp,"__referenceConstructor has already been defined"),Bp=n}(Jo);const Uv={};function nI(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||_o("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gr("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let v,E,c=Rv(l,o),m=c.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(v=!0,l=`http://${E}?ns=${m.namespace}`,c=Rv(l,o),m=c.repoInfo):v=!c.repoInfo.secure;const S=o&&v?new Rd(Rd.OWNER):new lw(n.name,n.options,e);SE("Invalid Firebase Database URL",c),qt(c.path)||_o("Database URL must point to the root of a Firebase Database (not including a child path).");const N=function r1(n,e,t,r){let o=Uv[e.name];o||(o={},Uv[e.name]=o);let l=o[n.toURLString()];return l&&_o("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new Dv(n,false,t,r),o[n.toURLString()]=l,l}(m,n,S,new OD(n.name,t));return new o1(N,n)}class o1{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function LA(n,e,t){if(n.stats_=Sp(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Bg(n.repoInfo_,(r,o,l,c)=>{Av(n,r,o,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Tv(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,h.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Tc(n.repoInfo_,e,(r,o,l,c)=>{Av(n,r,o,l,c)},r=>{Tv(n,r)},r=>{!function Sv(n,e){Lr(e,(t,r)=>{pm(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Mp(n,e){const t=n.toString();return Tg[t]||(Tg[t]=e()),Tg[t]}(n.repoInfo_,()=>new rv(n.stats_,n.server_)),n.infoData_=new nA,n.infoSyncTree_=new wE({startListening:(r,o,l,c)=>{let m=[];const v=n.infoData_.getNode(r._path);return v.isEmpty()||(m=Zd(n.infoSyncTree_,r._path,v),setTimeout(()=>{c("ok")},0)),m},stopListening:()=>{}}),pm(n,"connected",!1),n.serverSyncTree_=new wE({startListening:(r,o,l,c)=>(n.server_.listen(r,l,o,(m,v)=>{const E=c(m,v);wo(n.eventQueue_,r._path,E)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jo(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function n1(n,e){const t=Uv[e];(!t||t[n.key]!==n)&&_o(`Database ${e}(${n.repoInfo_}) has already been deleted.`),kv(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_o("Cannot call "+e+" on a deleted database.")}}function jv(){Rt.IS_TRANSPORT_INITIALIZED&&Ir("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rI(){jv(),Tu.forceDisallow()}function iI(){jv(),Od.forceDisallow(),Tu.forceAllow()}function lI(n,e){Yi(n,e)}const cI={".sv":"timestamp"};class a1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Tc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Tc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function uI(n){fe(p.SDK_VERSION),(0,p._registerComponent)(new ga.wA("database",(e,{instanceIdentifier:t})=>nI(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(x,O,n),(0,p.registerVersion)(x,O,"esm2017")}();const hI=new b.Yd("@firebase/database-compat"),Hv=function(n){hI.warn("FIREBASE WARNING: "+n)};class u1{constructor(e){this._delegate=e}cancel(e){(0,h.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,h.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,h.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,h.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,h.Dv)("OnDisconnect.set",1,2,arguments.length),(0,h.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,h.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,h.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,h.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,Hv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,h.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class c1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,h.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Fu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,h.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,h.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,h.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,h.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,h.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),oh("DataSnapshot.child","path",e,!1),new Fu(this._database,this._delegate.child(e))}hasChild(e){return(0,h.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,h.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,h.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,h.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Fu(this._database,t)))}hasChildren(){return(0,h.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,h.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,h.Dv)("DataSnapshot.ref",0,0,arguments.length),new es(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Cr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,h.Dv)("Query.on",2,4,arguments.length),(0,h.Wj)("Query.on","callback",t,!1);const c=Cr.getCancelAndContextArgs_("Query.on",r,o),m=(E,S)=>{t.call(c.context,new Fu(this.database,E),S)};m.userCallback=t,m.context=c.context;const v=null===(l=c.cancel)||void 0===l?void 0:l.bind(c.context);switch(e){case"value":return Yp(this._delegate,m,v),t;case"child_added":return ah(this._delegate,m,v),t;case"child_removed":return $E(this._delegate,m,v),t;case"child_changed":return HE(this._delegate,m,v),t;case"child_moved":return Vv(this._delegate,m,v),t;default:throw new Error((0,h.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,h.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,h.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,h.Wj)("Query.off","callback",t,!0),(0,h.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,Bv(this._delegate,e,o)}else Bv(this._delegate,e)}get(){return function $A(n){return Mv((n=(0,h.m9)(n))._repo,n).then(e=>new sh(e,new Jo(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Fu(this.database,e))}once(e,t,r,o){(0,h.Dv)("Query.once",1,4,arguments.length),(0,h.Wj)("Query.once","callback",t,!0);const l=Cr.getCancelAndContextArgs_("Query.once",r,o),c=new h.BH,m=(E,S)=>{const N=new Fu(this.database,E);t&&t.call(l.context,N,S),c.resolve(N)};m.userCallback=t,m.context=l.context;const v=E=>{l.cancel&&l.cancel.call(l.context,E),c.reject(E)};switch(e){case"value":Yp(this._delegate,m,v,{onlyOnce:!0});break;case"child_added":ah(this._delegate,m,v,{onlyOnce:!0});break;case"child_removed":$E(this._delegate,m,v,{onlyOnce:!0});break;case"child_changed":HE(this._delegate,m,v,{onlyOnce:!0});break;case"child_moved":Vv(this._delegate,m,v,{onlyOnce:!0});break;default:throw new Error((0,h.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,h.Dv)("Query.limitToFirst",1,1,arguments.length),new Cr(this.database,Sa(this._delegate,function YE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ZE(n)}(e)))}limitToLast(e){return(0,h.Dv)("Query.limitToLast",1,1,arguments.length),new Cr(this.database,Sa(this._delegate,function JE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QE(n)}(e)))}orderByChild(e){return(0,h.Dv)("Query.orderByChild",1,1,arguments.length),new Cr(this.database,Sa(this._delegate,function eI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oh("orderByChild","path",n,!1),new XE(n)}(e)))}orderByKey(){return(0,h.Dv)("Query.orderByKey",0,0,arguments.length),new Cr(this.database,Sa(this._delegate,function WA(){return new qA}()))}orderByPriority(){return(0,h.Dv)("Query.orderByPriority",0,0,arguments.length),new Cr(this.database,Sa(this._delegate,function ZA(){return new KA}()))}orderByValue(){return(0,h.Dv)("Query.orderByValue",0,0,arguments.length),new Cr(this.database,Sa(this._delegate,function QA(){return new YA}()))}startAt(e=null,t){return(0,h.Dv)("Query.startAt",0,2,arguments.length),new Cr(this.database,Sa(this._delegate,function Im(n=null,e){return ih("startAt","key",e,!0),new Em(n,e)}(e,t)))}startAfter(e=null,t){return(0,h.Dv)("Query.startAfter",0,2,arguments.length),new Cr(this.database,Sa(this._delegate,function KE(n,e){return ih("startAfter","key",e,!0),new WE(n,e)}(e,t)))}endAt(e=null,t){return(0,h.Dv)("Query.endAt",0,2,arguments.length),new Cr(this.database,Sa(this._delegate,function zA(n,e){return ih("endAt","key",e,!0),new Qp(n,e)}(e,t)))}endBefore(e=null,t){return(0,h.Dv)("Query.endBefore",0,2,arguments.length),new Cr(this.database,Sa(this._delegate,function qE(n,e){return ih("endBefore","key",e,!0),new zE(n,e)}(e,t)))}equalTo(e,t){return(0,h.Dv)("Query.equalTo",1,2,arguments.length),new Cr(this.database,Sa(this._delegate,function XA(n,e){return ih("equalTo","key",e,!0),new JA(n,e)}(e,t)))}toString(){return(0,h.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,h.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,h.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Cr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,h.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,h.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,h.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new es(this.database,new Jo(this._delegate._repo,this._delegate._path))}}class es extends Cr{constructor(e,t){super(e,new Eo(t._repo,t._path,new Op,!1)),this.database=e,this._delegate=t}getKey(){return(0,h.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,h.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new es(this.database,Pi(this._delegate,e))}getParent(){(0,h.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new es(this.database,e):null}getRoot(){return(0,h.Dv)("Reference.root",0,0,arguments.length),new es(this.database,this._delegate.root)}set(e,t){(0,h.Dv)("Reference.set",1,2,arguments.length),(0,h.Wj)("Reference.set","onComplete",t,!0);const r=Xo(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,h.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,Hv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qo("Reference.update",this._delegate._path),(0,h.Wj)("Reference.update","onComplete",t,!0);const r=GE(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,h.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,h.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function jE(n,e,t){if(Qo("setWithPriority",n._path),Aa("setWithPriority",e,n._path,!1),um("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new h.BH;return fm(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,h.Dv)("Reference.remove",0,1,arguments.length),(0,h.Wj)("Reference.remove","onComplete",e,!0);const t=function pl(n){return Qo("remove",n._path),Xo(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,h.Dv)("Reference.transaction",1,3,arguments.length),(0,h.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,h.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,h.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function l1(n,e,t){var r;if(n=(0,h.m9)(n),Qo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=t?.applyLocally)||void 0===r||r,l=new h.BH,m=Yp(n,()=>{});return function PE(n,e,t,r,o,l){Ou(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:wc(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=mm(n,e,void 0);c.currentInputSnapshot=m;const v=c.update(m.val());if(void 0===v)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{rh("transaction failed: Data returned ",v,c.path),c.status=0;const E=Qd(n.transactionQueueTree_,e),S=Oc(E)||[];let N;S.push(c),Ps(E,S),"object"==typeof v&&null!==v&&(0,h.r3)(v,".priority")?(N=(0,h.DV)(v,".priority"),(0,h.hu)(hl(N),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):N=(Up(n.serverSyncTree_,e)||jt.EMPTY_NODE).getPriority().val();const B=Ru(n),W=er(v,N),oe=Rc(W,m,B);c.currentOutputSnapshotRaw=W,c.currentOutputSnapshotResolved=oe,c.currentWriteId=qp(n);const Ne=pv(n.serverSyncTree_,e,oe,c.currentWriteId,c.applyLocally);wo(n.eventQueue_,e,Ne),Wp(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(v,E,S)=>{let N=null;v?l.reject(v):(N=new sh(S,new Jo(n._repo,n._path),Fn),l.resolve(new a1(E,N)))},m,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new c1(l.committed,new Fu(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,h.Dv)("Reference.setPriority",1,2,arguments.length),(0,h.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Ta(n,e){n=(0,h.m9)(n),Qo("setPriority",n._path),um("setPriority",e,!1);const t=new h.BH;return fm(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,h.Dv)("Reference.push",0,2,arguments.length),(0,h.Wj)("Reference.push","onComplete",t,!0);const r=function HA(n,e){n=(0,h.m9)(n),Qo("push",n._path),Aa("push",e,n._path,!0);const t=zp(n._repo),r=jw(t),o=Pi(n,r),l=Pi(n,r);let c;return c=null!=e?Xo(l,e).then(()=>l):Promise.resolve(l),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new es(this.database,c));t&&o.then(()=>t(null),c=>t(c));const l=new es(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return Qo("Reference.onDisconnect",this._delegate._path),new u1(new Bc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Lu{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rI,forceLongPolling:iI}}useEmulator(e,t,r={}){!function oI(n,e,t,r={}){(n=(0,h.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_o("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&_o('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Rd(Rd.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,h.Sg)(r.mockUserToken,n.app.options.projectId);l=new Rd(c)}!function t1(n,e,t,r){n.repoInfo_=new Dg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,h.Dv)("database.ref",0,1,arguments.length),e instanceof es){const t=vm(this._delegate,e.toString());return new es(this,t)}{const t=Lv(this._delegate,e);return new es(this,t)}}refFromURL(e){(0,h.Dv)("database.refFromURL",1,1,arguments.length);const r=vm(this._delegate,e);return new es(this,r)}goOffline(){return(0,h.Dv)("database.goOffline",0,0,arguments.length),function sI(n){(n=(0,h.m9)(n))._checkNotDeleted("goOffline"),kv(n._repo)}(this._delegate)}goOnline(){return(0,h.Dv)("database.goOnline",0,0,arguments.length),function aI(n){(n=(0,h.m9)(n))._checkNotDeleted("goOnline"),function Nv(n){n.persistentConnection_&&n.persistentConnection_.resume($p)}(n._repo)}(this._delegate)}}Lu.ServerValue={TIMESTAMP:function dI(){return cI}(),increment:n=>function Uc(n){return{".sv":{increment:n}}}(n)};var Dr=Object.freeze({__proto__:null,initStandalone:function Cm({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){fe(t);const c=new ga.zt("auth-internal",new ga.H0("database-standalone"));return c.setComponent(new ga.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Lu(nI(n,c,void 0,e,l),n),namespace:o}}});const GM=Lu.ServerValue;!function pI(n){n.INTERNAL.registerComponent(new ga.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Lu(o,r)},"PUBLIC").setServiceProps({Reference:es,Query:Cr,Database:Lu,DataSnapshot:Fu,enableLogging:lI,INTERNAL:Dr,ServerValue:GM}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.2")}(Md.Z);var $v=V(7579),Dm=V(5363),fI=V(6063);class gI extends $v.x{constructor(e=1/0,t=1/0,r=fI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:c}=this;t||(r.push(e),!o&&r.push(l.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let c=0;c<l.length&&!e.closed;c+=r?1:2)e.next(l[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const c=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)m=v;m&&r.splice(0,m+1)}}}function zv(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,vc.B)({connector:()=>new gI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const yI=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Am(n,e){return(0,Xn.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}var d1=V(5698);function Xp(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function h1(n=p1){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function p1(){return new yI}var Tm=V(576);function qv(n,e){return(0,Tm.m)(e)?zo(()=>n,e):zo(()=>n)}var Sm=V(9468);V(5867);const Zv=new Map,km={activated:!1,tokenObservers:[]},_1={initialized:!1,enabled:!1};function ui(n){return Zv.get(n)||km}function Fs(n,e){Zv.set(n,e)}function Vu(){return _1}class E1{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,y.Z)(function*(){t.stop();try{t.pending=new h.BH,yield function I1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new h.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new h.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EI(n){if(!ui(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function Rm(n,e){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,y.Z)(function*({url:n,body:e},t){var r,o;const l={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const W=yield c.getHeartbeatsHeader();W&&(l["X-Firebase-Client"]=W)}const m={method:"POST",body:JSON.stringify(e),headers:l};let v,E;try{v=yield fetch(n,m)}catch(W){throw Ji.create("fetch-network-error",{originalErrorMessage:null===(r=W)||void 0===r?void 0:r.message})}if(200!==v.status)throw Ji.create("fetch-status-error",{httpStatus:v.status});try{E=yield v.json()}catch(W){throw Ji.create("fetch-parse-error",{originalErrorMessage:null===(o=W)||void 0===o?void 0:o.message})}const S=E.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const N=1e3*Number(S[1]),B=Date.now();return{token:E.token,expireTimeMillis:B+N,issuedAtTimeMillis:B}})).apply(this,arguments)}function II(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const nf="firebase-app-check-store";let uh=null;function AI(){return uh||(uh=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var l;e(Ji.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(nf,{keyPath:"compositeKey"})}}catch(r){e(Ji.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),uh)}function Xv(){return(Xv=(0,y.Z)(function*(n,e){const r=(yield AI()).transaction(nf,"readwrite"),l=r.objectStore(nf).put({compositeKey:n,value:e});return new Promise((c,m)=>{l.onsuccess=v=>{c()},r.onerror=v=>{var E;m(Ji.create("storage-set",{originalErrorMessage:null===(E=v.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const ch=new b.Yd("@firebase/app-check");function NI(n,e){return(0,h.hl)()?function A1(n,e){return function SI(n,e){return Xv.apply(this,arguments)}(function xI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ch.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RI(){return Vu().enabled}function OI(){return rf.apply(this,arguments)}function rf(){return(rf=(0,y.Z)(function*(){const n=Vu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const FI={error:"UNKNOWN_ERROR"};function o0(n){return h.US.encodeString(JSON.stringify(n),!1)}function Om(n){return s0.apply(this,arguments)}function s0(){return(s0=(0,y.Z)(function*(n,e=!1){const t=n.app;EI(t);const r=ui(t);let l,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&c0(v)&&(o=v)}if(!e&&o&&c0(o))return{token:o.token};let m,c=!1;if(RI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Rm(II(t,yield OI()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const v=yield r.exchangeTokenPromise;return yield NI(t,v),Fs(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?ch.warn(v.message):ch.error(v),l=v}return o?(m={token:o.token},Fs(t,Object.assign(Object.assign({},r),{token:o})),yield NI(t,o)):m=x1(l),c&&u0(t,m),m})).apply(this,arguments)}function a0(n,e){const t=ui(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function l0(n){const{app:e}=n,t=ui(e);let r=t.tokenRefresher;r||(r=function M1(n){const{app:e}=n;return new E1((0,y.Z)(function*(){let r;if(r=ui(e).token?yield Om(n,!0):yield Om(n),r.error)throw r.error}),()=>!0,()=>{const t=ui(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Fs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function u0(n,e){const t=ui(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function c0(n){return n.expireTimeMillis-Date.now()>0}function x1(n){return{token:o0(FI),error:n}}class Fm{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ui(this.app);for(const t of e)a0(this.app,t.next);return Promise.resolve()}}const HI="app-check-internal";!function L1(){(0,p._registerComponent)(new ga.wA("app-check",n=>function jc(n,e){return new Fm(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(HI).initialize()})),(0,p._registerComponent)(new ga.wA(HI,n=>function k1(n){return{getToken:e=>Om(n,e),addTokenListener:e=>function of(n,e,t,r){const{app:o}=n,l=ui(o),c={next:t,error:r,type:e};if(Fs(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,c]})),l.token&&c0(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),l0(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>l0(n))}(n,"INTERNAL",e),removeTokenListener:e=>a0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,p.registerVersion)("@firebase/app-check","0.5.10")}();class Vm{constructor(){return(0,zt.vb)("app-check")}}typeof window<"u"&&window;var $I=V(127);const Um=new f.OlP("angularfire2.auth.use-emulator"),jm=new f.OlP("angularfire2.auth.settings"),Gm=new f.OlP("angularfire2.auth.tenant-id"),Hm=new f.OlP("angularfire2.auth.langugage-code"),y0=new f.OlP("angularfire2.auth.use-device-language"),qI=new f.OlP("angularfire.auth.persistence"),$m=(n,e,t,r,o,l,c,m)=>(0,Ke.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,l&&v.useDeviceLanguage(),c)for(const[E,S]of Object.entries(c))v.settings[E]=S;return m&&v.setPersistence(m),v},[t,r,o,l,c,m]);let cf=(()=>{class n{constructor(t,r,o,l,c,m,v,E,S,N,B,W){const oe=new $v.x,Ne=Gl(void 0).pipe((0,Dm.Q)(c.outsideAngular),zo(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3677)))),(0,Rn.U)(()=>(0,Ke.on)(t,l,r)),(0,Rn.U)(ze=>$m(ze,l,m,E,S,N,v,B)),zv({bufferSize:1,refCount:!1}));if(El(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Gl(null);else{Ne.pipe(function f1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Am((o,l)=>n(o,l,r)):qo.y,(0,d1.q)(1),t?Xp(e):h1(()=>new yI))}()).subscribe();const St=Ne.pipe(zo(Gt=>Gt.getRedirectResult().then(on=>on,()=>null)),zt.iC,zv({bufferSize:1,refCount:!1})),Lt=Ne.pipe(zo(Gt=>new Ut.y(on=>({unsubscribe:l.runOutsideAngular(()=>Gt.onAuthStateChanged(kn=>on.next(kn),kn=>on.error(kn),()=>on.complete()))})))),Zt=Ne.pipe(zo(Gt=>new Ut.y(on=>({unsubscribe:l.runOutsideAngular(()=>Gt.onIdTokenChanged(kn=>on.next(kn),kn=>on.error(kn),()=>on.complete()))}))));this.authState=St.pipe(qv(Lt),(0,Sm.R)(c.outsideAngular),(0,Dm.Q)(c.insideAngular)),this.user=St.pipe(qv(Zt),(0,Sm.R)(c.outsideAngular),(0,Dm.Q)(c.insideAngular)),this.idToken=this.user.pipe(zo(Gt=>Gt?(0,en.D)(Gt.getIdToken()):Gl(null))),this.idTokenResult=this.user.pipe(zo(Gt=>Gt?(0,en.D)(Gt.getIdTokenResult()):Gl(null))),this.credential=(0,Ep.T)(St,oe,this.authState.pipe(Am(Gt=>!Gt))).pipe((0,Rn.U)(Gt=>Gt?.user?Gt:null),(0,Sm.R)(c.outsideAngular),(0,Dm.Q)(c.insideAngular))}return(0,Ke.pX)(this,Ne,l,{spy:{apply:(ze,St,Lt)=>{(ze.startsWith("signIn")||ze.startsWith("createUser"))&&Lt.then(Zt=>oe.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ke.Dh),f.LFG(Ke.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zt.HU),f.LFG(Um,8),f.LFG(jm,8),f.LFG(Gm,8),f.LFG(Hm,8),f.LFG(y0,8),f.LFG(qI,8),f.LFG(Vm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ph(n){return null==n}function WI(n){return"function"==typeof n.set}function zm(n,e){return WI(e)?e:n.ref(e)}function Ma(n,e){if(function H1(n){return"string"==typeof n}(n))return e.stringCase();if(WI(n))return e.firebaseCase();if(function $1(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function df(n,e,t="on",r=yg.z){return new Ut.y(o=>{let l=null;return l=n[t](e,(c,m)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:m})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,Rn.U)(o=>{const{snapshot:l,prevKey:c}=o;let m=null;return l.exists()&&(m=l.key),{type:e,payload:l,prevKey:c,key:m}}),(0,vc.B)())}function fh(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function q1(n,e){const{payload:t,prevKey:r,key:o}=e,l=fh(n,o),c=function z1(n,e){if(ph(e))return 0;{const t=fh(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(v=>{const E={payload:v,type:"value",prevKey:m,key:v.key};return m=v.key,n=[...n,E],!1})}return n;case"child_added":if(l>-1){const m=n[l-1];(m&&m.key||null)!==r&&(n=n.filter(v=>v.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===o?e:m);case"child_moved":if(l>-1){const m=n.splice(l,1)[0];return(n=n.slice()).splice(c,0,m),n}return n;default:return n}}function KI(n){return(ph(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function hf(n,e,t){return function _0(n,e,t){return df(n,"value","once",t).pipe(zo(r=>{const o=[Gl(r)];return e.forEach(l=>o.push(df(n,l,"on",t))),(0,Ep.T)(...o).pipe(Cu(q1,[]))}),Du())}(n,e=KI(e),t)}function pf(n,e,t){const r=(e=KI(e)).map(o=>df(n,o,"on",t));return(0,Ep.T)(...r)}function v0(n,e){return function(r,o){return Ma(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function b0(n){return function(t){return t?Ma(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function QI(n,e){return function(){return df(n,"value","on",e)}}const sx=new f.OlP("angularfire2.realtimeDatabaseURL"),w0=new f.OlP("angularfire2.database.use-emulator");let E0=(()=>{class n{constructor(t,r,o,l,c,m,v,E,S,N,B,W,oe,Ne,ze){this.schedulers=m;const St=v,Lt=(0,Ke.on)(t,c,r);E&&$m(Lt,c,S,B,W,oe,N,Ne),this.database=(0,Ke.cc)(`${Lt.name}.database.${o}`,"AngularFireDatabase",Lt.name,()=>{const Zt=c.runOutsideAngular(()=>Lt.database(o||void 0));return St&&Zt.useEmulator(...St),Zt},[St])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>zm(this.database,t));let l=o;return r&&(l=r(o)),function YI(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:v0(r,"update"),set:v0(r,"set"),push:o=>r.push(o),remove:b0(r),snapshotChanges:o=>hf(n,o,t).pipe(zt.iC),stateChanges:o=>pf(n,o,t).pipe(zt.iC),auditTrail:o=>function W1(n,e,t){return function ZI(n,e,t){return function K1(n,e){return df(n,"value","on",e).pipe((0,Rn.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function _g(...n){const e=(0,la.jO)(n);return(0,Xn.e)((t,r)=>{const o=n.length,l=new Array(o);let c=n.map(()=>!1),m=!1;for(let v=0;v<o;v++)(0,Ml.Xf)(n[v]).subscribe((0,Pn.x)(r,E=>{l[v]=E,!m&&!c[v]&&(c[v]=!0,(m=c.every(qo.y))&&(c=null))},Td.Z));t.subscribe((0,Pn.x)(r,v=>{if(m){const E=[v,...l];r.next(e?e(...E):E)}}))})}(e),(0,Rn.U)(([o,l])=>{const c=o.lastKeyToLoad,m=l.map(v=>v.key);return{actions:l,lastKeyToLoad:c,loadedKeys:m}}),function bc(n){return(0,Xn.e)((e,t)=>{let r=!1,o=0;e.subscribe((0,Pn.x)(t,l=>(r||(r=!n(l,o++)))&&t.next(l)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,Rn.U)(o=>o.actions))}(n,pf(n,e).pipe(Cu((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(zt.iC),valueChanges:(o,l)=>hf(n,o,t).pipe((0,Rn.U)(m=>m.map(v=>l&&l.idField?Object.assign(Object.assign({},v.payload.val()),{[l.idField]:v.key}):v.payload.val())),zt.iC)}}(l,this)}object(t){return function Z1(n,e){return{query:n,snapshotChanges:()=>QI(n,e.schedulers.outsideAngular)().pipe(zt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>QI(n,e.schedulers.outsideAngular)().pipe(zt.iC,(0,Rn.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>zm(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ke.Dh),f.LFG(Ke.xv,8),f.LFG(sx,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zt.HU),f.LFG(w0,8),f.LFG(cf,8),f.LFG(Um,8),f.LFG(jm,8),f.LFG(Gm,8),f.LFG(Hm,8),f.LFG(y0,8),f.LFG(qI,8),f.LFG(Vm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JI=(()=>{class n{constructor(){$I.Z.registerVersion("angularfire",zt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[E0]}),n})();const qm_firebaseConfig={apiKey:"AIzaSyBkymfM7VtYzWRiSNui_59Ph5lRvL0DV_Q",authDomain:"astapixi.firebaseapp.com",projectId:"astapixi",storageBucket:"astapixi.appspot.com",messagingSenderId:"742749180152",appId:"1:742749180152:web:2d1d26fe44169b71f5eb0d",measurementId:"G-5YKLNXF3HE"};let Wm=(()=>{class n{constructor(){this.isGenSquad=!0,this.isEstraz=!1}SwitchPage(t){switch(t){case"genSquad":this.isGenSquad=!0,this.isEstraz=!1;break;case"estr":this.isEstraz=!0,this.isGenSquad=!1}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y1=(()=>{class n{constructor(t,r){this.switchPage=t,this.auth=r,this.urlTeamsIta="https://v3.football.api-sports.io/",this.email="",this.password=""}ngOnInit(){}logout(){this.auth.signOut()}login(){this.auth.signInWithEmailAndPassword(this.email,this.password)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wm),f.Y36(cf))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:0,consts:[[2,"text-align","center"],[1,"menuItems",2,"margin","0 auto","width","fit-content"],["href","#",3,"click"],["type","button",1,"",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"section")(1,"nav")(2,"p",0),f._uU(3,"Asta-PIXI"),f.qZA(),f.TgZ(4,"ul",1)(5,"li")(6,"a",2),f.NdJ("click",function(){return r.switchPage.SwitchPage("genSquad")}),f._uU(7,"Home"),f.qZA()(),f.TgZ(8,"li")(9,"a",2),f.NdJ("click",function(){return r.switchPage.SwitchPage("genSquad")}),f._uU(10,"Impostazioni"),f.qZA()(),f.TgZ(11,"li")(12,"a",2),f.NdJ("click",function(){return r.switchPage.SwitchPage("estr")}),f._uU(13,"Estrazione"),f.qZA()(),f.TgZ(14,"li")(15,"button",3),f.NdJ("click",function(){return r.logout()}),f._uU(16,"Aggiungi"),f.qZA()()()()())},styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;min-height:100vh;font-family:Hack,monospace}nav[_ngcontent-%COMP%]{display:flex;width:90%;margin:0 auto}nav[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#727272;text-align:center}nav[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px;font-size:96px;color:#a7a7a7;text-transform:uppercase;font-weight:600;transition:all 1s ease-in-out;position:relative}nav[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#fff;transition:1s}nav[_ngcontent-%COMP%]   .menuItems[_ngcontent-%COMP%]{list-style:none;display:flex}nav[_ngcontent-%COMP%]   .menuItems[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;margin:50px;align-items:center}nav[_ngcontent-%COMP%]   .menuItems[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#a7a7a7;font-size:24px;font-weight:400;transition:all .5s ease-in-out;position:relative;text-transform:uppercase}nav[_ngcontent-%COMP%]   .menuItems[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:60px;line-height:60px;font-size:14px;background-color:#f1f1f1;color:#000;text-align:center}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;border-bottom:1px solid}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:1px transparent}"]}),n})();class Q1{constructor(){this.nome="",this.crediti=0,this.logo="",this.players=[]}}var J1=V(5226),ts=V.n(J1),XI=V(6131);function C0(...n){return function I0(){return(0,XI.J)(1)}()((0,en.D)(n,(0,la.yG)(n)))}function Km(...n){const e=(0,la.yG)(n);return(0,Xn.e)((t,r)=>{(e?C0(n,t,e):C0(n,t)).subscribe(r)})}function D0(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}var at,eC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kl={},Zm=Zm||{},Ft=eC||self;function ff(){}function Ym(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var A0="closure_uid_"+(1e9*Math.random()>>>0),X1=0;function ax(n,e,t){return n.call.apply(n.bind,arguments)}function lx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ci(n,e,t){return(ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ax:lx).apply(null,arguments)}function gf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[o].apply(r,c)}}function Bu(){this.s=this.s,this.o=this.o}var eT={};Bu.prototype.s=!1,Bu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function gh(n){return Object.prototype.hasOwnProperty.call(n,A0)&&n[A0]||(n[A0]=++X1)}(this);delete eT[n]}},Bu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},tC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function mh(n){return Array.prototype.concat.apply([],arguments)}function M0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function yh(n){return/^[\s\xa0]*$/.test(n)}var bi,x0=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ri(n,e){return-1!=n.indexOf(e)}function _h(n,e){return n<e?-1:n>e?1:0}e:{var nT=Ft.navigator;if(nT){var k0=nT.userAgent;if(k0){bi=k0;break e}}bi=""}function N0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function P0(n){const e={};for(const t in n)e[t]=n[t];return e}var Gc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nC(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<Gc.length;l++)t=Gc[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qm(n){return Qm[" "](n),n}Qm[" "]=ff;var mf,n,ux=Ri(bi,"Opera"),vh=Ri(bi,"Trident")||Ri(bi,"MSIE"),rT=Ri(bi,"Edge"),O0=rT||vh,rC=Ri(bi,"Gecko")&&!(Ri(bi.toLowerCase(),"webkit")&&!Ri(bi,"Edge"))&&!(Ri(bi,"Trident")||Ri(bi,"MSIE"))&&!Ri(bi,"Edge"),iT=Ri(bi.toLowerCase(),"webkit")&&!Ri(bi,"Edge");function F0(){var n=Ft.document;return n?n.documentMode:void 0}e:{var L0="",Jm=(n=bi,rC?/rv:([^\);]+)(\)|;)/.exec(n):rT?/Edge\/([\d\.]+)/.exec(n):vh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iT?/WebKit\/(\S+)/.exec(n):ux?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Jm&&(L0=Jm?Jm[1]:""),vh){var Xm=F0();if(null!=Xm&&Xm>parseFloat(L0)){mf=String(Xm);break e}}mf=L0}var oT={};var oC=Ft.document&&vh&&(F0()||parseInt(mf,10))||void 0,sC=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",ff,e),Ft.removeEventListener("test",ff,e)}catch{}return n}();function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function bh(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rC){e:{try{Qm(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:aT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bh.Z.h.call(this)}}wi.prototype.h=function(){this.defaultPrevented=!0},xr(bh,wi);var aT={2:"touch",3:"pen",4:"mouse"};bh.prototype.h=function(){bh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),cx=0;function aC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++cx,this.ca=this.fa=!1}function V0(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function B0(n){this.src=n,this.g={},this.h=0}function lC(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=S0(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(V0(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function uC(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}B0.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var c=uC(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new aC(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var cC="closure_lm_"+(1e6*Math.random()|0),dC={};function lT(n,e,t,r,o){if(r&&r.once)return cT(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)lT(n,e[l],t,r,o);return null}return t=ny(t),n&&n[yf]?n.N(e,t,Zr(r)?!!r.capture:!!r,o):uT(n,e,t,!1,r,o)}function uT(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var c=Zr(o)?!!o.capture:!!o,m=pC(n);if(m||(n[cC]=m=new B0(n)),(t=m.add(e,t,r,c,l)).proxy)return t;if(r=function ty(){var e=hC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sC||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(j0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cT(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)cT(n,e[l],t,r,o);return null}return t=ny(t),n&&n[yf]?n.O(e,t,Zr(r)?!!r.capture:!!r,o):uT(n,e,t,!0,r,o)}function U0(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)U0(n,e[l],t,r,o);else r=Zr(r)?!!r.capture:!!r,t=ny(t),n&&n[yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=uC(l=n.g[e],t,r,o))&&(V0(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=pC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=uC(e,t,r,o)),(t=-1<n?e[n]:null)&&wh(t))}function wh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[yf])lC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(j0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pC(e))?(lC(t,n),0==t.h&&(t.src=null,e[cC]=null)):V0(n)}}}function j0(n){return n in dC?dC[n]:dC[n]="on"+n}function hC(n,e){if(n.ca)n=!0;else{e=new bh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wh(n),n=t.call(r,e)}return n}function pC(n){return(n=n[cC])instanceof B0?n:null}var _f="__closure_events_fn_"+(1e9*Math.random()>>>0);function ny(n){return"function"==typeof n?n:(n[_f]||(n[_f]=function(e){return n.handleEvent(e)}),n[_f])}function di(){Bu.call(this),this.i=new B0(this),this.P=this,this.I=null}function Ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var o=e;nC(e=new wi(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var c=e.g=t[l];o=G0(c,r,!0,e)&&o}if(o=G0(c=e.g=n,r,!0,e)&&o,o=G0(c,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=G0(c=e.g=t[l],r,!1,e)&&o}function G0(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.ca&&c.capture==t){var m=c.listener,v=c.ia||c.src;c.fa&&lC(n.i,c),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}xr(di,Bu),di.prototype[yf]=!0,di.prototype.removeEventListener=function(n,e,t,r){U0(this,n,e,t,r)},di.prototype.M=function(){if(di.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)V0(t[r]);delete n.g[e],n.h--}}this.I=null},di.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var fC=Ft.JSON.stringify;function dx(){var n=_C;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mC,vf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hT,n=>n.reset());class hT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hx(n){Ft.setTimeout(()=>{throw n},0)}function gC(n,e){mC||function pT(){var n=Ft.Promise.resolve(void 0);mC=function(){n.then(px)}}(),yC||(mC(),yC=!0),_C.add(n,e)}var yC=!1,_C=new class dT{constructor(){this.h=this.g=null}add(e,t){const r=vf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function px(){for(var n;n=dx();){try{n.h.call(n.g)}catch(t){hx(t)}var e=vf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yC=!1}function ry(n,e){di.call(this),this.h=n||1,this.g=e||Ft,this.j=ci(this.kb,this),this.l=Date.now()}function bf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function H0(n,e,t){if("function"==typeof n)t&&(n=ci(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ci(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function Io(n){n.g=H0(()=>{n.g=null,n.i&&(n.i=!1,Io(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xr(ry,di),(at=ry.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ei(this,"tick"),this.da&&(bf(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){ry.Z.M.call(this),bf(this),delete this.g};class fT extends Bu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Io(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hc(n){Bu.call(this),this.h=n,this.g={}}xr(Hc,Bu);var vC=[];function bC(n,e,t,r){Array.isArray(t)||(t&&(vC[0]=t.toString()),t=vC);for(var o=0;o<t.length;o++){var l=lT(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function iy(n){N0(n.g,function(e,t){this.g.hasOwnProperty(t)&&wh(e)},n),n.g={}}function wf(){this.g=!0}function $c(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var c=1;c<o.length;c++)o[c]=""}}}return fC(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Hc.prototype.M=function(){Hc.Z.M.call(this),iy(this)},Hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Aa=function(){this.g=!1},wf.prototype.info=function(){};var Uu={},IC=null;function Eh(){return IC=IC||new di}function Zl(n){wi.call(this,Uu.Ma,n)}function Ih(n){const e=Eh();Ei(e,new Zl(e,n))}function oy(n,e){wi.call(this,Uu.STAT_EVENT,n),this.stat=e}function mr(n){const e=Eh();Ei(e,new oy(e,n))}function CC(n,e){wi.call(this,Uu.Na,n),this.size=e}function sy(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Uu.Ma="serverreachability",xr(Zl,wi),Uu.STAT_EVENT="statevent",xr(oy,wi),Uu.Na="timingevent",xr(CC,wi);var ay={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $0(){}function z0(){}$0.prototype.h=null;var cy,ly={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uy(){wi.call(this,"d")}function q0(){wi.call(this,"c")}function W0(){}function zc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Hc(this),this.P=AC,this.W=new ry(n=O0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new K0}function K0(){this.i=null,this.g="",this.h=!1}xr(uy,wi),xr(q0,wi),xr(W0,$0),W0.prototype.g=function(){return new XMLHttpRequest},W0.prototype.i=function(){return{}},cy=new W0;var AC=45e3,Z0={},Ef={};function dy(n,e,t){n.K=1,n.v=fl(ju(e)),n.s=t,n.U=!0,hy(n,null)}function hy(n,e){n.F=Date.now(),Ch(n),n.A=ju(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),PC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new K0,n.g=My(n.l,t?e:null,!n.s),0<n.O&&(n.L=new fT(ci(n.Ia,n,n.g),n.O)),bC(n.V,n.g,"readystatechange",n.gb),e=n.H?P0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ih(1),function wC(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var c="",m=l.split("&"),v=0;v<m.length;v++){var E=m[v].split("=");if(1<E.length){var S=E[0];E=E[1];var N=S.split("_");c=2<=N.length&&"type"==N[1]?c+(S+"=")+E+"&":c+(S+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function If(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Y0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=_T(n,t),o==Ef){4==e&&(n.o=4,mr(14),r=!1),$c(n.j,n.m,null,"[Incomplete Response]");break}if(o==Z0){n.o=4,mr(15),$c(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$c(n.j,n.m,o,null),TC(n,o)}If(n)&&o!=Ef&&o!=Z0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ql(e),e.L=!0,mr(11))):($c(n.j,n.m,t,"[Invalid Chunked Response]"),Dh(n),Cf(n))}function _T(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ef:(t=Number(e.substring(t,r)),isNaN(t)?Z0:(r+=1)+t>e.length?Ef:(e=e.substr(r,t),n.C=r+t,e))}function Ch(n){n.Y=Date.now()+n.P,Q0(n,n.P)}function Q0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sy(ci(n.eb,n),e)}function py(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Cf(n){0==n.l.G||n.I||Dy(n.l,n)}function Dh(n){py(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bf(n.W),iy(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function TC(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Af(t.i,n)))if(t.I=n.N,!n.J&&Af(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;xh(t),se(t)}Un(t),mr(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=sy(ci(t.ab,t),6e3));if(1>=rb(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Jl(t,11)}else if((n.J||t.g==n)&&xh(t),!yh(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let E=o[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const S=E[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const N=E[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const B=E[5];null!=B&&"number"==typeof B&&0<B&&(t.K=r=1.5*B,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const oe=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var l=r.i;!l.g&&(Ri(oe,"spdy")||Ri(oe,"quic")||Ri(oe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(LC(l,l.h),l.h=null))}if(r.D){const Ne=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.sa=Ne,tr(r.F,r.D,Ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Sy(r,r.H?r.la:null,r.W),c.J){ib(r.i,c);var m=c,v=r.K;v&&m.setTimeout(v),m.B&&(py(m),Ch(m)),r.g=c}else ln(r);0<t.l.length&&Qe(t)}else"stop"!=E[0]&&"close"!=E[0]||Jl(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Jl(t,7):z(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Ih(4)}catch{}}function J0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ym(n)||"string"==typeof n)tC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ym(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function SC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ym(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ah(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ah)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function X0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Th(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Th(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Th(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(at=zc.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const e=this.L;e&&3==_(n)?e.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const S=_(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||O0||this.g&&(this.h.h||this.g.ga()||w(this.g)))){this.I||4!=S||7==e||Ih(8==e||0>=N?3:2),py(this);var t=this.g.ba();this.N=t;t:if(If(this)){var r=w(this.g);n="";var o=r.length,l=4==_(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dh(this),Cf(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function gT(n,e,t,r,o,l,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yh(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,mr(12),Dh(this),Cf(this);break e}$c(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,TC(this,t)}this.U?(Y0(this,S,c),O0&&this.i&&3==S&&(bC(this.V,this.W,"tick",this.fb),this.W.start())):($c(this.j,this.m,c,null),TC(this,c)),4==S&&Dh(this),this.i&&!this.I&&(4==S?Dy(this.l,this):(this.i=!1,Ch(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,mr(12)):(this.o=0,mr(13)),Dh(this),Cf(this)}}}catch{}},at.fb=function(){if(this.g){var n=_(this.g),e=this.g.ga();this.C<e.length&&(py(this),Y0(this,n,e),this.i&&4!=n&&Ch(this))}},at.cancel=function(){this.I=!0,Dh(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function EC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ih(3),mr(17)),Dh(this),this.o=2,Cf(this)):Q0(this,this.Y-n)},(at=Ah.prototype).R=function(){X0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},at.T=function(){return X0(this),this.g.concat()},at.get=function(n,e){return Th(this.h,n)?this.h[n]:e},at.set=function(n,e){Th(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},at.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var vT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Sh){this.g=void 0!==e?e:n.g,fy(this,n.j),this.s=n.s,qc(this,n.i),gy(this,n.m),this.l=n.l,e=n.h;var t=new _y;t.i=e.i,e.g&&(t.g=new Ah(e.g),t.h=e.h),MC(this,t),this.o=n.o}else n&&(t=String(n).match(vT))?(this.g=!!e,fy(this,t[1]||"",!0),this.s=Wc(t[2]||""),qc(this,t[3]||"",!0),gy(this,t[4]),this.l=Wc(t[5]||"",!0),MC(this,t[6]||"",!0),this.o=Wc(t[7]||"")):(this.g=!!e,this.h=new _y(null,this.g))}function ju(n){return new Sh(n)}function fy(n,e,t){n.j=t?Wc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qc(n,e,t){n.i=t?Wc(e,!0):e}function gy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function MC(n,e,t){e instanceof _y?(n.h=e,function RC(n,e){e&&!n.j&&(Yl(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(kC(this,r),PC(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Df(e,mx)),n.h=new _y(e,n.g))}function tr(n,e,t){n.h.set(e,t)}function fl(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Df(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Sh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Df(e,my,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Df(e,my,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Df(t,"/"==t.charAt(0)?gx:yy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Df(t,yx)),n.join("")};var my=/[#\/\?@]/g,yy=/[#\?:]/g,gx=/[#\?]/g,mx=/[#\?@]/g,yx=/#/g;function _y(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yl(n){n.g||(n.g=new Ah,n.h=0,n.i&&function fx(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kC(n,e){Yl(n),e=Mh(n,e),Th(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Th((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&X0(n)))}function NC(n,e){return Yl(n),e=Mh(n,e),Th(n.g.h,e)}function PC(n,e,t){kC(n,e),0<t.length&&(n.i=null,n.g.set(Mh(n,e),M0(t)),n.h+=t.length)}function Mh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nb(n){this.l=n||bT,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=_y.prototype).add=function(n,e){Yl(this),this.i=null,n=Mh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Yl(this),this.g.forEach(function(t,r){tC(t,function(o){n.call(e,o,r,this)},this)},this)},at.T=function(){Yl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},at.R=function(n){Yl(this);var e=[];if("string"==typeof n)NC(this,n)&&(e=mh(e,this.g.get(Mh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=mh(e,n[t])}return e},at.set=function(n,e){return Yl(this),this.i=null,NC(this,n=Mh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var c=o;""!==r[l]&&(c+="="+encodeURIComponent(String(r[l]))),n.push(c)}}return this.i=n.join("&")};var bT=10;function FC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rb(n){return n.h?1:n.g?n.g.size:0}function Af(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function LC(n,e){n.g?n.g.add(e):n.h=e}function ib(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vy(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return M0(n.i)}function ob(){}function wT(){this.g=new ob}function _x(n,e,t){const r=t||"";try{J0(n,function(o,l){let c=o;Zr(o)&&(c=fC(o)),e.push(r+l+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function by(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Tf(n){this.l=n.$b||null,this.j=n.ib||!1}function wy(n,e){di.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=VC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nb.prototype.cancel=function(){if(this.i=vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ob.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},ob.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},xr(Tf,$0),Tf.prototype.g=function(){return new wy(this.l,this.j)},Tf.prototype.i=function(n){return function(){return n}}({}),xr(wy,di);var VC=0;function ET(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ey(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Iy(n)}function Iy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=wy.prototype).open=function(n,e){if(this.readyState!=VC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Iy(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ey(this)),this.readyState=VC},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Iy(this)),this.g&&(this.readyState=3,Iy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ET(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ey(this):Iy(this),3==this.readyState&&ET(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,Ey(this))},at.Ta=function(n){this.g&&(this.response=n,Ey(this))},at.ha=function(){this.g&&Ey(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bx=Ft.JSON.parse;function Vr(n){di.call(this),this.headers=new Ah,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=IT,this.K=this.L=!1}xr(Vr,di);var IT="",wx=/^https?$/i,Ex=["POST","PUT"];function i(n){return"content-type"==n.toLowerCase()}function s(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,a(n),d(n)}function a(n){n.D||(n.D=!0,Ei(n,"complete"),Ei(n,"error"))}function u(n){if(n.h&&typeof Zm<"u"&&(!n.C[1]||4!=_(n)||2!=n.ba()))if(n.v&&4==_(n))H0(n.Fa,0,n);else if(Ei(n,"readystatechange"),4==_(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(vT)[1]||null;if(!o&&Ft.self&&Ft.self.location){var l=Ft.self.location.protocol;o=l.substr(0,l.length-1)}r=!wx.test(o?o.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var c=2<_(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",a(n)}}finally{d(n)}}}function d(n,e){if(n.g){g(n);const t=n.g,r=n.C[0]?ff:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function _(n){return n.g?n.g.readyState:0}function w(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case IT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function M(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function C(n){let e="";return N0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function R(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function L(n){this.za=0,this.l=[],this.h=new wf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=R("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=R("baseRetryDelayMs",5e3,n),this.$a=R("retryDelaySeedMs",1e4,n),this.Ya=R("forwardChannelMaxRetries",2,n),this.ra=R("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new nb(n&&n.concurrentRequestLimit),this.Ca=new wT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function z(n){if(De(n),3==n.G){var e=n.V++,t=ju(n.F);tr(t,"SID",n.J),tr(t,"RID",e),tr(t,"TYPE","terminate"),Pe(n,t),(e=new zc(n,n.h,e,void 0)).K=2,e.v=fl(ju(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=My(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ch(e)}Ty(n)}function se(n){n.g&&(Ql(n),n.g.cancel(),n.g=null)}function De(n){se(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),xh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function Be(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qe(n)}function Qe(n){FC(n.i)||n.m||(n.m=!0,gC(n.Ha,n),n.C=0)}function wt(n,e){var t;t=e?e.m:n.V++;const r=ju(n.F);tr(r,"SID",n.J),tr(r,"RID",t),tr(r,"AID",n.U),Pe(n,r),n.o&&n.s&&M(r,n.o,n.s),t=new zc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=gt(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),LC(n.i,t),dy(t,r,e)}function Pe(n,e){n.j&&J0({},function(t,r){tr(e,r,t)})}function gt(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ci(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const c=["count="+t];-1==l?0<t?(l=o[0].h,c.push("ofs="+l)):l=0:c.push("ofs="+l);let m=!0;for(let v=0;v<t;v++){let E=o[v].h;const S=o[v].g;if(E-=l,0>E)l=Math.max(0,o[v].h-100),m=!1;else try{_x(S,c,"req"+E+"_")}catch{r&&r(S)}}if(m){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ln(n){n.g||n.u||(n.Y=1,gC(n.Ga,n),n.A=0)}function Un(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=sy(ci(n.Ga,n),Ay(n,n.A)),n.A++,0))}function Ql(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Cy(n){n.g=new zc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ju(n.oa);tr(e,"RID","rpc"),tr(e,"SID",n.J),tr(e,"CI",n.N?"0":"1"),tr(e,"AID",n.U),Pe(n,e),tr(e,"TYPE","xmlhttp"),n.o&&n.s&&M(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=fl(ju(e)),t.s=null,t.U=!0,hy(t,n)}function xh(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Dy(n,e){var t=null;if(n.g==e){xh(n),Ql(n),n.g=null;var r=2}else{if(!Af(n.i,e))return;t=e.D,ib(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ei(r=Eh(),new CC(r,t,e,o)),Qe(n)}else ln(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function ot(n,e){return!(rb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=sy(ci(n.Ha,n,e),Ay(n,n.C)),n.C++,0)))}(n,e)||2==r&&Un(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Jl(n,5);break;case 4:Jl(n,10);break;case 3:Jl(n,6);break;default:Jl(n,2)}}function Ay(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Jl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ci(n.jb,n);t||(t=new Sh("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||fy(t,"https"),fl(t)),function vx(n,e){const t=new wf;if(Ft.Image){const r=new Image;r.onload=gf(by,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gf(by,t,r,"TestLoadImage: error",!1,e),r.onabort=gf(by,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gf(by,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mr(2);n.G=0,n.j&&n.j.va(e),Ty(n),De(n)}function Ty(n){n.G=0,n.I=-1,n.j&&((0!=vy(n.i).length||0!=n.l.length)&&(n.i.i.length=0,M0(n.l),n.l.length=0),n.j.ua())}function Sy(n,e,t){let r=function xC(n){return n instanceof Sh?ju(n):new Sh(n,void 0)}(t);if(""!=r.i)e&&qc(r,e+"."+r.i),gy(r,r.m);else{const o=Ft.location;r=function eb(n,e,t,r){var o=new Sh(null,void 0);return n&&fy(o,n),e&&qc(o,e),t&&gy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&N0(n.aa,function(o,l){tr(r,l,o)}),t=n.sa,(e=n.D)&&t&&tr(r,e,t),tr(r,"VER",n.ma),Pe(n,r),r}function My(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Ba&&!n.qa?new Tf({ib:!0}):n.qa)).L=n.H,e}function xy(){}function BC(){if(vh&&!(10<=Number(oC)))throw Error("Environmental error: no available transport.")}function xa(n,e){di.call(this),this.g=new L(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!yh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ky(this)}function Cx(n){uy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Dx(){q0.call(this),this.status=1}function ky(n){this.g=n}(at=Vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cy.g(),this.C=function DC(n){return n.h||(n.h=n.i())}(this.u?this.u:cy),this.g.onreadystatechange=ci(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void s(this,l)}n=t||"";const o=new Ah(this.headers);r&&J0(r,function(l,c){o.set(c,l)}),r=function tT(n){e:{var e=i;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=S0(Ex,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,c){this.g.setRequestHeader(c,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{g(this),0<this.B&&((this.K=function Ix(n){return vh&&function sT(){return function R0(n){var e=oT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=x0(String(mf)).split("."),t=x0("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",l=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=_h(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||_h(0==o[2].length,0==l[2].length)||_h(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ci(this.pa,this)):this.A=H0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){s(this,l)}},at.pa=function(){typeof Zm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),d(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),d(this,!0)),Vr.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?u(this):this.cb())},at.cb=function(){u(this)},at.ba=function(){try{return 2<_(this)?this.g.status:-1}catch{return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bx(e)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=L.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new zc(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=P0(l),nC(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gt(this,o,e),tr(t=ju(this.F),"RID",n),tr(t,"CVER",22),this.D&&tr(t,"X-HTTP-Session-Id",this.D),Pe(this,t),this.o&&l&&M(t,this.o,l),LC(this.i,o),this.Ra&&tr(t,"TYPE","init"),this.ja?(tr(t,"$req",e),tr(t,"SID","null"),o.$=!0,dy(o,t,null)):dy(o,t,e),this.G=2}}else 3==this.G&&(n?wt(this,n):0==this.l.length||FC(this.i)||wt(this))},at.Ga=function(){if(this.u=null,Cy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=sy(ci(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mr(10),se(this),Cy(this))},at.ab=function(){null!=this.v&&(this.v=null,se(this),Un(this),mr(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mr(2)):(this.h.info("Failed to ping google.com"),mr(1))},(at=xy.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},BC.prototype.g=function(n,e){return new xa(n,e)},xr(xa,di),xa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),gC(ci(n.hb,n,e))),mr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Sy(n,null,n.W),Qe(n)},xa.prototype.close=function(){z(this.g)},xa.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Be(this.g,e)}else this.v?((e={}).__data__=fC(n),Be(this.g,e)):Be(this.g,n)},xa.prototype.M=function(){this.g.j=null,delete this.j,z(this.g),delete this.g,xa.Z.M.call(this)},xr(Cx,uy),xr(Dx,q0),xr(ky,xy),ky.prototype.xa=function(){Ei(this.g,"a")},ky.prototype.wa=function(n){Ei(this.g,new Cx(n))},ky.prototype.va=function(n){Ei(this.g,new Dx(n))},ky.prototype.ua=function(){Ei(this.g,"b")},BC.prototype.createWebChannel=BC.prototype.g,xa.prototype.send=xa.prototype.u,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,ay.NO_ERROR=0,ay.TIMEOUT=8,ay.HTTP_ERROR=6,yT.COMPLETE="complete",z0.EventType=ly,ly.OPEN="a",ly.CLOSE="b",ly.ERROR="c",ly.MESSAGE="d",di.prototype.listen=di.prototype.N,Vr.prototype.listenOnce=Vr.prototype.O,Vr.prototype.getLastError=Vr.prototype.La,Vr.prototype.getLastErrorCode=Vr.prototype.Da,Vr.prototype.getStatus=Vr.prototype.ba,Vr.prototype.getResponseJson=Vr.prototype.Qa,Vr.prototype.getResponseText=Vr.prototype.ga,Vr.prototype.send=Vr.prototype.ea;var tP=Kl.createWebChannelTransport=function(){return new BC},nP=Kl.getStatEventTarget=function(){return Eh()},CT=Kl.ErrorCode=ay,rP=Kl.EventType=yT,iP=Kl.Event=Uu,Ax=Kl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oP=Kl.FetchXmlHttpFactory=Tf,UC=Kl.WebChannel=z0,sP=Kl.XhrIo=Vr;const Tx="@firebase/firestore";class Oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");let Ny="9.8.4";const kh=new b.Yd("@firebase/firestore");function DT(){return kh.logLevel}function Ue(n,...e){if(kh.logLevel<=b.in.DEBUG){const t=e.map(AT);kh.debug(`Firestore (${Ny}): ${n}`,...t)}}function hi(n,...e){if(kh.logLevel<=b.in.ERROR){const t=e.map(AT);kh.error(`Firestore (${Ny}): ${n}`,...t)}}function sb(n,...e){if(kh.logLevel<=b.in.WARN){const t=e.map(AT);kh.warn(`Firestore (${Ny}): ${n}`,...t)}}function AT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Ny}) INTERNAL ASSERTION FAILED: `+n;throw hi(e),new Error(e)}function kt(n,e){n||ut()}function rt(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends h.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Oi.UNAUTHENTICATED))}shutdown(){}}class cP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dP{constructor(e){this.t=e,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=E=>this.i!==o?(o=this.i,t(E)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const E=c;e.enqueueRetryable((0,y.Z)(function*(){yield E.promise,yield l(r.currentUser)}))},v=E=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>v(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new Sx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Oi(e)}}class hP{constructor(e,t,r){this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class pP{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hP(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fP{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.p;return this.p=l.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new Mx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xx{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=gP(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Py(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function kx(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Ar(0,0))}static max(){return new Tt(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ab{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ab.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ab?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends ab{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends ab{construct(e,t,r){return new Yr(e,t,r)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Oe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Oe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Oe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(c=!c,o++):"."!==m||c?(r+=m,o++):(l(),o++)}if(l(),c)throw new Oe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(yn.fromString(e))}static fromName(e){return new et(yn.fromString(e).popFirst(5))}static empty(){return new et(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new yn(e.slice()))}}class jC{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function TT(n){return n.fields.find(e=>2===e.kind)}function Sf(n){return n.fields.filter(e=>2!==e.kind)}jC.UNKNOWN_ID=-1;class GC{constructor(e,t){this.fieldPath=e,this.kind=t}}class lb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lb(0,ka.min())}}function Nx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Tt.fromTimestamp(1e9===r?new Ar(t+1,0):new Ar(t,r));return new ka(o,et.empty(),e)}function Px(n){return new ka(n.readTime,n.key,-1)}class ka{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ka(Tt.min(),et.empty(),-1)}static max(){return new ka(Tt.max(),et.empty(),-1)}}function ST(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const Rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nh(n){return MT.apply(this,arguments)}function MT(){return MT=(0,y.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==Rx)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),MT.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,l=0,c=!1;e.forEach(m=>{++o,m.next(()=>{++l,c&&l===o&&t()},v=>r(v))}),c=!0,l===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new de((r,o)=>{const l=e.length,c=new Array(l);let m=0;for(let v=0;v<l;v++){const E=v;t(e[E]).next(S=>{c[E]=S,++m,m===l&&r(c)},S=>o(S))}})}static doWhile(e,t){return new de((r,o)=>{const l=()=>{!0===e()?t().next(()=>{l()},o):r()};l()})}}class HC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Fi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new ub(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=xT(r.target.error);this.T.reject(new ub(e,o))}}static open(e,t,r,o){try{return new HC(t,e.transaction(o,r))}catch(l){throw new ub(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _P(t)}}class Xl{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Xl.v((0,h.z$)())&&hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Mf(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,h.hl)())return!1;if(Xl.S())return!0;const e=(0,h.z$)(),t=Xl.v(e),r=0<t&&t<10,o=Xl.D(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,y.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=c=>{r(c.target.result)},l.onblocked=()=>{o(new ub(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const m=c.target.error;o("VersionError"===m.name?new Oe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Oe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ub(e,m))},l.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,l.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,y.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.k(e);const v=HC.open(l.db,e,c?"readonly":"readwrite",r),E=o(v).next(S=>(v.R(),S)).catch(S=>(v.abort(S),de.reject(S))).toPromise();return E.catch(()=>{}),yield v.A,E}catch(v){const E=v,S="FirebaseError"!==E.name&&m<3;if(Ue("SimpleDb","Transaction failed with error:",E.message,"Retrying:",S),l.close(),!S)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yP{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Mf(this.$.delete())}}class ub extends Oe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ph(n){return"IndexedDbTransactionError"===n.name}class _P{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mf(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Mf(this.store.add(e))}get(e){return Mf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Mf(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Mf(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.G(o,(c,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new de((l,c)=>{o.onerror=m=>{c(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}W(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(l,c,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=l=>{const c=xT(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}G(e,t){const r=[];return new de((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const v=new yP(m),E=t(m.primaryKey,m.value,v);if(E instanceof de){const S=E.catch(N=>(v.done(),de.reject(N)));r.push(S)}v.isDone?o():null===v.U?m.continue():m.continue(v.U)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mf(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=xT(r.target.error);t(o)}})}let Fx=!1;function xT(n){const e=Xl.v((0,h.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fx||(Fx=!0,setTimeout(()=>{throw r},0)),r}}return n}class vP{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Ph(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Nh(r)}yield t.Z(1)}))}}class bP{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,y.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,l=!0;return de.doWhile(()=>!0===l&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ue("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,o).next(m=>{o-=m,r.add(c)});l=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(o,l)).next(m=>(Ue("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((o,l)=>{const c=Px(l);ST(c,r)>0&&(r=c)}),new ka(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Lx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ls.ot=-1;class Br{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $C(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $C(this.root,e,this.comparator,!1)}getReverseIterator(){return new $C(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $C(this.root,e,this.comparator,!0)}}class $C{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xi{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Xi.RED,this.left=o??Xi.EMPTY,this.right=l??Xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Xi(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1,Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bx(this.data.getIterator())}getIteratorFrom(e){return new Bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class Bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ry(n){return n.hasNext()?n.getNext():void 0}class Na{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new Na([])}unionWith(e){let t=new Kn(Yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Na(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Py(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ii(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const EP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rh(n){if(kt(!!n),"string"==typeof n){let e=0;const t=EP.exec(n);if(kt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function kf(n){return"string"==typeof n?Ii.fromBase64String(n):Ii.fromUint8Array(n)}function kT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ux(n){const e=n.mapValue.fields.__previous_value__;return kT(e)?Ux(e):e}function cb(n){const e=Rh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class IP{constructor(e,t,r,o,l,c,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Kc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function db(n){return null==n}function hb(n){return 0===n&&1/n==-1/0}function jx(n){return"number"==typeof n&&Number.isInteger(n)&&!hb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zC={nullValue:"NULL_VALUE"};function Nf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kT(n)?4:zx(n)?9007199254740991:10:ut()}function Gu(n,e){if(n===e)return!0;const t=Nf(n);if(t!==Nf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cb(n).isEqual(cb(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Rh(r.timestampValue),c=Rh(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,kf(n.bytesValue).isEqual(kf(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Ur(r.geoPointValue.latitude)===Ur(o.geoPointValue.latitude)&&Ur(r.geoPointValue.longitude)===Ur(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ur(r.integerValue)===Ur(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Ur(r.doubleValue),c=Ur(o.doubleValue);return l===c?hb(l)===hb(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Py(n.arrayValue.values||[],e.arrayValue.values||[],Gu);case 10:return function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Lx(l)!==Lx(c))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===c[m]||!Gu(l[m],c[m])))return!1;return!0}(n,e);default:return ut()}var o}function pb(n,e){return void 0!==(n.values||[]).find(t=>Gu(t,e))}function Fh(n,e){if(n===e)return 0;const t=Nf(n),r=Nf(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Ur(o.integerValue||o.doubleValue),m=Ur(l.integerValue||l.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return Gx(n.timestampValue,e.timestampValue);case 4:return Gx(cb(n),cb(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(o,l){const c=kf(o),m=kf(l);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),m=l.split("/");for(let v=0;v<c.length&&v<m.length;v++){const E=Kt(c[v],m[v]);if(0!==E)return E}return Kt(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Kt(Ur(o.latitude),Ur(l.latitude));return 0!==c?c:Kt(Ur(o.longitude),Ur(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const c=o.values||[],m=l.values||[];for(let v=0;v<c.length&&v<m.length;++v){const E=Fh(c[v],m[v]);if(E)return E}return Kt(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){if(o===Oh.mapValue&&l===Oh.mapValue)return 0;if(o===Oh.mapValue)return 1;if(l===Oh.mapValue)return-1;const c=o.fields||{},m=Object.keys(c),v=l.fields||{},E=Object.keys(v);m.sort(),E.sort();for(let S=0;S<m.length&&S<E.length;++S){const N=Kt(m[S],E[S]);if(0!==N)return N;const B=Fh(c[m[S]],v[E[S]]);if(0!==B)return B}return Kt(m.length,E.length)}(n.mapValue,e.mapValue);default:throw ut()}}function Gx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Rh(n),r=Rh(e),o=Kt(t.seconds,r.seconds);return 0!==o?o:Kt(t.nanos,r.nanos)}function Oy(n){return NT(n)}function NT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Rh(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?kf(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const c of r.values||[])l?l=!1:o+=",",o+=NT(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const m of o)c?c=!1:l+=",",l+=`${m}:${NT(r.fields[m])}`;return l+"}"}(n.mapValue):ut();var e}function Pf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function PT(n){return!!n&&"integerValue"in n}function fb(n){return!!n&&"arrayValue"in n}function Hx(n){return!!n&&"nullValue"in n}function $x(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qC(n){return!!n&&"mapValue"in n}function gb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zx(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CP(n){return"nullValue"in n?zC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pf(Kc.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function DP(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pf(Kc.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Oh:ut()}function qx(n,e){const t=Fh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Wx(n,e){const t=Fh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class eo{constructor(e){this.value=e}static empty(){return new eo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gb(t)}setAll(e){let t=Yr.emptyPath(),r={},o=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=gb(c):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());qC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];qC(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xf(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new eo(gb(this.value))}}function Kx(n){const e=[];return xf(n.fields,(t,r)=>{const o=new Yr([t]);if(qC(r)){const l=Kx(r.mapValue).fields;if(0===l.length)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Na(e)}class ur{constructor(e,t,r,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ur(e,0,Tt.min(),Tt.min(),eo.empty(),0)}static newFoundDocument(e,t,r){return new ur(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new ur(e,2,t,Tt.min(),eo.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,Tt.min(),eo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class AP{constructor(e,t=null,r=[],o=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=m,this.ut=null}}function Zx(n,e=null,t=[],r=[],o=null,l=null,c=null){return new AP(n,e,t,r,o,l,c)}function Rf(n){const e=rt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Oy(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),db(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oy(r)).join(",")),e.ut=t}return e.ut}function mb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!OP(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Gu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!e2(n.startAt,e.startAt)&&e2(n.endAt,e.endAt)}function WC(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function KC(n,e){return n.filters.filter(t=>t instanceof to&&t.field.isEqual(e))}function Yx(n,e,t){let r=zC,o=!0;for(const l of KC(n,e)){let c=zC,m=!0;switch(l.op){case"<":case"<=":c=CP(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,m=!1;break;case"!=":case"not-in":c=zC}qx({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];qx({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function Qx(n,e,t){let r=Oh,o=!0;for(const l of KC(n,e)){let c=Oh,m=!0;switch(l.op){case">=":case">":c=DP(l.value),m=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,m=!1;break;case"!=":case"not-in":c=Oh}Wx({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Wx({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class to extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new SP(e,t,r):"array-contains"===t?new kP(e,r):"in"===t?new NP(e,r):"not-in"===t?new PP(e,r):"array-contains-any"===t?new RP(e,r):new to(e,t,r)}static ct(e,t,r){return"in"===t?new MP(e,r):new xP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Fh(t,this.value)):null!==t&&Nf(this.value)===Nf(t)&&this.at(Fh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SP extends to{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.at(t)}}class MP extends to{constructor(e,t){super(e,"in",t),this.keys=Jx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xP extends to{constructor(e,t){super(e,"not-in",t),this.keys=Jx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class kP extends to{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fb(t)&&pb(t.arrayValue,this.value)}}class NP extends to{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pb(this.value.arrayValue,t)}}class PP extends to{constructor(e,t){super(e,"not-in",t)}matches(e){if(pb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pb(this.value.arrayValue,t)}}class RP extends to{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pb(this.value.arrayValue,r))}}class Lh{constructor(e,t){this.position=e,this.inclusive=t}}class Fy{constructor(e,t="asc"){this.field=e,this.dir=t}}function OP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Xx(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(r=l.field.isKeyField()?et.comparator(et.fromName(c.referenceValue),t.key):Fh(c,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function e2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gu(n.position[t],e.position[t]))return!1;return!0}class Zc{constructor(e,t=null,r=[],o=[],l=null,c="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=v,this.lt=null,this.ft=null}}function t2(n,e,t,r,o,l,c,m){return new Zc(n,e,t,r,o,l,c,m)}function Ly(n){return new Zc(n)}function RT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function OT(n){for(const e of n.filters)if(e.ht())return e.field;return null}function FT(n){return null!==n.collectionGroup}function Vy(n){const e=rt(n);if(null===e.lt){e.lt=[];const t=OT(e),r=RT(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Fy(t)),e.lt.push(new Fy(Yr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Fy(Yr.keyField(),l))}}}return e.lt}function gl(n){const e=rt(n);if(!e.ft)if("F"===e.limitType)e.ft=Zx(e.path,e.collectionGroup,Vy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Vy(e))t.push(new Fy(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Lh(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Lh(e.startAt.position,e.startAt.inclusive):null;e.ft=Zx(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function n2(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yb(n,e){return mb(gl(n),gl(e))&&n.limitType===e.limitType}function r2(n){return`${Rf(gl(n))}|lt:${n.limitType}`}function LT(n){return`Query(target=${function TP(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Oy(r.value)}`;var r}).join(", ")}]`),db(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Oy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Oy(t)).join(",")),`Target(${e})`}(gl(n))}; limitType=${n.limitType})`}function VT(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):et.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,c){const m=Xx(o,l,c);return o.inclusive?m<=0:m<0}(t.startAt,Vy(t),r)||t.endAt&&!function(o,l,c){const m=Xx(o,l,c);return o.inclusive?m>=0:m>0}(t.endAt,Vy(t),r)));var t,r}function i2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function o2(n){return(e,t)=>{let r=!1;for(const o of Vy(n)){const l=LP(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function LP(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(o,l,c){const m=l.data.field(o),v=c.data.field(o);return null!==m&&null!==v?Fh(m,v):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function s2(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hb(e)?"-0":e}}function a2(n){return{integerValue:""+n}}function l2(n,e){return jx(e)?a2(e):s2(n,e)}class ZC{constructor(){this._=void 0}}function VP(n,e,t){return n instanceof By?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Of?c2(n,e):n instanceof Ff?d2(n,e):function(r,o){const l=u2(r,o),c=h2(l)+h2(r._t);return PT(l)&&PT(r._t)?a2(c):s2(r.wt,c)}(n,e)}function BP(n,e,t){return n instanceof Of?c2(n,e):n instanceof Ff?d2(n,e):t}function u2(n,e){return n instanceof Uy?PT(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class By extends ZC{}class Of extends ZC{constructor(e){super(),this.elements=e}}function c2(n,e){const t=p2(e);for(const r of n.elements)t.some(o=>Gu(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ff extends ZC{constructor(e){super(),this.elements=e}}function d2(n,e){let t=p2(e);for(const r of n.elements)t=t.filter(o=>!Gu(o,r));return{arrayValue:{values:t}}}class Uy extends ZC{constructor(e,t){super(),this.wt=e,this._t=t}}function h2(n){return Ur(n.integerValue||n.doubleValue)}function p2(n){return fb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _b{constructor(e,t){this.field=e,this.transform=t}}class jP{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QC{}function f2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gy(n.key,kr.none()):new jy(n.key,n.data,kr.none());{const t=n.data,r=eo.empty();let o=new Kn(Yr.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);null===c&&l.length>1&&(l=l.popLast(),c=t.field(l)),null===c?r.delete(l):r.set(l,c),o=o.add(l)}return new Yc(n.key,r,new Na(o.toArray()),kr.none())}}function GP(n,e,t){n instanceof jy?function(r,o,l){const c=r.value.clone(),m=y2(r.fieldTransforms,o,l.transformResults);c.setAll(m),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Yc?function(r,o,l){if(!YC(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=y2(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(m2(r)),m.setAll(c),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vb(n,e,t,r){return n instanceof jy?function(o,l,c,m){if(!YC(o.precondition,l))return c;const v=o.value.clone(),E=_2(o.fieldTransforms,m,l);return v.setAll(E),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yc?function(o,l,c,m){if(!YC(o.precondition,l))return c;const v=_2(o.fieldTransforms,m,l),E=l.data;return E.setAll(m2(o)),E.setAll(v),l.convertToFoundDocument(l.version,E).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(c=t,YC(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c);var l,c}function HP(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=u2(r.transform,o||null);null!=l&&(null===t&&(t=eo.empty()),t.set(r.field,l))}return t||null}function g2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Py(t,r,(o,l)=>function UP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Of&&r instanceof Of||t instanceof Ff&&r instanceof Ff?Py(t.elements,r.elements,Gu):t instanceof Uy&&r instanceof Uy?Gu(t._t,r._t):t instanceof By&&r instanceof By);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jy extends QC{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yc extends QC{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function m2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function y2(n,e,t){const r=new Map;kt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,m=e.data.field(l.field);r.set(l.field,BP(c,m,t[o]))}return r}function _2(n,e,t){const r=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);r.set(o.field,VP(l,c,e))}return r}class Gy extends QC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BT extends QC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $P{constructor(e){this.count=e}}var pi,_n;function v2(n){switch(n){default:return ut();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function b2(n){if(void 0===n)return hi("GRPC error has no .code"),_e.UNKNOWN;switch(n){case pi.OK:return _e.OK;case pi.CANCELLED:return _e.CANCELLED;case pi.UNKNOWN:return _e.UNKNOWN;case pi.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case pi.INTERNAL:return _e.INTERNAL;case pi.UNAVAILABLE:return _e.UNAVAILABLE;case pi.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case pi.NOT_FOUND:return _e.NOT_FOUND;case pi.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case pi.ABORTED:return _e.ABORTED;case pi.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case pi.DATA_LOSS:return _e.DATA_LOSS;default:return ut()}}(_n=pi||(pi={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class Vh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xf(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Vx(this.inner)}size(){return this.innerSize}}const zP=new Br(et.comparator);function Vs(){return zP}const w2=new Br(et.comparator);function bb(...n){let e=w2;for(const t of n)e=e.insert(t.key,t);return e}function E2(n){let e=w2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hu(){return wb()}function I2(){return wb()}function wb(){return new Vh(n=>n.toString(),(n,e)=>n.isEqual(e))}const qP=new Br(et.comparator),WP=new Kn(et.comparator);function Qt(...n){let e=WP;for(const t of n)e=e.add(t);return e}const KP=new Kn(Kt);function JC(){return KP}class Eb{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ib.createSynthesizedTargetChangeForCurrentChange(e,t)),new Eb(Tt.min(),r,JC(),Vs(),Qt())}}class Ib{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ib(Ii.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class XC{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class C2{constructor(e,t){this.targetId=e,this.It=t}}class D2{constructor(e,t,r=Ii.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class A2{constructor(){this.Tt=0,this.Et=S2(),this.At=Ii.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Qt(),t=Qt(),r=Qt();return this.Et.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ut()}}),new Ib(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=S2()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class ZP{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Vs(),this.Bt=T2(),this.Lt=new Kn(Kt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const l=o.target;if(WC(l))if(0===r){const c=new et(l.path);this.Kt(t,c,ur.newNoDocument(c,Tt.min()))}else kt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,c)=>{const m=this.Ht(c);if(m){if(l.current&&WC(m.target)){const v=new et(m.target.path);null!==this.$t.get(v)||this.Xt(c,v)||this.Kt(c,v,ur.newNoDocument(v,e))}l.vt&&(t.set(c,l.St()),l.Dt())}});let r=Qt();this.Bt.forEach((l,c)=>{let m=!0;c.forEachWhile(v=>{const E=this.Ht(v);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.$t.forEach((l,c)=>c.setReadTime(e));const o=new Eb(e,t,this.Lt,this.$t,r);return this.$t=Vs(),this.Bt=T2(),this.Lt=new Kn(Kt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new A2,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Kn(Kt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new A2),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function T2(){return new Br(et.comparator)}function S2(){return new Br(et.comparator)}const YP={asc:"ASCENDING",desc:"DESCENDING"},QP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class JP{constructor(e,t){this.databaseId=e,this.dt=t}}function Cb(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(n,e){return n.dt?e.toBase64():e.toUint8Array()}function XP(n,e){return Cb(n,e.toTimestamp())}function Li(n){return kt(!!n),Tt.fromTimestamp(function(e){const t=Rh(e);return new Ar(t.seconds,t.nanos)}(n))}function UT(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function x2(n){const e=yn.fromString(n);return kt(B2(e)),e}function Db(n,e){return UT(n.databaseId,e.path)}function $u(n,e){const t=x2(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(N2(t))}function jT(n,e){return UT(n.databaseId,e)}function k2(n){const e=x2(n);return 4===e.length?yn.emptyPath():N2(e)}function Ab(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function N2(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function P2(n,e,t){return{name:Db(n,e),fields:t.value.mapValue.fields}}function R2(n,e,t){const r=$u(n,e.name),o=Li(e.updateTime),l=new eo({mapValue:{fields:e.fields}}),c=ur.newFoundDocument(r,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Tb(n,e){let t;if(e instanceof jy)t={update:P2(n,e.key,e.value)};else if(e instanceof Gy)t={delete:Db(n,e.key)};else if(e instanceof Yc)t={update:P2(n,e.key,e.data),updateMask:lR(e.fieldMask)};else{if(!(e instanceof BT))return ut();t={verify:Db(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof By)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Of)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ff)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uy)return{fieldPath:l.field.canonicalString(),increment:c._t};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:XP(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ut()),t;var o}function GT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?kr.updateTime(Li(o.updateTime)):void 0!==o.exists?kr.exists(o.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,c){let m=null;"setToServerValue"in c?(kt("REQUEST_TIME"===c.setToServerValue),m=new By):"appendMissingElements"in c?m=new Of(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new Ff(c.removeAllFromArray.values||[]):"increment"in c?m=new Uy(l,c.increment):ut();const v=Yr.fromServerFormat(c.fieldPath);return new _b(v,m)}(n,o)):[];var o;if(e.update){const o=$u(n,e.update.name),l=new eo({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Na((e.updateMask.fieldPaths||[]).map(E=>Yr.fromServerFormat(E)));return new Yc(o,l,c,t,r)}return new jy(o,l,t,r)}if(e.delete){const o=$u(n,e.delete);return new Gy(o,t)}if(e.verify){const o=$u(n,e.verify);return new BT(o,t)}return ut()}function O2(n,e){return{documents:[jT(n,e.path)]}}function F2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=jT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=jT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const E=v.map(S=>function(N){if("=="===N.op){if($x(N.value))return{unaryFilter:{field:Hy(N.field),op:"IS_NAN"}};if(Hx(N.value))return{unaryFilter:{field:Hy(N.field),op:"IS_NULL"}}}else if("!="===N.op){if($x(N.value))return{unaryFilter:{field:Hy(N.field),op:"IS_NOT_NAN"}};if(Hx(N.value))return{unaryFilter:{field:Hy(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hy(N.field),op:oR(N.op),value:N.value}}}(S));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(v){if(0!==v.length)return v.map(E=>{return{field:Hy((S=E).field),direction:iR(S.dir)};var S})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=(E=e.limit,n.dt||db(E)?E:{value:E});var E,m,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function L2(n){let e=k2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){kt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let l=[];t.where&&(l=V2(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Fy($y((N=S).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,db(N)?null:N}(t.limit));let v=null;var S;t.startAt&&(v=new Lh((S=t.startAt).values||[],!!S.before));let E=null;return t.endAt&&(E=function(S){return new Lh(S.values||[],!S.before)}(t.endAt)),t2(e,o,c,l,m,"F",v,E)}function V2(n){return n?void 0!==n.unaryFilter?[aR(n)]:void 0!==n.fieldFilter?[sR(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>V2(e)).reduce((e,t)=>e.concat(t)):ut():[]}function iR(n){return YP[n]}function oR(n){return QP[n]}function Hy(n){return{fieldPath:n.canonicalString()}}function $y(n){return Yr.fromServerFormat(n.fieldPath)}function sR(n){return to.create($y(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function aR(n){switch(n.unaryFilter.op){case"IS_NAN":const e=$y(n.unaryFilter.field);return to.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=$y(n.unaryFilter.field);return to.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$y(n.unaryFilter.field);return to.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$y(n.unaryFilter.field);return to.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function lR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=U2(e)),e=uR(n.get(t),e);return U2(e)}function uR(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function U2(n){return n+"\x01\x01"}function zu(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=n.indexOf("\x01",l);switch((c<0||c>t)&&ut(),n.charAt(c+1)){case"\x01":const m=n.substring(l,c);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(l,c),o+="\0";break;case"\x11":o+=n.substring(l,c+1);break;default:ut()}l=c+2}return new yn(r)}const j2=["userId","batchId"];function eD(n,e){return[n,ns(e)]}function G2(n,e,t){return[n,ns(e),t]}const cR={},dR=["prefixPath","collectionGroup","readTime","documentId"],hR=["prefixPath","collectionGroup","documentId"],pR=["collectionGroup","readTime","prefixPath","documentId"],fR=["canonicalId","targetId"],gR=["targetId","path"],mR=["path","targetId"],yR=["collectionId","parent"],_R=["indexId","uid"],vR=["uid","sequenceNumber"],bR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wR=["indexId","uid","orderedDocumentKey"],ER=["userId","collectionPath","documentId"],IR=["userId","collectionPath","largestBatchId"],CR=["userId","collectionGroup","largestBatchId"],H2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DR=[...H2,"documentOverlays"],$2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],z2=$2,AR=[...z2,"indexConfiguration","indexState","indexEntries"];class HT extends Ox{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Vi(n,e){const t=rt(n);return Xl.N(t.ee,e)}class $T{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&GP(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I2();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(o.key)?null:m;const v=f2(c,m);null!==v&&r.set(o.key,v),c.isValidDocument()||c.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Py(this.mutations,e.mutations,(t,r)=>g2(t,r))&&Py(this.baseMutations,e.baseMutations,(t,r)=>g2(t,r))}}class zT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){kt(e.mutations.length===r.length);let o=qP;const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new zT(e,t,r,o)}}class qT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bh{constructor(e,t,r,o,l=Tt.min(),c=Tt.min(),m=Ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m}withSequenceNumber(e){return new Bh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class q2{constructor(e){this.ne=e}}function W2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Db(o=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Cb(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lf(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Lf(e.version)}}var o,l;return r}function tD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vf(n){const e=new Ar(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Bf(n,e){const t=(e.baseMutations||[]).map(l=>GT(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(c.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>GT(n.ne,l)),o=Ar.fromMillis(e.localWriteTimeMs);return new $T(e.batchId,o,t,r)}function Sb(n){const e=Vf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vf(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var o;return void 0!==n.query.documents?(kt(1===(o=n.query).documents.length),r=gl(Ly(k2(o.documents[0])))):r=gl(L2(n.query)),new Bh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ii.fromBase64String(n.resumeToken))}function K2(n,e){const t=Lf(e.snapshotVersion),r=Lf(e.lastLimboFreeSnapshotVersion);let o;o=WC(e.target)?O2(n.ne,e.target):F2(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rf(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function WT(n){const e=L2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?n2(e,e.limit,"L"):e}function KT(n,e){return new qT(e.largestBatchId,GT(n.ne,e.overlayMutation))}function Z2(n,e){const t=e.path.lastSegment();return[n,ns(e.path.popLast()),t]}function Y2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Lf(r.readTime),documentKey:ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class SR{getBundleMetadata(e,t){return Q2(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Q2(e).put({bundleId:(r=t).id,createTime:Lf(Li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return J2(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:WT(o.bundledQuery),readTime:Vf(o.readTime)};var o})}saveNamedQuery(e,t){return J2(e).put({name:(r=t).name,readTime:Lf(Li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Q2(n){return Vi(n,"bundles")}function J2(n){return Vi(n,"namedQueries")}class nD{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new nD(e,t.uid||"")}getOverlay(e,t){return Mb(e).get(Z2(this.userId,t)).next(r=>r?KT(this.wt,r):null)}getOverlays(e,t){const r=Hu();return de.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((l,c)=>{const m=new qT(t,c);o.push(this.ie(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(ns(c.getCollectionPath())));const l=[];return o.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Mb(e).W("collectionPathOverlayIndex",m))}),de.waitFor(l)}getOverlaysForCollection(e,t,r){const o=Hu(),l=ns(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Mb(e).K("collectionPathOverlayIndex",c).next(m=>{for(const v of m){const E=KT(this.wt,v);o.set(E.getKey(),E)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=Hu();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mb(e).J({index:"collectionGroupOverlayIndex",range:m},(v,E,S)=>{const N=KT(this.wt,E);l.size()<o||N.largestBatchId===c?(l.set(N.getKey(),N),c=N.largestBatchId):S.done()}).next(()=>l)}ie(e,t){return Mb(e).put(function(r,o,l){const[c,m,v]=Z2(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:v,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Tb(r.ne,l.mutation)}}(this.wt,this.userId,t))}}function Mb(n){return Vi(n,"documentOverlays")}class Uf{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Ur(e.integerValue));else if("doubleValue"in e){const r=Ur(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),hb(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(kf(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?zx(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ut()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),et.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function MR(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function X2(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=MR(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Uf.ye=new Uf;class xR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=X2(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=X2(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class kR{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class NR{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class xb{constructor(){this.Me=new xR,this.Fe=new kR(this.Me),this.$e=new NR(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class jf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jf(this.indexId,this.documentKey,this.arrayValue,r)}}function Gf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ek(n.arrayValue,e.arrayValue),0!==t?t:(t=ek(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function ek(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PR{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=TT(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Sf(e);let o=0,l=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const c=r[o];if(!this.je(this.Ke,c)||!this.We(this.Ue[l++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(l>=this.Ue.length||!this.We(this.Ue[l++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class RR{constructor(){this.ze=new ZT}addToCollectionParentIndex(e,t){return this.ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ka.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ka.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class ZT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Kn(yn.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Kn(yn.comparator)).toArray()}}const rD=new Uint8Array(0);class OR{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ZT,this.Je=new Vh(r=>Rf(r),(r,o)=>mb(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:r,parent:ns(o)};return tk(e).put(l)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[kx(t),""],!1,!0);return tk(e).K(o).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(zu(c.parent))}return r})}addFieldIndex(e,t){const r=iD(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete o.indexId;const l=r.add(o);if(t.indexState){const c=Nb(e);return l.next(m=>{c.put(Y2(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=iD(e),o=Nb(e),l=kb(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=kb(e);let o=!0;const l=new Map;return de.forEach(this.Ye(t),c=>this.Xe(e,c).next(m=>{o&&(o=!!m),l.set(c,m)})).next(()=>{if(o){let c=Qt();const m=[];return de.forEach(l,(v,E)=>{var S;Ue("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${Rf(t)}`);const N=function(Zt,Gt){const on=TT(Gt);if(void 0===on)return null;for(const kn of KC(Zt,on.fieldPath))switch(kn.op){case"array-contains-any":return kn.value.arrayValue.values||[];case"array-contains":return[kn.value]}return null}(E,v),B=function(Zt,Gt){const on=new Map;for(const kn of Sf(Gt))for(const Do of KC(Zt,kn.fieldPath))switch(Do.op){case"==":case"in":on.set(kn.fieldPath.canonicalString(),Do.value);break;case"not-in":case"!=":return on.set(kn.fieldPath.canonicalString(),Do.value),Array.from(on.values())}return null}(E,v),W=function(Zt,Gt){const on=[];let kn=!0;for(const Do of Sf(Gt)){const Wb=0===Do.kind?Yx(Zt,Do.fieldPath,Zt.startAt):Qx(Zt,Do.fieldPath,Zt.startAt);on.push(Wb.value),kn&&(kn=Wb.inclusive)}return new Lh(on,kn)}(E,v),oe=function(Zt,Gt){const on=[];let kn=!0;for(const Do of Sf(Gt)){const Wb=0===Do.kind?Qx(Zt,Do.fieldPath,Zt.endAt):Yx(Zt,Do.fieldPath,Zt.endAt);on.push(Wb.value),kn&&(kn=Wb.inclusive)}return new Lh(on,kn)}(E,v),Ne=this.Ze(v,E,W),ze=this.Ze(v,E,oe),St=this.tn(v,E,B),Lt=this.en(v.indexId,N,Ne,W.inclusive,ze,oe.inclusive,St);return de.forEach(Lt,Zt=>r.j(Zt,t.limit).next(Gt=>{Gt.forEach(on=>{const kn=et.fromSegments(on.documentKey);c.has(kn)||(c=c.add(kn),m.push(kn))})}))}).next(()=>m)}return de.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,l,c,m){const v=(null!=t?t.length:1)*Math.max(r.length,l.length),E=v/(null!=t?t.length:1),S=[];for(let N=0;N<v;++N){const B=t?this.nn(t[N/E]):rD,W=this.sn(e,B,r[N%E],o),oe=this.rn(e,B,l[N%E],c),Ne=m.map(ze=>this.sn(e,B,ze,!0));S.push(...this.createRange(W,oe,Ne))}return S}sn(e,t,r,o){const l=new jf(e,et.empty(),t,r);return o?l:l.Le()}rn(e,t,r,o){const l=new jf(e,et.empty(),t,r);return o?l.Le():l}Xe(e,t){const r=new PR(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{let c=null;for(const m of l)r.Ge(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Ye(t),o=>this.Xe(e,o).next(l=>{l?0!==r&&l.fields.length<function(c){let m=new Kn(Yr.comparator),v=!1;for(const E of c.filters){const S=E;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field))}for(const E of c.orderBy)E.field.isKeyField()||(m=m.add(E.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new xb;for(const o of Sf(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const c=r.Be(o.kind);Uf.ye.re(l,c)}return r.Oe()}nn(e){const t=new xb;return Uf.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new xb;return Uf.ye.re(Pf(this.databaseId,t),r.Be(function(o){const l=Sf(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new xb);let l=0;for(const c of Sf(e)){const m=r[l++];for(const v of o)if(this.cn(t,c.fieldPath)&&fb(m))o=this.an(o,c,m);else{const E=v.Be(c.kind);Uf.ye.re(m,E)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const m of o){const v=new xb;v.seed(m.Oe()),Uf.ye.re(c,v.Be(t.kind)),l.push(v)}return l}cn(e,t){return!!e.filters.find(r=>r instanceof to&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iD(e),o=Nb(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(l=>{const c=[];return de.forEach(l,m=>o.get([m.indexId,this.uid]).next(v=>{c.push(function(E,S){const N=S?new lb(S.sequenceNumber,new ka(Vf(S.readTime),new et(zu(S.documentKey)),S.largestBatchId)):lb.empty(),B=E.fields.map(([W,oe])=>new GC(Yr.fromServerFormat(W),oe));return new jC(E.indexId,E.collectionGroup,B,N)}(m,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:Kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=iD(e),l=Nb(e);return this.ln(e).next(c=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,v=>l.put(Y2(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,l)=>{const c=r.get(o.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,v=>this.fn(e,o,v).next(E=>{const S=this.dn(l,v);return E.isEqual(S)?de.resolve():this._n(e,l,v,E,S)}))))})}wn(e,t,r,o){return kb(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return kb(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=kb(e);let l=new Kn(Gf);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,m)=>{l=l.add(new jf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}dn(e,t){let r=new Kn(Gf);const o=this.on(t,e);if(null==o)return r;const l=TT(t);if(null!=l){const c=e.data.field(l.fieldPath);if(fb(c))for(const m of c.arrayValue.values||[])r=r.add(new jf(t.indexId,e.key,this.nn(m),o))}else r=r.add(new jf(t.indexId,e.key,rD,o));return r}_n(e,t,r,o,l){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,v,E,S,N){const B=m.getIterator(),W=v.getIterator();let oe=Ry(B),Ne=Ry(W);for(;oe||Ne;){let ze=!1,St=!1;if(oe&&Ne){const Lt=E(oe,Ne);Lt<0?St=!0:Lt>0&&(ze=!0)}else null!=oe?St=!0:ze=!0;ze?(S(Ne),Ne=Ry(W)):St?(N(oe),oe=Ry(B)):(oe=Ry(B),Ne=Ry(W))}}(o,l,Gf,m=>{c.push(this.wn(e,t,r,m))},m=>{c.push(this.mn(e,t,r,m))}),de.waitFor(c)}ln(e){let t=1;return Nb(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Gf(c,m)).filter((c,m,v)=>!m||0!==Gf(c,v[m-1]));const o=[];o.push(e);for(const c of r){const m=Gf(c,e),v=Gf(c,t);if(0===m)o[0]=e.Le();else if(m>0&&v<0)o.push(c),o.push(c.Le());else if(v>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2)l.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,rD,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,rD,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nk)}getMinOffset(e,t){return de.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||ut())).next(nk)}}function tk(n){return Vi(n,"collectionParents")}function kb(n){return Vi(n,"indexEntries")}function iD(n){return Vi(n,"indexConfiguration")}function Nb(n){return Vi(n,"indexState")}function nk(n){kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;ST(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ka(e.readTime,e.documentKey,t)}const rk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ik(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let m=0;const v=r.J({range:c},(S,N,B)=>(m++,B.delete()));l.push(v.next(()=>{kt(1===m)}));const E=[];for(const S of t.mutations){const N=G2(e,S.key.path,t.batchId);l.push(o.delete(N)),E.push(S.key)}return de.waitFor(l).next(()=>E)}function oD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class sD{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){kt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new sD(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).J({index:"userMutationsIndex",range:r},(o,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=zy(e),c=Uh(e);return c.add({}).next(m=>{kt("number"==typeof m);const v=new $T(m,t,r,o),E=function(B,W,oe){const Ne=oe.baseMutations.map(St=>Tb(B.ne,St)),ze=oe.mutations.map(St=>Tb(B.ne,St));return{userId:W,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Ne,mutations:ze}}(this.wt,this.userId,v),S=[];let N=new Kn((B,W)=>Kt(B.canonicalString(),W.canonicalString()));for(const B of o){const W=G2(this.userId,B.key.path,m);N=N.add(B.key.path.popLast()),S.push(c.put(E)),S.push(l.put(W,cR))}return N.forEach(B=>{S.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.gn[m]=v.keys()}),de.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return Uh(e).get(t).next(r=>r?(kt(r.userId===this.userId),Bf(this.wt,r)):null)}yn(e,t){return this.gn[t]?de.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Uh(e).J({index:"userMutationsIndex",range:o},(c,m,v)=>{m.userId===this.userId&&(kt(m.batchId>=r),l=Bf(this.wt,m)),v.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).K("userMutationsIndex",t).next(r=>r.map(o=>Bf(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=eD(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return zy(e).J({range:o},(c,m,v)=>{const[E,S,N]=c,B=zu(S);if(E===this.userId&&t.path.isEqual(B))return Uh(e).get(N).next(W=>{if(!W)throw ut();kt(W.userId===this.userId),l.push(Bf(this.wt,W))});v.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Kt);const o=[];return t.forEach(l=>{const c=eD(this.userId,l.path),m=IDBKeyRange.lowerBound(c),v=zy(e).J({range:m},(E,S,N)=>{const[B,W,oe]=E,Ne=zu(W);B===this.userId&&l.path.isEqual(Ne)?r=r.add(oe):N.done()});o.push(v)}),de.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=eD(this.userId,r),c=IDBKeyRange.lowerBound(l);let m=new Kn(Kt);return zy(e).J({range:c},(v,E,S)=>{const[N,B,W]=v,oe=zu(B);N===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(W)):S.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Uh(e).get(l).next(c=>{if(null===c)throw ut();kt(c.userId===this.userId),r.push(Bf(this.wt,c))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ik(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return zy(e).J({range:r},(l,c,m)=>{if(l[0]===this.userId){const v=zu(l[1]);o.push(v)}else m.done()}).next(()=>{kt(0===o.length)})})}containsKey(e,t){return ok(e,this.userId,t)}Tn(e){return sk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ok(n,e,t){const r=eD(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return zy(n).J({range:l,H:!0},(m,v,E)=>{const[S,N,B]=m;S===e&&N===o&&(c=!0),E.done()}).next(()=>c)}function Uh(n){return Vi(n,"mutations")}function zy(n){return Vi(n,"documentMutations")}function sk(n){return Vi(n,"mutationQueues")}class Hf{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Hf(0)}static Rn(){return new Hf(-1)}}class FR{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Hf(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Tt.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qy(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return qy(e).J((c,m)=>{const v=Sb(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,l.push(this.removeTargetData(e,v)))}).next(()=>de.waitFor(l)).next(()=>o)}forEachTarget(e,t){return qy(e).J((r,o)=>{const l=Sb(o);t(l)})}bn(e){return ak(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}Pn(e,t){return ak(e).put("targetGlobalKey",t)}vn(e,t){return qy(e).put(K2(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Rf(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return qy(e).J({range:o,index:"queryTargetsIndex"},(c,m,v)=>{const E=Sb(m);mb(t,E.target)&&(l=E,v.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=jh(e);return t.forEach(c=>{const m=ns(c.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=jh(e);return de.forEach(t,l=>{const c=ns(l.path);return de.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=jh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=jh(e);let l=Qt();return o.J({range:r,H:!0},(c,m,v)=>{const E=zu(c[1]),S=new et(E);l=l.add(S)}).next(()=>l)}containsKey(e,t){const r=ns(t.path),o=IDBKeyRange.bound([r],[kx(r)],!1,!0);let l=0;return jh(e).J({index:"documentTargetsIndex",H:!0,range:o},([c,m],v,E)=>{0!==c&&(l++,E.done())}).next(()=>l>0)}te(e,t){return qy(e).get(t).next(r=>r?Sb(r):null)}}function qy(n){return Vi(n,"targets")}function ak(n){return Vi(n,"targetGlobal")}function jh(n){return Vi(n,"targetDocuments")}function lk([n,e],[t,r]){const o=Kt(n,t);return 0===o?Kt(e,r):o}class LR{constructor(e){this.Sn=e,this.buffer=new Kn(lk),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ph(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Nh(r)}yield t.kn(3e5)}))}}class BR{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Ls.ot);const r=new LR(t);return this.On.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.On.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(rk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rk):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,o,l,c,m,v,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,c=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(E=Date.now(),DT()<=b.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(m-c)+`ms\n\tRemoved ${l} targets in `+(v-m)+`ms\n\tRemoved ${N} documents in `+(E-v)+`ms\nTotal Duration: ${E-S}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class UR{constructor(e,t){this.db=e,this.garbageCollector=new BR(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return aD(e,r)}removeReference(e,t,r){return aD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aD(e,t)}Un(e,t){return function(r,o){let l=!1;return sk(r).Y(c=>ok(r,c,o).next(m=>(m&&(l=!0),de.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ln(e,(c,m)=>{if(m<=t){const v=this.Un(e,c).next(E=>{if(!E)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),jh(e).delete([0,ns(c.path)])))});o.push(v)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aD(e,t)}Ln(e,t){const r=jh(e);let o,l=Ls.ot;return r.J({index:"documentTargetsIndex"},([c,m],{path:v,sequenceNumber:E})=>{0===c?(l!==Ls.ot&&t(new et(zu(o)),l),l=E,o=v):l=Ls.ot}).next(()=>{l!==Ls.ot&&t(new et(zu(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aD(n,e){return jh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ns(e.path),sequenceNumber:r}));var r}class uk{constructor(){this.changes=new Vh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jR{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $f(e).put(r)}removeEntry(e,t,r){return $f(e).delete(function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],tD(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=ur.newInvalidDocument(t);return $f(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pb(t))},(o,l)=>{r=this.Kn(t,l)}).next(()=>r)}Gn(e,t){let r={size:0,document:ur.newInvalidDocument(t)};return $f(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pb(t))},(o,l)=>{r={document:this.Kn(t,l),size:oD(l)}}).next(()=>r)}getEntries(e,t){let r=Vs();return this.Qn(e,t,(o,l)=>{const c=this.Kn(o,l);r=r.insert(o,c)}).next(()=>r)}jn(e,t){let r=Vs(),o=new Br(et.comparator);return this.Qn(e,t,(l,c)=>{const m=this.Kn(l,c);r=r.insert(l,m),o=o.insert(l,oD(c))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return de.resolve();let o=new Kn(pk);t.forEach(v=>o=o.add(v));const l=IDBKeyRange.bound(Pb(o.first()),Pb(o.last())),c=o.getIterator();let m=c.getNext();return $f(e).J({index:"documentKeyIndex",range:l},(v,E,S)=>{const N=et.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;m&&pk(m,N)<0;)r(m,null),m=c.getNext();m&&m.isEqual(N)&&(r(m,E),m=c.hasNext()?c.getNext():null),m?S.q(Pb(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),tD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $f(e).K(IDBKeyRange.bound(o,l,!0)).next(c=>{let m=Vs();for(const v of c){const E=this.Kn(et.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(E.key,E)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=Vs();const c=hk(t,r),m=hk(t,ka.max());return $f(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(v,E,S)=>{const N=this.Kn(et.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);l=l.insert(N.key,N),l.size===o&&S.done()}).next(()=>l)}newChangeBuffer(e){return new GR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dk(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}qn(e,t){return dk(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function TR(n,e){let t;if(e.document)t=R2(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),o=Vf(e.noDocument.readTime);t=ur.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=et.fromSegments(e.unknownDocument.path),o=Vf(e.unknownDocument.version);t=ur.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Ar(r[0],r[1]);return Tt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return ur.newInvalidDocument(e)}}function ck(n){return new jR(n)}class GR extends uk{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Vh(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Kn((l,c)=>Kt(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const m=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,m.readTime)),c.isValidDocument()){const v=W2(this.zn.wt,c);o=o.add(l.path.popLast()),r+=oD(v)-m.size,t.push(this.zn.addEntry(e,l,v))}else if(r-=m.size,this.trackRemovals){const v=W2(this.zn.wt,c.convertToNoDocument(Tt.min()));t.push(this.zn.addEntry(e,l,v))}}),o.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((l,c)=>{this.Hn.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function dk(n){return Vi(n,"remoteDocumentGlobal")}function $f(n){return Vi(n,"remoteDocumentsV14")}function Pb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hk(n,e){const t=e.documentKey.path.toArray();return[n,tD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pk(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Kt(t[l],r[l]),o)return o;return o=Kt(t.length,r.length),o||(o=Kt(t[t.length-2],r[r.length-2]),o||Kt(t[t.length-1],r[r.length-1]))}class HR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fk{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&vb(r.mutation,o,Na.empty(),Ar.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const o=Hu();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let c=bb();return l.forEach((m,v)=>{c=c.insert(m,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Hu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,o){let l=Vs();const c=wb(),m=wb();return t.forEach((v,E)=>{const S=r.get(E.key);o.has(E.key)&&(void 0===S||S.mutation instanceof Yc)?l=l.insert(E.key,E):void 0!==S&&(c.set(E.key,S.mutation.getFieldMask()),vb(S.mutation,E,S.mutation.getFieldMask(),Ar.now()))}),this.recalculateAndSaveOverlays(e,l).next(v=>(v.forEach((E,S)=>c.set(E,S)),t.forEach((E,S)=>{var N;return m.set(E,new HR(S,null!==(N=c.get(E))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=wb();let o=new Br((c,m)=>c-m),l=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(v=>{const E=t.get(v);if(null===E)return;let S=r.get(v)||Na.empty();S=m.applyToLocalView(E,S),r.set(v,S);const N=(o.get(m.batchId)||Qt()).add(v);o=o.insert(m.batchId,N)})}).next(()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),E=v.key,S=v.value,N=I2();S.forEach(B=>{if(!l.has(B)){const W=f2(t.get(B),r.get(B));null!==W&&N.set(B,W),l=l.add(B)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,N))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):de.resolve(Hu());let m=-1,v=l;return c.next(E=>de.forEach(E,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),l.get(S)?de.resolve():this.getBaseDocument(e,S,N).next(B=>{v=v.insert(S,B)}))).next(()=>this.populateOverlays(e,E,l)).next(()=>this.computeViews(e,v,E,Qt())).next(S=>({batchId:m,changes:E2(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let o=bb();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let l=bb();return this.indexManager.getCollectionParents(e,o).next(c=>de.forEach(c,m=>{const v=(E=t,S=m.child(o),new Zc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(E=>{E.forEach((S,N)=>{l=l.insert(S,N)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((m,v)=>{const E=v.getKey();null===o.get(E)&&(o=o.insert(E,ur.newInvalidDocument(E)))});let c=bb();return o.forEach((m,v)=>{const E=l.get(m);void 0!==E&&vb(E.mutation,v,Na.empty(),Ar.now()),VT(t,v)&&(c=c.insert(m,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(ur.newInvalidDocument(t))}}class $R{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return de.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Li(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:WT(r.bundledQuery),readTime:Li(r.readTime)}),de.resolve();var r}}class zR{constructor(){this.overlays=new Br(et.comparator),this.Xn=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hu();return de.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.ie(e,t,l)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=Hu(),l=t.length+1,c=new et(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const v=m.getNext().value,E=v.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===l&&v.largestBatchId>r&&o.set(v.getKey(),v)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new Br((E,S)=>E-S);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let S=l.get(E.largestBatchId);null===S&&(S=Hu(),l=l.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const m=Hu(),v=l.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,S)=>m.set(E,S)),!(m.size()>=o)););return de.resolve(m)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qT(t,r));let l=this.Xn.get(t);void 0===l&&(l=Qt(),this.Xn.set(t,l)),this.Xn.set(t,l.add(r.key))}}class YT{constructor(){this.Zn=new Kn(Bi.ts),this.es=new Kn(Bi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Bi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Bi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new et(new yn([])),r=new Bi(t,e),o=new Bi(t,e+1),l=[];return this.es.forEachInRange([r,o],c=>{this.rs(c),l.push(c.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new et(new yn([])),r=new Bi(t,e),o=new Bi(t,e+1);let l=Qt();return this.es.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Bi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Bi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return et.comparator(e.key,t.key)||Kt(e.ls,t.ls)}static ns(e,t){return Kt(e.ls,t.ls)||et.comparator(e.key,t.key)}}class qR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Kn(Bi.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const l=this.fs;this.fs++;const c=new $T(l,t,r,o);this.mutationQueue.push(c);for(const m of o)this.ds=this.ds.add(new Bi(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),l=o<0?0:o;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bi(t,0),o=new Bi(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,o],c=>{const m=this._s(c.ls);l.push(m)}),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Kt);return t.forEach(o=>{const l=new Bi(o,0),c=new Bi(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,c],m=>{r=r.add(m.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;et.isDocumentKey(l)||(l=l.child(""));const c=new Bi(new et(l),0);let m=new Kn(Kt);return this.ds.forEachWhile(v=>{const E=v.key.path;return!!r.isPrefixOf(E)&&(E.length===o&&(m=m.add(v.ls)),!0)},c),de.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){kt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(t.mutations,o=>{const l=new Bi(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Bi(t,0),o=this.ds.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WR{constructor(e){this.ps=e,this.docs=new Br(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():ur.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Vs();const l=new et(t.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:m,value:{document:v}}=c.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||ST(Px(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ut()}Is(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KR(this)}getSize(e){return de.resolve(this.size)}}class KR extends uk{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class ZR{constructor(e){this.persistence=e,this.Ts=new Vh(t=>Rf(t),mb),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Es=0,this.As=new YT,this.targetCount=0,this.Rs=Hf.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),de.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Hf(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.vn(t),de.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Ts.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(l).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.As.containsKey(t))}}class gk{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ls(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new ZR(this),this.indexManager=new RR,this.remoteDocumentCache=new WR(r=>this.referenceDelegate.Ss(r)),this.wt=new q2(t),this.Ds=new $R(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new qR(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const o=new YR(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(l=>this.referenceDelegate.xs(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ns(e,t){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class YR extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class lD{constructor(e){this.persistence=e,this.ks=new YT,this.Os=null}static Ms(e){return new lD(e)}get Fs(){if(this.Os)return this.Os;throw ut()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),de.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Fs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const o=et.fromPath(r);return this.$s(e,o).next(l=>{l||t.removeEntry(o,Tt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return de.or([()=>de.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class QR{constructor(e){this.wt=e}O(e,t,r,o){const l=new HC("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",j2,{unique:!0}),m.createObjectStore("documentMutations"),mk(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),mk(e)),c=c.next(()=>function(m){const v=m.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",E)}(l))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(m,v){return v.store("mutations").K().next(E=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",j2,{unique:!0});const S=v.store("mutations"),N=E.map(B=>S.put(B));return de.waitFor(N)})}(e,l))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Bs(l))),r<6&&o>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),r<7&&o>=7&&(c=c.next(()=>this.Us(l))),r<8&&o>=8&&(c=c.next(()=>this.qs(e,l))),r<9&&o>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Ks(l))),r<11&&o>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:ER});v.createIndex("collectionPathOverlayIndex",IR,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",CR,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:dR});v.createIndex("documentKeyIndex",hR),v.createIndex("collectionGroupIndex",pR)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.Qs(e,l))),r<15&&o>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:_R}).createIndex("sequenceNumberIndex",vR,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:bR}).createIndex("documentKeyIndex",wR,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=oD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>de.forEach(o,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(m=>de.forEach(m,v=>{kt(v.userId===l.userId);const E=Bf(this.wt,v);return ik(e,l.userId,E).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.J((c,m)=>{const v=new yn(c),E=[0,ns(v)];l.push(t.get(E).next(S=>S?de.resolve():t.put({targetId:0,path:ns(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:yR});const r=t.store("collectionParents"),o=new ZT,l=c=>{if(o.add(c)){const m=c.lastSegment(),v=c.popLast();return r.put({collectionId:m,parent:ns(v)})}};return t.store("remoteDocuments").J({H:!0},(c,m)=>{const v=new yn(c);return l(v.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,m,v],E)=>{const S=zu(m);return l(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const l=Sb(o),c=K2(this.wt,l);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((l,c)=>{const m=t.store("remoteDocumentsV14"),v=(E=c,E.document?new et(yn.fromString(E.document.name).popFirst(5)):E.noDocument?et.fromSegments(E.noDocument.path):E.unknownDocument?et.fromSegments(E.unknownDocument.path):ut()).path.toArray();var E;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(S))}).next(()=>de.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=ck(this.wt),l=new gk(lD.Ms,this.wt.ne);return r.K().next(c=>{const m=new Map;return c.forEach(v=>{var E;let S=null!==(E=m.get(v.userId))&&void 0!==E?E:Qt();Bf(this.wt,v).keys().forEach(N=>S=S.add(N)),m.set(v.userId,S)}),de.forEach(m,(v,E)=>{const S=new Oi(E),N=nD.se(this.wt,S),B=l.getIndexManager(S),W=sD.se(S,this.wt,B,l.referenceDelegate);return new fk(o,W,N,B).recalculateAndSaveOverlaysForDocumentKeys(new HT(t,Ls.ot),v).next()})})}}function mk(n){n.createObjectStore("targetDocuments",{keyPath:gR}).createIndex("documentTargetsIndex",mR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fR,{unique:!0}),n.createObjectStore("targetGlobal")}const QT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JT{constructor(e,t,r,o,l,c,m,v,E,S,N=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=l,this.window=c,this.document=m,this.Ws=E,this.zs=S,this.Hs=N,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=B=>Promise.resolve(),!JT.V())throw new Oe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UR(this,o),this.ei=t+"main",this.wt=new q2(v),this.ni=new Xl(this.ei,this.Hs,new QR(this.wt)),this.Vs=new FR(this.referenceDelegate,this.wt),this.remoteDocumentCache=ck(this.wt),this.Ds=new SR,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(_e.FAILED_PRECONDITION,QT);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ls(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,y.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,y.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,y.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ph(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Rb(e).get("owner").next(t=>de.resolve(this.di(t)))}_i(e){return uD(e).delete(this.clientId)}wi(){var e=this;return(0,y.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Vi(r,"clientMetadata");return o.K().next(l=>{const c=e.gi(l,18e5),m=l.filter(v=>-1===c.indexOf(v));return de.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):Rb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Oe(_e.FAILED_PRECONDITION,QT);return!1}}return!(!this.networkEnabled||!this.inForeground)||uD(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,y.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HT(t,Ls.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>uD(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return sD.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OR(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return nD.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=15===(c=this.Hs)?AR:14===c?z2:13===c?$2:12===c?DR:11===c?H2:void ut();var c;let m;return this.ni.runTransaction(e,o,l,v=>(m=new HT(v,this.Ps?this.Ps.next():Ls.ot),"readwrite-primary"===t?this.ai(m).next(E=>!!E||this.hi(m)).next(E=>{if(!E)throw hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Oe(_e.FAILED_PRECONDITION,Rx);return r(m)}).next(E=>this.fi(m).next(()=>E)):this.bi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}bi(e){return Rb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(_e.FAILED_PRECONDITION,QT)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rb(e).put("owner",t)}static V(){return Xl.V()}li(e){const t=Rb(e);return t.get("owner").next(r=>this.di(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(hi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,h.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){hi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rb(n){return Vi(n,"owner")}function uD(n){return Vi(n,"clientMetadata")}function XT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eS{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Qt(),o=Qt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new eS(e,t.fromCache,r,o)}}class yk{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(l=>l||this.xi(e,t,o,r)).next(l=>l||this.Ni(e,t))}Ci(e,t){return de.resolve(null)}xi(e,t,r,o){return function FP(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Tt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(l=>{const c=this.ki(t,l);return this.Oi(t,c,r,o)?this.Ni(e,t):(DT()<=b.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),LT(t)),this.Mi(e,c,t,Nx(o,-1)))})}ki(e,t){let r=new Kn(o2(e));return t.forEach((o,l)=>{VT(e,l)&&(r=r.add(l))}),r}Oi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ni(e,t){return DT()<=b.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",LT(t)),this.Di.getDocumentsMatchingQuery(e,t,ka.min())}Mi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}class JR{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new Br(Kt),this.Bi=new Vh(l=>Rf(l),mb),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fk(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function _k(n,e,t,r){return new JR(n,e,t,r)}function vk(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,y.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],m=[];let v=Qt();for(const E of o){c.push(E.batchId);for(const S of E.mutations)v=v.add(S.key)}for(const E of l){m.push(E.batchId);for(const S of E.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(E=>({Ki:E,removedBatchIds:c,addedBatchIds:m}))})})}),tS.apply(this,arguments)}function XR(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,m,v,E){const S=v.batch,N=S.keys();let B=de.resolve();return N.forEach(W=>{B=B.next(()=>E.getEntry(m,W)).next(oe=>{const Ne=v.docVersions.get(W);kt(null!==Ne),oe.version.compareTo(Ne)<0&&(S.applyToRemoteDocument(oe,v),oe.isValidDocument()&&(oe.setReadTime(v.commitVersion),E.addEntry(oe)))})}),B.next(()=>c.mutationQueue.removeMutationBatch(m,S))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Qt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(m=m.add(c.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function bk(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function eO(n,e){const t=rt(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const m=[];e.targetChanges.forEach((S,N)=>{const B=o.get(N);if(!B)return;m.push(t.Vs.removeMatchingKeys(l,S.removedDocuments,N).next(()=>t.Vs.addMatchingKeys(l,S.addedDocuments,N)));let W=B.withSequenceNumber(l.currentSequenceNumber);var oe,Ne,ze;e.targetMismatches.has(N)?W=W.withResumeToken(Ii.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):S.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(S.resumeToken,r)),o=o.insert(N,W),Ne=W,ze=S,(0===(oe=B).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||ze.addedDocuments.size+ze.modifiedDocuments.size+ze.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(l,W))});let v=Vs(),E=Qt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,S))}),m.push(wk(l,c,e.documentUpdates).next(S=>{v=S.Gi,E=S.Qi})),!r.isEqual(Tt.min())){const S=t.Vs.getLastRemoteSnapshotVersion(l).next(N=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(S)}return de.waitFor(m).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,v,E)).next(()=>v)}).then(l=>(t.$i=o,l))}function wk(n,e,t){let r=Qt(),o=Qt();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=Vs();return t.forEach((m,v)=>{const E=l.get(m);v.isFoundDocument()!==E.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Tt.min())?(e.removeEntry(m,v.readTime),c=c.insert(m,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||0===v.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(v),c=c.insert(m,v)):Ue("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",v.version)}),{Gi:c,Qi:o}})}function tO(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wy(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(l=>l?(o=l,de.resolve(o)):t.Vs.allocateTargetId(r).next(c=>(o=new Bh(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Ky(n,e,t){return nS.apply(this,arguments)}function nS(){return nS=(0,y.Z)(function*(n,e,t){const r=rt(n),o=r.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ph(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),nS.apply(this,arguments)}function cD(n,e,t){const r=rt(n);let o=Tt.min(),l=Qt();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,v,E){const S=rt(m),N=S.Bi.get(E);return void 0!==N?de.resolve(S.$i.get(N)):S.Vs.getTargetData(v,E)}(r,c,gl(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,m.targetId).next(v=>{l=v})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?o:Tt.min(),t?l:Qt())).next(m=>(Ck(r,i2(e),m),{documents:m,ji:l})))}function Ek(n,e){const t=rt(n),r=rt(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.te(l,e).next(c=>c?c.target:null))}function Ik(n,e){const t=rt(n),r=t.Li.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,Nx(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Ck(t,e,o),o))}function Ck(n,e,t){let r=Tt.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Li.set(e,r)}function rS(){return rS=(0,y.Z)(function*(n,e,t,r){const o=rt(n);let l=Qt(),c=Vs();for(const E of t){const S=e.Wi(E.metadata.name);E.document&&(l=l.add(S));const N=e.zi(E);N.setReadTime(e.Hi(E.metadata.readTime)),c=c.insert(S,N)}const m=o.Ui.newChangeBuffer({trackRemovals:!0}),v=yield Wy(o,(E=r,gl(Ly(yn.fromString(`__bundle__/docs/${E}`)))));var E;return o.persistence.runTransaction("Apply bundle documents","readwrite",E=>wk(E,m,c).next(S=>(m.apply(E),S)).next(S=>o.Vs.removeMatchingKeysForTargetId(E,v.targetId).next(()=>o.Vs.addMatchingKeys(E,l,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(E,S.Gi,S.Qi)).next(()=>S.Gi)))}),rS.apply(this,arguments)}function rO(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,y.Z)(function*(n,e,t=Qt()){const r=yield Wy(n,gl(WT(e.bundledQuery))),o=rt(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const c=Li(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Ds.saveNamedQuery(l,e);const m=r.withResumeToken(Ii.EMPTY_BYTE_STRING,c);return o.$i=o.$i.insert(m.targetId,m),o.Vs.updateTargetData(l,m).next(()=>o.Vs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.Vs.addMatchingKeys(l,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(l,e))})}),iS.apply(this,arguments)}function Dk(n,e){return`firestore_clients_${n}_${e}`}function Ak(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function oS(n,e){return`firestore_targets_${n}_${e}`}class dD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let l,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(l=new Oe(o.error.code,o.error.message))),c?new dD(e,t,o.state,l):(hi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ob{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Oe(r.error.code,r.error.message))),l?new Ob(e,r.state,o):(hi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=JC();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=jx(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return o?new hD(e,l):(hi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sS{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sS(t.clientId,t.onlineState):(hi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aS{constructor(){this.activeTargetIds=JC()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lS{constructor(e,t,r,o,l){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Br(Kt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=Dk(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new aS),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const l=e.getItem(Dk(e.persistenceKey,o));if(l){const c=hD.Ji(o,l);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(oS(this.persistenceKey,e));if(r){const o=Ob.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,y.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(l){let c=Ls.ot;if(null!=l)try{const m=JSON.parse(l);kt("number"==typeof m),c=m}catch(m){hi("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);o!==Ls.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new dD(this.currentUser,e,t,r),l=Ak(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Yi())}pr(e){const t=Ak(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=oS(this.persistenceKey,e),l=new Ob(e,t,r);this.setItem(o,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return hD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return dD.Ji(new Oi(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Ob.Ji(o,t)}wr(e){return sS.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),l=this.gr(r),c=[],m=[];return l.forEach(v=>{o.has(v)||c.push(v)}),o.forEach(v=>{l.has(v)||m.push(v)}),this.syncEngine.Mr(c,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=JC();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Tk{constructor(){this.Fr=new aS,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new aS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iO{Br(e){}shutdown(){}}class Sk{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class sO{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class aO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,l){const c=this.oo(e,t);Ue("RestConnection","Sending: ",c,r);const m={};return this.uo(m,o,l),this.co(e,c,m,r).then(v=>(Ue("RestConnection","Received: ",v),v),v=>{throw sb("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}ao(e,t,r,o,l,c){return this.ro(e,t,r,o,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ny,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}oo(e,t){return`${this.so}/v1/${t}:${oO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((l,c)=>{const m=new sP;m.listenOnce(rP.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case CT.NO_ERROR:const E=m.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(E)),l(E);break;case CT.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),c(new Oe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case CT.HTTP_ERROR:const S=m.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const B=function(W){const oe=W.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(oe)>=0?oe:_e.UNKNOWN}(N.status);c(new Oe(B,N.message))}else c(new Oe(_e.UNKNOWN,"Server responded with status "+m.getStatus()))}else c(new Oe(_e.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);m.send(t,"POST",v,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=tP(),c=nP(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new oP({})),this.uo(m.initMessageHeaders,t,r),(0,h.uI)()||(0,h.b$)()||(0,h.d)()||(0,h.w1)()||(0,h.Mn)()||(0,h.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Ue("Connection","Creating WebChannel: "+v,m);const E=l.createWebChannel(v,m);let S=!1,N=!1;const B=new sO({jr:oe=>{N?Ue("Connection","Not sending because WebChannel is closed:",oe):(S||(Ue("Connection","Opening WebChannel transport."),E.open(),S=!0),Ue("Connection","WebChannel sending:",oe),E.send(oe))},Wr:()=>E.close()}),W=(oe,Ne,ze)=>{oe.listen(Ne,St=>{try{ze(St)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return W(E,UC.EventType.OPEN,()=>{N||Ue("Connection","WebChannel transport opened.")}),W(E,UC.EventType.CLOSE,()=>{N||(N=!0,Ue("Connection","WebChannel transport closed"),B.eo())}),W(E,UC.EventType.ERROR,oe=>{N||(N=!0,sb("Connection","WebChannel transport errored:",oe),B.eo(new Oe(_e.UNAVAILABLE,"The operation could not be completed")))}),W(E,UC.EventType.MESSAGE,oe=>{var Ne;if(!N){const ze=oe.data[0];kt(!!ze);const St=ze,Lt=St.error||(null===(Ne=St[0])||void 0===Ne?void 0:Ne.error);if(Lt){Ue("Connection","WebChannel received error:",Lt);const Zt=Lt.status;let Gt=function(kn){const Do=pi[kn];if(void 0!==Do)return b2(Do)}(Zt),on=Lt.message;void 0===Gt&&(Gt=_e.INTERNAL,on="Unknown error status: "+Zt+" with message "+Lt.message),N=!0,B.eo(new Oe(Gt,on)),E.close()}else Ue("Connection","WebChannel received:",ze),B.no(ze)}}),W(c,iP.STAT_EVENT,oe=>{oe.stat===Ax.PROXY?Ue("Connection","Detected buffering proxy"):oe.stat===Ax.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.Zr()},0),B}}function Mk(){return typeof window<"u"?window:null}function pD(){return typeof document<"u"?document:null}function Fb(n){return new JP(n,!0)}class uS{constructor(e,t,r=1e3,o=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class xk{constructor(e,t,r,o,l,c,m,v){this.js=e,this.Ao=r,this.Ro=o,this.bo=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new uS(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,y.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,y.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,y.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Oe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,y.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lO extends xk{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function tR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:ut(),o=e.targetChange.targetIds||[],l=function(v,E){return v.dt?(kt(void 0===E||"string"==typeof E),Ii.fromBase64String(E||"")):(kt(void 0===E||E instanceof Uint8Array),Ii.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(v){const E=void 0===v.code?_e.UNKNOWN:b2(v.code);return new Oe(E,v.message||"")}(c);t=new D2(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=$u(n,r.document.name),l=Li(r.document.updateTime),c=new eo({mapValue:{fields:r.document.fields}}),m=ur.newFoundDocument(o,l,c);t=new XC(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=$u(n,r.document),l=r.readTime?Li(r.readTime):Tt.min(),c=ur.newNoDocument(o,l);t=new XC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=$u(n,r.document);t=new XC([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ut();{const r=e.filter,l=new $P(r.count||0);t=new C2(r.targetId,l)}}var v;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return Tt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Tt.min():l.readTime?Li(l.readTime):Tt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Ab(this.wt),t.addTarget=function(o,l){let c;const m=l.target;return c=WC(m)?{documents:O2(o,m)}:{query:F2(o,m)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?c.resumeToken=M2(o,l.resumeToken):l.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Cb(o,l.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function rR(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Ab(this.wt),t.removeTarget=e,this.Mo(t)}}class uO extends xk{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function nR(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,o){let l=Li(r.updateTime?r.updateTime:o);return l.isEqual(Tt.min())&&(l=Li(o)),new jP(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.Jo(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ab(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tb(this.wt,r))};this.Mo(t)}}class cO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Oe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ro(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(_e.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.bo.ao(e,t,r,l,c,o)).catch(l=>{throw"FirebaseError"===l.name?(l.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(_e.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class dO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(hi(t),this.su=!1):Ue("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class hO{constructor(e,t,r,o,l){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(m=>{r.enqueueAndForget((0,y.Z)(function*(){var v;Gh(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,y.Z)(function*(E){const S=rt(E);S.lu.add(4),yield Zy(S),S._u.set("Unknown"),S.lu.delete(4),yield Lb(S)}),function(E){return v.apply(this,arguments)})(c))}))}),this._u=new dO(r,o)}}function Lb(n){return cS.apply(this,arguments)}function cS(){return cS=(0,y.Z)(function*(n){if(Gh(n))for(const e of n.fu)yield e(!0)}),cS.apply(this,arguments)}function Zy(n){return dS.apply(this,arguments)}function dS(){return dS=(0,y.Z)(function*(n){for(const e of n.fu)yield e(!1)}),dS.apply(this,arguments)}function fD(n,e){const t=rt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),fS(t)?pS(t):Qy(t).Co()&&hS(t,e))}function Vb(n,e){const t=rt(n),r=Qy(t);t.hu.delete(e),r.Co()&&kk(t,e),0===t.hu.size&&(r.Co()?r.ko():Gh(t)&&t._u.set("Unknown"))}function hS(n,e){n.wu.Nt(e.targetId),Qy(n).Qo(e)}function kk(n,e){n.wu.Nt(e),Qy(n).jo(e)}function pS(n){n.wu=new ZP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Qy(n).start(),n._u.iu()}function fS(n){return Gh(n)&&!Qy(n).Do()&&n.hu.size>0}function Gh(n){return 0===rt(n).lu.size}function Nk(n){n.wu=void 0}function pO(n){return gS.apply(this,arguments)}function gS(){return gS=(0,y.Z)(function*(n){n.hu.forEach((e,t)=>{hS(n,e)})}),gS.apply(this,arguments)}function fO(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,y.Z)(function*(n,e){Nk(n),fS(n)?(n._u.uu(e),pS(n)):n._u.set("Unknown")}),mS.apply(this,arguments)}function gO(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,y.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof D2&&2===e.state&&e.cause)try{yield(r=(0,y.Z)(function*(o,l){const c=l.cause;for(const m of l.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,c),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gD(n,r)}else if(e instanceof XC?n.wu.Ut(e):e instanceof C2?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Tt.min()))try{const r=yield bk(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const c=o.wu.Yt(l);return c.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.hu.get(v);E&&o.hu.set(v,E.withResumeToken(m.resumeToken,l))}}),c.targetMismatches.forEach(m=>{const v=o.hu.get(m);if(!v)return;o.hu.set(m,v.withResumeToken(Ii.EMPTY_BYTE_STRING,v.snapshotVersion)),kk(o,m);const E=new Bh(v.target,m,1,v.sequenceNumber);hS(o,E)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield gD(n,r)}var r}),yS.apply(this,arguments)}function gD(n,e,t){return _S.apply(this,arguments)}function _S(){return _S=(0,y.Z)(function*(n,e,t){if(!Ph(e))throw e;n.lu.add(1),yield Zy(n),n._u.set("Offline"),t||(t=()=>bk(n.localStore)),n.asyncQueue.enqueueRetryable((0,y.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Lb(n)}))}),_S.apply(this,arguments)}function Pk(n,e){return e().catch(t=>gD(n,t,e))}function Yy(n){return vS.apply(this,arguments)}function vS(){return vS=(0,y.Z)(function*(n){const e=rt(n),t=Hh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;mO(e);)try{const o=yield tO(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,yO(e,o)}catch(o){yield gD(e,o)}Rk(e)&&Ok(e)}),vS.apply(this,arguments)}function mO(n){return Gh(n)&&n.au.length<10}function yO(n,e){n.au.push(e);const t=Hh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Rk(n){return Gh(n)&&!Hh(n).Do()&&n.au.length>0}function Ok(n){Hh(n).start()}function _O(n){return bS.apply(this,arguments)}function bS(){return bS=(0,y.Z)(function*(n){Hh(n).Xo()}),bS.apply(this,arguments)}function vO(n){return wS.apply(this,arguments)}function wS(){return wS=(0,y.Z)(function*(n){const e=Hh(n);for(const t of n.au)e.Ho(t.mutations)}),wS.apply(this,arguments)}function bO(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,y.Z)(function*(n,e,t){const r=n.au.shift(),o=zT.from(r,e,t);yield Pk(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Yy(n)}),ES.apply(this,arguments)}function wO(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,y.Z)(function*(n,e){var t;e&&Hh(n).zo&&(yield(t=(0,y.Z)(function*(r,o){if(v2(l=o.code)&&l!==_e.ABORTED){const c=r.au.shift();Hh(r).No(),yield Pk(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Yy(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),Rk(n)&&Ok(n)}),IS.apply(this,arguments)}function Fk(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,y.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Gh(t);t.lu.add(3),yield Zy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Lb(t)}),CS.apply(this,arguments)}function DS(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,y.Z)(function*(n,e){const t=rt(n);e?(t.lu.delete(2),yield Lb(t)):e||(t.lu.add(2),yield Zy(t),t._u.set("Unknown"))}),AS.apply(this,arguments)}function Qy(n){return n.mu||(n.mu=function(e,t,r){const o=rt(e);return o.tu(),new lO(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:pO.bind(null,n),Jr:fO.bind(null,n),Go:gO.bind(null,n)}),n.fu.push(function(){var e=(0,y.Z)(function*(t){t?(n.mu.No(),fS(n)?pS(n):n._u.set("Unknown")):(yield n.mu.stop(),Nk(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Hh(n){return n.gu||(n.gu=function(e,t,r){const o=rt(e);return o.tu(),new uO(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:_O.bind(null,n),Jr:wO.bind(null,n),Yo:vO.bind(null,n),Jo:bO.bind(null,n)}),n.fu.push(function(){var e=(0,y.Z)(function*(t){t?(n.gu.No(),yield Yy(n)):(yield n.gu.stop(),n.au.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class TS{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,m=new TS(e,t,c,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(n,e){if(hi("AsyncQueue",`${e}: ${n}`),Ph(n))return new Oe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Xy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=bb(),this.sortedSet=new Br(this.comparator)}static emptySet(e){return new Xy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Lk{constructor(){this.yu=new Br(et.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ut():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class e_{constructor(e,t,r,o,l,c,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new e_(e,t,Xy.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class EO{constructor(){this.Iu=void 0,this.listeners=[]}}class IO{constructor(){this.queries=new Vh(e=>r2(e),yb),this.onlineState="Unknown",this.Tu=new Set}}function SS(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,y.Z)(function*(n,e){const t=rt(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new EO),o)try{l.Iu=yield t.onListen(r)}catch(c){const m=Jy(c,`Initialization of query '${LT(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&NS(t)}),MS.apply(this,arguments)}function xS(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,y.Z)(function*(n,e){const t=rt(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),kS.apply(this,arguments)}function CO(n,e){const t=rt(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const m of c.listeners)m.Au(o)&&(r=!0);c.Iu=o}}r&&NS(t)}function DO(n,e,t){const r=rt(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function NS(n){n.Tu.forEach(e=>{e.next()})}class PS{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new e_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=e_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class AO{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Vk{constructor(e){this.wt=e}Wi(e){return $u(this.wt,e)}zi(e){return e.metadata.exists?R2(this.wt,e.document,!1):ur.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Li(e)}}class TO{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Bk(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Vk(this.wt);for(const o of e)if(o.metadata.queries){const l=r.Wi(o.metadata.name);for(const c of o.metadata.queries){const m=(t.get(c)||Qt()).add(l);t.set(c,m)}}return t}complete(){var e=this;return(0,y.Z)(function*(){const t=yield function nO(n,e,t,r){return rS.apply(this,arguments)}(e.localStore,new Vk(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield rO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Bk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Uk{constructor(e){this.key=e}}class jk{constructor(e){this.key=e}}class Gk{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Qt(),this.mutatedKeys=Qt(),this.Lu=o2(e),this.Uu=new Xy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new Lk,o=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,E="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const B=o.get(S),W=VT(this.query,N)?N:null,oe=!!B&&this.mutatedKeys.has(B.key),Ne=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let ze=!1;B&&W?B.data.isEqual(W.data)?oe!==Ne&&(r.track({type:3,doc:W}),ze=!0):this.Qu(B,W)||(r.track({type:2,doc:W}),ze=!0,(v&&this.Lu(W,v)>0||E&&this.Lu(W,E)<0)&&(m=!0)):!B&&W?(r.track({type:0,doc:W}),ze=!0):B&&!W&&(r.track({type:1,doc:B}),ze=!0,(v||E)&&(m=!0)),ze&&(W?(c=c.add(W),l=Ne?l.add(S):l.delete(S)):(c=c.delete(S),l=l.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),l=l.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Gu:r,Oi:m,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((E,S)=>function(N,B){const W=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return W(N)-W(B)}(E.type,S.type)||this.Lu(E.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,v=m!==this.$u;return this.$u=m,0!==l.length||v?{snapshot:new e_(this.query,e.Uu,o,l,e.mutatedKeys,0===m,v,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Lk,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Qt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new jk(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Uk(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Qt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return e_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class SO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class MO{constructor(e){this.key=e,this.Xu=!1}}class xO{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Vh(m=>r2(m),yb),this.ec=new Map,this.nc=new Set,this.sc=new Br(et.comparator),this.ic=new Map,this.rc=new YT,this.oc={},this.uc=new Map,this.cc=Hf.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function kO(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,y.Z)(function*(n,e){const t=rM(n);let r,o;const l=t.tc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Yu();else{const c=yield Wy(t.localStore,gl(e));t.isPrimaryClient&&fD(t.remoteStore,c);const m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield OS(t,e,r,"current"===m)}return o}),RS.apply(this,arguments)}function OS(n,e,t,r){return FS.apply(this,arguments)}function FS(){return FS=(0,y.Z)(function*(n,e,t,r){n.hc=(S,N,B)=>{return(W=(0,y.Z)(function*(oe,Ne,ze,St){let Lt=Ne.view.Ku(ze);Lt.Oi&&(Lt=yield cD(oe.localStore,Ne.query,!1).then(({documents:on})=>Ne.view.Ku(on,Lt)));const Zt=St&&St.targetChanges.get(Ne.targetId),Gt=Ne.view.applyChanges(Lt,oe.isPrimaryClient,Zt);return qS(oe,Ne.targetId,Gt.zu),Gt.snapshot}),function(oe,Ne,ze,St){return W.apply(this,arguments)})(n,S,N,B);var W};const o=yield cD(n.localStore,e,!0),l=new Gk(e,o.ji),c=l.Ku(o.documents),m=Ib.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=l.applyChanges(c,n.isPrimaryClient,m);qS(n,t,v.zu);const E=new SO(e,t,l);return n.tc.set(e,E),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),v.snapshot}),FS.apply(this,arguments)}function NO(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,y.Z)(function*(n,e){const t=rt(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(l=>!yb(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ky(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Vb(t.remoteStore,r.targetId),t_(t,r.targetId)}).catch(Nh))):(t_(t,r.targetId),yield Ky(t.localStore,r.targetId,!0))}),LS.apply(this,arguments)}function VS(){return VS=(0,y.Z)(function*(n,e,t){const r=iM(n);try{const o=yield function(l,c){const m=rt(l),v=Ar.now(),E=c.reduce((B,W)=>B.add(W.key),Qt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",B=>{let W=Vs(),oe=Qt();return m.Ui.getEntries(B,E).next(Ne=>{W=Ne,W.forEach((ze,St)=>{St.isValidDocument()||(oe=oe.add(ze))})}).next(()=>m.localDocuments.getOverlayedDocuments(B,W)).next(Ne=>{S=Ne;const ze=[];for(const St of c){const Lt=HP(St,S.get(St.key).overlayedDocument);null!=Lt&&ze.push(new Yc(St.key,Lt,Kx(Lt.value.mapValue),kr.exists(!0)))}return m.mutationQueue.addMutationBatch(B,v,ze,c)}).next(Ne=>{N=Ne;const ze=Ne.applyToLocalDocumentSet(S,oe);return m.documentOverlayCache.saveOverlays(B,Ne.batchId,ze)})}).then(()=>({batchId:N.batchId,changes:E2(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,c,m){let v=l.oc[l.currentUser.toKey()];v||(v=new Br(Kt)),v=v.insert(c,m),l.oc[l.currentUser.toKey()]=v}(r,o.batchId,t),yield Qc(r,o.changes),yield Yy(r.remoteStore)}catch(o){const l=Jy(o,"Failed to persist write");t.reject(l)}}),VS.apply(this,arguments)}function Hk(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,y.Z)(function*(n,e){const t=rt(n);try{const r=yield eO(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.ic.get(l);c&&(kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Xu=!0:o.modifiedDocuments.size>0?kt(c.Xu):o.removedDocuments.size>0&&(kt(c.Xu),c.Xu=!1))}),yield Qc(t,r,e)}catch(r){yield Nh(r)}}),BS.apply(this,arguments)}function $k(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((l,c)=>{const m=c.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(l,c){const m=rt(l);m.onlineState=c;let v=!1;m.queries.forEach((E,S)=>{for(const N of S.listeners)N.Eu(c)&&(v=!0)}),v&&NS(m)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RO(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,y.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),l=o&&o.key;if(l){let c=new Br(et.comparator);c=c.insert(l,ur.newNoDocument(l,Tt.min()));const m=Qt().add(l),v=new Eb(Tt.min(),new Map,new Kn(Kt),c,m);yield Hk(r,v),r.sc=r.sc.remove(l),r.ic.delete(e),WS(r)}else yield Ky(r.localStore,e,!1).then(()=>t_(r,e,t)).catch(Nh)}),US.apply(this,arguments)}function OO(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,y.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const o=yield XR(t.localStore,e);zS(t,r,null),$S(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,o)}catch(o){yield Nh(o)}}),jS.apply(this,arguments)}function FO(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,y.Z)(function*(n,e,t){const r=rt(n);try{const o=yield function(l,c){const m=rt(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return m.mutationQueue.lookupMutationBatch(v,c).next(S=>(kt(null!==S),E=S.keys(),m.mutationQueue.removeMutationBatch(v,S))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,E,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>m.localDocuments.getDocuments(v,E))})}(r.localStore,e);zS(r,e,t),$S(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,o)}catch(o){yield Nh(o)}}),GS.apply(this,arguments)}function HS(){return HS=(0,y.Z)(function*(n,e){const t=rt(n);Gh(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const c=rt(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=Jy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),HS.apply(this,arguments)}function $S(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function zS(n,e,t){const r=rt(n);let o=r.oc[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function t_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||zk(n,r)})}function zk(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Vb(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),WS(n))}function qS(n,e,t){for(const r of t)r instanceof Uk?(n.rc.addReference(r.key,e),VO(n,r)):r instanceof jk?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||zk(n,r.key)):ut()}function VO(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.nc.add(r),WS(n))}function WS(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new et(yn.fromString(e)),r=n.cc.next();n.ic.set(r,new MO(t)),n.sc=n.sc.insert(t,r),fD(n.remoteStore,new Bh(gl(Ly(t.path)),r,2,Ls.ot))}}function Qc(n,e,t){return KS.apply(this,arguments)}function KS(){return KS=(0,y.Z)(function*(n,e,t){const r=rt(n),o=[],l=[],c=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,v)=>{c.push(r.hc(v,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,E.fromCache?"not-current":"current"),o.push(E);const S=eS.Vi(v.targetId,E);l.push(S)}}))}),yield Promise.all(c),r.Zu.Go(o),yield(m=(0,y.Z)(function*(v,E){const S=rt(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>de.forEach(E,B=>de.forEach(B.Pi,W=>S.persistence.referenceDelegate.addReference(N,B.targetId,W)).next(()=>de.forEach(B.vi,W=>S.persistence.referenceDelegate.removeReference(N,B.targetId,W)))))}catch(N){if(!Ph(N))throw N;Ue("LocalStore","Failed to update sequence numbers: "+N)}for(const N of E){const B=N.targetId;if(!N.fromCache){const W=S.$i.get(B),Ne=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);S.$i=S.$i.insert(B,Ne)}}}),function(v,E){return m.apply(this,arguments)})(r.localStore,l))}),KS.apply(this,arguments)}function BO(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,y.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield vk(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(c=>{c.forEach(m=>{m.reject(new Oe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.Ki)}var o}),ZS.apply(this,arguments)}function UO(n,e){const t=rt(n),r=t.ic.get(e);if(r&&r.Xu)return Qt().add(r.key);{let o=Qt();const l=t.ec.get(e);if(!l)return o;for(const c of l){const m=t.tc.get(c);o=o.unionWith(m.view.qu)}return o}}function jO(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,y.Z)(function*(n,e){const t=rt(n),r=yield cD(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&qS(t,e.targetId,o.zu),o}),YS.apply(this,arguments)}function GO(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,y.Z)(function*(n,e){const t=rt(n);return Ik(t.localStore,e).then(r=>Qc(t,r))}),QS.apply(this,arguments)}function HO(n,e,t,r){return JS.apply(this,arguments)}function JS(){return JS=(0,y.Z)(function*(n,e,t,r){const o=rt(n),l=yield function(c,m){const v=rt(c),E=rt(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.yn(S,m).next(N=>N?v.localDocuments.getDocuments(S,N):de.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Yy(o.remoteStore):"acknowledged"===t||"rejected"===t?(zS(o,e,r||null),$S(o,e),m=e,rt(rt(o.localStore).mutationQueue).In(m)):ut(),yield Qc(o,l)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),JS.apply(this,arguments)}function XS(){return XS=(0,y.Z)(function*(n,e){const t=rt(n);if(rM(t),iM(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield qk(t,r.toArray());t.ac=!0,yield DS(t.remoteStore,!0);for(const l of o)fD(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(t_(t,c),Ky(t.localStore,c,!0))),Vb(t.remoteStore,c)}),yield o,yield qk(t,r),function(l){const c=rt(l);c.ic.forEach((m,v)=>{Vb(c.remoteStore,v)}),c.rc.cs(),c.ic=new Map,c.sc=new Br(et.comparator)}(t),t.ac=!1,yield DS(t.remoteStore,!1)}}),XS.apply(this,arguments)}function qk(n,e,t){return eM.apply(this,arguments)}function eM(){return eM=(0,y.Z)(function*(n,e,t){const r=rt(n),o=[],l=[];for(const c of e){let m;const v=r.ec.get(c);if(v&&0!==v.length){m=yield Wy(r.localStore,gl(v[0]));for(const E of v){const S=r.tc.get(E),N=yield jO(r,S);N.snapshot&&l.push(N.snapshot)}}else{const E=yield Ek(r.localStore,c);m=yield Wy(r.localStore,E),yield OS(r,Wk(E),c,!1)}o.push(m)}return r.Zu.Go(l),o}),eM.apply(this,arguments)}function Wk(n){return t2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zO(n){const e=rt(n);return rt(rt(e.localStore).persistence).Ri()}function qO(n,e,t,r){return tM.apply(this,arguments)}function tM(){return tM=(0,y.Z)(function*(n,e,t,r){const o=rt(n);if(o.ac)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const l=o.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=yield Ik(o.localStore,i2(l[0])),m=Eb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(o,c,m);break}case"rejected":yield Ky(o.localStore,e,!0),t_(o,e,r);break;default:ut()}}),tM.apply(this,arguments)}function WO(n,e,t){return nM.apply(this,arguments)}function nM(){return nM=(0,y.Z)(function*(n,e,t){const r=rM(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Ue("SyncEngine","Adding an already active target "+o);continue}const l=yield Ek(r.localStore,o),c=yield Wy(r.localStore,l);yield OS(r,Wk(l),c.targetId,!1),fD(r.remoteStore,c)}for(const o of t)r.ec.has(o)&&(yield Ky(r.localStore,o,!1).then(()=>{Vb(r.remoteStore,o),t_(r,o)}).catch(Nh))}}),nM.apply(this,arguments)}function rM(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RO.bind(null,e),e.Zu.Go=CO.bind(null,e.eventManager),e.Zu.lc=DO.bind(null,e.eventManager),e}function iM(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FO.bind(null,e),e}class Kk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,y.Z)(function*(){t.wt=Fb(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return _k(this.persistence,new yk,e.initialUser,this.wt)}_c(e){return new gk(lD.Ms,this.wt)}dc(e){return new Tk}terminate(){var e=this;return(0,y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Zk extends Kk{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,y.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield iM(r.yc.syncEngine),yield Yy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return _k(this.persistence,new yk,e.initialUser,this.wt)}mc(e,t){return new VR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new bP(t,this.persistence);return new vP(e.asyncQueue,r)}_c(e){const t=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new JT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Mk(),pD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Tk}}class ZO extends Zk{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,y.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof lS&&(r.sharedClientState.syncEngine={kr:HO.bind(null,o),Or:qO.bind(null,o),Mr:WO.bind(null,o),Ri:zO.bind(null,o),Nr:GO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var l=(0,y.Z)(function*(c){yield function $O(n,e){return XS.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return l.apply(this,arguments)}}())})()}dc(e){const t=Mk();if(!lS.V(t))throw new Oe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oM{initialize(e,t){var r=this;return(0,y.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>$k(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=BO.bind(null,r.syncEngine),yield DS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new IO}createDatastore(e){const t=Fb(e.databaseInfo.databaseId),r=new aO(e.databaseInfo);return new cO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>$k(this.syncEngine,m,0),c=Sk.V()?new Sk:new iO,new hO(t,r,o,l,c);var t,r,o,l,c}createSyncEngine(e,t){return function(r,o,l,c,m,v,E){const S=new xO(r,o,l,c,m,v);return E&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,y.Z)(function*(t){const r=rt(t);Ue("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Zy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Yk(n,e=10240){let t=0;return{read:()=>(0,y.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,y.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YO{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Fi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,y.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,y.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,y.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const l=yield e.vc(o);return new AO(JSON.parse(l),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,y.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,y.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,y.Z)(function*(l,c){const m=rt(l),v=Ab(m.wt)+"/documents",E={documents:c.map(W=>Db(m.wt,W))},S=yield m.ao("BatchGetDocuments",v,E,c.length),N=new Map;S.forEach(W=>{const oe=function eR(n,e){return"found"in e?function(t,r){kt(!!r.found);const o=$u(t,r.found.name),l=Li(r.found.updateTime),c=new eo({mapValue:{fields:r.found.fields}});return ur.newFoundDocument(o,l,c)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const o=$u(t,r.missing),l=Li(r.readTime);return ur.newNoDocument(o,l)}(n,e):ut()}(m.wt,W);N.set(oe.key.toString(),oe)});const B=[];return c.forEach(W=>{const oe=N.get(W.toString());kt(!!oe),B.push(oe)}),B}),function(l,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=et.fromPath(o);e.mutations.push(new BT(l,e.precondition(l)))}),yield(r=(0,y.Z)(function*(o,l){const c=rt(o),m=Ab(c.wt)+"/documents",v={writes:l.map(E=>Tb(c.wt,E))};yield c.ro("Commit",m,v)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Oe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JO{constructor(e,t,r,o,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=l,this.Dc=r.maxAttempts,this.So=new uS(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,y.Z)(function*(){const t=new QO(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Nc(l)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!db(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!v2(t)}return!1}}class XO{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Oi.UNAUTHENTICATED,this.clientId=xx.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,y.Z)(function*(m){Ue("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Jy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Qk(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,y.Z)(function*(l){r.isEqual(l)||(yield vk(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sM.apply(this,arguments)}function Jk(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lM(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Fk(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>Fk(e.remoteStore,l)),n.onlineComponents=e}),aM.apply(this,arguments)}function lM(n){return uM.apply(this,arguments)}function uM(){return uM=(0,y.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Qk(n,new Kk)),n.offlineComponents}),uM.apply(this,arguments)}function yD(n){return cM.apply(this,arguments)}function cM(){return cM=(0,y.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield Jk(n,new oM)),n.onlineComponents}),cM.apply(this,arguments)}function Xk(n){return lM(n).then(e=>e.persistence)}function dM(n){return lM(n).then(e=>e.localStore)}function eN(n){return yD(n).then(e=>e.remoteStore)}function hM(n){return yD(n).then(e=>e.syncEngine)}function n_(n){return pM.apply(this,arguments)}function pM(){return pM=(0,y.Z)(function*(n){const e=yield yD(n),t=e.eventManager;return t.onListen=kO.bind(null,e.syncEngine),t.onUnlisten=NO.bind(null,e.syncEngine),t}),pM.apply(this,arguments)}function tN(n,e,t={}){const r=new Fi;return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(o,l,c,m,v){const E=new mD({next:N=>{l.enqueueAndForget(()=>xS(o,S));const B=N.docs.has(c);!B&&N.fromCache?v.reject(new Oe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&N.fromCache&&m&&"server"===m.source?v.reject(new Oe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),S=new PS(Ly(c.path),E,{includeMetadataChanges:!0,Du:!0});return SS(o,S)}(yield n_(n),n.asyncQueue,e,t,r)})),r.promise}function nN(n,e,t={}){const r=new Fi;return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(o,l,c,m,v){const E=new mD({next:N=>{l.enqueueAndForget(()=>xS(o,S)),N.fromCache&&"server"===m.source?v.reject(new Oe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),S=new PS(c,E,{includeMetadataChanges:!0,Du:!0});return SS(o,S)}(yield n_(n),n.asyncQueue,e,t,r)})),r.promise}const rN=new Map;function fM(n,e,t){if(!t)throw new Oe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iN(n,e,t,r){if(!0===e&&!0===r)throw new Oe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oN(n){if(!et.isDocumentKey(n))throw new Oe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sN(n){if(et.isDocumentKey(n))throw new Oe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _D(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_D(n);throw new Oe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aN(n,e){if(e<=0)throw new Oe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lN({}),this._settingsFrozen=!1,e instanceof Kc?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Oe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(o.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new uP;switch(t.type){case"gapi":const r=t.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new pP(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rN.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),rN.delete(e),t.terminate())}(this),Promise.resolve()}}class yr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class Co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class qu extends Co{constructor(e,t,r){super(e,t,Ly(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new et(e))}withConverter(e){return new qu(this.firestore,e,this._path)}}function uN(n,e,...t){if(n=(0,h.m9)(n),fM("collection","path",e),n instanceof Bb){const r=yn.fromString(e,...t);return sN(r),new qu(n,null,r)}{if(!(n instanceof yr||n instanceof qu))throw new Oe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return sN(r),new qu(n.firestore,null,r)}}function vD(n,e,...t){if(n=(0,h.m9)(n),1===arguments.length&&(e=xx.I()),fM("doc","path",e),n instanceof Bb){const r=yn.fromString(e,...t);return oN(r),new yr(n,null,new et(r))}{if(!(n instanceof yr||n instanceof qu))throw new Oe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return oN(r),new yr(n.firestore,n instanceof qu?n.converter:null,new et(r))}}function cN(n,e){return n=(0,h.m9)(n),e=(0,h.m9)(e),(n instanceof yr||n instanceof qu)&&(e instanceof yr||e instanceof qu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dN(n,e){return n=(0,h.m9)(n),e=(0,h.m9)(e),n instanceof Co&&e instanceof Co&&n.firestore===e.firestore&&yb(n._query,e._query)&&n.converter===e.converter}class cF{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new uS(this,"async_queue_retry"),this.Kc=()=>{const t=pD();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=pD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=pD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Fi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,y.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ph(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,hi("INTERNAL UNHANDLED ERROR: ",function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=TS.createAndSchedule(this,e,t,r,l=>this.Wc(l));return this.$c.push(o),o}Gc(){this.Bc&&ut()}verifyOperationInProgress(){}zc(){var e=this;return(0,y.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function gM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Tr extends Bb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new cF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||hN(this),this._firestoreClient.terminate()}}function fi(n){return n._firestoreClient||hN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function hN(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IP(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new XO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pN(n,e,t){const r=new Fi;return n.asyncQueue.enqueue((0,y.Z)(function*(){try{yield Qk(n,t),yield Jk(n,e),r.resolve()}catch(o){const l=o;if(!("FirebaseError"===(c=l).name?c.code===_e.FAILED_PRECONDITION||c.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var c})).then(()=>r.promise)}function fN(n){if(n._initialized||n._terminated)throw new Oe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(Ii.fromBase64String(e))}catch(t){throw new Oe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zf{constructor(e){this._methodName=e}}class bD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const wF=/^__.*__$/;class EF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms):new jy(e,this.data,t,this.fieldTransforms)}}class gN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class wD{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new wD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return CD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(mN(this.Zc)&&wF.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class IF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Fb(e)}aa(e,t,r,o=!1){return new wD({Zc:e,methodName:t,ca:r,path:Yr.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function qf(n){const e=n._freezeSettings(),t=Fb(n._databaseId);return new IF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ED(n,e,t,r,o,l={}){const c=n.aa(l.merge||l.mergeFields?2:0,e,t,o);vM("Data must be an object, but it was:",c,r);const m=vN(r,c);let v,E;if(l.merge)v=new Na(c.fieldMask),E=c.fieldTransforms;else if(l.mergeFields){const S=[];for(const N of l.mergeFields){const B=bM(e,N,t);if(!c.contains(B))throw new Oe(_e.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);wN(S,B)||S.push(B)}v=new Na(S),E=c.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,E=c.fieldTransforms;return new EF(new eo(m),v,E)}class Ub extends zf{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ub}}function yN(n,e,t){return new wD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class mM extends zf{_toFieldTransform(e){return new _b(e.path,new By)}isEqual(e){return e instanceof mM}}class CF extends zf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=yN(this,e,!0),r=this.ha.map(l=>Wf(l,t)),o=new Of(r);return new _b(e.path,o)}isEqual(e){return this===e}}class DF extends zf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=yN(this,e,!0),r=this.ha.map(l=>Wf(l,t)),o=new Ff(r);return new _b(e.path,o)}isEqual(e){return this===e}}class AF extends zf{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Uy(e.wt,l2(e.wt,this.la));return new _b(e.path,t)}isEqual(e){return this===e}}function yM(n,e,t,r){const o=n.aa(1,e,t);vM("Data must be an object, but it was:",o,r);const l=[],c=eo.empty();xf(r,(v,E)=>{const S=ID(e,v,t);E=(0,h.m9)(E);const N=o.ia(S);if(E instanceof Ub)l.push(S);else{const B=Wf(E,N);null!=B&&(l.push(S),c.set(S,B))}});const m=new Na(l);return new gN(c,m,o.fieldTransforms)}function _M(n,e,t,r,o,l){const c=n.aa(1,e,t),m=[bM(e,r,t)],v=[o];if(l.length%2!=0)throw new Oe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<l.length;B+=2)m.push(bM(e,l[B])),v.push(l[B+1]);const E=[],S=eo.empty();for(let B=m.length-1;B>=0;--B)if(!wN(E,m[B])){const W=m[B];let oe=v[B];oe=(0,h.m9)(oe);const Ne=c.ia(W);if(oe instanceof Ub)E.push(W);else{const ze=Wf(oe,Ne);null!=ze&&(E.push(W),S.set(W,ze))}}const N=new Na(E);return new gN(S,N,c.fieldTransforms)}function _N(n,e,t,r=!1){return Wf(t,n.aa(r?4:3,e))}function Wf(n,e){if(bN(n=(0,h.m9)(n)))return vM("Unsupported field value:",e,n),vN(n,e);if(n instanceof zf)return function(t,r){if(!mN(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const c of t){let m=Wf(c,r.ra(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,h.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return l2(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Ar.fromDate(t);return{timestampValue:Cb(r.wt,o)}}if(t instanceof Ar){const o=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cb(r.wt,o)}}if(t instanceof bD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:M2(r.wt,t._byteString)};if(t instanceof yr){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:UT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${_D(t)}`)}(n,e)}function vN(n,e){const t={};return Vx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xf(n,(r,o)=>{const l=Wf(o,e.ea(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function bN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof bD||n instanceof Wu||n instanceof yr||n instanceof zf)}function vM(n,e,t){if(!bN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_D(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function bM(n,e,t){if((e=(0,h.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return ID(n,e);throw CD("Field path arguments must be of type string or ",n,!1,void 0,t)}const TF=new RegExp("[~\\*/\\[\\]]");function ID(n,e,t){if(e.search(TF)>=0)throw CD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch{throw CD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CD(n,e,t,r,o){const l=r&&!r.isEmpty(),c=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(l||c)&&(v+=" (found",l&&(v+=` in field ${r}`),c&&(v+=` in document ${o}`),v+=")"),new Oe(_e.INVALID_ARGUMENT,m+n+v)}function wN(n,e){return n.some(t=>t.isEqual(e))}class jb{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SF extends jb{data(){return super.data()}}function DD(n,e){return"string"==typeof e?ID(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class Kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends jb{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gb extends Xc{data(e={}){return super.data(e)}}class $h{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gb(this._firestore,this._userDataWriter,r.key,r,new Kf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Gb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Kf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const m=new Gb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Kf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,E=-1;return 0!==c.type&&(v=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),1!==c.type&&(l=l.add(c.doc),E=l.indexOf(c.doc.key)),{type:MF(c.type),doc:m,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function EN(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $h&&e instanceof $h&&n._firestore===e._firestore&&dN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function IN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hb{}function zh(n,...e){for(const t of e)n=t._apply(n);return n}class xF extends Hb{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=qf(e.firestore),r=function(o,l,c,m,v,E,S){let N;if(v.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){MN(S,E);const W=[];for(const oe of S)W.push(SN(m,o,oe));N={arrayValue:{values:W}}}else N=SN(m,o,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||MN(S,E),N=_N(c,"where",S,"in"===E||"not-in"===E);const B=to.create(v,E,N);return function(W,oe){if(oe.ht()){const ze=OT(W);if(null!==ze&&!ze.isEqual(oe.field))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ze.toString()}' and '${oe.field.toString()}'`);const St=RT(W);null!==St&&xN(0,oe.field,St)}const Ne=function(ze,St){for(const Lt of ze.filters)if(St.indexOf(Lt.op)>=0)return Lt.op;return null}(W,function(ze){switch(ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Ne)throw new Oe(_e.INVALID_ARGUMENT,Ne===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,B),B}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Co(e.firestore,e.converter,function(o,l){const c=o.filters.concat([l]);return new Zc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class NF extends Hb{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Fy(o,l);return function(m,v){if(null===RT(m)){const E=OT(m);null!==E&&xN(0,E,v.field)}}(r,c),c}(e._query,this.fa,this.wa);return new Co(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Zc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CN extends Hb{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Co(e.firestore,e.converter,n2(e._query,this.ma,this.ga))}}class DN extends Hb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=TN(e,this.type,this.ya,this.pa);return new Co(e.firestore,e.converter,(o=t,new Zc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AN extends Hb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=TN(e,this.type,this.ya,this.pa);return new Co(e.firestore,e.converter,(o=t,new Zc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function TN(n,e,t,r){if(t[0]=(0,h.m9)(t[0]),t[0]instanceof jb)return function(o,l,c,m,v){if(!m)throw new Oe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const S of Vy(o))if(S.field.isKeyField())E.push(Pf(l,m.key));else{const N=m.data.field(S.field);if(kT(N))throw new Oe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const B=S.field.canonicalString();throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}E.push(N)}return new Lh(E,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qf(n.firestore);return function(l,c,m,v,E,S){const N=l.explicitOrderBy;if(E.length>N.length)throw new Oe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let W=0;W<E.length;W++){const oe=E[W];if(N[W].field.isKeyField()){if("string"!=typeof oe)throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof oe}`);if(!FT(l)&&-1!==oe.indexOf("/"))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${oe}' contains a slash.`);const Ne=l.path.child(yn.fromString(oe));if(!et.isDocumentKey(Ne))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const ze=new et(Ne);B.push(Pf(c,ze))}else{const Ne=_N(m,v,oe);B.push(Ne)}}return new Lh(B,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function SN(n,e,t){if("string"==typeof(t=(0,h.m9)(t))){if(""===t)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FT(e)&&-1!==t.indexOf("/"))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!et.isDocumentKey(r))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pf(n,new et(r))}if(t instanceof yr)return Pf(n,t._key);throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_D(t)}.`)}function MN(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xN(n,e,t){if(!t.isEqual(e))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const UF={maxAttempts:5};class wM{convertValue(e,t="none"){switch(Nf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return xf(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new bD(Ur(e.latitude),Ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ux(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cb(e));default:return null}}convertTimestamp(e){const t=Rh(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);kt(B2(r));const o=new Kc(r.get(1),r.get(3)),l=new et(r.popFirst(5));return o.isEqual(t)||hi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function AD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jF extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,t)}}class kN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qf(e)}set(e,t,r){this._verifyNotCommitted();const o=qh(e,this._firestore),l=AD(o.converter,t,r),c=ED(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,kr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=qh(e,this._firestore);let c;return c="string"==typeof(t=(0,h.m9)(t))||t instanceof Jc?_M(this._dataReader,"WriteBatch.update",l._key,t,r,o):yM(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qh(e,this._firestore);return this._mutations=this._mutations.concat(new Gy(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qh(n,e){if((n=(0,h.m9)(n)).firestore!==e)throw new Oe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Zf extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,t)}}function NN(n,e,t){n=mn(n,yr);const r=mn(n.firestore,Tr),o=AD(n.converter,e,t);return r_(r,[ED(qf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,kr.none())])}function PN(n,e,t,...r){n=mn(n,yr);const o=mn(n.firestore,Tr),l=qf(o);let c;return c="string"==typeof(e=(0,h.m9)(e))||e instanceof Jc?_M(l,"updateDoc",n._key,e,t,r):yM(l,"updateDoc",n._key,e),r_(o,[c.toMutation(n._key,kr.exists(!0))])}function RN(n,...e){var t,r,o;n=(0,h.m9)(n);let l={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||gM(e[c])||(l=e[c],c++);const m={includeMetadataChanges:l.includeMetadataChanges};if(gM(e[c])){const N=e[c];e[c]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[c+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[c+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let v,E,S;if(n instanceof yr)E=mn(n.firestore,Tr),S=Ly(n._key.path),v={next:N=>{e[c]&&e[c](EM(E,n,N))},error:e[c+1],complete:e[c+2]};else{const N=mn(n,Co);E=mn(N.firestore,Tr),S=N._query;const B=new Zf(E);v={next:W=>{e[c]&&e[c](new $h(E,B,N,W))},error:e[c+1],complete:e[c+2]},IN(n._query)}return function(N,B,W,oe){const Ne=new mD(oe),ze=new PS(B,Ne,W);return N.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return SS(yield n_(N),ze)})),()=>{Ne.Tc(),N.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return xS(yield n_(N),ze)}))}}(fi(E),S,m,v)}function r_(n,e){return function(t,r){const o=new Fi;return t.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function PO(n,e,t){return VS.apply(this,arguments)}(yield hM(t),r,o)})),o.promise}(fi(n),e)}function EM(n,e,t){const r=t.docs.get(e._key),o=new Zf(n);return new Xc(n,o,e._key,r,new Kf(t.hasPendingWrites,t.fromCache),e.converter)}class QF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qf(e)}get(e){const t=qh(e,this._firestore),r=new jF(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ut();const l=o[0];if(l.isFoundDocument())return new jb(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new jb(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const o=qh(e,this._firestore),l=AD(o.converter,t,r),c=ED(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const l=qh(e,this._firestore);let c;return c="string"==typeof(t=(0,h.m9)(t))||t instanceof Jc?_M(this._dataReader,"Transaction.update",l._key,t,r,o):yM(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qh(e,this._firestore),r=new Zf(this._firestore);return super.get(e).then(o=>new Xc(this._firestore,r,t._key,o._document,new Kf(!1,!1),t.converter))}}function IM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function FN(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function LN(){if(!function wP(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ny=p.SDK_VERSION,(0,p._registerComponent)(new ga.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Tr(o,new dP(t.getProvider("auth-internal")),new fP(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,p.registerVersion)(Tx,"3.4.11",n),(0,p.registerVersion)(Tx,"3.4.11","esm2017")}();class $b{constructor(e){this._delegate=e}static fromBase64String(e){return LN(),new $b(Wu.fromBase64String(e))}static fromUint8Array(e){return FN(),new $b(Wu.fromUint8Array(e))}toBase64(){return LN(),this._delegate.toBase64()}toUint8Array(){return FN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CM(n){return function s3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class a3{enableIndexedDbPersistence(e,t){return function pF(n,e){fN(n=mn(n,Tr));const t=fi(n),r=n._freezeSettings(),o=new oM;return pN(t,o,new Zk(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fF(n){fN(n=mn(n,Tr));const e=fi(n),t=n._freezeSettings(),r=new oM;return pN(e,r,new ZO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gF(n){if(n._initialized&&!n._terminated)throw new Oe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{yield(t=(0,y.Z)(function*(r){if(!Xl.V())return Promise.resolve();const o=r+"main";yield Xl.delete(o)}),function(r){return t.apply(this,arguments)})(XT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lF(n,e,t,r={}){var o;const l=(n=mn(n,Bb))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&sb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,m;if("string"==typeof r.mockUserToken)c=r.mockUserToken,m=Oi.MOCK_USER;else{c=(0,h.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Oe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Oi(v)}n._authCredentials=new cP(new Sx(c,m))}}(this._delegate,e,t,r)}enableNetwork(){return function yF(n){return function eF(n){return n.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Xk(n),t=yield eN(n);return e.setNetworkEnabled(!0),function(r){const o=rt(r);return o.lu.delete(0),Lb(o)}(t)}))}(fi(n=mn(n,Tr)))}(this._delegate)}disableNetwork(){return function _F(n){return function tF(n){return n.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Xk(n),t=yield eN(n);return e.setNetworkEnabled(!1),(r=(0,y.Z)(function*(o){const l=rt(o);l.lu.add(0),yield Zy(l),l._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(fi(n=mn(n,Tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mF(n){return function(e){const t=new Fi;return e.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function LO(n,e){return HS.apply(this,arguments)}(yield hM(e),t)})),t.promise}(fi(n=mn(n,Tr)))}(this._delegate)}onSnapshotsInSync(e){return function YF(n,e){return function iF(n,e){const t=new mD(e);return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return r=yield n_(n),o=t,rt(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return r=yield n_(n),o=t,void rt(r).Tu.delete(o);var r,o}))}}(fi(n=mn(n,Tr)),gM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new i_(this,uN(this._delegate,e))}catch(t){throw rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ml(this,vD(this._delegate,e))}catch(t){throw rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new is(this,function uF(n,e){if(n=mn(n,Bb),fM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Co(n,null,(t=e,new Zc(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JF(n,e,t){n=mn(n,Tr);const r=Object.assign(Object.assign({},UF),t);return function(o){if(o.maxAttempts<1)throw new Oe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function oF(n,e,t){const r=new Fi;return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){const o=yield(l=n,yD(l).then(c=>c.datastore));var l;new JO(n.asyncQueue,o,t,e,r).run()})),r.promise}(fi(n),o=>e(new QF(n,o)),r)}(this._delegate,t=>e(new BN(this,t)))}batch(){return fi(this._delegate),new UN(new kN(this._delegate,e=>r_(this._delegate,e)))}loadBundle(e){return function vF(n,e){const t=fi(n=mn(n,Tr)),r=new dF;return function sF(n,e,t,r){const o=function(l,c){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,v=function(v,E){if(v instanceof Uint8Array)return Yk(v,E);if(v instanceof ArrayBuffer)return Yk(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new YO(v,c);var v}(t,Fb(e));n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){!function KO(n,e,t){const r=rt(n);var o;(o=(0,y.Z)(function*(l,c,m){try{const v=yield c.getMetadata();if(yield function(B,W){const oe=rt(B),Ne=Li(W.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",ze=>oe.Ds.getBundleMetadata(ze,W.id)).then(ze=>!!ze&&ze.createTime.compareTo(Ne)>=0)}(l.localStore,v))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(B=v).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);m._updateProgress(Bk(v));const E=new TO(v,l.localStore,c.wt);let S=yield c.fc();for(;S;){const B=yield E.Nu(S);B&&m._updateProgress(B),S=yield c.fc()}const N=yield E.complete();return yield Qc(l,N.Mu,void 0),yield function(B,W){const oe=rt(B);return oe.persistence.runTransaction("Save bundle","readwrite",Ne=>oe.Ds.saveBundleMetadata(Ne,W))}(l.localStore,v),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(v){return sb("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var B}),function(l,c,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield hM(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function bF(n,e){return function aF(n,e){return n.asyncQueue.enqueue((0,y.Z)(function*(){return function(t,r){const o=rt(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Ds.getNamedQuery(l,r))}(yield dM(n),e)}))}(fi(n=mn(n,Tr)),e).then(t=>t?new Co(n,null,t.query):null)}(this._delegate,e).then(t=>t?new is(this,t):null)}}class TD extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $b(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ml.forKey(t,this.firestore,null)}}class BN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new TD(e)}get(e){const t=Qf(e);return this._delegate.get(t).then(r=>new zb(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Qf(e);return r?(IM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Qf(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Qf(e);return this._delegate.delete(t),this}}class UN{constructor(e){this._delegate=e}set(e,t,r){const o=Qf(e);return r?(IM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Qf(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Qf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Gb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Yf(e,new TD(e),t),o.set(t,l)),l}}Yf.INSTANCES=new WeakMap;class ml{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new TD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ml(t,new yr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new ml(t,new yr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new i_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new i_(this.firestore,uN(this._delegate,e))}catch(t){throw rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,h.m9)(e))instanceof yr&&cN(this._delegate,e)}set(e,t){t=IM("DocumentReference.set",t);try{return t?NN(this._delegate,e,t):NN(this._delegate,e)}catch(r){throw rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PN(this._delegate,e):PN(this._delegate,e,t,...r)}catch(o){throw rs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function KF(n){return r_(mn(n.firestore,Tr),[new Gy(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=jN(e),r=GN(e,o=>new zb(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return RN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HF(n){n=mn(n,yr);const e=mn(n.firestore,Tr),t=fi(e),r=new Zf(e);return function nF(n,e){const t=new Fi;return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(r=(0,y.Z)(function*(o,l,c){try{const m=yield function(v,E){const S=rt(v);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,E))}(o,l);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Oe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Jy(m,`Failed to get document '${l} from cache`);c.reject(v)}}),function(o,l,c){return r.apply(this,arguments)})(yield dM(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Xc(e,r,n._key,o,new Kf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $F(n){n=mn(n,yr);const e=mn(n.firestore,Tr);return tN(fi(e),n._key,{source:"server"}).then(t=>EM(e,n,t))}(this._delegate):function GF(n){n=mn(n,yr);const e=mn(n.firestore,Tr);return tN(fi(e),n._key).then(t=>EM(e,n,t))}(this._delegate),t.then(r=>new zb(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ml(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}function rs(n,e,t){return n.message=n.message.replace(e,t),n}function jN(n){for(const e of n)if("object"==typeof e&&!CM(e))return e;return{}}function GN(n,e){var t,r;let o;return o=CM(n[0])?n[0]:CM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class zb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EN(this._delegate,e._delegate)}}class qb extends zb{data(e){const t=this._delegate.data(e);return function lP(n,e){n||ut()}(void 0!==t),t}}class is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new TD(e)}where(e,t,r){try{return new is(this.firestore,zh(this._delegate,function kF(n,e,t){const r=e,o=DD("where",n);return new xF(o,r,t)}(e,t,r)))}catch(o){throw rs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new is(this.firestore,zh(this._delegate,function PF(n,e="asc"){const t=e,r=DD("orderBy",n);return new NF(r,t)}(e,t)))}catch(r){throw rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new is(this.firestore,zh(this._delegate,function RF(n){return aN("limit",n),new CN("limit",n,"F")}(e)))}catch(t){throw rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new is(this.firestore,zh(this._delegate,function OF(n){return aN("limitToLast",n),new CN("limitToLast",n,"L")}(e)))}catch(t){throw rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new is(this.firestore,zh(this._delegate,function FF(...n){return new DN("startAt",n,!0)}(...e)))}catch(t){throw rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new is(this.firestore,zh(this._delegate,function LF(...n){return new DN("startAfter",n,!1)}(...e)))}catch(t){throw rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new is(this.firestore,zh(this._delegate,function VF(...n){return new AN("endBefore",n,!1)}(...e)))}catch(t){throw rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new is(this.firestore,zh(this._delegate,function BF(...n){return new AN("endAt",n,!0)}(...e)))}catch(t){throw rs(t,"endAt()","Query.endAt()")}}isEqual(e){return dN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function qF(n){n=mn(n,Co);const e=mn(n.firestore,Tr),t=fi(e),r=new Zf(e);return function rF(n,e){const t=new Fi;return n.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(r=(0,y.Z)(function*(o,l,c){try{const m=yield cD(o,l,!0),v=new Gk(l,m.ji),E=v.Ku(m.documents),S=v.applyChanges(E,!1);c.resolve(S.snapshot)}catch(m){const v=Jy(m,`Failed to execute query '${l} against cache`);c.reject(v)}}),function(o,l,c){return r.apply(this,arguments)})(yield dM(n),e,t);var r})),t.promise}(t,n._query).then(o=>new $h(e,r,n,o))}(this._delegate):"server"===e?.source?function WF(n){n=mn(n,Co);const e=mn(n.firestore,Tr),t=fi(e),r=new Zf(e);return nN(t,n._query,{source:"server"}).then(o=>new $h(e,r,n,o))}(this._delegate):function zF(n){n=mn(n,Co);const e=mn(n.firestore,Tr),t=fi(e),r=new Zf(e);return IN(n._query),nN(t,n._query).then(o=>new $h(e,r,n,o))}(this._delegate),t.then(r=>new DM(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=jN(e),r=GN(e,o=>new DM(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return RN(this._delegate,t,r)}withConverter(e){return new is(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}class u3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new u3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qb(this._firestore,r))})}isEqual(e){return EN(this._delegate,e._delegate)}}class i_ extends is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ml(this.firestore,e):null}doc(e){try{return new ml(this.firestore,void 0===e?vD(this._delegate):vD(this._delegate,e))}catch(t){throw rs(t,"doc()","CollectionReference.doc()")}}add(e){return function ZF(n,e){const t=mn(n.firestore,Tr),r=vD(n),o=AD(n.converter,e);return r_(t,[ED(qf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ml(this.firestore,t))}isEqual(e){return cN(this._delegate,e._delegate)}withConverter(e){return new i_(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}function Qf(n){return mn(n,yr)}class AM{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new AM(Yr.keyField().canonicalString())}isEqual(e){return(e=(0,h.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function e3(){return new mM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Jf(e)}static delete(){const e=function XF(){return new Ub("deleteField")}();return e._methodName="FieldValue.delete",new Jf(e)}static arrayUnion(...e){const t=function t3(...n){return new CF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Jf(t)}static arrayRemove(...e){const t=function n3(...n){return new DF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Jf(t)}static increment(e){const t=function r3(n){return new AF("increment",n)}(e);return t._methodName="FieldValue.increment",new Jf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const c3={Firestore:VN,GeoPoint:bD,Timestamp:Ar,Blob:$b,Transaction:BN,WriteBatch:UN,DocumentReference:ml,DocumentSnapshot:zb,Query:is,QueryDocumentSnapshot:qb,QuerySnapshot:DM,CollectionReference:i_,FieldPath:AM,FieldValue:Jf,setLogLevel:function l3(n){!function aP(n){kh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HN(n,e){return function p3(n,e=yg.z){return new Ut.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function TM(n,e){return HN(n,e).pipe((0,Rn.U)(t=>({payload:t,type:"query"})))}function SD(n,e){return TM(n,e).pipe(Km(void 0),D0(),(0,Rn.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const v=o.find(S=>S.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),l}))}function $N(n,e,t){return SD(n,t).pipe(Cu((r,o)=>function g3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function m3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),Du(),(0,Rn.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function SM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function zN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function h3(n){(function d3(n,e){n.INTERNAL.registerComponent(new ga.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},c3)))})(n,(e,t)=>new VN(e,t,new a3)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(Md.Z);class qN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rn.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Km(void 0),D0(),Am(([r,o])=>o.length>0||!r),(0,Rn.U)(([r,o])=>o),zt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(zt.iC)}valueChanges(e={}){return TM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zt.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(zt.iC)}add(e){return this.ref.add(e)}doc(e){return new WN(this.ref.doc(e),this.afs)}}class WN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=KN(r,t);return new qN(o,l,this.afs)}snapshotChanges(){return function f3(n,e){return HN(n,e).pipe(Km(void 0),D0(),(0,Rn.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(zt.iC)}}class y3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Am(t=>t.length>0),zt.iC):SD(this.query,this.afs.schedulers.outsideAngular).pipe(zt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(zt.iC)}valueChanges(e={}){return TM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rn.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),zt.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(zt.iC)}}const _3=new f.OlP("angularfire2.enableFirestorePersistence"),v3=new f.OlP("angularfire2.firestore.persistenceSettings"),b3=new f.OlP("angularfire2.firestore.settings"),w3=new f.OlP("angularfire2.firestore.use-emulator");function KN(n,e=(t=>t)){return{query:e(n),ref:n}}let E3=(()=>{class n{constructor(t,r,o,l,c,m,v,E,S,N,B,W,oe,Ne,ze,St,Lt){this.schedulers=v;const Zt=(0,Ke.on)(t,m,r),Gt=S;N&&$m(Zt,m,B,oe,Ne,ze,W,St),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const on=m.runOutsideAngular(()=>Zt.firestore());if(l&&on.settings(l),Gt&&on.useEmulator(...Gt),o&&!El(c)){const kn=()=>{try{return(0,en.D)(on.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Do){return typeof console<"u"&&console.warn(Do),Gl(!1)}};return[on,m.runOutsideAngular(kn)]}return[on,Gl(!1)]},[l,Gt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:c}=KN(o,r),m=this.schedulers.ngZone.run(()=>l);return new qN(m,c,this)}collectionGroup(t,r){const o=r||(c=>c),l=this.firestore.collectionGroup(t);return new y3(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new WN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ke.Dh),f.LFG(Ke.xv,8),f.LFG(_3,8),f.LFG(b3,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zt.HU),f.LFG(v3,8),f.LFG(w3,8),f.LFG(cf,8),f.LFG(Um,8),f.LFG(jm,8),f.LFG(Gm,8),f.LFG(Hm,8),f.LFG(y0,8),f.LFG(qI,8),f.LFG(Vm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZN=(()=>{class n{constructor(t){this.db=t}CreateSquad(t){""==t.nome?alert("compila il campo nome"):0==t.crediti?alert("aumentare il numero di crediti"):ts().fire({title:"Sicuro di voler aggiungere "+t.nome+"?",text:"Aggiungerai questa squadra ai partecipanti all'asta",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aggiungi!",cancelButtonText:"Annulla"}).then(r=>{r.isConfirmed&&this.db.collection("squadre").doc(t.nome).set(Object.assign({},t)).then(()=>{ts().fire("Aggiunta!","La squadra \xe8 stata aggiunta correttamente.","success")})})}GetSquad(){return this.db.collection("squadre").valueChanges()}UpdateSquad(t){this.db.collection("squadre").doc(t.nome).set(Object.assign({},t))}DeleteSquad(t){ts().fire({title:"Sicuro di voler eliminare "+t.nome+"?",text:"Eliminerai questa squadra dai partecipanti all'asta",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Elimina!",cancelButtonText:"Annulla"}).then(r=>{r.isConfirmed&&this.db.collection("squadre").doc(t.nome).delete()})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(E3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",11)(1,"th",14),f._uU(2),f.qZA(),f.TgZ(3,"td",15),f._uU(4),f.qZA(),f.TgZ(5,"td",15),f._UZ(6,"img",16),f.qZA(),f.TgZ(7,"td",15)(8,"i",17),f.NdJ("click",function(){const l=f.CHM(t).$implicit,c=f.oxw(2);return f.KtG(c.firebaseService.DeleteSquad(l))}),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.nome),f.xp6(2),f.Oqu(t.crediti),f.xp6(2),f.Q6J("src",t.logo,f.LSH)}}function C3(n,e){if(1&n&&(f.TgZ(0,"div",9)(1,"table",10)(2,"thead",11)(3,"tr")(4,"th",12),f._uU(5,"Nome"),f.qZA(),f.TgZ(6,"th",12),f._uU(7,"Crediti"),f.qZA(),f.TgZ(8,"th",12),f._uU(9,"Logo"),f.qZA(),f.TgZ(10,"th",12),f._uU(11,"Elimina"),f.qZA()()(),f.TgZ(12,"tbody"),f.YNc(13,I3,9,3,"tr",13),f.qZA()()()),2&n){const t=f.oxw();f.xp6(13),f.Q6J("ngForOf",t.arrSquadre)}}function D3(n,e){if(1&n&&(f.TgZ(0,"div")(1,"h3"),f._uU(2),f.qZA()()),2&n){const t=f.oxw(2);f.xp6(2),f.Oqu(t.squad.nome)}}function A3(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("",t.squad.crediti," crediti")}}function T3(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"img",20),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Q6J("src",t.squad.logo,f.LSH)}}function S3(n,e){if(1&n&&(f.TgZ(0,"div",18),f.YNc(1,D3,3,1,"div",19),f.YNc(2,A3,2,1,"div",19),f.YNc(3,T3,2,1,"div",19),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",""!=t.squad.nome),f.xp6(1),f.Q6J("ngIf",0!=t.squad.crediti),f.xp6(1),f.Q6J("ngIf",""!=t.squad.logo)}}let M3=(()=>{class n{constructor(t){this.firebaseService=t,this.squad=new Q1}ngOnInit(){this.firebaseService.GetSquad().subscribe(t=>{this.arrSquadre=t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ZN))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-squadre-gen"]],decls:22,vars:5,consts:[[1,"flex","flex-wrap","justify-around","sm:flex-col","sm:items-center",2,"width","95%","margin","0 auto"],["class","preview-container sm:mb-4","style","color: aliceblue; min-width: 600px;",4,"ngIf"],[1,"text-center",2,"min-width","600px"],["for","exampleFormControlInput1",1,"text-white"],["type","text","id","exampleFormControlInput1","placeholder","FCDONETSK",1,"text-cyan-50","bg-slate-900","m-2","p-2",2,"width","400px","color","aliceblue","margin","0 auto",3,"ngModel","ngModelChange"],["type","number","id","exampleFormControlInput1","placeholder","\u20accazzi$","step","1","min","0",1,"text-cyan-50","bg-slate-900","m-2","p-2",2,"width","400px","color","aliceblue","margin","0 auto",3,"ngModel","ngModelChange"],["type","text","id","exampleFormControlInput1","placeholder","https://unacasettaincanada.com/",1,"text-cyan-50","bg-slate-900","m-2","p-2",2,"width","400px","color","aliceblue","margin","0 auto",3,"ngModel","ngModelChange"],["type","button",1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],["class","preview-container","style","color: aliceblue; min-width: 600px;",4,"ngIf"],[1,"preview-container","sm:mb-4",2,"color","aliceblue","min-width","600px"],[1,"table-auto","my-0","mx-auto"],[1,"text-center"],["scope","col"],["class","text-center",4,"ngFor","ngForOf"],["scope","row",1,"border-y"],[1,"border-y"],[2,"width","20px","height","20px",3,"src"],[1,"fa-solid","fa-trash","text-red-500","cPointer",3,"click"],[1,"preview-container",2,"color","aliceblue","min-width","600px"],[4,"ngIf"],["alt","logo",2,"width","150px","height","150px",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,C3,14,1,"div",1),f.TgZ(2,"div",2)(3,"label",3),f._uU(4,"Nome Squadra"),f.qZA(),f._UZ(5,"br"),f.TgZ(6,"input",4),f.NdJ("ngModelChange",function(l){return r.squad.nome=l}),f.qZA(),f._UZ(7,"br"),f.TgZ(8,"label",3),f._uU(9,"Crediti"),f.qZA(),f._UZ(10,"br"),f.TgZ(11,"input",5),f.NdJ("ngModelChange",function(l){return r.squad.crediti=l}),f.qZA(),f._UZ(12,"br"),f.TgZ(13,"label",3),f._uU(14,"Logo"),f.qZA(),f._UZ(15,"br"),f.TgZ(16,"input",6),f.NdJ("ngModelChange",function(l){return r.squad.logo=l}),f.qZA(),f._UZ(17,"br"),f.TgZ(18,"div")(19,"button",7),f.NdJ("click",function(){return r.firebaseService.CreateSquad(r.squad)}),f._uU(20,"Aggiungi"),f.qZA()()(),f.YNc(21,S3,4,3,"div",8),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",null!=r.squad),f.xp6(5),f.Q6J("ngModel",r.squad.nome),f.xp6(5),f.Q6J("ngModel",r.squad.crediti),f.xp6(5),f.Q6J("ngModel",r.squad.logo),f.xp6(5),f.Q6J("ngIf",null!=r.squad))},dependencies:[Hr,Yn,Cs,uc,As,mc,Ll]}),n})();const x3=JSON.parse('{"id":135,"name":"Serie A","type":"League","logo":"https://media.api-sports.io/football/leagues/135.png","teams":[{"team":{"id":487,"name":"Lazio","code":"LAZ","country":"Italy","founded":1900,"national":false,"logo":"https://media.api-sports.io/football/teams/487.png","players":[{"id":31775,"name":"Marius Adamonis","age":25,"number":31,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31775.png"},{"id":63934,"name":"Alessio Furlanetto","age":20,"number":41,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/63934.png"},{"id":347390,"name":"Giacomo Moretti","age":19,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/347390.png"},{"id":1624,"name":"Pepe Reina","age":40,"number":25,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/1624.png"},{"id":1835,"name":"Thomas Strakosha","age":27,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/1835.png"},{"id":1836,"name":"Francesco Ace Acerbi","age":34,"number":33,"position":"Defender","photo":"https://media.api-sports.io/football/players/1836.png"},{"id":31667,"name":"Djavan Lorenzo Anderson","age":27,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31667.png"},{"id":31669,"name":"T. Casasola","age":27,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31669.png"},{"id":1839,"name":"Riza Durmisi","age":28,"number":14,"position":"Defender","photo":"https://media.api-sports.io/football/players/1839.png"},{"id":342651,"name":"R. Floriani","age":19,"number":44,"position":"Defender","photo":"https://media.api-sports.io/football/players/342651.png"},{"id":1841,"name":"Patricio Gabarr\xf3n Gil","age":29,"number":4,"position":"Defender","photo":"https://media.api-sports.io/football/players/1841.png"},{"id":317,"name":"Elseid Hysaj","age":28,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/317.png"},{"id":45798,"name":"D. Kamenovi\u0107","age":22,"number":16,"position":"Defender","photo":"https://media.api-sports.io/football/players/45798.png"},{"id":1843,"name":"Jordan Zacharie Lukaku Menama Mokelenge","age":28,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/1843.png"},{"id":1844,"name":"Adam Maru\u0161i\u0107","age":30,"number":77,"position":"Defender","photo":"https://media.api-sports.io/football/players/1844.png"},{"id":1846,"name":"\u015e. Radu","age":36,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/1846.png"},{"id":1291,"name":"Denis Vavro","age":26,"number":19,"position":"Defender","photo":"https://media.api-sports.io/football/players/1291.png"},{"id":1266,"name":"Toma Ba\u0161i\u0107","age":26,"number":88,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1266.png"},{"id":288777,"name":"M. Bertini","age":20,"number":50,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/288777.png"},{"id":1852,"name":"Danilo Cataldi","age":28,"number":32,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1852.png"},{"id":31658,"name":"Emanuele Cicerelli","age":28,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31658.png"},{"id":47388,"name":"Gonzalo Escalante","age":29,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/47388.png"},{"id":30859,"name":"M. Fares","age":26,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30859.png"},{"id":30752,"name":"S. Kiyine","age":25,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30752.png"},{"id":30866,"name":"Manuel Lazzari","age":29,"number":29,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30866.png"},{"id":31678,"name":"Jean-Daniel Dave Lewis Akpa Akpro","age":30,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31678.png"},{"id":31377,"name":"Cristiano Lombardi","age":27,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31377.png"},{"id":57012,"name":"F. Maistro","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/57012.png"},{"id":1856,"name":"Sergej Milinkovi\u0107-Savi\u0107","age":27,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1856.png"},{"id":1859,"name":"Luis Alberto Romero Alconchel","age":30,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1859.png"},{"id":263812,"name":"L. Romero","age":18,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/263812.png"},{"id":696,"name":"Marcos Antonio Silva Santos","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/696.png"},{"id":30937,"name":"Mattia Zaccagni","age":27,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30937.png"},{"id":2412,"name":"Felipe Anderson Pereira Gomes","age":29,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2412.png"},{"id":286474,"name":"M. Cancellieri","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/286474.png"},{"id":1863,"name":"Ciro Immobile","age":32,"number":17,"position":"Attacker","photo":"https://media.api-sports.io/football/players/1863.png"},{"id":264470,"name":"Raul Moro Prescoli","age":20,"number":27,"position":"Attacker","photo":"https://media.api-sports.io/football/players/264470.png"},{"id":50048,"name":"Vedat Muriqi","age":28,"number":94,"position":"Attacker","photo":"https://media.api-sports.io/football/players/50048.png"},{"id":2299,"name":"Pedro Eliezer Rodr\xedguez Ledesma","age":35,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2299.png"},{"id":47366,"name":"Jonathan Rodr\xedguez Men\xe9ndez","age":31,"number":22,"position":"Attacker","photo":"https://media.api-sports.io/football/players/47366.png"}]},"venue":{"id":910,"name":"Stadio Olimpico","address":"Viale dei Gladiatori, 2 / Via del Foro Italico","city":"Roma","capacity":68530,"surface":"grass","image":"https://media.api-sports.io/football/venues/910.png"}},{"team":{"id":488,"name":"Sassuolo","code":"SAS","country":"Italy","founded":1922,"national":false,"logo":"https://media.api-sports.io/football/teams/488.png","players":[{"id":91299,"name":"Matteo Campani","age":22,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/91299.png"},{"id":30516,"name":"A. Consigli","age":35,"number":47,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30516.png"},{"id":30517,"name":"G. Pegolo","age":41,"number":56,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30517.png"},{"id":30766,"name":"Alessandro Russo","age":21,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30766.png"},{"id":30518,"name":"Giacomo Satalino","age":23,"number":24,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30518.png"},{"id":30519,"name":"Stefano Turati","age":21,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30519.png"},{"id":286472,"name":"Samuele Vitale","age":20,"number":30,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/286472.png"},{"id":292519,"name":"Gioele Zacchi","age":19,"number":71,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/292519.png"},{"id":30520,"name":"C. Adjapong","age":24,"number":98,"position":"Defender","photo":"https://media.api-sports.io/football/players/30520.png"},{"id":264477,"name":"Giuseppe Aurelio","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/264477.png"},{"id":25448,"name":"Kaan Ayhan","age":28,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/25448.png"},{"id":56433,"name":"R. Celia","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/56433.png"},{"id":315,"name":"Vlad Iulian Chiriche\u0219","age":33,"number":21,"position":"Defender","photo":"https://media.api-sports.io/football/players/315.png"},{"id":30827,"name":"M. Erli\u0107","age":24,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30827.png"},{"id":30523,"name":"Gian Marco Ferrari","age":30,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/30523.png"},{"id":26828,"name":"Giorgos Kiriakopoulos","age":26,"number":77,"position":"Defender","photo":"https://media.api-sports.io/football/players/26828.png"},{"id":30981,"name":"R. Marchizza","age":24,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30981.png"},{"id":30715,"name":"A. Meroni","age":25,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30715.png"},{"id":1719,"name":"Mert M\xfcld\xfcr","age":23,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/1719.png"},{"id":30527,"name":"Rog\xe9rio Oliveira da Silva","age":24,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/30527.png"},{"id":59513,"name":"Y. Paz","age":20,"number":70,"position":"Defender","photo":"https://media.api-sports.io/football/players/59513.png"},{"id":30528,"name":"F. Peluso","age":38,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/30528.png"},{"id":342055,"name":"E. Pieragnolo","age":19,"number":89,"position":"Defender","photo":"https://media.api-sports.io/football/players/342055.png"},{"id":30556,"name":"Filippo Romagna","age":25,"number":19,"position":"Defender","photo":"https://media.api-sports.io/football/players/30556.png"},{"id":56161,"name":"M. Sala","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/56161.png"},{"id":30530,"name":"L. Sernicola","age":25,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/30530.png"},{"id":1118,"name":"Jeremy Toljan","age":28,"number":22,"position":"Defender","photo":"https://media.api-sports.io/football/players/1118.png"},{"id":152857,"name":"Ruan","age":23,"number":44,"position":"Defender","photo":"https://media.api-sports.io/football/players/152857.png"},{"id":341994,"name":"Salim Abubakar","age":19,"number":68,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/341994.png"},{"id":341989,"name":"Cristian Aucelli","age":20,"number":27,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/341989.png"},{"id":2711,"name":"Mehdi Bourabia","age":31,"number":68,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2711.png"},{"id":31173,"name":"D. Frattesi","age":23,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31173.png"},{"id":68407,"name":"A. Ghion","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/68407.png"},{"id":40446,"name":"Luk\xe1\u0161 Harasl\xedn","age":26,"number":11,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/40446.png"},{"id":341995,"name":"Justin Kumi","age":18,"number":28,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/341995.png"},{"id":1910,"name":"Maxime Lopez","age":25,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1910.png"},{"id":30534,"name":"Francesco Magnanelli","age":38,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30534.png"},{"id":341991,"name":"A. Mata","age":19,"number":26,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/341991.png"},{"id":18824,"name":"Pedro  Mba Obiang Avomo","age":30,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/18824.png"},{"id":31368,"name":"M. Pinato","age":27,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31368.png"},{"id":31057,"name":"H. Traor\xe8","age":22,"number":23,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31057.png"},{"id":30536,"name":"Filip \u0110uri\u010di\u0107","age":30,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30536.png"},{"id":278190,"name":"Agust\xedn \xc1lvarez Mart\xednez","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/278190.png"},{"id":30537,"name":"Domenico Berardi","age":28,"number":25,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30537.png"},{"id":30538,"name":"Enrico Brignola","age":23,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30538.png"},{"id":31060,"name":"Francesco Caputo","age":35,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31060.png"},{"id":30461,"name":"Gregoire Defrel","age":31,"number":92,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30461.png"},{"id":162604,"name":"Isaac Karamoko","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162604.png"},{"id":31440,"name":"Luca Moro","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31440.png"},{"id":180584,"name":"B. Oddei","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/180584.png"},{"id":30543,"name":"Giacomo Raspadori","age":22,"number":18,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30543.png"},{"id":200811,"name":"L. Samele","age":20,"number":39,"position":"Attacker","photo":"https://media.api-sports.io/football/players/200811.png"},{"id":30544,"name":"Gianluca Scamacca","age":23,"number":91,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30544.png"}]},"venue":{"id":935,"name":"MAPEI Stadium - Citt\xe0 del Tricolore","address":"Piazza Azzuri d&apos;Italia, 1","city":"Reggio nell&apos;Emilia","capacity":23717,"surface":"grass","image":"https://media.api-sports.io/football/venues/935.png"}},{"team":{"id":489,"name":"AC Milan","code":"MIL","country":"Italy","founded":1899,"national":false,"logo":"https://media.api-sports.io/football/teams/489.png","players":[{"id":322859,"name":"Sebastiano Desplanches","age":19,"number":90,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/322859.png"},{"id":277175,"name":"Andreas Kristoffer Jungdal","age":20,"number":96,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/277175.png"},{"id":22221,"name":"Mike Maignan","age":27,"number":16,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/22221.png"},{"id":765,"name":"A. Mirante","age":39,"number":83,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/765.png"},{"id":342995,"name":"Lapo Francesco Maria Nava","age":18,"number":92,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/342995.png"},{"id":1623,"name":"Alessandro Plizzari","age":22,"number":77,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/1623.png"},{"id":21081,"name":"C. T\u0103t\u0103ru\u0219anu","age":36,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/21081.png"},{"id":162990,"name":"Leroy Abanda Mfomo","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/162990.png"},{"id":105,"name":"Fod\xe9  Ballo-Tour\xe9","age":25,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/105.png"},{"id":1627,"name":"Davide Calabria","age":26,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/1627.png"},{"id":10160,"name":"L\xe9o Duarte","age":26,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/10160.png"},{"id":769,"name":"Alessandro Florenzi","age":31,"number":25,"position":"Defender","photo":"https://media.api-sports.io/football/players/769.png"},{"id":56473,"name":"Matteo Gabbia","age":23,"number":46,"position":"Defender","photo":"https://media.api-sports.io/football/players/56473.png"},{"id":47300,"name":"Theo Bernard Fran\xe7ois Hern\xe1ndez","age":25,"number":19,"position":"Defender","photo":"https://media.api-sports.io/football/players/47300.png"},{"id":162188,"name":"P. Kalulu","age":22,"number":20,"position":"Defender","photo":"https://media.api-sports.io/football/players/162188.png"},{"id":215976,"name":"N. Michelis","age":21,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/215976.png"},{"id":1632,"name":"Alessio Romagnoli","age":27,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/1632.png"},{"id":277173,"name":"L. Stanga","age":20,"number":91,"position":"Defender","photo":"https://media.api-sports.io/football/players/277173.png"},{"id":2045,"name":"S. Kj\xe6r","age":33,"number":24,"position":"Defender","photo":"https://media.api-sports.io/football/players/2045.png"},{"id":19209,"name":"Fikayo Tomori","age":25,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/19209.png"},{"id":1265,"name":"Yacine Adli","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1265.png"},{"id":1635,"name":"Tiemou\xe9 Bakayoko","age":28,"number":41,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1635.png"},{"id":3173,"name":"Isma\xebl Bennacer","age":25,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/3173.png"},{"id":1639,"name":"M. Brescianini","age":22,"number":94,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1639.png"},{"id":1641,"name":"Samuel Castillejo Azuaga","age":27,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1641.png"},{"id":297324,"name":"E. Di Ges\xf9","age":20,"number":62,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/297324.png"},{"id":31054,"name":"Rade Kruni\u0107","age":29,"number":33,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31054.png"},{"id":31273,"name":"T. Pobega","age":23,"number":26,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31273.png"},{"id":1417,"name":"A. Saelemaekers","age":23,"number":56,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1417.png"},{"id":31146,"name":"S. Tonali","age":22,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31146.png"},{"id":744,"name":"Brahim Abdelkader D\xedaz","age":23,"number":10,"position":"Attacker","photo":"https://media.api-sports.io/football/players/744.png"},{"id":263481,"name":"L. Colombo","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/263481.png"},{"id":22236,"name":"Rafael Alexandre da Concei\xe7\xe3o Le\xe3o","age":23,"number":17,"position":"Attacker","photo":"https://media.api-sports.io/football/players/22236.png"},{"id":336689,"name":"Y. El Hilali","age":19,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/336689.png"},{"id":2295,"name":"Olivier Giroud","age":36,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2295.png"},{"id":51070,"name":"Z. Ibrahimovi\u0107","age":41,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/51070.png"},{"id":135510,"name":"E. Roback","age":19,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/135510.png"},{"id":162045,"name":"M. Lazeti\u0107","age":18,"number":22,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162045.png"},{"id":134926,"name":"D. Maldini","age":21,"number":27,"position":"Attacker","photo":"https://media.api-sports.io/football/players/134926.png"},{"id":1831,"name":"Ante Rebi\u0107","age":29,"number":12,"position":"Attacker","photo":"https://media.api-sports.io/football/players/1831.png"},{"id":1652,"name":"F. Tsadjout","age":23,"number":54,"position":"Attacker","photo":"https://media.api-sports.io/football/players/1652.png"}]},"venue":{"id":907,"name":"Stadio Giuseppe Meazza","address":"Via Piccolomini 5","city":"Milano","capacity":80018,"surface":"grass","image":"https://media.api-sports.io/football/venues/907.png"}},{"team":{"id":492,"name":"Napoli","code":"NAP","country":"Italy","founded":1904,"national":false,"logo":"https://media.api-sports.io/football/teams/492.png","players":[{"id":325142,"name":"Valerio Boffelli","age":18,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/325142.png"},{"id":32172,"name":"Nikita Contini Baranovsky","age":26,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/32172.png"},{"id":134434,"name":"Hubert Dawid Idasiak","age":20,"number":46,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/134434.png"},{"id":91423,"name":"Davide Marfella","age":23,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/91423.png"},{"id":312,"name":"Alex Meret","age":25,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/312.png"},{"id":313,"name":"D. Ospina","age":34,"number":25,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/313.png"},{"id":30854,"name":"Filippo Costa","age":27,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30854.png"},{"id":161849,"name":"D. Costanzo","age":20,"number":74,"position":"Defender","photo":"https://media.api-sports.io/football/players/161849.png"},{"id":31042,"name":"Giovanni Di Lorenzo","age":29,"number":22,"position":"Defender","photo":"https://media.api-sports.io/football/players/31042.png"},{"id":316,"name":"Faouzi Ghoulam","age":31,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/316.png"},{"id":318,"name":"Kalidou Koulibaly","age":31,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/318.png"},{"id":319,"name":"Sebastiano Luperto","age":26,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/319.png"},{"id":321,"name":"K\xe9vin Malcuit","age":31,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/321.png"},{"id":309907,"name":"B. Man\xe8","age":19,"number":55,"position":"Defender","photo":"https://media.api-sports.io/football/players/309907.png"},{"id":774,"name":"Juan Guilherme Nunes Jesus","age":31,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/774.png"},{"id":47254,"name":"M. Olivera","age":25,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/47254.png"},{"id":1314,"name":"Amir Rrahmani","age":28,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/1314.png"},{"id":322,"name":"M\xe1rio Rui Silva Duarte","age":31,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/322.png"},{"id":162907,"name":"A. Zanoli","age":22,"number":59,"position":"Defender","photo":"https://media.api-sports.io/football/players/162907.png"},{"id":1151,"name":"Diego Demme","age":31,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1151.png"},{"id":1358,"name":"E. Elmas","age":23,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1358.png"},{"id":56851,"name":"M. Folorunsho","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/56851.png"},{"id":325,"name":"G. Gaetano","age":22,"number":70,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/325.png"},{"id":483,"name":"Khvicha Kvaratskhelia","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/483.png"},{"id":162582,"name":"Valerio Labriola","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162582.png"},{"id":47439,"name":"Stanislav Lobotka","age":28,"number":68,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/47439.png"},{"id":91352,"name":"Francesco Mezzoni","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/91352.png"},{"id":327,"name":"Adam Mohamed Ounas","age":26,"number":33,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/327.png"},{"id":31339,"name":"Luca Palmiero","age":26,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31339.png"},{"id":328,"name":"Fabi\xe1n Ruiz Pe\xf1a","age":26,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/328.png"},{"id":3406,"name":"A. Zambo Anguissa","age":27,"number":99,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/3406.png"},{"id":323,"name":"K. Zedadka","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/323.png"},{"id":329,"name":"Piotr Sebastian Zieli\u0144ski","age":28,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/329.png"},{"id":341912,"name":"G. Ambrosino","age":19,"number":70,"position":"Attacker","photo":"https://media.api-sports.io/football/players/341912.png"},{"id":341924,"name":"B. Barba","age":19,"number":80,"position":"Attacker","photo":"https://media.api-sports.io/football/players/341924.png"},{"id":161852,"name":"Antonio Cioffi","age":20,"number":58,"position":"Attacker","photo":"https://media.api-sports.io/football/players/161852.png"},{"id":248,"name":"Hirving Rodrigo Lozano Bahena","age":27,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/248.png"},{"id":332,"name":"Dries Mertens","age":35,"number":14,"position":"Attacker","photo":"https://media.api-sports.io/football/players/332.png"},{"id":2780,"name":"Victor James Osimhen","age":24,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2780.png"},{"id":30879,"name":"Andrea Petagna","age":27,"number":37,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30879.png"},{"id":219,"name":"Matteo Politano","age":29,"number":21,"position":"Attacker","photo":"https://media.api-sports.io/football/players/219.png"},{"id":31348,"name":"Gennaro Tutino","age":26,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31348.png"},{"id":347395,"name":"A. Vergara","age":19,"number":82,"position":"Attacker","photo":"https://media.api-sports.io/football/players/347395.png"},{"id":31219,"name":"Alessio Zerbin","age":23,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31219.png"}]},"venue":{"id":11904,"name":"Stadio Diego Armando Maradona","address":"Pizzale Vincenzo Tecchio","city":"Napoli","capacity":60240,"surface":"grass","image":"https://media.api-sports.io/football/venues/11904.png"}},{"team":{"id":494,"name":"Udinese","code":"UDI","country":"Italy","founded":1896,"national":false,"logo":"https://media.api-sports.io/football/teams/494.png","players":[{"id":295770,"name":"Matteo Carnelos","age":19,"number":65,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/295770.png"},{"id":30793,"name":"Manuel Gasparini","age":20,"number":31,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30793.png"},{"id":189,"name":"D. Padelli","age":37,"number":20,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/189.png"},{"id":312999,"name":"Edoardo Piana","age":19,"number":66,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/312999.png"},{"id":30468,"name":"Antonio Santurro Bueno","age":30,"number":29,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30468.png"},{"id":30915,"name":"Marco Silvestri","age":31,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30915.png"},{"id":320335,"name":"James Abankwah","age":18,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/320335.png"},{"id":1107,"name":"Filip Benkovi\u0107","age":25,"number":28,"position":"Defender","photo":"https://media.api-sports.io/football/players/1107.png"},{"id":350610,"name":"N. Cocetta","age":19,"number":72,"position":"Defender","photo":"https://media.api-sports.io/football/players/350610.png"},{"id":350609,"name":"L. Codutti","age":19,"number":73,"position":"Defender","photo":"https://media.api-sports.io/football/players/350609.png"},{"id":161638,"name":"Festy Oseiwe Ebosele","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/161638.png"},{"id":6503,"name":"Nahuel Molina Lucero","age":24,"number":16,"position":"Defender","photo":"https://media.api-sports.io/football/players/6503.png"},{"id":829,"name":"Rodrigo  Nascimiento Franca","age":26,"number":50,"position":"Defender","photo":"https://media.api-sports.io/football/players/829.png"},{"id":30797,"name":"Bram Nuytinck","age":32,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/30797.png"},{"id":162347,"name":"B. Soppy","age":20,"number":93,"position":"Defender","photo":"https://media.api-sports.io/football/players/162347.png"},{"id":204039,"name":"D. Udogie","age":20,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/204039.png"},{"id":1353,"name":"Tolgay Ali Arslan","age":32,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1353.png"},{"id":179502,"name":"M. Ballarini","age":21,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/179502.png"},{"id":350611,"name":"Riccardo Castagnaviz","age":19,"number":70,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/350611.png"},{"id":350612,"name":"Mattia Damiani","age":19,"number":71,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/350612.png"},{"id":330357,"name":"Jacopo Fedrizzi","age":19,"number":63,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/330357.png"},{"id":9010,"name":"Mato Jajalo","age":34,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/9010.png"},{"id":355088,"name":"Raed Jaziri","age":19,"number":74,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/355088.png"},{"id":7591,"name":"S. Lovri\u0107","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/7591.png"},{"id":22171,"name":"J. Makengo","age":24,"number":6,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/22171.png"},{"id":264513,"name":"M. Palumbo","age":20,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/264513.png"},{"id":2475,"name":"Roberto Maximiliano Pereyra","age":31,"number":37,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2475.png"},{"id":351269,"name":"Riccardo Pinzi","age":19,"number":75,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/351269.png"},{"id":178749,"name":"L. Samard\u017ei\u0107","age":20,"number":24,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/178749.png"},{"id":25387,"name":"Walace Souza Silva","age":27,"number":11,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/25387.png"},{"id":9084,"name":"Rijad Baji\u0107","age":28,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/9084.png"},{"id":18809,"name":"Gerard Deulofeu L\xe1zaro","age":28,"number":10,"position":"Attacker","photo":"https://media.api-sports.io/football/players/18809.png"},{"id":761,"name":"Cristo Ram\xf3n Gonz\xe1lez P\xe9rez","age":25,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/761.png"},{"id":329406,"name":"S. Ianesi","age":20,"number":69,"position":"Attacker","photo":"https://media.api-sports.io/football/players/329406.png"},{"id":30815,"name":"Kevin Lasagna","age":30,"number":15,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30815.png"},{"id":31561,"name":"Ilija Nestorovski","age":32,"number":30,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31561.png"},{"id":367577,"name":"S. Pafundi","age":16,"number":80,"position":"Attacker","photo":"https://media.api-sports.io/football/players/367577.png"},{"id":279104,"name":"Leonardo Buta","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/279104.png"}]},"venue":{"id":928,"name":"Dacia Arena","address":"Piazza le Repubblica Argentina, 3","city":"Udine","capacity":25952,"surface":"grass","image":"https://media.api-sports.io/football/venues/928.png"}},{"team":{"id":496,"name":"Juventus","code":"JUV","country":"Italy","founded":1897,"national":false,"logo":"https://media.api-sports.io/football/teams/496.png","players":[{"id":30704,"name":"Stefano Gori","age":26,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30704.png"},{"id":56266,"name":"Franco Israel Wibmer","age":22,"number":35,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/56266.png"},{"id":849,"name":"Mattia Perin","age":30,"number":36,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/849.png"},{"id":850,"name":"Carlo Pinsoglio","age":32,"number":23,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/850.png"},{"id":148022,"name":"Marco Raina","age":20,"number":53,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/148022.png"},{"id":297157,"name":"Zsombor Senk\xf3","age":19,"number":42,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/297157.png"},{"id":851,"name":"W. Szcz\u0119sny","age":32,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/851.png"},{"id":853,"name":"L. Bonucci","age":35,"number":19,"position":"Defender","photo":"https://media.api-sports.io/football/players/853.png"},{"id":335115,"name":"A. Citi","age":19,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/335115.png"},{"id":618,"name":"Danilo Luiz da Silva","age":31,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/618.png"},{"id":532,"name":"Matthijs de Ligt","age":23,"number":4,"position":"Defender","photo":"https://media.api-sports.io/football/players/532.png"},{"id":858,"name":"Mattia De Sciglio","age":30,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/858.png"},{"id":162141,"name":"K. De Winter","age":20,"number":45,"position":"Defender","photo":"https://media.api-sports.io/football/players/162141.png"},{"id":268341,"name":"F. Gatti","age":24,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/268341.png"},{"id":860,"name":"Alex Sandro Lobo Silva","age":31,"number":12,"position":"Defender","photo":"https://media.api-sports.io/football/players/860.png"},{"id":162498,"name":"R. Dr\u0103gu\u0219in","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/162498.png"},{"id":30554,"name":"Luca Pellegrini","age":23,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/30554.png"},{"id":861,"name":"Daniele Rugani","age":28,"number":24,"position":"Defender","photo":"https://media.api-sports.io/football/players/861.png"},{"id":281775,"name":"D. Stramaccioni","age":21,"number":54,"position":"Defender","photo":"https://media.api-sports.io/football/players/281775.png"},{"id":866,"name":"Juan Guillermo Cuadrado Bello","age":34,"number":11,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/866.png"},{"id":876,"name":"N. Fagioli","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/876.png"},{"id":30533,"name":"Manuel Locatelli","age":24,"number":27,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30533.png"},{"id":415,"name":"W. McKennie","age":24,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/415.png"},{"id":181808,"name":"F. Miretti","age":19,"number":47,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/181808.png"},{"id":881,"name":"H. Nicolussi","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/881.png"},{"id":264513,"name":"M. Palumbo","age":20,"number":56,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/264513.png"},{"id":272,"name":"Adrien Rabiot","age":27,"number":25,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/272.png"},{"id":150,"name":"Arthur Henrique Ramos de Oliveira Melo","age":26,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/150.png"},{"id":1459,"name":"A. Ramsey","age":32,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1459.png"},{"id":31402,"name":"F. Ranocchia","age":21,"number":42,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31402.png"},{"id":30784,"name":"N. Rovella","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30784.png"},{"id":323936,"name":"M. Soul\xe9","age":19,"number":46,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/323936.png"},{"id":2810,"name":"D. Zakaria","age":26,"number":28,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2810.png"},{"id":182467,"name":"E. Zuelli","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/182467.png"},{"id":129687,"name":"Marley Ak\xe9","age":21,"number":38,"position":"Attacker","photo":"https://media.api-sports.io/football/players/129687.png"},{"id":135749,"name":"F\xe9lix Alexandre Andrade Sanches Correia","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/135749.png"},{"id":30410,"name":"Federico Chiesa","age":25,"number":22,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30410.png"},{"id":161974,"name":"M. Da Graca","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/161974.png"},{"id":162173,"name":"Samuel Iling-Junior","age":19,"number":57,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162173.png"},{"id":877,"name":"Moise Bioty Kean","age":22,"number":18,"position":"Attacker","photo":"https://media.api-sports.io/football/players/877.png"},{"id":10008,"name":"Kaio Jorge Pinto Ramos","age":20,"number":21,"position":"Attacker","photo":"https://media.api-sports.io/football/players/10008.png"},{"id":30413,"name":"Marko Pjaca","age":27,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30413.png"},{"id":30415,"name":"Du\u0161an Vlahovi\u0107","age":22,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30415.png"}]},"venue":{"id":909,"name":"Allianz Stadium","address":"Strada Comunale di Altessano 131","city":"Torino","capacity":45666,"surface":"grass","image":"https://media.api-sports.io/football/venues/909.png"}},{"team":{"id":497,"name":"AS Roma","code":"ROM","country":"Italy","founded":1927,"national":false,"logo":"https://media.api-sports.io/football/teams/497.png","players":[{"id":277192,"name":"Pietro Boer","age":20,"number":63,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/277192.png"},{"id":2674,"name":"Rui Patr\xedcio","age":34,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/2674.png"},{"id":764,"name":"Stefano Greco","age":23,"number":77,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/764.png"},{"id":342071,"name":"Davide Mastrantonio","age":18,"number":67,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/342071.png"},{"id":556,"name":"Mile Svilar","age":23,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/556.png"},{"id":91436,"name":"Devid Eugene Bouah","age":21,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/91436.png"},{"id":85063,"name":"William Ludovic Brandon Bianda","age":22,"number":28,"position":"Defender","photo":"https://media.api-sports.io/football/players/85063.png"},{"id":157052,"name":"R. Calafiori","age":20,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/157052.png"},{"id":30424,"name":"Iba\xf1ez","age":24,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/30424.png"},{"id":770,"name":"Rick Karsdorp","age":27,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/770.png"},{"id":343385,"name":"D. Keramitsis","age":18,"number":75,"position":"Defender","photo":"https://media.api-sports.io/football/players/343385.png"},{"id":30425,"name":"Gianluca Mancini","age":26,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/30425.png"},{"id":342653,"name":"F. Missori","age":18,"number":58,"position":"Defender","photo":"https://media.api-sports.io/football/players/342653.png"},{"id":342072,"name":"M. Ndiaye","age":20,"number":60,"position":"Defender","photo":"https://media.api-sports.io/football/players/342072.png"},{"id":775,"name":"Davide Santon","age":31,"number":18,"position":"Defender","photo":"https://media.api-sports.io/football/players/775.png"},{"id":892,"name":"Chris Smalling","age":33,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/892.png"},{"id":862,"name":"Leonardo Spinazzola","age":29,"number":37,"position":"Defender","photo":"https://media.api-sports.io/football/players/862.png"},{"id":290181,"name":"F. Tripi","age":20,"number":65,"position":"Defender","photo":"https://media.api-sports.io/football/players/290181.png"},{"id":51572,"name":"M. Vi\xf1a","age":25,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/51572.png"},{"id":203474,"name":"N. Zalewski","age":20,"number":59,"position":"Defender","photo":"https://media.api-sports.io/football/players/203474.png"},{"id":286475,"name":"E. Bove","age":20,"number":52,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/286475.png"},{"id":777,"name":"A. \u0106ori\u0107","age":25,"number":19,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/777.png"},{"id":778,"name":"Bryan Cristante","age":27,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/778.png"},{"id":158059,"name":"E. Darboe","age":21,"number":55,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/158059.png"},{"id":324,"name":"A. Diawara","age":25,"number":42,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/324.png"},{"id":902,"name":"Nemanja Mati\u0107","age":34,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/902.png"},{"id":782,"name":"Lorenzo Pellegrini","age":26,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/782.png"},{"id":783,"name":"Salvatore Pezzella","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/783.png"},{"id":2375,"name":"S\xe9rgio Miguel Relvas de Oliveira","age":30,"number":27,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2375.png"},{"id":30409,"name":"Jordan Veretout","age":29,"number":17,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30409.png"},{"id":46982,"name":"Gonzalo Villar","age":24,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/46982.png"},{"id":342035,"name":"Cristian Volpato","age":19,"number":62,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/342035.png"},{"id":786,"name":"N. Zaniolo","age":23,"number":22,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/786.png"},{"id":342038,"name":"F. Afena-Gyan","age":19,"number":64,"position":"Attacker","photo":"https://media.api-sports.io/football/players/342038.png"},{"id":19194,"name":"Tammy Bakumo-Abraham","age":25,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/19194.png"},{"id":788,"name":"\u017dan Celar","age":23,"number":60,"position":"Attacker","photo":"https://media.api-sports.io/football/players/788.png"},{"id":279757,"name":"R. Ciervo","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/279757.png"},{"id":791,"name":"Stephan El Shaarawy","age":30,"number":92,"position":"Attacker","photo":"https://media.api-sports.io/football/players/791.png"},{"id":792,"name":"Justin Kluivert","age":23,"number":34,"position":"Attacker","photo":"https://media.api-sports.io/football/players/792.png"},{"id":347314,"name":"Oliveras","age":18,"number":74,"position":"Attacker","photo":"https://media.api-sports.io/football/players/347314.png"},{"id":67955,"name":"Carles P\xe9rez Sayol","age":24,"number":31,"position":"Attacker","photo":"https://media.api-sports.io/football/players/67955.png"},{"id":162733,"name":"Ruben Fritzner Providence","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162733.png"},{"id":53535,"name":"Eldor Shomurodov","age":27,"number":14,"position":"Attacker","photo":"https://media.api-sports.io/football/players/53535.png"},{"id":342034,"name":"J. Voelkerling Persson","age":19,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/342034.png"}]},"venue":{"id":910,"name":"Stadio Olimpico","address":"Viale dei Gladiatori, 2 / Via del Foro Italico","city":"Roma","capacity":68530,"surface":"grass","image":"https://media.api-sports.io/football/venues/910.png"}},{"team":{"id":498,"name":"Sampdoria","code":"SAM","country":"Italy","founded":1946,"national":false,"logo":"https://media.api-sports.io/football/teams/498.png","players":[{"id":30441,"name":"Emil Audero Mulyadi","age":25,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30441.png"},{"id":56459,"name":"Wladimiro Falcone","age":27,"number":33,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/56459.png"},{"id":31602,"name":"Nicola Ravaglia","age":34,"number":30,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31602.png"},{"id":344781,"name":"Ivan Saio","age":20,"number":32,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/344781.png"},{"id":341837,"name":"L. Aquino","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/341837.png"},{"id":30822,"name":"Tommaso Augello","age":28,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/30822.png"},{"id":3000,"name":"Bartosz Bereszy\u0144ski","age":30,"number":24,"position":"Defender","photo":"https://media.api-sports.io/football/players/3000.png"},{"id":341838,"name":"G. Bonfanti","age":19,"number":35,"position":"Defender","photo":"https://media.api-sports.io/football/players/341838.png"},{"id":30444,"name":"Omar Colley Daniel","age":30,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/30444.png"},{"id":1629,"name":"Andrea Conti","age":28,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/1629.png"},{"id":30747,"name":"F. Depaoli","age":25,"number":12,"position":"Defender","photo":"https://media.api-sports.io/football/players/30747.png"},{"id":30446,"name":"Alex Ferrari","age":28,"number":25,"position":"Defender","photo":"https://media.api-sports.io/football/players/30446.png"},{"id":341836,"name":"F. Migliardi","age":19,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/341836.png"},{"id":135,"name":"Jeison Fabi\xe1n Murillo Cer\xf3n","age":30,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/135.png"},{"id":30447,"name":"Nicola Murru","age":28,"number":29,"position":"Defender","photo":"https://media.api-sports.io/football/players/30447.png"},{"id":341829,"name":"M. Somma","age":20,"number":40,"position":"Defender","photo":"https://media.api-sports.io/football/players/341829.png"},{"id":39285,"name":"K. Askildsen","age":21,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/39285.png"},{"id":202,"name":"A. Candreva","age":35,"number":87,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/202.png"},{"id":2858,"name":"Albin Ekdal","age":33,"number":6,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2858.png"},{"id":15908,"name":"M. Damsgaard","age":22,"number":38,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/15908.png"},{"id":30753,"name":"M. L\xe9ris","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30753.png"},{"id":36980,"name":"Morten Thorsby","age":26,"number":2,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/36980.png"},{"id":30458,"name":"S. Trimboli","age":20,"number":70,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30458.png"},{"id":31403,"name":"Valerio Verre","age":28,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31403.png"},{"id":30459,"name":"R. Vieira Nan","age":24,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30459.png"},{"id":329401,"name":"Gerard Yepes Laut","age":20,"number":28,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/329401.png"},{"id":31436,"name":"Federico Bonazzoli","age":25,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31436.png"},{"id":30460,"name":"Gianluca Caprari","age":29,"number":17,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30460.png"},{"id":162981,"name":"Felice D\'Amico","age":22,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162981.png"},{"id":341831,"name":"L. Di Stefano","age":20,"number":39,"position":"Attacker","photo":"https://media.api-sports.io/football/players/341831.png"},{"id":30462,"name":"Manolo Gabbiadini","age":31,"number":23,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30462.png"},{"id":56209,"name":"Erik Gerbi","age":22,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/56209.png"},{"id":44354,"name":"S. Giovinco","age":35,"number":21,"position":"Attacker","photo":"https://media.api-sports.io/football/players/44354.png"},{"id":31062,"name":"Antonino La Gumina","age":26,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31062.png"},{"id":341832,"name":"D. Montevago","age":19,"number":37,"position":"Attacker","photo":"https://media.api-sports.io/football/players/341832.png"},{"id":30463,"name":"F. Quagliarella","age":39,"number":27,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30463.png"},{"id":31153,"name":"Ernesto Torregrossa","age":30,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31153.png"}]},"venue":{"id":905,"name":"Stadio Comunale Luigi Ferraris","address":"Via Giovanni De Pr\xe0, 1","city":"Genova","capacity":36703,"surface":"grass","image":"https://media.api-sports.io/football/venues/905.png"}},{"team":{"id":499,"name":"Atalanta","code":"ATA","country":"Italy","founded":1907,"national":false,"logo":"https://media.api-sports.io/football/teams/499.png","players":[{"id":338867,"name":"Tommaso Bertini","age":18,"number":47,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/338867.png"},{"id":30417,"name":"Marco Carnesecchi","age":22,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30417.png"},{"id":162573,"name":"Matevz Dajcar","age":20,"number":43,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/162573.png"},{"id":30418,"name":"Pierluigi Gollini","age":27,"number":95,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30418.png"},{"id":2465,"name":"Juan Agust\xedn Musso","age":28,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/2465.png"},{"id":30419,"name":"Francesco Rossi","age":31,"number":31,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30419.png"},{"id":57083,"name":"Alessandro Santopadre","age":24,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/57083.png"},{"id":336646,"name":"Jacopo Sassi","age":19,"number":53,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/336646.png"},{"id":31069,"name":"Marco Sportiello","age":30,"number":57,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31069.png"},{"id":31477,"name":"D. Bettella","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31477.png"},{"id":162570,"name":"G. Cittadini","age":20,"number":46,"position":"Defender","photo":"https://media.api-sports.io/football/players/162570.png"},{"id":30521,"name":"M. Demiral","age":24,"number":28,"position":"Defender","photo":"https://media.api-sports.io/football/players/30521.png"},{"id":30421,"name":"Berat  Djimsiti","age":29,"number":19,"position":"Defender","photo":"https://media.api-sports.io/football/players/30421.png"},{"id":162520,"name":"Rodrigo Guth","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/162520.png"},{"id":30423,"name":"Hans Hateboer","age":28,"number":33,"position":"Defender","photo":"https://media.api-sports.io/football/players/30423.png"},{"id":181825,"name":"D. Heidenreich","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/181825.png"},{"id":31418,"name":"M. Lovato","age":22,"number":66,"position":"Defender","photo":"https://media.api-sports.io/football/players/31418.png"},{"id":30474,"name":"Federico Mattiello","age":27,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30474.png"},{"id":1930,"name":"Joakim M\xe6hle Pedersen","age":25,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/1930.png"},{"id":30428,"name":"Jos\xe9 Luis Palomino","age":32,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/30428.png"},{"id":162012,"name":"M. Ruggeri","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/162012.png"},{"id":289761,"name":"G. Scalvini","age":19,"number":42,"position":"Defender","photo":"https://media.api-sports.io/football/players/289761.png"},{"id":30429,"name":"Rafael Tol\xf3i","age":32,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/30429.png"},{"id":2286,"name":"Davide Zappacosta","age":30,"number":77,"position":"Defender","photo":"https://media.api-sports.io/football/players/2286.png"},{"id":128461,"name":"N. Zortea","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/128461.png"},{"id":30531,"name":"J\xe9r\xe9mie Boga","age":25,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30531.png"},{"id":31500,"name":"C. Capone","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31500.png"},{"id":31396,"name":"M. Carraro","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31396.png"},{"id":140847,"name":"E. Colley","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/140847.png"},{"id":30431,"name":"A. Colpani","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30431.png"},{"id":162011,"name":"A. Cortinovis","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162011.png"},{"id":162522,"name":"J. Da Riva","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162522.png"},{"id":30432,"name":"Marten Elco de Roon","age":31,"number":15,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30432.png"},{"id":30420,"name":"E. Del Prato","age":23,"number":24,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30420.png"},{"id":32023,"name":"S. Elia","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/32023.png"},{"id":2807,"name":"Remo Marco Freuler","age":30,"number":11,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2807.png"},{"id":237150,"name":"S. Giovane","age":19,"number":49,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/237150.png"},{"id":162521,"name":"E. Gyabuaa","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162521.png"},{"id":30434,"name":"Josip Ili\u010di\u0107","age":34,"number":72,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30434.png"},{"id":36899,"name":"T. Koopmeiners","age":24,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/36899.png"},{"id":690,"name":"Viktor Kovalenko","age":26,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/690.png"},{"id":31122,"name":"G. Lunetta","age":26,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31122.png"},{"id":1938,"name":"Ruslan Malinovskyi","age":29,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1938.png"},{"id":30691,"name":"Alessandro Mallamo","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30691.png"},{"id":31493,"name":"F. Melegoni","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31493.png"},{"id":870,"name":"S. Muratore","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/870.png"},{"id":336640,"name":"Andrea Oliveri","age":19,"number":44,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/336640.png"},{"id":162010,"name":"S. Panada","age":20,"number":48,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162010.png"},{"id":2763,"name":"Mario Pa\u0161ali\u0107","age":27,"number":88,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2763.png"},{"id":30436,"name":"Matteo Pessina","age":25,"number":32,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30436.png"},{"id":3010,"name":"Arkadiusz Reca","age":27,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/3010.png"},{"id":162601,"name":"G. Renault","age":20,"number":52,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/162601.png"},{"id":31089,"name":"L. Valzania","age":26,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31089.png"},{"id":336639,"name":"F. Zuccon","age":19,"number":45,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/336639.png"},{"id":357996,"name":"M. Ciss\xe9","age":19,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/357996.png"},{"id":338868,"name":"T. De Nipoti","age":19,"number":50,"position":"Attacker","photo":"https://media.api-sports.io/football/players/338868.png"},{"id":162015,"name":"Jonathan Italeng Ngock","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162015.png"},{"id":36987,"name":"Sam Lammers","age":25,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/36987.png"},{"id":31123,"name":"Simone Mazzocchi","age":24,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31123.png"},{"id":484,"name":"Aleksey Miranchuk","age":27,"number":59,"position":"Attacker","photo":"https://media.api-sports.io/football/players/484.png"},{"id":2493,"name":"Luis Fernando Muriel Fruto","age":31,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2493.png"},{"id":162526,"name":"A. Sidibe","age":20,"number":51,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162526.png"},{"id":31746,"name":"Marco Tumminello","age":24,"number":20,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31746.png"},{"id":2495,"name":"Duv\xe1n Esteban Zapata Banguero","age":31,"number":91,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2495.png"}]},"venue":{"id":879,"name":"Gewiss Stadium","address":"Viale Caio Giulio Cesare, 18","city":"Bergamo","capacity":21300,"surface":"grass","image":"https://media.api-sports.io/football/venues/879.png"}},{"team":{"id":500,"name":"Bologna","code":"BOL","country":"Italy","founded":1909,"national":false,"logo":"https://media.api-sports.io/football/teams/500.png","players":[{"id":339180,"name":"Nicola Bagnolini","age":18,"number":23,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/339180.png"},{"id":31065,"name":"Francesco Bardi","age":30,"number":22,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31065.png"},{"id":344336,"name":"Davide Franzini","age":17,"number":40,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/344336.png"},{"id":56753,"name":"Mouhamadou Fallou Mbacke Sarr","age":25,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/56753.png"},{"id":129557,"name":"Marco Molla","age":20,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/129557.png"},{"id":31098,"name":"Federico Ravaglia","age":23,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31098.png"},{"id":2998,"name":"\u0141ukasz Skorupski","age":31,"number":28,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/2998.png"},{"id":312208,"name":"W. Amey","age":17,"number":66,"position":"Defender","photo":"https://media.api-sports.io/football/players/312208.png"},{"id":305450,"name":"E. Annan","age":20,"number":77,"position":"Defender","photo":"https://media.api-sports.io/football/players/305450.png"},{"id":154799,"name":"L. Binks","age":21,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/154799.png"},{"id":30853,"name":"Kevin Bonifazi","age":26,"number":4,"position":"Defender","photo":"https://media.api-sports.io/football/players/30853.png"},{"id":44871,"name":"A. Hickey","age":20,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/44871.png"},{"id":30498,"name":"L. De Silvestri","age":34,"number":29,"position":"Defender","photo":"https://media.api-sports.io/football/players/30498.png"},{"id":30471,"name":"Mitchell Dijks","age":29,"number":35,"position":"Defender","photo":"https://media.api-sports.io/football/players/30471.png"},{"id":179839,"name":"D. Kasius","age":20,"number":71,"position":"Defender","photo":"https://media.api-sports.io/football/players/179839.png"},{"id":30553,"name":"Charalampos Lykogiannis","age":29,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30553.png"},{"id":30473,"name":"Ibrahima Mbaye","age":28,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/30473.png"},{"id":1982,"name":"Gary Alexis Medel Soto","age":35,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/1982.png"},{"id":335060,"name":"K. Mercier","age":18,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/335060.png"},{"id":342044,"name":"M. Motolese","age":18,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/342044.png"},{"id":22227,"name":"Bakary Adama Soumaoro","age":30,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/22227.png"},{"id":342043,"name":"R. Stivanello","age":18,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/342043.png"},{"id":951,"name":"M. Aebischer","age":25,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/951.png"},{"id":89723,"name":"Andri Fannar Baldursson","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/89723.png"},{"id":289515,"name":"B. Bartha","age":19,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/289515.png"},{"id":6056,"name":"N. Dom\xednguez","age":24,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/6056.png"},{"id":31400,"name":"K. Michael","age":23,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31400.png"},{"id":153459,"name":"N. Pyyhti\xe4","age":19,"number":33,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/153459.png"},{"id":37890,"name":"J. Schouten","age":25,"number":30,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/37890.png"},{"id":30483,"name":"Roberto Soriano","age":31,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30483.png"},{"id":30484,"name":"Mattias Olof Svanberg","age":23,"number":32,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30484.png"},{"id":182280,"name":"K. Urba\u0144ski","age":18,"number":82,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/182280.png"},{"id":18830,"name":"M. Arnautovi\u0107","age":33,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/18830.png"},{"id":30437,"name":"Musa Barrow","age":24,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30437.png"},{"id":787,"name":"G. Cangiano","age":21,"number":74,"position":"Attacker","photo":"https://media.api-sports.io/football/players/787.png"},{"id":30490,"name":"Nicola Domenico Sansone","age":31,"number":10,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30490.png"},{"id":30487,"name":"Diego Falcinelli","age":31,"number":91,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30487.png"},{"id":31553,"name":"C\xe9sar Alejandro Falletti dos Santos","age":30,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31553.png"},{"id":68410,"name":"Musa Juwara","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/68410.png"},{"id":50798,"name":"Orji Okwonkwo","age":24,"number":30,"position":"Attacker","photo":"https://media.api-sports.io/football/players/50798.png"},{"id":30488,"name":"Riccardo Orsolini","age":25,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30488.png"},{"id":290692,"name":"M. Pagliuca","age":20,"number":44,"position":"Attacker","photo":"https://media.api-sports.io/football/players/290692.png"},{"id":314254,"name":"A. Raimondo","age":18,"number":76,"position":"Attacker","photo":"https://media.api-sports.io/football/players/314254.png"},{"id":30491,"name":"Federico Javier Santander Mereles","age":31,"number":19,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30491.png"},{"id":38713,"name":"S. van Hooijdonk","age":22,"number":20,"position":"Attacker","photo":"https://media.api-sports.io/football/players/38713.png"},{"id":30755,"name":"Emanuel Vignato","age":22,"number":55,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30755.png"}]},"venue":{"id":881,"name":"Stadio Renato Dall\'Ara","address":"Via Andrea Costa, 174","city":"Bologna","capacity":39279,"surface":"grass","image":"https://media.api-sports.io/football/venues/881.png"}},{"team":{"id":502,"name":"Fiorentina","code":"FIO","country":"Italy","founded":1926,"national":false,"logo":"https://media.api-sports.io/football/teams/502.png","players":[{"id":57053,"name":"Michele Cerofolini","age":23,"number":31,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/57053.png"},{"id":31035,"name":"Bart\u0142omiej Dr\u0105gowski","age":25,"number":69,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31035.png"},{"id":30392,"name":"Simone Ghidotti","age":22,"number":67,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30392.png"},{"id":30494,"name":"A. Rosati","age":39,"number":25,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30494.png"},{"id":30394,"name":"Pietro Terracciano","age":32,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30394.png"},{"id":30396,"name":"Cristiano Biraghi","age":30,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/30396.png"},{"id":7600,"name":"Igor J\xfalio dos Santos de Paulo","age":24,"number":98,"position":"Defender","photo":"https://media.api-sports.io/football/players/7600.png"},{"id":63935,"name":"G. Ferrarini","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/63935.png"},{"id":342066,"name":"F. Frison","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/342066.png"},{"id":6000,"name":"Lucas  Mart\xednez Quarta","age":26,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/6000.png"},{"id":2817,"name":"Nikola Milenkovi\u0107","age":25,"number":4,"position":"Defender","photo":"https://media.api-sports.io/football/players/2817.png"},{"id":403,"name":"Matija Nastasi\u0107","age":29,"number":55,"position":"Defender","photo":"https://media.api-sports.io/football/players/403.png"},{"id":31642,"name":"L. Ranieri","age":23,"number":30,"position":"Defender","photo":"https://media.api-sports.io/football/players/31642.png"},{"id":349,"name":"Aleksa Terzi\u0107","age":23,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/349.png"},{"id":31047,"name":"Jacob Vands\xf8 Rasmussen","age":25,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31047.png"},{"id":31730,"name":"Lorenzo Venuti","age":27,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/31730.png"},{"id":342023,"name":"V. Agostinelli","age":20,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/342023.png"},{"id":74,"name":"Sofyan Amrabat","age":26,"number":34,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/74.png"},{"id":302432,"name":"A. Bianco","age":20,"number":42,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/302432.png"},{"id":1638,"name":"Giacomo Bonaventura","age":33,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1638.png"},{"id":31615,"name":"Gaetano Castrovilli","age":25,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31615.png"},{"id":30532,"name":"Joseph Alfred Duncan","age":29,"number":32,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30532.png"},{"id":22229,"name":"Nanitamo Jonathan Ikon\xe9","age":24,"number":11,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/22229.png"},{"id":106236,"name":"A. Lovisa","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/106236.png"},{"id":56560,"name":"Y. Maleh","age":24,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/56560.png"},{"id":30810,"name":"Rolando Mandragora","age":25,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30810.png"},{"id":30406,"name":"Crist\xf3bal Montiel Rodr\xedguez","age":22,"number":19,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30406.png"},{"id":2560,"name":"Erick Antonio Pulgar Farf\xe1n","age":28,"number":15,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2560.png"},{"id":30456,"name":"Riccardo Saponara","age":31,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30456.png"},{"id":330,"name":"Jos\xe9 Mar\xeda Callej\xf3n Bueno","age":35,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/330.png"},{"id":342067,"name":"F. Di Stefano","age":19,"number":28,"position":"Attacker","photo":"https://media.api-sports.io/football/players/342067.png"},{"id":342020,"name":"D. Egharevba","age":19,"number":21,"position":"Attacker","photo":"https://media.api-sports.io/football/players/342020.png"},{"id":26315,"name":"Nicol\xe1s Iv\xe1n Gonz\xe1lez","age":24,"number":22,"position":"Attacker","photo":"https://media.api-sports.io/football/players/26315.png"},{"id":30971,"name":"Gabriele Gori","age":23,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30971.png"},{"id":1224,"name":"Aleksandr Kokorin","age":31,"number":91,"position":"Attacker","photo":"https://media.api-sports.io/football/players/1224.png"},{"id":30789,"name":"Christian Michael Kouam\xe9 Kouakou","age":25,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30789.png"},{"id":9938,"name":"Arthur Mendon\xe7a Cabral","age":24,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/9938.png"},{"id":43096,"name":"Louis Munteanu","age":20,"number":67,"position":"Attacker","photo":"https://media.api-sports.io/football/players/43096.png"},{"id":31507,"name":"Riccardo Sottil","age":23,"number":33,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31507.png"},{"id":194670,"name":"E. To\xe7i","age":19,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/194670.png"}]},"venue":{"id":902,"name":"Stadio Artemio Franchi","address":"Viale Manfredo Fanti 14","city":"Firenze","capacity":43147,"surface":"grass","image":"https://media.api-sports.io/football/venues/902.png"}},{"team":{"id":503,"name":"Torino","code":"TOR","country":"Italy","founded":1906,"national":false,"logo":"https://media.api-sports.io/football/teams/503.png","players":[{"id":30416,"name":"E. Berisha","age":33,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30416.png"},{"id":30492,"name":"Lucas Gemello","age":22,"number":89,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30492.png"},{"id":342060,"name":"Alberto Milan","age":19,"number":31,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/342060.png"},{"id":31156,"name":"Vanja Milinkovi\u0107 Savi\u0107","age":25,"number":32,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31156.png"},{"id":2771,"name":"Temitayo Olufisayo Olaoluwa Aina","age":26,"number":34,"position":"Defender","photo":"https://media.api-sports.io/football/players/2771.png"},{"id":302069,"name":"S. Angori","age":19,"number":21,"position":"Defender","photo":"https://media.api-sports.io/football/players/302069.png"},{"id":30496,"name":"C. Ansaldi","age":36,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/30496.png"},{"id":342061,"name":"A. Anton","age":19,"number":78,"position":"Defender","photo":"https://media.api-sports.io/football/players/342061.png"},{"id":30497,"name":"Bremer","age":25,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/30497.png"},{"id":31226,"name":"A. Buongiorno","age":23,"number":99,"position":"Defender","photo":"https://media.api-sports.io/football/players/31226.png"},{"id":264334,"name":"Christian Celesia","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/264334.png"},{"id":30499,"name":"L\xe9vy Koffi Djidji","age":30,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/30499.png"},{"id":30501,"name":"Armando Izzo","age":30,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/30501.png"},{"id":1631,"name":"Ricardo Iv\xe1n Rodr\xedguez Araya","age":30,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/1631.png"},{"id":30504,"name":"W. Singo","age":22,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/30504.png"},{"id":8586,"name":"M\xebrgim Vojvoda","age":27,"number":27,"position":"Defender","photo":"https://media.api-sports.io/football/players/8586.png"},{"id":128772,"name":"D. Zima","age":22,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/128772.png"},{"id":30479,"name":"S. Edera","age":25,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30479.png"},{"id":180455,"name":"M. Garbett","age":20,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/180455.png"},{"id":30513,"name":"B. Kone","age":22,"number":25,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30513.png"},{"id":3009,"name":"Karol Linetty","age":27,"number":77,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/3009.png"},{"id":2823,"name":"Sa\u0161a Luki\u0107","age":26,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2823.png"},{"id":30810,"name":"Rolando Mandragora","age":25,"number":38,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30810.png"},{"id":31370,"name":"J. Segre","age":25,"number":6,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31370.png"},{"id":30509,"name":"Andrea Belotti","age":29,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30509.png"},{"id":30514,"name":"Vincenzo Millico","age":22,"number":72,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30514.png"},{"id":123,"name":"Pietro Pellegri","age":21,"number":64,"position":"Attacker","photo":"https://media.api-sports.io/football/players/123.png"},{"id":126766,"name":"Nicola Rauti","age":22,"number":23,"position":"Attacker","photo":"https://media.api-sports.io/football/players/126766.png"},{"id":2522,"name":"Arnaldo Antonio Sanabria Ayala","age":26,"number":19,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2522.png"},{"id":282706,"name":"D. Seck","age":21,"number":23,"position":"Attacker","photo":"https://media.api-sports.io/football/players/282706.png"},{"id":334,"name":"Simone Verdi","age":30,"number":24,"position":"Attacker","photo":"https://media.api-sports.io/football/players/334.png"},{"id":30515,"name":"Simone Zaza","age":31,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30515.png"}]},"venue":{"id":943,"name":"Stadio Olimpico Grande Torino","address":"Corso Sebastopoli 123, Santa Rita","city":"Torino","capacity":27958,"surface":"grass","image":"https://media.api-sports.io/football/venues/943.png"}},{"team":{"id":504,"name":"Verona","code":"VER","country":"Italy","founded":1903,"national":false,"logo":"https://media.api-sports.io/football/teams/504.png","players":[{"id":30912,"name":"Alessandro Berardi","age":31,"number":22,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30912.png"},{"id":362756,"name":"Elia Boseggia","age":18,"number":74,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/362756.png"},{"id":30913,"name":"Mattia Chiesa","age":22,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30913.png"},{"id":60578,"name":"Kaur Kivila","age":19,"number":80,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/60578.png"},{"id":14268,"name":"Ivor Pandur","age":22,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/14268.png"},{"id":350539,"name":"Giacomo Toniolo","age":18,"number":94,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/350539.png"},{"id":126741,"name":"B. Amione","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/126741.png"},{"id":31099,"name":"N. Casale","age":24,"number":16,"position":"Defender","photo":"https://media.api-sports.io/football/players/31099.png"},{"id":30397,"name":"Federico Ceccherini","age":30,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/30397.png"},{"id":61808,"name":"M. \xc7etin","age":25,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/61808.png"},{"id":342063,"name":"D. Coppola","age":19,"number":42,"position":"Defender","photo":"https://media.api-sports.io/football/players/342063.png"},{"id":30921,"name":"Pawe\u0142 Marek Dawidowicz","age":27,"number":27,"position":"Defender","photo":"https://media.api-sports.io/football/players/30921.png"},{"id":30922,"name":"Marco Davide Faraoni","age":31,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/30922.png"},{"id":30772,"name":"Koray G\xfcnter","age":28,"number":21,"position":"Defender","photo":"https://media.api-sports.io/football/players/30772.png"},{"id":30924,"name":"M. Kumbulla","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30924.png"},{"id":30526,"name":"Giangiacomo Magnani","age":27,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/30526.png"},{"id":971,"name":"Panagiotis Retsos","age":24,"number":45,"position":"Defender","photo":"https://media.api-sports.io/football/players/971.png"},{"id":30803,"name":"Anton\xedn Bar\xe1k","age":28,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30803.png"},{"id":137384,"name":"Tochi Phil Chukwuani","age":19,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/137384.png"},{"id":46170,"name":"I. Ili\u0107","age":21,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/46170.png"},{"id":2822,"name":"D. Lazovi\u0107","age":32,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2822.png"},{"id":265552,"name":"C. Pierobon","age":20,"number":26,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/265552.png"},{"id":30781,"name":"Miguel Veloso","age":36,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30781.png"},{"id":40399,"name":"M. Praszelik","age":22,"number":88,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/40399.png"},{"id":30778,"name":"Daniel Sartori Bessa","age":29,"number":24,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30778.png"},{"id":22174,"name":"Adrien Tameze","age":28,"number":61,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/22174.png"},{"id":264472,"name":"F. Terracciano","age":19,"number":97,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/264472.png"},{"id":342013,"name":"Mattia Turra","age":20,"number":63,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/342013.png"},{"id":109806,"name":"David Flakus Bosilj","age":20,"number":32,"position":"Attacker","photo":"https://media.api-sports.io/football/players/109806.png"},{"id":342064,"name":"M. Florio","age":19,"number":71,"position":"Attacker","photo":"https://media.api-sports.io/football/players/342064.png"},{"id":30440,"name":"R. Piccoli","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30440.png"},{"id":30414,"name":"Giovanni Pablo Simeone","age":27,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30414.png"},{"id":30761,"name":"Mariusz Pawe\u0142 St\u0119pi\u0144ski","age":27,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30761.png"},{"id":31692,"name":"M. \u0110uri\u0107","age":32,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31692.png"}]},"venue":{"id":890,"name":"Stadio Marc\'Antonio Bentegodi","address":"Piazzale Olimpia","city":"Verona","capacity":39211,"surface":"grass","image":"https://media.api-sports.io/football/venues/890.png"}},{"team":{"id":505,"name":"Inter","code":"INT","country":"Italy","founded":1908,"national":false,"logo":"https://media.api-sports.io/football/teams/505.png","players":[{"id":30974,"name":"A. Cordaz","age":39,"number":21,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30974.png"},{"id":188,"name":"S. Handanovi\u010d","age":38,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/188.png"},{"id":526,"name":"Andr\xe9 Onana Onana","age":26,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/526.png"},{"id":30765,"name":"Ionu\u021b Andrei Radu","age":25,"number":97,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30765.png"},{"id":336703,"name":"William Rovida","age":19,"number":40,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/336703.png"},{"id":162445,"name":"Filip Stankovi\u0107","age":20,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/162445.png"},{"id":31009,"name":"Alessandro Bastoni","age":23,"number":95,"position":"Defender","photo":"https://media.api-sports.io/football/players/31009.png"},{"id":192,"name":"Dalbert Henrique Chagas Estev\xe3o","age":29,"number":29,"position":"Defender","photo":"https://media.api-sports.io/football/players/192.png"},{"id":162195,"name":"F. Cortinovis","age":20,"number":43,"position":"Defender","photo":"https://media.api-sports.io/football/players/162195.png"},{"id":193,"name":"Danilo D\'Ambrosio","age":34,"number":33,"position":"Defender","photo":"https://media.api-sports.io/football/players/193.png"},{"id":887,"name":"Matteo Darmian","age":33,"number":36,"position":"Defender","photo":"https://media.api-sports.io/football/players/887.png"},{"id":194,"name":"Stefan de Vrij","age":30,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/194.png"},{"id":31010,"name":"Federico Dimarco","age":25,"number":32,"position":"Defender","photo":"https://media.api-sports.io/football/players/31010.png"},{"id":226,"name":"Denzel Justus Morris Dumfries","age":26,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/226.png"},{"id":30422,"name":"Robin Everardus Gosens","age":28,"number":18,"position":"Defender","photo":"https://media.api-sports.io/football/players/30422.png"},{"id":771,"name":"Aleksandar Kolarov","age":37,"number":11,"position":"Defender","photo":"https://media.api-sports.io/football/players/771.png"},{"id":134431,"name":"L. Pirola","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/134431.png"},{"id":198,"name":"Milan \u0160kriniar","age":27,"number":37,"position":"Defender","photo":"https://media.api-sports.io/football/players/198.png"},{"id":2107,"name":"Z. Vanheusden","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/2107.png"},{"id":322626,"name":"M. Zanotti","age":19,"number":46,"position":"Defender","photo":"https://media.api-sports.io/football/players/322626.png"},{"id":21004,"name":"L. Agoum\xe9","age":20,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/21004.png"},{"id":275776,"name":"K. Asllani","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/275776.png"},{"id":30558,"name":"Nicol\xf2 Barella","age":25,"number":23,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30558.png"},{"id":201,"name":"Marcelo Brozovi\u0107","age":30,"number":77,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/201.png"},{"id":1640,"name":"Hakan \xc7alhano\u011flu","age":28,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1640.png"},{"id":270507,"name":"C. Casadei","age":19,"number":42,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/270507.png"},{"id":1854,"name":"Carlos Joaqu\xedn Correa","age":28,"number":19,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1854.png"},{"id":203,"name":"Roberto Gagliardini","age":28,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/203.png"},{"id":25353,"name":"Valentino Lando Lazaro","age":26,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/25353.png"},{"id":1457,"name":"Henrikh Mkhitaryan","age":33,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1457.png"},{"id":161857,"name":"T. Persyn","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/161857.png"},{"id":336629,"name":"M. Sangalli","age":20,"number":38,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/336629.png"},{"id":211,"name":"Mat\xedas Vecino Falero","age":31,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/211.png"},{"id":151,"name":"Arturo Erasmo Vidal Pardo","age":35,"number":22,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/151.png"},{"id":286473,"name":"F. Carboni","age":19,"number":47,"position":"Attacker","photo":"https://media.api-sports.io/football/players/286473.png"},{"id":341644,"name":"D. Curatolo","age":18,"number":41,"position":"Attacker","photo":"https://media.api-sports.io/football/players/341644.png"},{"id":790,"name":"E. D\u017eeko","age":36,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/790.png"},{"id":907,"name":"Romelu Lukaku Menama","age":29,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/907.png"},{"id":217,"name":"Lautaro Javier Mart\xednez","age":25,"number":10,"position":"Attacker","photo":"https://media.api-sports.io/football/players/217.png"},{"id":31094,"name":"Andrea Pinamonti","age":23,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31094.png"},{"id":220,"name":"Eddie Anthony Salcedo Mora","age":21,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/220.png"},{"id":910,"name":"A. S\xe1nchez","age":34,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/910.png"},{"id":195512,"name":"M. Satriano","age":21,"number":48,"position":"Attacker","photo":"https://media.api-sports.io/football/players/195512.png"}]},"venue":{"id":907,"name":"Stadio Giuseppe Meazza","address":"Via Piccolomini 5","city":"Milano","capacity":80018,"surface":"grass","image":"https://media.api-sports.io/football/venues/907.png"}},{"team":{"id":511,"name":"Empoli","code":"EMP","country":"Italy","founded":1920,"national":false,"logo":"https://media.api-sports.io/football/teams/511.png","players":[{"id":292343,"name":"Valerio Biagini","age":19,"number":38,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/292343.png"},{"id":56780,"name":"Jacopo Furlan","age":29,"number":22,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/56780.png"},{"id":30794,"name":"Samuele Perisan","age":25,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30794.png"},{"id":322632,"name":"Alex Sposito","age":21,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/322632.png"},{"id":50023,"name":"S. Ujkani","age":34,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/50023.png"},{"id":31354,"name":"Guglielmo Vicario","age":26,"number":13,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31354.png"},{"id":91503,"name":"S. Canestrelli","age":22,"number":4,"position":"Defender","photo":"https://media.api-sports.io/football/players/91503.png"},{"id":128495,"name":"Francesco Donati","age":21,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/128495.png"},{"id":31724,"name":"Riccardo Fiamozzi","age":29,"number":20,"position":"Defender","photo":"https://media.api-sports.io/football/players/31724.png"},{"id":14329,"name":"Ardian Ismajli","age":26,"number":34,"position":"Defender","photo":"https://media.api-sports.io/football/players/14329.png"},{"id":136087,"name":"F. Parisi","age":22,"number":65,"position":"Defender","photo":"https://media.api-sports.io/football/players/136087.png"},{"id":341833,"name":"L. Pezzola","age":20,"number":36,"position":"Defender","photo":"https://media.api-sports.io/football/players/341833.png"},{"id":31547,"name":"Roberto Pirrello","age":26,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31547.png"},{"id":282412,"name":"A. Rizza","age":19,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/282412.png"},{"id":30450,"name":"Lorenzo Tonelli","age":32,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/30450.png"},{"id":180510,"name":"M. Viti","age":20,"number":42,"position":"Defender","photo":"https://media.api-sports.io/football/players/180510.png"},{"id":56163,"name":"Davide Zappella","age":24,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/56163.png"},{"id":48577,"name":"N. Bajrami","age":23,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/48577.png"},{"id":30624,"name":"F. Bandinelli","age":27,"number":25,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30624.png"},{"id":30403,"name":"Marco Benassi","age":28,"number":15,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30403.png"},{"id":31237,"name":"G. Crociata","age":25,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31237.png"},{"id":31207,"name":"Samuele Damiani","age":24,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31207.png"},{"id":340699,"name":"D. Degli Innocenti","age":19,"number":24,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/340699.png"},{"id":340700,"name":"J. Fazzini","age":19,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/340700.png"},{"id":31555,"name":"Nicolas Thibault Haas","age":26,"number":32,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31555.png"},{"id":30932,"name":"Liam Henderson","age":26,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30932.png"},{"id":3014,"name":"S. \u017burkowski","age":25,"number":27,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/3014.png"},{"id":31056,"name":"S. Ricci","age":21,"number":28,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31056.png"},{"id":31028,"name":"Leo \u0160tulac","age":28,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31028.png"},{"id":288769,"name":"T. Baldanzi","age":19,"number":35,"position":"Attacker","photo":"https://media.api-sports.io/football/players/288769.png"},{"id":30486,"name":"Mattia Destro","age":31,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30486.png"},{"id":287374,"name":"E. Ekong","age":20,"number":17,"position":"Attacker","photo":"https://media.api-sports.io/football/players/287374.png"},{"id":31743,"name":"Andrea La Mantia","age":31,"number":19,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31743.png"},{"id":335213,"name":"Matteo Martini","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/335213.png"},{"id":31560,"name":"Stefano Moreo","age":29,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31560.png"}]},"venue":{"id":896,"name":"Stadio Carlo Castellani","address":"Viale delle Olimpiadi","city":"Empoli","capacity":16284,"surface":"grass","image":"https://media.api-sports.io/football/venues/896.png"}},{"team":{"id":514,"name":"Salernitana","code":"SAL","country":"Italy","founded":2011,"national":false,"logo":"https://media.api-sports.io/football/teams/514.png","players":[{"id":199210,"name":"Jacopo De Matteis","age":20,"number":71,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/199210.png"},{"id":31473,"name":"V. Fiorillo","age":32,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31473.png"},{"id":31664,"name":"Alessandro Micai","age":29,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31664.png"},{"id":282634,"name":"Antonio Russo","age":22,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/282634.png"},{"id":31008,"name":"Luigi Sepe","age":31,"number":55,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31008.png"},{"id":30951,"name":"Luka Bogdan","age":26,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/30951.png"},{"id":351268,"name":"T. De Lorenzo","age":18,"number":38,"position":"Defender","photo":"https://media.api-sports.io/football/players/351268.png"},{"id":768,"name":"F. Fazio","age":35,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/768.png"},{"id":31011,"name":"Riccardo Gagliolo","age":32,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/31011.png"},{"id":31389,"name":"Norbert Gy\xf6mb\xe9r","age":30,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/31389.png"},{"id":31672,"name":"V. Mantovani","age":26,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31672.png"},{"id":350614,"name":"M. Perrone","age":19,"number":37,"position":"Defender","photo":"https://media.api-sports.io/football/players/350614.png"},{"id":8864,"name":"S. Sy","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/8864.png"},{"id":31050,"name":"Fr\xe9d\xe9ric Veseli","age":30,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/31050.png"},{"id":39286,"name":"E. Bohinen","age":23,"number":15,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/39286.png"},{"id":31613,"name":"R. Boultam","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31613.png"},{"id":31053,"name":"Leonardo Capezzi","age":27,"number":28,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31053.png"},{"id":31170,"name":"Michele Cavion","age":28,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31170.png"},{"id":49938,"name":"Joel Chukwuma Obi","age":31,"number":22,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/49938.png"},{"id":1748,"name":"L. Coulibaly","age":26,"number":18,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/1748.png"},{"id":31680,"name":"Francesco Di Tacchio","age":32,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31680.png"},{"id":10097,"name":"\xc9derson","age":23,"number":13,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/10097.png"},{"id":283008,"name":"A. Iervolino","age":19,"number":39,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/283008.png"},{"id":2954,"name":"W. Kechrida","age":27,"number":24,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/2954.png"},{"id":280947,"name":"A. Mo\u021boc","age":20,"number":35,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/280947.png"},{"id":30782,"name":"Ivan Radovanovi\u0107","age":34,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30782.png"},{"id":515,"name":"F. Rib\xe9ry","age":39,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/515.png"},{"id":349460,"name":"Alessandro Russo","age":19,"number":36,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/349460.png"},{"id":31369,"name":"Andrea Schiavone","age":29,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31369.png"},{"id":349459,"name":"L. Cannavale","age":20,"number":34,"position":"Attacker","photo":"https://media.api-sports.io/football/players/349459.png"},{"id":56951,"name":"Giuseppe Fella","age":29,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/56951.png"},{"id":352228,"name":"A. Guida","age":20,"number":40,"position":"Attacker","photo":"https://media.api-sports.io/football/players/352228.png"},{"id":201970,"name":"Carmine Iannone","age":21,"number":15,"position":"Attacker","photo":"https://media.api-sports.io/football/players/201970.png"},{"id":15782,"name":"Julian Kristoffersen","age":25,"number":19,"position":"Attacker","photo":"https://media.api-sports.io/football/players/15782.png"},{"id":31685,"name":"Francesco Orlando","age":26,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31685.png"},{"id":31003,"name":"Simeon Tochukwu Nwankwo","age":30,"number":25,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31003.png"},{"id":134432,"name":"Edoardo Vergani","age":21,"number":63,"position":"Attacker","photo":"https://media.api-sports.io/football/players/134432.png"}]},"venue":{"id":933,"name":"Stadio Arechi","address":"Via Salvador Allende","city":"Salerno","capacity":37245,"surface":"grass","image":"https://media.api-sports.io/football/venues/933.png"}},{"team":{"id":515,"name":"Spezia","code":"SPE","country":"Italy","founded":1906,"national":false,"logo":"https://media.api-sports.io/football/teams/515.png","players":[{"id":31037,"name":"Ivan Provedel","age":28,"number":94,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31037.png"},{"id":224,"name":"Jeroen Zoet","age":31,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/224.png"},{"id":327572,"name":"Petar Zovko","age":20,"number":40,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/327572.png"},{"id":22134,"name":"Kelvin Amian Adou","age":24,"number":27,"position":"Defender","photo":"https://media.api-sports.io/football/players/22134.png"},{"id":30687,"name":"Simone Bastoni","age":26,"number":20,"position":"Defender","photo":"https://media.api-sports.io/football/players/30687.png"},{"id":315249,"name":"N. Bertola","age":19,"number":77,"position":"Defender","photo":"https://media.api-sports.io/football/players/315249.png"},{"id":30824,"name":"Elio Capradossi","age":26,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/30824.png"},{"id":47217,"name":"Salvador Ferrer","age":24,"number":21,"position":"Defender","photo":"https://media.api-sports.io/football/players/47217.png"},{"id":329400,"name":"L. Gabelli","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/329400.png"},{"id":47985,"name":"Emil Alfons Holm","age":22,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/47985.png"},{"id":31258,"name":"Petko Hristov","age":23,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/31258.png"},{"id":61431,"name":"J. Kiwior","age":22,"number":14,"position":"Defender","photo":"https://media.api-sports.io/football/players/61431.png"},{"id":31045,"name":"Dimitrios Nikolaou","age":24,"number":43,"position":"Defender","photo":"https://media.api-sports.io/football/players/31045.png"},{"id":30448,"name":"Jacopo Sala","age":31,"number":7,"position":"Defender","photo":"https://media.api-sports.io/football/players/30448.png"},{"id":30840,"name":"L. Vignali","age":26,"number":12,"position":"Defender","photo":"https://media.api-sports.io/football/players/30840.png"},{"id":215902,"name":"Kleis Bozhanaj","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/215902.png"},{"id":10352,"name":"L\xe9o Sena","age":27,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/10352.png"},{"id":89520,"name":"M. Ellertsson","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/89520.png"},{"id":30836,"name":"G. Maggiore","age":24,"number":25,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30836.png"},{"id":20927,"name":"A. Nguiamba","age":23,"number":39,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/20927.png"},{"id":315250,"name":"N. Pietra","age":19,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/315250.png"},{"id":48129,"name":"A. Sher","age":20,"number":31,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/48129.png"},{"id":30457,"name":"Ognjen Stijepovi\u0107","age":23,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30457.png"},{"id":193870,"name":"Janis Antiste","age":20,"number":22,"position":"Attacker","photo":"https://media.api-sports.io/football/players/193870.png"},{"id":206280,"name":"Leandro M\xe1rio Bald\xe9 Sanca","age":22,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/206280.png"},{"id":340975,"name":"D. Delori\xe8","age":18,"number":76,"position":"Attacker","photo":"https://media.api-sports.io/football/players/340975.png"},{"id":30845,"name":"Emanuel Quartsin Gyasi","age":28,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30845.png"},{"id":30999,"name":"Samuel Mr\xe1z","age":25,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30999.png"},{"id":31318,"name":"M\'Bala Nzola","age":26,"number":18,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31318.png"},{"id":163338,"name":"Suf Podgoreanu","age":20,"number":17,"position":"Attacker","photo":"https://media.api-sports.io/football/players/163338.png"},{"id":61156,"name":"David Strelec","age":21,"number":44,"position":"Attacker","photo":"https://media.api-sports.io/football/players/61156.png"},{"id":47500,"name":"Daniele Verde","age":26,"number":10,"position":"Attacker","photo":"https://media.api-sports.io/football/players/47500.png"},{"id":281218,"name":"D. Zuppel","age":20,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/281218.png"}]},"venue":{"id":939,"name":"Stadio Alberto Picco","address":"Via Nicol\xf2 Fieschi, 18","city":"La Spezia","capacity":10336,"surface":"artificial turf","image":"https://media.api-sports.io/football/venues/939.png"}},{"team":{"id":520,"name":"Cremonese","code":"CRE","country":"Italy","founded":1903,"national":false,"logo":"https://media.api-sports.io/football/teams/520.png","players":[{"id":364512,"name":"Federico Agazzi","age":null,"number":44,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/364512.png"},{"id":327771,"name":"Dorian Jerzy Ci\u0119\u017ckowski","age":21,"number":22,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/327771.png"},{"id":327773,"name":"Davide Peschieri","age":18,"number":48,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/327773.png"},{"id":30919,"name":"Matteo Bianchetti","age":29,"number":15,"position":"Defender","photo":"https://media.api-sports.io/football/players/30919.png"},{"id":30920,"name":"Alessandro Crescenzi","age":31,"number":23,"position":"Defender","photo":"https://media.api-sports.io/football/players/30920.png"},{"id":56643,"name":"A. Fiordaliso","age":23,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/56643.png"},{"id":282415,"name":"Luca Munaretti","age":20,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/282415.png"},{"id":30427,"name":"C. Okoli","age":21,"number":55,"position":"Defender","photo":"https://media.api-sports.io/football/players/30427.png"},{"id":31421,"name":"Luca Ravanelli","age":25,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/31421.png"},{"id":91358,"name":"E. Valeri","age":24,"number":3,"position":"Defender","photo":"https://media.api-sports.io/football/players/91358.png"},{"id":35544,"name":"J. V\xe1squez","age":24,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/35544.png"},{"id":30831,"name":"Paolo Bartolomei","age":33,"number":16,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30831.png"},{"id":30634,"name":"Cristian Buonaiuto","age":30,"number":10,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30634.png"},{"id":31614,"name":"Michele Castagnetti","age":33,"number":19,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31614.png"},{"id":90398,"name":"Francesco Cerretelli","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/90398.png"},{"id":56972,"name":"Riccardo Collodel","age":24,"number":5,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/56972.png"},{"id":327772,"name":"D. Frey","age":20,"number":27,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/327772.png"},{"id":281658,"name":"Matteo Ghisolfi","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/281658.png"},{"id":31619,"name":"Stefano Girelli","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31619.png"},{"id":289292,"name":"T. Milanese","age":20,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/289292.png"},{"id":30692,"name":"F. Nardi","age":24,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30692.png"},{"id":18128,"name":"D. Politic","age":22,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/18128.png"},{"id":324322,"name":"Joshua tenkorang","age":22,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/324322.png"},{"id":31344,"name":"Jaime B\xe1ez St\xe1bile","age":27,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31344.png"},{"id":31092,"name":"Daniel Ciofani","age":37,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31092.png"},{"id":30939,"name":"S. Di Carmine","age":34,"number":29,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30939.png"},{"id":57016,"name":"Cedric Gondo","age":26,"number":8,"position":"Attacker","photo":"https://media.api-sports.io/football/players/57016.png"},{"id":31629,"name":"Luca Strizzolo","age":30,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31629.png"},{"id":56304,"name":"Luca Zanimacchia","age":24,"number":98,"position":"Attacker","photo":"https://media.api-sports.io/football/players/56304.png"},{"id":30686,"name":"Marco Zunno","age":21,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30686.png"}]},"venue":{"id":894,"name":"Stadio Giovanni Zini","address":"Via Persico, 19","city":"Cremona","capacity":20034,"surface":"grass","image":"https://media.api-sports.io/football/venues/894.png"}},{"team":{"id":867,"name":"Lecce","code":"LEC","country":"Italy","founded":1908,"national":false,"logo":"https://media.api-sports.io/football/teams/867.png","players":[{"id":31717,"name":"Marco Bleve","age":27,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31717.png"},{"id":42712,"name":"Alexandru Gabriel Borbei","age":19,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/42712.png"},{"id":30391,"name":"F. Brancolini","age":21,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30391.png"},{"id":330720,"name":"Alberto Dima","age":18,"number":32,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/330720.png"},{"id":156619,"name":"Jasper Lauri Petteri Samooja","age":19,"number":35,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/156619.png"},{"id":31384,"name":"Gabriel Vasconcelos","age":30,"number":21,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31384.png"},{"id":30469,"name":"Arturo Calabresi","age":26,"number":33,"position":"Defender","photo":"https://media.api-sports.io/football/players/30469.png"},{"id":31328,"name":"Kastriot Dermaku","age":30,"number":44,"position":"Defender","photo":"https://media.api-sports.io/football/players/31328.png"},{"id":31517,"name":"G. Frabotta","age":23,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/31517.png"},{"id":31543,"name":"A. Gallo","age":22,"number":25,"position":"Defender","photo":"https://media.api-sports.io/football/players/31543.png"},{"id":127631,"name":"V. Gendrey","age":22,"number":17,"position":"Defender","photo":"https://media.api-sports.io/football/players/127631.png"},{"id":341918,"name":"E. Hasi\u0107","age":19,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/341918.png"},{"id":30862,"name":"Lorenco \u0160imi\u0107","age":26,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/30862.png"},{"id":30622,"name":"A. Tuia","age":32,"number":13,"position":"Defender","photo":"https://media.api-sports.io/football/players/30622.png"},{"id":48352,"name":"J. Bj\xf6rkengren","age":24,"number":23,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/48352.png"},{"id":21384,"name":"Alexis Blin","age":26,"number":29,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/21384.png"},{"id":7712,"name":"M. Hjulmand","age":23,"number":42,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/7712.png"},{"id":32158,"name":"Mario Gargiulo","age":26,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/32158.png"},{"id":28744,"name":"\xde. Helgason","age":22,"number":14,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/28744.png"},{"id":31736,"name":"\u017dan Majer","age":30,"number":37,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31736.png"},{"id":180585,"name":"Sergio Maselli","age":21,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/180585.png"},{"id":30633,"name":"Ra\xfal Jos\xe9 Asencio Moraes","age":24,"number":90,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30633.png"},{"id":40624,"name":"Marcin Listkowski","age":24,"number":19,"position":"Attacker","photo":"https://media.api-sports.io/football/players/40624.png"},{"id":91301,"name":"A. Ragusa","age":32,"number":7,"position":"Attacker","photo":"https://media.api-sports.io/football/players/91301.png"},{"id":162029,"name":"Pablo Rodr\xedguez","age":21,"number":99,"position":"Attacker","photo":"https://media.api-sports.io/football/players/162029.png"},{"id":31624,"name":"Gabriel Tadeu Strefezza Rebelato","age":25,"number":27,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31624.png"},{"id":1018,"name":"Assan Torrez Ceesay","age":28,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/1018.png"}]},"venue":{"id":911,"name":"Stadio Comunale Via del Mare","address":"Viale dello Stadio","city":"Lecce","capacity":33876,"surface":"grass","image":"https://media.api-sports.io/football/venues/911.png"}},{"team":{"id":1579,"name":"Monza","code":"MON","country":"Italy","founded":1912,"national":false,"logo":"https://media.api-sports.io/football/teams/1579.png","players":[{"id":30546,"name":"Alessio Cragno","age":28,"number":null,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30546.png"},{"id":30820,"name":"E. Lamanna","age":33,"number":1,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/30820.png"},{"id":308673,"name":"Andrea Sergio Mazza","age":18,"number":62,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/308673.png"},{"id":287079,"name":"Stefano Rubbi","age":20,"number":22,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/287079.png"},{"id":31445,"name":"Daniele Sommariva","age":25,"number":12,"position":"Goalkeeper","photo":"https://media.api-sports.io/football/players/31445.png"},{"id":31542,"name":"G. Bellusci","age":33,"number":6,"position":"Defender","photo":"https://media.api-sports.io/football/players/31542.png"},{"id":30615,"name":"Luca Caldirola","age":31,"number":5,"position":"Defender","photo":"https://media.api-sports.io/football/players/30615.png"},{"id":193270,"name":"A. Carboni","age":21,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/193270.png"},{"id":25911,"name":"Giulio Donati","age":32,"number":2,"position":"Defender","photo":"https://media.api-sports.io/football/players/25911.png"},{"id":10997,"name":"Valentin Ivaylov Antov","age":22,"number":26,"position":"Defender","photo":"https://media.api-sports.io/football/players/10997.png"},{"id":30934,"name":"Luca Marrone","age":32,"number":34,"position":"Defender","photo":"https://media.api-sports.io/football/players/30934.png"},{"id":30994,"name":"Salvatore Andrea Molina","age":30,"number":79,"position":"Defender","photo":"https://media.api-sports.io/football/players/30994.png"},{"id":12774,"name":"G. Paletta","age":36,"number":29,"position":"Defender","photo":"https://media.api-sports.io/football/players/12774.png"},{"id":197,"name":"Andrea Ranocchia","age":34,"number":null,"position":"Defender","photo":"https://media.api-sports.io/football/players/197.png"},{"id":30984,"name":"Mario Sampirisi","age":30,"number":31,"position":"Defender","photo":"https://media.api-sports.io/football/players/30984.png"},{"id":10238,"name":"Carlos Augusto","age":23,"number":30,"position":"Defender","photo":"https://media.api-sports.io/football/players/10238.png"},{"id":30989,"name":"Andrea Barberis","age":29,"number":8,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30989.png"},{"id":161937,"name":"Ronaldo Camar\xe1","age":19,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/161937.png"},{"id":30806,"name":"Marco D\'Alessandro","age":31,"number":77,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30806.png"},{"id":31024,"name":"Jos\xe9 Mach\xedn","age":26,"number":7,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31024.png"},{"id":30780,"name":"Luca Mazzitelli","age":27,"number":4,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30780.png"},{"id":31116,"name":"Tommaso Morosini","age":31,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31116.png"},{"id":30455,"name":"Gast\xf3n Exequiel Ram\xedrez Pereyra","age":32,"number":21,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30455.png"},{"id":30754,"name":"Nicola Rigoni","age":32,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30754.png"},{"id":31026,"name":"Matteo Scozzarella","age":34,"number":23,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/31026.png"},{"id":30535,"name":"Stefano Sensi","age":27,"number":null,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/30535.png"},{"id":325385,"name":"A. Siatounis","age":20,"number":20,"position":"Midfielder","photo":"https://media.api-sports.io/football/players/325385.png"},{"id":30603,"name":"Dany Mota Carvalho","age":24,"number":47,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30603.png"},{"id":31532,"name":"Patrick Ciurria","age":27,"number":84,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31532.png"},{"id":30663,"name":"Davide Djily Diaw","age":30,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30663.png"},{"id":30664,"name":"Mattia Finotto","age":30,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/30664.png"},{"id":2738,"name":"C. Gytkj\xe6r","age":32,"number":9,"position":"Attacker","photo":"https://media.api-sports.io/football/players/2738.png"},{"id":31503,"name":"Leonardo Mancuso","age":30,"number":11,"position":"Attacker","photo":"https://media.api-sports.io/football/players/31503.png"},{"id":9072,"name":"Mirko Mari\u0107","age":27,"number":null,"position":"Attacker","photo":"https://media.api-sports.io/football/players/9072.png"},{"id":312985,"name":"S. Vignato","age":18,"number":80,"position":"Attacker","photo":"https://media.api-sports.io/football/players/312985.png"}]},"venue":{"id":12086,"name":"U-Power Stadium","address":"Via Franco Tognini","city":"Monza","capacity":18568,"surface":"grass","image":"https://media.api-sports.io/football/venues/12086.png"}}]}');var k3=V.t(x3,2);function N3(n,e){1&n&&(f.TgZ(0,"div",8)(1,"h1"),f._uU(2,"Devi generare una sessione nuova di estrazione"),f.qZA()())}function P3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",9),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.GenerateData())}),f._uU(1,"Genera estrazione"),f.qZA()}}function R3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.Elimina())}),f._uU(1,"Elimina estrazione"),f.qZA()}}function O3(n,e){if(1&n&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t),f.xp6(1),f.Oqu(t)}}function F3(n,e){if(1&n&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t.nome),f.xp6(1),f.Oqu(t.nome)}}function L3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"div",13)(2,"select",14),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.roleSelected=o)}),f.YNc(3,O3,2,2,"option",15),f.qZA()(),f.TgZ(4,"div",16)(5,"div",17),f._UZ(6,"img",18),f.qZA(),f.TgZ(7,"div",19)(8,"div",20)(9,"div")(10,"b"),f._uU(11),f.qZA()()(),f.TgZ(12,"div",20)(13,"div"),f._uU(14),f.qZA(),f.TgZ(15,"div"),f._uU(16),f.qZA()(),f.TgZ(17,"div",20)(18,"div"),f._uU(19),f.qZA()(),f.TgZ(20,"div",20)(21,"div",21),f._UZ(22,"img",22),f.qZA()()(),f._UZ(23,"div",23),f.TgZ(24,"label",24),f._uU(25,"Squadra:"),f.qZA(),f._UZ(26,"br"),f.TgZ(27,"select",25),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.squadSelected=o)}),f.YNc(28,F3,2,2,"option",15),f.qZA(),f._UZ(29,"br"),f.TgZ(30,"label",26),f._uU(31,"Crediti:"),f.qZA(),f._UZ(32,"br"),f.TgZ(33,"input",27),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.creditiSpesi=o)}),f.qZA(),f.TgZ(34,"div",28)(35,"button",29),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return f.KtG(o.Associa())}),f._uU(36,"Associa"),f.qZA()()(),f.TgZ(37,"div",30)(38,"button",31),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return f.KtG(o.SelectRandom())}),f._uU(39,"Estrai nuovo"),f.qZA()()()}if(2&n){const t=f.oxw(2);f.xp6(2),f.Q6J("ngModel",t.roleSelected),f.xp6(1),f.Q6J("ngForOf",t.roleArr),f.xp6(3),f.Q6J("src",t.selectedPlayer.photo,f.LSH),f.xp6(5),f.Oqu(t.selectedPlayer.name),f.xp6(3),f.hij("Age: ",t.selectedPlayer.age,""),f.xp6(2),f.hij("Role: ",t.selectedPlayer.position,""),f.xp6(3),f.hij("Team: ",t.selectedPlayer.team,""),f.xp6(3),f.Q6J("src",t.selectedPlayer.logoT,f.LSH),f.xp6(5),f.Q6J("ngModel",t.squadSelected),f.xp6(1),f.Q6J("ngForOf",t.squadSub),f.xp6(5),f.Q6J("ngModel",t.creditiSpesi)}}function V3(n,e){if(1&n&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t),f.xp6(1),f.Oqu(t)}}function B3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",40)(1,"div",41)(2,"a",42),f._UZ(3,"img",43),f.qZA(),f.TgZ(4,"div",44)(5,"h5",45),f._uU(6),f.qZA(),f.TgZ(7,"div")(8,"div"),f._uU(9),f.qZA(),f.TgZ(10,"div"),f._uU(11),f.qZA(),f.TgZ(12,"div",46),f._UZ(13,"img",47),f.qZA()(),f.TgZ(14,"button",48),f.NdJ("click",function(){f.CHM(t);const o=f.oxw().$implicit,l=f.oxw(4);return f.KtG(l.AssociaRicerca(o))}),f._uU(15,"Associa"),f.qZA()()()()}if(2&n){const t=f.oxw().$implicit;f.xp6(3),f.Q6J("src",t.photo,f.LSH),f.xp6(3),f.Oqu(t.name),f.xp6(3),f.Oqu(t.team),f.xp6(2),f.Oqu(t.position),f.xp6(2),f.Q6J("src",t.logoT,f.LSH)}}function U3(n,e){if(1&n&&(f.ynx(0),f.YNc(1,B3,16,5,"div",39),f.BQk()),2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",1!=t.preso)}}function j3(n,e){if(1&n&&(f.TgZ(0,"div",37),f.YNc(1,U3,2,1,"ng-container",38),f.qZA()),2&n){const t=f.oxw(3);f.xp6(1),f.Q6J("ngForOf",t.arrfilter[0])}}function G3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"div",20)(2,"div")(3,"label"),f._uU(4,"nome:"),f.qZA(),f.TgZ(5,"input",33),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.filtroNome=o)}),f.qZA()(),f.TgZ(6,"div")(7,"label"),f._uU(8,"team:"),f.qZA(),f.TgZ(9,"input",34),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.filtroTeam=o)}),f.qZA()(),f.TgZ(10,"div")(11,"label"),f._uU(12,"role:"),f.qZA(),f.TgZ(13,"select",35),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw(2);return f.KtG(l.filtroRole=o)}),f.YNc(14,V3,2,2,"option",15),f.qZA()(),f.TgZ(15,"div")(16,"button",31),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return f.KtG(o.SelectFiltered())}),f._uU(17,"Ricerca"),f.qZA()()(),f.YNc(18,j3,2,1,"div",36),f.qZA()}if(2&n){const t=f.oxw(2);f.xp6(5),f.Q6J("ngModel",t.filtroNome),f.xp6(4),f.Q6J("ngModel",t.filtroTeam),f.xp6(4),f.Q6J("ngModel",t.filtroRole),f.xp6(1),f.Q6J("ngForOf",t.roleArr),f.xp6(4),f.Q6J("ngIf",t.ready)}}function H3(n,e){if(1&n&&(f.TgZ(0,"div",11),f.YNc(1,L3,40,11,"div",12),f.YNc(2,G3,19,5,"div",12),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",!t.isFiltered),f.xp6(1),f.Q6J("ngIf",t.isFiltered)}}let $3=(()=>{class n{constructor(t){this.firebaseService=t,this.players=[],this.filtroNome="",this.filtroTeam="",this.filtroRole="",this.ready=!1,this.daGenerare=!1,this.creditiSpesi=0,this.roleArr=["Goalkeeper","Defender","Midfielder","Attacker"],this.roleSelected="Goalkeeper",this.estrMancanti=0,this.isFiltered=!1}ngOnInit(){this.firebaseService.GetSquad().subscribe(t=>{this.squadSub=t,this.squadNameSelect=this.squadSub.map(r=>r.nome),console.log(this.squadNameSelect),this.squadSelected=t[0].nome}),null===localStorage.getItem("players")||void 0===localStorage.getItem("players")?this.daGenerare=!0:(this.playerArr=JSON.parse(localStorage.getItem("players")),this.selectedPlayer=JSON.parse(localStorage.getItem("selectedPlayer")),this.daGenerare=!1)}Associa(){ts().fire({title:"Sicuro di voler associare questo gicoatore?",text:"Non potrai tornarnare indietro, l'acquisto non \xe8 rimborsabile",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si,associa",cancelButtonText:"Annulla"}).then(t=>{if(t.isConfirmed){let o;if(o=this.squadSub.find(l=>l.nome==this.squadSelected),o.crediti-this.creditiSpesi<0)ts().fire("Crediti non sufficienti");else if(!0===this.selectedPlayer.preso)ts().fire("Giocatore gi\xe0 acquistato");else{var r={};this.playerArr.forEach(l=>{try{if(l.name==JSON.parse(localStorage.getItem("selectedPlayer")).name&&l.team==JSON.parse(localStorage.getItem("selectedPlayer")).team){if(l.preso=!0,this.selectedPlayer.preso=!0,localStorage.setItem("selectedPlayer",JSON.stringify(this.selectedPlayer)),localStorage.setItem("players",JSON.stringify(this.playerArr)),!0===l.preso)throw r;console.log(l)}}catch(c){if(c!==r)throw c}}),o.crediti=o.crediti-this.creditiSpesi,o.players.push(this.selectedPlayer),this.firebaseService.UpdateSquad(o),ts().fire("Associato!",this.squadSelected+" ha acquistato "+this.selectedPlayer.name+" per "+this.creditiSpesi+" crediti!","success"),this.creditiSpesi=0}}})}SelectRandom(){var t={};this.playerArr=JSON.parse(localStorage.getItem("players")).sort(()=>.5-Math.random());let r=[...this.playerArr.filter(o=>o.position==this.roleSelected)];for(let o=0;o<r.length;o++){if(r.some(l=>!0!==l.estratto&&l.position==this.roleSelected)){localStorage.setItem("selectedPlayer",JSON.stringify(r[o])),this.selectedPlayer=JSON.parse(localStorage.getItem("selectedPlayer")),this.playerArr.forEach(l=>{try{if(l.name==JSON.parse(localStorage.getItem("selectedPlayer")).name&&l.team==JSON.parse(localStorage.getItem("selectedPlayer")).team){if(this.selectedPlayer.estratto=!0,l.estratto=!0,!0===l.estratto)throw t;console.log(l)}}catch(c){if(c!==t)throw c}});break}ts().fire({icon:"success",title:"Complimenti",text:"Tutti i giocatori "+this.roleSelected+" sono stati estratti!"})}localStorage.setItem("players",JSON.stringify(this.playerArr))}SelectFiltered(){this.playerArr=JSON.parse(localStorage.getItem("players")).sort(()=>.5-Math.random());let t=[...this.playerArr].filter(r=>0==r.preso);this.arrfilter=[],""!=this.filtroNome&&""!=this.filtroTeam&&""!=this.filtroRole?this.arrfilter.push(t.filter(r=>r.name.toLowerCase().includes(this.filtroNome.toLowerCase())&&r.team.toLowerCase().includes(this.filtroTeam.toLowerCase())&&r.position==this.filtroRole)):""==this.filtroNome&&""!=this.filtroTeam&&""==this.filtroRole?this.arrfilter.push(t.filter(r=>r.team.toLowerCase().includes(this.filtroTeam.toLowerCase()))):""!=this.filtroNome&&""==this.filtroTeam&&""==this.filtroRole?this.arrfilter.push(t.filter(r=>r.name.toLowerCase().includes(this.filtroNome.toLowerCase()))):""!=this.filtroNome&&""!=this.filtroTeam&&""==this.filtroRole?this.arrfilter.push(t.filter(r=>r.position==this.filtroRole)):""!=this.filtroNome&&""!=this.filtroTeam&&""==this.filtroRole?this.arrfilter.push(t.filter(r=>r.name.toLowerCase().includes(this.filtroNome.toLowerCase())&&r.team.toLowerCase().includes(this.filtroTeam.toLowerCase()))):""==this.filtroNome&&""!=this.filtroTeam&&""!=this.filtroRole?this.arrfilter.push(t.filter(r=>r.team.toLowerCase().includes(this.filtroTeam.toLowerCase())&&r.position==this.filtroRole)):""!=this.filtroNome&&""==this.filtroTeam&&""!=this.filtroRole&&this.arrfilter.push(t.filter(r=>r.name.toLowerCase().includes(this.filtroNome.toLowerCase())&&r.position==this.filtroRole)),this.ready=!0,console.log(this.arrfilter)}AssociaRicerca(t){var r={};ts().fire({title:"Multiple inputs",input:"select",inputOptions:this.squadNameSelect,inputPlaceholder:"Seleziona una squadra",showCancelButton:!0,html:'<label>crediti</label><input type="number" id="swal-input2" class="swal2-input">',focusConfirm:!1,preConfirm:o=>[this.tmp=o,document.getElementById("swal-input2").value]}).then(o=>{o.isConfirmed&&(this.squadSub[this.tmp].players.push(t),this.squadSub[this.tmp].crediti=this.squadSub[this.tmp].crediti-Number(document.getElementById("swal-input2").value),this.firebaseService.UpdateSquad(this.squadSub[this.tmp]),this.playerArr.forEach(l=>{try{if(l.name==t.name&&l.team==t.team){if(t.estratto=!0,t.preso=!0,l.preso=!0,l.estratto=!0,!0===t.preso)throw r;console.log(l)}}catch(c){if(localStorage.setItem("players",JSON.stringify(this.playerArr)),c!==r)throw c}}),ts().fire("Associato!","Associazione avvenuta con successo.","success"))})}SwitchSearch(t){this.isFiltered="filtered"==t}GenerateData(){this.dataTeams=k3,this.dataTeams.teams.forEach(t=>{t.team.players.forEach(r=>{r.team=t.team.name,r.estratto=!1,r.preso=!1,r.logoT=t.team.logo,this.players.push(r)})}),this.daGenerare=!1,localStorage.clear(),localStorage.setItem("players",JSON.stringify(this.players)),this.SelectRandom(),ts().fire({icon:"success",title:"Estrazione generata",text:"Eliminazione generata con successo!"})}Elimina(){ts().fire({title:"Sicuro di voler elmminare l'estrazione corrente?",text:"Tutti i giocatori estratti e acquistati saranno riportati allo stato iniziale",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Annulla",confirmButtonText:"Elimina!"}).then(t=>{t.isConfirmed&&(this.daGenerare=!0,localStorage.clear(),ts().fire("Eliminata!","Estrazione eliminata con successo.","success"))})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ZN))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-estrazione"]],decls:10,vars:4,consts:[[1,"flex","justify-around","w-1/3",2,"margin","0 auto"],["type","button",1,"bg-slate-500","hover:bg-slate-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],["style","color:aliceblue; text-align:center",4,"ngIf"],[2,"text-align","start","margin-left","30px"],["type","button","class","bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2",3,"click",4,"ngIf"],["type","button","class","bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded mt-2",3,"click",4,"ngIf"],["class","container","style","margin: 0 auto",4,"ngIf"],[2,"color","aliceblue","text-align","center"],["type","button",1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],["type","button",1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],[1,"container",2,"margin","0 auto"],[4,"ngIf"],[2,"text-align","center","margin-bottom","20px"],[1,"text-cyan-50","bg-slate-900","m-2","p-2",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"card",2,"border","2px solid white","border-radius","10px"],[1,"card-img"],[2,"display","block","margin-left","auto","margin-right","auto",3,"src"],[1,"card-body"],[1,"flex","justify-around"],[1,"logo"],[2,"width","75px","height","75px",3,"src"],[1,"card-footer","m-2"],["for","squad"],["id","squad",1,"text-cyan-50","bg-slate-900","m-2","w-64",3,"ngModel","ngModelChange"],["for","crediti m-2"],["type","number","name","crediti","id","crediti","step","1","min","0",1,"text-cyan-50","bg-slate-900","m-2","w-64",3,"ngModel","ngModelChange"],[1,"text-center"],["type","button",1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded","m-2",3,"click"],[2,"text-align","end"],["type","button",1,"bg-cyan-500","hover:bg-cyan-700","text-white","font-bold","py-2","px-4","rounded","mt-2",3,"click"],[3,"value"],["type","text","placeholder","Nome",1,"text-cyan-50","bg-slate-900","m-2","w-64",3,"ngModel","ngModelChange"],["type","text","placeholder","Squadra",1,"text-cyan-50","bg-slate-900","m-2","w-64",3,"ngModel","ngModelChange"],[1,"text-cyan-50","bg-slate-900","m-2","w-64",3,"ngModel","ngModelChange"],["class","flex justify-around w-3/4 flex-wrap","style","margin: 0 auto",4,"ngIf"],[1,"flex","justify-around","w-3/4","flex-wrap",2,"margin","0 auto"],[4,"ngFor","ngForOf"],["class","flex justify-center mx-8",4,"ngIf"],[1,"flex","justify-center","mx-8"],[1,"rounded-lg","shadow-lg","bg-slate-500","w-52","text-center"],["href","#!"],["alt","",1,"rounded-t-lg","m-1",2,"margin","0 auto",3,"src"],[1,"p-6"],[1,"text-gray-900","text-xl","font-medium","mb-2"],[2,"margin","0 auto"],[1,"w-10",2,"margin","0 auto",3,"src"],["type","button",1,"inline-block","px-6","py-2.5","bg-green-600","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:bg-green-700","hover:shadow-lg","focus:bg-green-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-green-800","active:shadow-lg","transition","duration-150","ease-in-out",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f.NdJ("click",function(){return r.SwitchSearch("")}),f._uU(2,"Estrazione Randomica"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(){return r.SwitchSearch("filtered")}),f._uU(4,"Ricerca"),f.qZA()(),f.YNc(5,N3,3,0,"div",3),f.TgZ(6,"div",4),f.YNc(7,P3,2,0,"button",5),f.YNc(8,R3,2,0,"button",6),f.qZA(),f.YNc(9,H3,3,2,"div",7)),2&t&&(f.xp6(5),f.Q6J("ngIf",r.daGenerare),f.xp6(2),f.Q6J("ngIf",r.daGenerare),f.xp6(1),f.Q6J("ngIf",0==r.daGenerare),f.xp6(1),f.Q6J("ngIf",!r.daGenerare))},dependencies:[Hr,Yn,p_,Ed,Cs,uc,Ul,As,mc,Ll],styles:[".card[_ngcontent-%COMP%]{width:300px;height:100%;margin:0 auto;background-color:#000;color:#f0f8ff;font-size:22px}.card-img[_ngcontent-%COMP%]{margin-top:20px}.card-body[_ngcontent-%COMP%]{text-align:center}.logo[_ngcontent-%COMP%]{margin-top:20px}"]}),n})();const z3=["header"];function q3(n,e){1&n&&f._UZ(0,"app-squadre-gen")}function W3(n,e){1&n&&f._UZ(0,"app-estrazione")}function K3(n,e){if(1&n&&(f.TgZ(0,"div"),f.YNc(1,q3,1,0,"app-squadre-gen",2),f.YNc(2,W3,1,0,"app-estrazione",2),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",t.switchPage.isGenSquad),f.xp6(1),f.Q6J("ngIf",t.switchPage.isEstraz)}}function Z3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",3)(1,"div",4)(2,"label",5),f._uU(3,"Email"),f.qZA(),f.TgZ(4,"input",6),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw();return f.KtG(l.email=o)}),f.qZA()(),f.TgZ(5,"div",4)(6,"label",7),f._uU(7,"Password"),f.qZA(),f.TgZ(8,"input",8),f.NdJ("ngModelChange",function(o){f.CHM(t);const l=f.oxw();return f.KtG(l.password=o)}),f.qZA()(),f.TgZ(9,"div")(10,"button",9),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.login())}),f._uU(11,"Sign in"),f.qZA()()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngModel",t.email),f.xp6(4),f.Q6J("ngModel",t.password)}}let Y3=(()=>{class n{constructor(t,r){this.switchPage=t,this.auth=r,this.title="asta-pixi",this.email="",this.password=""}login(){this.auth.signInWithEmailAndPassword(this.email,this.password)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wm),f.Y36(cf))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&f.Gf(z3,5),2&t){let o;f.iGM(o=f.CRH())&&(r.header=o.first)}},decls:5,vars:4,consts:[[4,"ngIf","ngIfElse"],["showLogin",""],[4,"ngIf"],[1,"flex","flex-col","justify-around","items-center"],[2,"width","200px"],["for","email",2,"color","aliceblue"],["type","email","id","email",3,"ngModel","ngModelChange"],["for","password",2,"color","aliceblue"],["type","password","id","password",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t&&(f._UZ(0,"app-header"),f.YNc(1,K3,3,2,"div",0),f.ALo(2,"async"),f.YNc(3,Z3,12,2,"ng-template",null,1,f.W1O)),2&t){const o=f.MAs(4);f.xp6(1),f.Q6J("ngIf",f.lcZ(2,2,r.auth.user))("ngIfElse",o)}},dependencies:[Yn,Cs,As,Ll,Y1,M3,$3,Ra]}),n})(),Q3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Y3]}),n.\u0275inj=f.cJS({imports:[Ke.hO.initializeApp(qm_firebaseConfig),JI,Oo,fa]}),n})();(0,f.G48)(),vs().bootstrapModule(Q3).catch(n=>console.error(n))},5867:(dt,Se,V)=>{"use strict";V.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=V(9681);(0,f.registerVersion)("firebase","9.8.4","app")},127:(dt,Se,V)=>{"use strict";V.d(Se,{Z:()=>f.Z});var f=V(3942);f.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(dt,Se,V)=>{"use strict";V.r(Se);var f=V(5861),re=V(3942),F=V(2090),he=V(9681),ue=V(655),we=V(1877),me=V(4859);const Re=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ye=function Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new we.Yd("@firebase/auth");function Xe(y,...p){Je.logLevel<=we.in.ERROR&&Je.error(`Auth (${he.SDK_VERSION}): ${y}`,...p)}function xe(y,...p){throw K(y,...p)}function Ce(y,...p){return K(y,...p)}function Ae(y,p,h){const b=Object.assign(Object.assign({},Ye()),{[p]:h});return new F.LL("auth","Firebase",b).create(p,{appName:y.name})}function Ze(y,p,h){if(!(p instanceof h))throw h.name!==p.constructor.name&&xe(y,"argument-error"),Ae(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K(y,...p){if("string"!=typeof y){const h=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(h,...b)}return ve.create(y,...p)}function $(y,p,...h){if(!y)throw K(p,...h)}function pe(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Xe(p),new Error(p)}function Y(y,p){y||pe(p)}const ae=new Map;function ee(y){Y(y instanceof Function,"Expected a class definition");let p=ae.get(y);return p?(Y(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,ae.set(y,p),p)}function Fe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ht(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ht{constructor(p,h){this.shortDelay=p,this.longDelay=h,Y(h>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Nt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jn(y,p){Y(y.emulator,"Emulator should always be set here");const{url:h}=y.emulator;return p?`${h}${p.startsWith("/")?p.slice(1):p}`:h}class Jt{static initialize(p,h,b){this.fetchImpl=p,h&&(this.headersImpl=h),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nr=new Ht(3e4,6e4);function Yt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function Pt(y,p,h,b){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,p,h,b,x={}){return Jr(y,x,(0,f.Z)(function*(){let O={},J={};b&&("GET"===p?J=b:O={body:JSON.stringify(b)});const fe=(0,F.xO)(Object.assign({key:y.config.apiKey},J)).slice(1),$e=yield y._getAdditionalHeaders();return $e["Content-Type"]="application/json",y.languageCode&&($e["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(no(y,y.config.apiHost,h,fe),Object.assign({method:p,headers:$e,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Jr(y,p,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(y,p,h){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Vt),p);try{const x=new rr(y),O=yield Promise.race([h(),x.promise]);x.clearNetworkTimeout();const J=yield O.json();if("needConfirmation"in J)throw En(y,"account-exists-with-different-credential",J);if(O.ok&&!("errorMessage"in J))return J;{const fe=O.ok?J.errorMessage:J.error.message,[$e,it]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw En(y,"credential-already-in-use",J);if("EMAIL_EXISTS"===$e)throw En(y,"email-already-in-use",J);if("USER_DISABLED"===$e)throw En(y,"user-disabled",J);const vt=b[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw Ae(y,vt,it);xe(y,vt)}}catch(x){if(x instanceof F.ZR)throw x;xe(y,"network-request-failed")}})).apply(this,arguments)}function _r(y,p,h,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(y,p,h,b,x={}){const O=yield Pt(y,p,h,b,x);return"mfaPendingCredential"in O&&xe(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function no(y,p,h,b){const x=`${p}${h}?${b}`;return y.config.emulator?jn(y.config,x):`${y.config.apiScheme}://${x}`}class rr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((h,b)=>{this.timer=setTimeout(()=>b(Ce(this.auth,"network-request-failed")),nr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function En(y,p,h){const b={appName:y.name};h.email&&(b.email=h.email),h.phoneNumber&&(b.phoneNumber=h.phoneNumber);const x=Ce(y,p,b);return x.customData._tokenResponse=h,x}function Xr(){return(Xr=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Xt(y,p){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ui(y,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function mt(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ei(){return(ei=(0,f.Z)(function*(y,p=!1){const h=(0,F.m9)(y),b=yield h.getIdToken(p),x=Ve(b);$(x&&x.exp&&x.auth_time&&x.iat,h.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,J=O?.sign_in_provider;return{claims:x,token:b,authTime:mt(yt(x.auth_time)),issuedAtTime:mt(yt(x.iat)),expirationTime:mt(yt(x.exp)),signInProvider:J||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(y){return 1e3*Number(y)}function Ve(y){var p;const[h,b,x]=y.split(".");if(void 0===h||void 0===b||void 0===x)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,F.tV)(b);return O?JSON.parse(O):(Xe("Failed to decode base64 JWT payload"),null)}catch(O){return Xe("Caught error parsing JWT payload as JSON",null===(p=O)||void 0===p?void 0:p.toString()),null}}function dr(y,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(y,p,h=!1){if(h)return p;try{return yield p}catch(b){throw b instanceof F.ZR&&It(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function It({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var h;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var h=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield h.iteration()}),b)}iteration(){var p=this;return(0,f.Z)(function*(){var h;try{yield p.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(h=b)||void 0===h?void 0:h.code)&&p.schedule(!0))}p.schedule()})()}}class ir{constructor(p,h){this.createdAt=p,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=mt(this.lastLoginAt),this.creationTime=mt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(y){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(y){var p;const h=y.auth,b=yield y.getIdToken(),x=yield dr(y,Ui(h,{idToken:b}));$(x?.users.length,h,"internal-error");const O=x.users[0];y._notifyReloadListener(O);const J=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?ne(O.providerUserInfo):[],fe=Z(y.providerData,J),vt=!!y.isAnonymous&&!(y.email&&O.passwordHash||fe?.length),lt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:fe,metadata:new ir(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(y,lt)})).apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(y){const p=(0,F.m9)(y);yield Pr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Z(y,p){return[...y.filter(b=>!p.some(x=>x.providerId===b.providerId)),...p]}function ne(y){return y.map(p=>{var{providerId:h}=p,b=(0,ue._T)(p,["providerId"]);return{providerId:h,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ee(){return(Ee=(0,f.Z)(function*(y,p){const h=yield Jr(y,{},(0,f.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=y.config,J=no(y,x,"/v1/token",`key=${O}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(J,{method:"POST",headers:fe,body:b})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){$(p.idToken,"internal-error"),$(typeof p.idToken<"u","internal-error"),$(typeof p.refreshToken<"u","internal-error");const h="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function _t(y){const p=Ve(y);return $(p,"internal-error"),$(typeof p.exp<"u","internal-error"),$(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,h)}getToken(p,h=!1){var b=this;return(0,f.Z)(function*(){return $(!b.accessToken||b.refreshToken,p,"user-token-expired"),h||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,h){var b=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:J}=yield function j(y,p){return Ee.apply(this,arguments)}(p,h);b.updateTokensAndExpiration(x,O,Number(J))})()}updateTokensAndExpiration(p,h,b){this.refreshToken=h||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,h){const{refreshToken:b,accessToken:x,expirationTime:O}=h,J=new je;return b&&($("string"==typeof b,"internal-error",{appName:p}),J.refreshToken=b),x&&($("string"==typeof x,"internal-error",{appName:p}),J.accessToken=x),O&&($("number"==typeof O,"internal-error",{appName:p}),J.expirationTime=O),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new je,this.toJSON())}_performRefresh(){return pe("not implemented")}}function tt(y,p){$("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class bt{constructor(p){var{uid:h,auth:b,stsTokenManager:x}=p,O=(0,ue._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new ir(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var h=this;return(0,f.Z)(function*(){const b=yield dr(h,h.stsTokenManager.getToken(h.auth,p));return $(b,h.auth,"internal-error"),h.accessToken!==b&&(h.accessToken=b,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),b})()}getIdTokenResult(p){return function Zn(y){return ei.apply(this,arguments)}(this,p)}reload(){return function X(y){return H.apply(this,arguments)}(this)}_assign(p){this!==p&&($(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(h=>Object.assign({},h)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new bt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,h=!1){var b=this;return(0,f.Z)(function*(){let x=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),x=!0),h&&(yield Pr(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,f.Z)(function*(){const h=yield p.getIdToken();return yield dr(p,function st(y,p){return Xr.apply(this,arguments)}(p.auth,{idToken:h})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,h){var b,x,O,J,fe,$e,it,vt;const lt=null!==(b=h.displayName)&&void 0!==b?b:void 0,On=null!==(x=h.email)&&void 0!==x?x:void 0,qn=null!==(O=h.phoneNumber)&&void 0!==O?O:void 0,wc=null!==(J=h.photoURL)&&void 0!==J?J:void 0,vg=null!==(fe=h.tenantId)&&void 0!==fe?fe:void 0,Au=null!==($e=h._redirectEventId)&&void 0!==$e?$e:void 0,ma=null!==(it=h.createdAt)&&void 0!==it?it:void 0,bg=null!==(vt=h.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Yi,emailVerified:gr,isAnonymous:al,providerData:Ec,stsTokenManager:_o}=h;$(Yi&&_o,p,"internal-error");const Ir=je.fromJSON(this.name,_o);$("string"==typeof Yi,p,"internal-error"),tt(lt,p.name),tt(On,p.name),$("boolean"==typeof gr,p,"internal-error"),$("boolean"==typeof al,p,"internal-error"),tt(qn,p.name),tt(wc,p.name),tt(vg,p.name),tt(Au,p.name),tt(ma,p.name),tt(bg,p.name);const xd=new bt({uid:Yi,auth:p,email:On,emailVerified:gr,displayName:lt,isAnonymous:al,photoURL:wc,phoneNumber:qn,tenantId:vg,stsTokenManager:Ir,createdAt:ma,lastLoginAt:bg});return Ec&&Array.isArray(Ec)&&(xd.providerData=Ec.map(Ic=>Object.assign({},Ic))),Au&&(xd._redirectEventId=Au),xd}static _fromIdTokenResponse(p,h,b=!1){return(0,f.Z)(function*(){const x=new je;x.updateFromServerResponse(h);const O=new bt({uid:h.localId,auth:p,stsTokenManager:x,isAnonymous:b});return yield Pr(O),O})()}}const dn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(h,b){var x=this;return(0,f.Z)(function*(){x.storage[h]=b})()}_get(h){var b=this;return(0,f.Z)(function*(){const x=b.storage[h];return void 0===x?null:x})()}_remove(h){var b=this;return(0,f.Z)(function*(){delete b.storage[h]})()}_addListener(h,b){}_removeListener(h,b){}}return y.type="NONE",y})();function Bt(y,p,h){return`firebase:${y}:${p}:${h}`}class or{constructor(p,h,b){this.persistence=p,this.auth=h,this.userKey=b;const{config:x,name:O}=this.auth;this.fullUserKey=Bt(this.userKey,x.apiKey,O),this.fullPersistenceKey=Bt("persistence",x.apiKey,O),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const h=yield p.persistence._get(p.fullUserKey);return h?bt._fromJSON(p.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var h=this;return(0,f.Z)(function*(){if(h.persistence===p)return;const b=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=p,b?h.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,h,b="authUser"){return(0,f.Z)(function*(){if(!h.length)return new or(ee(dn),p,b);const x=(yield Promise.all(h.map(function(){var it=(0,f.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return it.apply(this,arguments)}}()))).filter(it=>it);let O=x[0]||ee(dn);const J=Bt(b,p.config.apiKey,p.name);let fe=null;for(const it of h)try{const vt=yield it._get(J);if(vt){const lt=bt._fromJSON(p,vt);it!==O&&(fe=lt),O=it;break}}catch{}const $e=x.filter(it=>it._shouldAllowMigration);return O._shouldAllowMigration&&$e.length?(O=$e[0],fe&&(yield O._set(J,fe.toJSON())),yield Promise.all(h.map(function(){var it=(0,f.Z)(function*(vt){if(vt!==O)try{yield vt._remove(J)}catch{}});return function(vt){return it.apply(this,arguments)}}())),new or(O,p,b)):new or(O,p,b)})()}}function $t(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Rr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Gn(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ct(p))return"Blackberry";if(rn(p))return"Webos";if(hr(p))return"Safari";if((p.includes("chrome/")||Hn(p))&&!p.includes("edge/"))return"Chrome";if(We(p))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function Gn(y=(0,F.z$)()){return/firefox\//i.test(y)}function hr(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Hn(y=(0,F.z$)()){return/crios\//i.test(y)}function Rr(y=(0,F.z$)()){return/iemobile/i.test(y)}function We(y=(0,F.z$)()){return/android/i.test(y)}function Ct(y=(0,F.z$)()){return/blackberry/i.test(y)}function rn(y=(0,F.z$)()){return/webos/i.test(y)}function Cn(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Dn(y=(0,F.z$)()){return Cn(y)||We(y)||rn(y)||Ct(y)||/windows phone/i.test(y)||Rr(y)}function gi(y,p=[]){let h;switch(y){case"Browser":h=$t((0,F.z$)());break;case"Worker":h=`${$t((0,F.z$)())}-${y}`;break;default:h=y}const b=p.length?p.join(","):"FirebaseCore-web";return`${h}/JsCore/${he.SDK_VERSION}/${b}`}class At{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,h){const b=O=>new Promise((J,fe)=>{try{J(p(O))}catch($e){fe($e)}});b.onAbort=h,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var h=this;return(0,f.Z)(function*(){var b;if(h.auth.currentUser===p)return;const x=[];try{for(const O of h.queue)yield O(p),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const J of x)try{J()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=O)||void 0===b?void 0:b.message})}})()}}class Pa{constructor(p,h,b){this.app=p,this.heartbeatServiceProvider=h,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.beforeStateQueue=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,h){var b=this;return h&&(this._popupRedirectResolver=ee(h)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,O;if(!b._deleted&&(b.persistenceManager=yield or.create(b,p),!b._deleted)){if(null!==(x=b._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(h),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const h=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||h){if(p.currentUser&&h&&p.currentUser.uid===h.uid)return p._currentUser._assign(h),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(h,!0)}})()}initializeCurrentUser(p){var h=this;return(0,f.Z)(function*(){var b;const x=yield h.assertedPersistence.getCurrentUser();let O=x,J=!1;if(p&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const fe=null===(b=h.redirectUser)||void 0===b?void 0:b._redirectEventId,$e=O?._redirectEventId,it=yield h.tryRedirectSignIn(p);(!fe||fe===$e)&&it?.user&&(O=it.user,J=!0)}if(!O)return h.directlySetCurrentUser(null);if(!O._redirectEventId){if(J)try{yield h.beforeStateQueue.runMiddleware(O)}catch(fe){O=x,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(fe))}return O?h.reloadAndSetCurrentUserOrClear(O):h.directlySetCurrentUser(null)}return $(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===O._redirectEventId?h.directlySetCurrentUser(O):h.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var h=this;return(0,f.Z)(function*(){let b=null;try{b=yield h._popupRedirectResolver._completeRedirectFn(h,p,!0)}catch{yield h._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var h=this;return(0,f.Z)(function*(){var b;try{yield Pr(p)}catch(x){if("auth/network-request-failed"!==(null===(b=x)||void 0===b?void 0:b.code))return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var h=this;return(0,f.Z)(function*(){const b=p?(0,F.m9)(p):null;return b&&$(b.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(b&&b._clone(h))})()}_updateCurrentUser(p,h=!1){var b=this;return(0,f.Z)(function*(){if(!b._deleted)return p&&$(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),h||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,f.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var h=this;return this.queue((0,f.Z)(function*(){yield h.assertedPersistence.setPersistence(ee(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,h,b){return this.registerStateListener(this.authStateSubscription,p,h,b)}beforeAuthStateChanged(p,h){return this.beforeStateQueue.pushCallback(p,h)}onIdTokenChanged(p,h,b){return this.registerStateListener(this.idTokenSubscription,p,h,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,h){var b=this;return(0,f.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(h);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var h=this;return(0,f.Z)(function*(){if(!h.redirectPersistenceManager){const b=p&&ee(p)||h._popupRedirectResolver;$(b,h,"argument-error"),h.redirectPersistenceManager=yield or.create(h,[ee(b._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(p){var h=this;return(0,f.Z)(function*(){var b,x;return h._isInitialized&&(yield h.queue((0,f.Z)(function*(){}))),(null===(b=h._currentUser)||void 0===b?void 0:b._redirectEventId)===p?h._currentUser:(null===(x=h.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?h.redirectUser:null})()}_persistUserIfCurrent(p){var h=this;return(0,f.Z)(function*(){if(p===h.currentUser)return h.queue((0,f.Z)(function*(){return h.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(h=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,h,b,x){if(this._deleted)return()=>{};const O="function"==typeof h?h:h.next.bind(h),J=this._isInitialized?Promise.resolve():this._initializationPromise;return $(J,this,"internal-error"),J.then(()=>O(this.currentUser)),"function"==typeof h?p.addObserver(h,b,x):p.addObserver(h)}directlySetCurrentUser(p){var h=this;return(0,f.Z)(function*(){h.currentUser&&h.currentUser!==p&&(h._currentUser._stopProactiveRefresh(),p&&h.isProactiveRefreshEnabled&&p._startProactiveRefresh()),h.currentUser=p,p?yield h.assertedPersistence.setCurrentUser(p):yield h.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var h;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(h=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function Mn(y){return(0,F.m9)(y)}class ss{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(h=>this.observer=h)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vn(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function Di(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class vn{constructor(p,h){this.providerId=p,this.signInMethod=h}toJSON(){return pe("not implemented")}_getIdTokenResponse(p){return pe("not implemented")}_linkToIdToken(p,h){return pe("not implemented")}_getReauthenticationResolver(p){return pe("not implemented")}}function vr(y,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:resetPassword",Yt(y,p))})).apply(this,arguments)}function eu(y,p){return yl.apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function as(y,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:update",Yt(y,p))})).apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithPassword",Yt(y,p))})).apply(this,arguments)}function Hr(y,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:sendOobCode",Yt(y,p))})).apply(this,arguments)}function tu(y,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(y,p){return Hr(y,p)})).apply(this,arguments)}function $r(y,p){return js.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,p){return Hr(y,p)})).apply(this,arguments)}function Gs(y,p){return To.apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(y,p){return Hr(y,p)})).apply(this,arguments)}function Ai(y,p){return us.apply(this,arguments)}function us(){return(us=(0,f.Z)(function*(y,p){return Hr(y,p)})).apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,p))})).apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,p))})).apply(this,arguments)}class Hs extends vn{constructor(p,h,b,x=null){super("password",b),this._email=p,this._password=h,this._tenantId=x}static _fromEmailAndPassword(p,h){return new Hs(p,h,"password")}static _fromEmailAndCode(p,h,b=null){return new Hs(p,h,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const h="string"==typeof p?JSON.parse(p):p;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(p){var h=this;return(0,f.Z)(function*(){switch(h.signInMethod){case"password":return function io(y,p){return Us.apply(this,arguments)}(p,{returnSecureToken:!0,email:h._email,password:h._password});case"emailLink":return function Wh(y,p){return ji.apply(this,arguments)}(p,{email:h._email,oobCode:h._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,h){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return eu(p,{idToken:h,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ku(y,p){return _l.apply(this,arguments)}(p,{idToken:h,email:b._email,oobCode:b._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function So(y,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithIdp",Yt(y,p))})).apply(this,arguments)}class Gi extends vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const h=new Gi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(h.idToken=p.idToken),p.accessToken&&(h.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(h.nonce=p.nonce),p.pendingToken&&(h.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(h.accessToken=p.oauthToken,h.secret=p.oauthTokenSecret):xe("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const h="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x}=h,O=(0,ue._T)(h,["providerId","signInMethod"]);if(!b||!x)return null;const J=new Gi(b,x);return J.idToken=O.idToken||void 0,J.accessToken=O.accessToken||void 0,J.secret=O.secret,J.nonce=O.nonce,J.pendingToken=O.pendingToken||null,J}_getIdTokenResponse(p){return So(p,this.buildRequest())}_linkToIdToken(p,h){const b=this.buildRequest();return b.idToken=h,So(p,b)}_getReauthenticationResolver(p){const h=this.buildRequest();return h.autoCreate=!1,So(p,h)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),p.postBody=(0,F.xO)(h)}return p}}function td(y,p){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:sendVerificationCode",Yt(y,p))})).apply(this,arguments)}function oo(){return(oo=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,p))})).apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(y,p){const h=yield _r(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,p));if(h.temporaryProof)throw En(y,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const nd={USER_NOT_FOUND:"user-not-found"};function Oa(){return(Oa=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),nd)})).apply(this,arguments)}class Hi extends vn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,h){return new Hi({verificationId:p,verificationCode:h})}static _fromTokenResponse(p,h){return new Hi({phoneNumber:p,temporaryProof:h})}_getIdTokenResponse(p){return function Ra(y,p){return oo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,h){return function cs(y,p){return vl.apply(this,arguments)}(p,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function rd(y,p){return Oa.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:h,verificationId:b,verificationCode:x}=this.params;return p&&h?{temporaryProof:p,phoneNumber:h}:{sessionInfo:b,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:h,verificationCode:b,phoneNumber:x,temporaryProof:O}=p;return b||h||x||O?new Hi({verificationId:h,verificationCode:b,phoneNumber:x,temporaryProof:O}):null}}class Fa{constructor(p){var h,b,x,O,J,fe;const $e=(0,F.zd)((0,F.pd)(p)),it=null!==(h=$e.apiKey)&&void 0!==h?h:null,vt=null!==(b=$e.oobCode)&&void 0!==b?b:null,lt=function Kh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=$e.mode)&&void 0!==x?x:null);$(it&&vt&&lt,"argument-error"),this.apiKey=it,this.operation=lt,this.code=vt,this.continueUrl=null!==(O=$e.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(J=$e.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(fe=$e.tenantId)&&void 0!==fe?fe:null}static parseLink(p){const h=function ru(y){const p=(0,F.zd)((0,F.pd)(y)).link,h=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||h||p||y}(p);try{return new Fa(h)}catch{return null}}}let bl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(h,b){return Hs._fromEmailAndPassword(h,b)}static credentialWithLink(h,b){const x=Fa.parseLink(b);return $(x,"argument-error"),Hs._fromEmailAndCode(h,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ni{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ao extends ni{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ds extends ao{static credentialFromJSON(p){const h="string"==typeof p?JSON.parse(p):p;return $("providerId"in h&&"signInMethod"in h,"argument-error"),Gi._fromParams(h)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return $(p.idToken||p.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ds.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ds.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:h,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:O,nonce:J,providerId:fe}=p;if(!b&&!x&&!h&&!O||!fe)return null;try{return new ds(fe)._credential({idToken:h,accessToken:b,nonce:J,pendingToken:O})}catch{return null}}}let wl=(()=>{class y extends ao{constructor(){super("facebook.com")}static credential(h){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),hs=(()=>{class y extends ao{constructor(){super("google.com"),this.addScope("profile")}static credential(h,b){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:b})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:b,oauthAccessToken:x}=h;if(!b&&!x)return null;try{return y.credential(b,x)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),$s=(()=>{class y extends ao{constructor(){super("github.com")}static credential(h){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ps extends vn{constructor(p,h){super(p,p),this.pendingToken=h}_getIdTokenResponse(p){return So(p,this.buildRequest())}_linkToIdToken(p,h){const b=this.buildRequest();return b.idToken=h,So(p,b)}_getReauthenticationResolver(p){const h=this.buildRequest();return h.autoCreate=!1,So(p,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const h="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x,pendingToken:O}=h;return b&&x&&O&&b===x?new ps(b,O):null}static _create(p,h){return new ps(p,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class An extends ni{constructor(p){$(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return An.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return An.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const h=ps.fromJSON(p);return $(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:h,providerId:b}=p;if(!h||!b)return null;try{return ps._create(b,h)}catch{return null}}}let $i=(()=>{class y extends ao{constructor(){super("twitter.com")}static credential(h,b){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:b})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=h;if(!b||!x)return null;try{return y.credential(b,x)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function La(y,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signUp",Yt(y,p))})).apply(this,arguments)}class ri{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,h,b,x=!1){return(0,f.Z)(function*(){const O=yield bt._fromIdTokenResponse(p,b,x),J=El(b);return new ri({user:O,providerId:J,_tokenResponse:b,operationType:h})})()}static _forOperation(p,h,b){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const x=El(b);return new ri({user:p,providerId:x,_tokenResponse:b,operationType:h})})()}}function El(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ou(){return(ou=(0,f.Z)(function*(y){var p;const h=Mn(y);if(yield h._initializationPromise,null!==(p=h.currentUser)&&void 0!==p&&p.isAnonymous)return new ri({user:h.currentUser,providerId:null,operationType:"signIn"});const b=yield La(h,{returnSecureToken:!0}),x=yield ri._fromIdTokenResponse(h,"signIn",b,!0);return yield h._updateCurrentUser(x.user),x})).apply(this,arguments)}class qs extends F.ZR{constructor(p,h,b,x){var O;super(h.code,h.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,qs.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:h.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,h,b,x){return new qs(p,h,b,x)}}function id(y,p,h,b){return("reauthenticate"===p?h._getReauthenticationResolver(y):h._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?qs._fromErrorAndOperation(y,O,p,b):O})}function cn(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function gs(){return(gs=(0,f.Z)(function*(y,p){const h=(0,F.m9)(y);yield bn(!0,h,p);const{providerUserInfo:b}=yield Xt(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[p]}),x=cn(b||[]);return h.providerData=h.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function Ws(y,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,p,h=!1){const b=yield dr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),h);return ri._forOperation(y,"link",b)})).apply(this,arguments)}function bn(y,p,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(y,p,h){yield Pr(p);const x=!1===y?"provider-already-linked":"no-such-provider";$(cn(p.providerData).has(h)===y,p.auth,x)})).apply(this,arguments)}function Zs(y,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(y,p,h=!1){var b;const{auth:x}=y,O="reauthenticate";try{const J=yield dr(y,id(x,O,p,y),h);$(J.idToken,x,"internal-error");const fe=Ve(J.idToken);$(fe,x,"internal-error");const{sub:$e}=fe;return $(y.uid===$e,x,"user-mismatch"),ri._forOperation(y,O,J)}catch(J){throw"auth/user-not-found"===(null===(b=J)||void 0===b?void 0:b.code)&&xe(x,"user-mismatch"),J}})).apply(this,arguments)}function sr(y,p){return Il.apply(this,arguments)}function Il(){return(Il=(0,f.Z)(function*(y,p,h=!1){const b="signIn",x=yield id(y,b,p),O=yield ri._fromIdTokenResponse(y,b,x);return h||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Tn(y,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(y,p){return sr(Mn(y),p)})).apply(this,arguments)}function ar(y,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,p){const h=(0,F.m9)(y);return yield bn(!1,h,p.providerId),Ws(h,p)})).apply(this,arguments)}function ms(y,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(y,p){return Zs((0,F.m9)(y),p)})).apply(this,arguments)}function zr(y,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,p){return _r(y,"POST","/v1/accounts:signInWithCustomToken",Yt(y,p))})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(y,p){const h=Mn(y),b=yield zr(h,{token:p,returnSecureToken:!0}),x=yield ri._fromIdTokenResponse(h,"signIn",b);return yield h._updateCurrentUser(x.user),x})).apply(this,arguments)}class uo{constructor(p,h){this.factorId=p,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(p,h){return"phoneInfo"in h?Ba._fromServerResponse(p,h):xe(p,"internal-error")}}class Ba extends uo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,h){return new Ba(h)}}function qi(y,p,h){var b;$((null===(b=h.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),$(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=h.url,p.dynamicLinkDomain=h.dynamicLinkDomain,p.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&($(h.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=h.iOS.bundleId),h.android&&($(h.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=h.android.installApp,p.androidMinimumVersionCode=h.android.minimumVersion,p.androidPackageName=h.android.packageName)}function Qs(){return(Qs=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y),x={requestType:"PASSWORD_RESET",email:p};h&&qi(b,x,h),yield $r(b,x)})).apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(y,p,h){yield vr((0,F.m9)(y),{oobCode:p,newPassword:h})})).apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(y,p){yield as((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function Mt(y,p){return _s.apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(y,p){const h=(0,F.m9)(y),b=yield vr(h,{oobCode:p}),x=b.requestType;switch($(x,h,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(b.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(b.mfaInfo,h,"internal-error");default:$(b.email,h,"internal-error")}let O=null;return b.mfaInfo&&(O=uo._fromServerResponse(Mn(h),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(y,p){const{data:h}=yield Mt((0,F.m9)(y),p);return h.email})).apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(y,p,h){const b=Mn(y),x=yield La(b,{returnSecureToken:!0,email:p,password:h}),O=yield ri._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y),x={requestType:"EMAIL_SIGNIN",email:p};$(h.handleCodeInApp,b,"argument-error"),h&&qi(b,x,h),yield Gs(b,x)})).apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y),x=bl.credentialWithLink(p,h||Fe());return $(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Tn(b,x)})).apply(this,arguments)}function $a(y,p){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:createAuthUri",Yt(y,p))})).apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(y,p){const b={identifier:p,continueUri:ht()?Fe():"http://localhost"},{signinMethods:x}=yield $a((0,F.m9)(y),b);return x||[]})).apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(y,p){const h=(0,F.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&qi(h.auth,x,p);const{email:O}=yield tu(h.auth,x);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};h&&qi(b.auth,O,h);const{email:J}=yield Ai(b.auth,O);J!==y.email&&(yield y.reload())})).apply(this,arguments)}function su(y,p){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(y,p){return Pt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(y,{displayName:p,photoURL:h}){if(void 0===p&&void 0===h)return;const b=(0,F.m9)(y),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:h,returnSecureToken:!0},J=yield dr(b,su(b.auth,O));b.displayName=J.displayName||null,b.photoURL=J.photoUrl||null;const fe=b.providerData.find(({providerId:$e})=>"password"===$e);fe&&(fe.displayName=b.displayName,fe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(J)})).apply(this,arguments)}function bs(y,p,h){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,p,h){const{auth:b}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(O.email=p),h&&(O.password=h);const J=yield dr(y,eu(b,O));yield y._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Oo{constructor(p,h,b={}){this.isNewUser=p,this.providerId=h,this.profile=b}}class oa extends Oo{constructor(p,h,b,x){super(p,h,b),this.username=x}}class Dl extends Oo{constructor(p,h){super(p,"facebook.com",h)}}class Al extends oa{constructor(p,h){super(p,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Tl extends Oo{constructor(p,h){super(p,"google.com",h)}}class Sl extends oa{constructor(p,h,b){super(p,"twitter.com",h,b)}}function au(y){const{user:p,_tokenResponse:h}=y;return p.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function ia(y){var p,h;if(!y)return null;const{providerId:b}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&y?.idToken){const J=null===(h=null===(p=Ve(y.idToken))||void 0===p?void 0:p.firebase)||void 0===h?void 0:h.sign_in_provider;if(J)return new Oo(O,"anonymous"!==J&&"custom"!==J?J:null)}if(!b)return null;switch(b){case"facebook.com":return new Dl(O,x);case"github.com":return new Al(O,x);case"google.com":return new Tl(O,x);case"twitter.com":return new Sl(O,x,y.screenName||null);case"custom":case"anonymous":return new Oo(O,null);default:return new Oo(O,b,x)}}(h)}class Si{constructor(p,h){this.type=p,this.credential=h}static _fromIdtoken(p){return new Si("enroll",p)}static _fromMfaPendingCredential(p){return new Si("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var h,b;if(p?.multiFactorSession){if(null!==(h=p.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Si._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return Si._fromIdtoken(p.multiFactorSession.idToken)}return null}}class co{constructor(p,h,b){this.session=p,this.hints=h,this.signInResolver=b}static _fromError(p,h){const b=Mn(p),x=h.customData._serverResponse,O=(x.mfaInfo||[]).map(fe=>uo._fromServerResponse(b,fe));$(x.mfaPendingCredential,b,"internal-error");const J=Si._fromMfaPendingCredential(x.mfaPendingCredential);return new co(J,O,function(){var fe=(0,f.Z)(function*($e){const it=yield $e._process(b,J);delete x.mfaInfo,delete x.mfaPendingCredential;const vt=Object.assign(Object.assign({},x),{idToken:it.idToken,refreshToken:it.refreshToken});switch(h.operationType){case"signIn":const lt=yield ri._fromIdTokenResponse(b,h.operationType,vt);return yield b._updateCurrentUser(lt.user),lt;case"reauthenticate":return $(h.user,b,"internal-error"),ri._forOperation(h.user,h.operationType,vt);default:xe(b,"internal-error")}});return function($e){return fe.apply(this,arguments)}}())}resolveSignIn(p){var h=this;return(0,f.Z)(function*(){return h.signInResolver(p)})()}}function Ya(y,p){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",Yt(y,p))}class Or{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(b=>uo._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Or(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Si._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,h){var b=this;return(0,f.Z)(function*(){const x=p,O=yield b.getSession(),J=yield dr(b.user,x._process(b.user.auth,O,h));return yield b.user._updateTokensIfNecessary(J),b.user.reload()})()}unenroll(p){var h=this;return(0,f.Z)(function*(){var b;const x="string"==typeof p?p:p.uid,O=yield h.user.getIdToken(),J=yield dr(h.user,function Mi(y,p){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(y,p))}(h.user.auth,{idToken:O,mfaEnrollmentId:x}));h.enrolledFactors=h.enrolledFactors.filter(({uid:fe})=>fe!==x),yield h.user._updateTokensIfNecessary(J);try{yield h.user.reload()}catch(fe){if("auth/user-token-expired"!==(null===(b=fe)||void 0===b?void 0:b.code))throw fe}})()}}const ho=new WeakMap,Es="__sak";class aa{constructor(p,h){this.storageRetriever=p,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,h){return this.storage.setItem(p,JSON.stringify(h)),Promise.resolve()}_get(p){const h=this.storage.getItem(p);return Promise.resolve(h?JSON.parse(h):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const I=(()=>{class y extends aa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,b)=>this.onStorageEvent(h,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function uu(){const y=(0,F.z$)();return hr(y)||Cn(y)}()&&function Dt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Dn(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),O=this.localCache[b];x!==O&&h(b,O,x)}}onStorageEvent(h,b=!1){if(!h.key)return void this.forAllChangedKeys((fe,$e,it)=>{this.notifyListeners(fe,it)});const x=h.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(x);if(h.newValue!==fe)null!==h.newValue?this.storage.setItem(x,h.newValue):this.storage.removeItem(x);else if(this.localCache[x]===h.newValue&&!b)return}const O=()=>{const fe=this.storage.getItem(x);!b&&this.localCache[x]===fe||this.notifyListeners(x,fe)},J=this.storage.getItem(x);!function ro(){return(0,F.w1)()&&10===document.documentMode}()||J===h.newValue||h.newValue===h.oldValue?O():setTimeout(O,10)}notifyListeners(h,b){this.localCache[h]=b;const x=this.listeners[h];if(x)for(const O of Array.from(x))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(b)}_removeListener(h,b){this.listeners[h]&&(this.listeners[h].delete(b),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,b){var x=()=>super._set,O=this;return(0,f.Z)(function*(){yield x().call(O,h,b),O.localCache[h]=JSON.stringify(b)})()}_get(h){var b=()=>super._get,x=this;return(0,f.Z)(function*(){const O=yield b().call(x,h);return x.localCache[h]=JSON.stringify(O),O})()}_remove(h){var b=()=>super._remove,x=this;return(0,f.Z)(function*(){yield b().call(x,h),delete x.localCache[h]})()}}return y.type="LOCAL",y})(),k=(()=>{class y extends aa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,b){}_removeListener(h,b){}}return y.type="SESSION",y})();let Te=(()=>{class y{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const b=this.receivers.find(O=>O.isListeningto(h));if(b)return b;const x=new y(h);return this.receivers.push(x),x}isListeningto(h){return this.eventTarget===h}handleEvent(h){var b=this;return(0,f.Z)(function*(){const x=h,{eventId:O,eventType:J,data:fe}=x.data,$e=b.handlersMap[J];if(!$e?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:J});const it=Array.from($e).map(function(){var lt=(0,f.Z)(function*(On){return On(x.origin,fe)});return function(On){return lt.apply(this,arguments)}}()),vt=yield function G(y){return Promise.all(y.map(function(){var p=(0,f.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(b){return{fulfilled:!1,reason:b}}});return function(h){return p.apply(this,arguments)}}()))}(it);x.ports[0].postMessage({status:"done",eventId:O,eventType:J,response:vt})})()}_subscribe(h,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(b)}_unsubscribe(h,b){this.handlersMap[h]&&b&&this.handlersMap[h].delete(b),(!b||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ke(y="",p=10){let h="";for(let b=0;b<p;b++)h+=Math.floor(10*Math.random());return y+h}class en{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,h,b=50){var x=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let J,fe;return new Promise(($e,it)=>{const vt=Ke("",20);O.port1.start();const lt=setTimeout(()=>{it(new Error("unsupported_event"))},b);fe={messageChannel:O,onMessage(On){const qn=On;if(qn.data.eventId===vt)switch(qn.data.status){case"ack":clearTimeout(lt),J=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),$e(qn.data.response);break;default:clearTimeout(lt),clearTimeout(J),it(new Error("invalid_response"))}}},x.handlers.add(fe),O.port1.addEventListener("message",fe.onMessage),x.target.postMessage({eventType:p,eventId:vt,data:h},[O.port2])}).finally(()=>{fe&&x.removeMessageHandler(fe)})})()}}function Ut(){return window}function Fr(){return typeof Ut().WorkerGlobalScope<"u"&&"function"==typeof Ut().importScripts}function Qa(){return(Qa=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ml="firebaseLocalStorageDb",Pn="firebaseLocalStorage",Rn="fbase_key";class Vo{constructor(p){this.request=p}toPromise(){return new Promise((p,h)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function si(y,p){return y.transaction([Pn],p?"readwrite":"readonly").objectStore(Pn)}function ua(){const y=indexedDB.open(Ml,1);return new Promise((p,h)=>{y.addEventListener("error",()=>{h(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Pn,{keyPath:Rn})}catch(x){h(x)}}),y.addEventListener("success",(0,f.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Pn)?p(b):(b.close(),yield function cu(){const y=indexedDB.deleteDatabase(Ml);return new Vo(y).toPromise()}(),p(yield ua()))}))})}function Is(y,p,h){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(y,p,h){const b=si(y,!0).put({[Rn]:p,value:h});return new Vo(b).toPromise()})).apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(y,p){const h=si(y,!1).get(p),b=yield new Vo(h).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function kl(y,p){const h=si(y,!0).delete(p);return new Vo(h).toPromise()}const po=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,f.Z)(function*(){return h.db||(h.db=yield ua()),h.db})()}_withRetries(h){var b=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const O=yield b._openDb();return yield h(O)}catch(O){if(x++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,f.Z)(function*(){return Fr()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,f.Z)(function*(){h.receiver=Te._getInstance(function cd(){return Fr()?self:null}()),h.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(x,O){return{keyProcessed:(yield h._poll()).includes(O.key)}});return function(x,O){return b.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return b.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,f.Z)(function*(){var b,x;if(h.activeServiceWorker=yield function Lo(){return Qa.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new en(h.activeServiceWorker);const O=yield h.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Xf(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:h},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const h=yield ua();return yield Is(h,Es,"1"),yield kl(h,Es),!0}catch{}return!1})()}_withPendingWrite(h){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield h()}finally{b.pendingWrites--}})()}_set(h,b){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(O=>Is(O,h,b)),x.localCache[h]=b,x.notifyServiceWorker(h)}))})()}_get(h){var b=this;return(0,f.Z)(function*(){const x=yield b._withRetries(O=>function Bo(y,p){return Sr.apply(this,arguments)}(O,h));return b.localCache[h]=x,x})()}_remove(h){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(x=>kl(x,h)),delete b.localCache[h],b.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,f.Z)(function*(){const b=yield h._withRetries(J=>{const fe=si(J,!1).getAll();return new Vo(fe).toPromise()});if(!b)return[];if(0!==h.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:J,value:fe}of b)O.add(J),JSON.stringify(h.localCache[J])!==JSON.stringify(fe)&&(h.notifyListeners(J,fe),x.push(J));for(const J of Object.keys(h.localCache))h.localCache[J]&&!O.has(J)&&(h.notifyListeners(J,null),x.push(J));return x})()}notifyListeners(h,b){this.localCache[h]=b;const x=this.listeners[h];if(x)for(const O of Array.from(x))O(b)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(b)}_removeListener(h,b){this.listeners[h]&&(this.listeners[h].delete(b),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Cs(y,p){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",Yt(y,p))}function Uo(){return(Uo=(0,f.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fo(y){return new Promise((p,h)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=p,b.onerror=x=>{const O=Ce("internal-error");O.customData=x,h(O)},b.type="text/javascript",b.charset="UTF-8",function br(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(b)})}function Ja(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Xa=1e12;class ca{constructor(p){this.auth=p,this.counter=Xa,this._widgets=new Map}render(p,h){const b=this.counter;return this._widgets.set(b,new da(p,this.auth.name,h||{})),this.counter++,b}reset(p){var h;const b=p||Xa;null===(h=this._widgets.get(b))||void 0===h||h.delete(),this._widgets.delete(b)}getResponse(p){var h;return(null===(h=this._widgets.get(p||Xa))||void 0===h?void 0:h.getResponse())||""}execute(p){var h=this;return(0,f.Z)(function*(){var b;return null===(b=h._widgets.get(p||Xa))||void 0===b||b.execute(),""})()}}class da{constructor(p,h,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;$(x,"argument-error",{appName:h}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jo(y){const p=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)p.push(h.charAt(Math.floor(Math.random()*h.length)));return p.join("")}(50);const{callback:p,"expired-callback":h}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const du=Ja("rcb"),Xu=new Ht(3e4,6e4);class pd{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ut().grecaptcha}load(p,h=""){return $(function fd(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(h),p,"argument-error"),this.shouldResolveImmediately(h)?Promise.resolve(Ut().grecaptcha):new Promise((b,x)=>{const O=Ut().setTimeout(()=>{x(Ce(p,"network-request-failed"))},Xu.get());Ut()[du]=()=>{Ut().clearTimeout(O),delete Ut()[du];const fe=Ut().grecaptcha;if(!fe)return void x(Ce(p,"internal-error"));const $e=fe.render;fe.render=(it,vt)=>{const lt=$e(it,vt);return this.counter++,lt},this.hostLanguage=h,b(fe)},fo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:du,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(O),x(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Ut().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pn{load(p){return(0,f.Z)(function*(){return new ca(p)})()}clearedOneInstance(){}}const ec="recaptcha",Yh={theme:"light",type:"image"};class tg{constructor(p,h=Object.assign({},Yh),b){this.parameters=h,this.type=ec,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(b),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;$(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pn:new pd,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const h=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(h)||new Promise(O=>{const J=fe=>{!fe||(p.tokenChangeListeners.delete(J),O(fe))};p.tokenChangeListeners.add(J),p.isInvisible&&b.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return h=>{if(this.tokenChangeListeners.forEach(b=>b(h)),"function"==typeof p)p(h);else if("string"==typeof p){const b=Ut()[p];"function"==typeof b&&b(h)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let h=p.container;if(!p.isInvisible){const b=document.createElement("div");h.appendChild(b),h=b}p.widgetId=p.getAssertedRecaptcha().render(h,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){$(ht()&&!Fr(),p.auth,"internal-error"),yield function Qh(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const h=yield function Wi(y){return Uo.apply(this,arguments)}(p.auth);$(h,p.auth,"internal-error"),p.parameters.sitekey=h})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tc{constructor(p,h){this.verificationId=p,this.onConfirmation=h}confirm(p){const h=Hi._fromVerification(this.verificationId,p);return this.onConfirmation(h)}}function nc(){return(nc=(0,f.Z)(function*(y,p,h){const b=Mn(y),x=yield Ds(b,p,(0,F.m9)(h));return new tc(x,O=>Tn(b,O))})).apply(this,arguments)}function rc(){return(rc=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y);yield bn(!1,b,"phone");const x=yield Ds(b.auth,p,(0,F.m9)(h));return new tc(x,O=>ar(b,O))})).apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y),x=yield Ds(b.auth,p,(0,F.m9)(h));return new tc(x,O=>ms(b,O))})).apply(this,arguments)}function Ds(y,p,h){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(y,p,h){var b;const x=yield h.verify();try{let O;if($("string"==typeof x,y,"argument-error"),$(h.type===ec,y,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const J=O.session;if("phoneNumber"in O)return $("enroll"===J.type,y,"internal-error"),(yield Ya(y,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{$("signin"===J.type,y,"internal-error");const fe=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return $(fe,y,"missing-multi-factor-info"),(yield Cs(y,{mfaPendingCredential:J.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield td(y,{phoneNumber:O.phoneNumber,recaptchaToken:x});return J}}finally{h._reset()}})).apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(y,p){yield Ws((0,F.m9)(y),p)})).apply(this,arguments)}let wr=(()=>{class y{constructor(h){this.providerId=y.PROVIDER_ID,this.auth=Mn(h)}verifyPhoneNumber(h,b){return Ds(this.auth,h,(0,F.m9)(b))}static credential(h,b){return Hi._fromVerification(h,b)}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:b,temporaryProof:x}=h;return b&&x?Hi._fromTokenResponse(b,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fn(y,p){return p?ee(p):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _i extends vn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return So(p,this._buildIdpRequest())}_linkToIdToken(p,h){return So(p,this._buildIdpRequest(h))}_getReauthenticationResolver(p){return So(p,this._buildIdpRequest())}_buildIdpRequest(p){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(h.idToken=p),h}}function ha(y){return sr(y.auth,new _i(y),y.bypassAuthState)}function nl(y){const{auth:p,user:h}=y;return $(h,p,"internal-error"),Zs(h,new _i(y),y.bypassAuthState)}function ic(y){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(y){const{auth:p,user:h}=y;return $(h,p,"internal-error"),Ws(h,new _i(y),y.bypassAuthState)})).apply(this,arguments)}class pu{constructor(p,h,b,x,O=!1){this.auth=p,this.resolver=b,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var p=this;return new Promise(function(){var h=(0,f.Z)(function*(b,x){p.pendingPromise={resolve:b,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,x){return h.apply(this,arguments)}}())}onAuthEvent(p){var h=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:O,tenantId:J,error:fe,type:$e}=p;if(fe)return void h.reject(fe);const it={auth:h.auth,requestUri:b,sessionId:x,tenantId:J||void 0,postBody:O||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask($e)(it))}catch(vt){h.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ha;case"linkViaPopup":case"linkViaRedirect":return ic;case"reauthViaPopup":case"reauthViaRedirect":return nl;default:xe(this.auth,"internal-error")}}resolve(p){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fu=new Ht(2e3,1e4);function oc(){return(oc=(0,f.Z)(function*(y,p,h){const b=Mn(y);Ze(y,p,ni);const x=fn(b,h);return new gu(b,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Pl(){return(Pl=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y);Ze(b.auth,p,ni);const x=fn(b.auth,h);return new gu(b.auth,"reauthViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y);Ze(b.auth,p,ni);const x=fn(b.auth,h);return new gu(b.auth,"linkViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}let gu=(()=>{class y extends pu{constructor(h,b,x,O,J){super(h,b,O,J),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var h=this;return(0,f.Z)(function*(){const b=yield h.execute();return $(b,h.auth,"internal-error"),b})()}onExecution(){var h=this;return(0,f.Z)(function*(){Y(1===h.filter.length,"Popup operations only handle one event");const b=Ke();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],b),h.authWindow.associatedEvent=b,h.resolver._originValidation(h.auth).catch(x=>{h.reject(x)}),h.resolver._isIframeWebStorageSupported(h.auth,x=>{x||h.reject(Ce(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const h=()=>{var b,x;this.pollId=null!==(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(h,fu.get())};h()}}return y.currentPopupAction=null,y})();const mu=new Map;class il extends pu{constructor(p,h,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,h=this;return(0,f.Z)(function*(){let b=mu.get(h.auth._key());if(!b){try{const O=(yield function rg(y,p){return Go.apply(this,arguments)}(h.resolver,h.auth))?yield p().call(h):null;b=()=>Promise.resolve(O)}catch(x){b=()=>Promise.reject(x)}mu.set(h.auth._key(),b)}return h.bypassAuthState||mu.set(h.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var h=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return h().call(b,p);if("unknown"!==p.type){if(p.eventId){const x=yield b.auth._redirectUserForId(p.eventId);if(x)return b.user=x,h().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Go(){return(Go=(0,f.Z)(function*(y,p){const h=pa(p),b=Ts(y);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(h));return yield b._remove(h),x})).apply(this,arguments)}function sc(y,p){return yu.apply(this,arguments)}function yu(){return(yu=(0,f.Z)(function*(y,p){return Ts(y)._set(pa(p),"true")})).apply(this,arguments)}function yd(y,p){mu.set(y._key(),p)}function Ts(y){return ee(y._redirectPersistence)}function pa(y){return Bt("pendingRedirect",y.config.apiKey,y.name)}function P(){return(P=(0,f.Z)(function*(y,p,h){const b=Mn(y);Ze(y,p,ni);const x=fn(b,h);return yield sc(x,b),x._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function le(){return(le=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y);Ze(b.auth,p,ni);const x=fn(b.auth,h);yield sc(x,b.auth);const O=yield vi(b);return x._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(y,p,h){const b=(0,F.m9)(y);Ze(b.auth,p,ni);const x=fn(b.auth,h);yield bn(!1,b,p.providerId),yield sc(x,b.auth);const O=yield vi(b);return x._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(y,p){return yield Mn(y)._initializationPromise,ct(y,p,!1)})).apply(this,arguments)}function ct(y,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y,p,h=!1){const b=Mn(y),x=fn(b,p),J=yield new il(b,x,h).execute();return J&&!h&&(delete J.user._redirectEventId,yield b._persistUserIfCurrent(J.user),yield b._setRedirectUser(null,p)),J})).apply(this,arguments)}function vi(y){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(y){const p=Ke(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class xi{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let h=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(h=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ki(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ss(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=p,h=!0)),h}sendToConsumer(p,h){var b;if(p.error&&!Ss(p)){const x=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";h.onError(Ce(this.auth,x))}else h.onAuthEvent(p)}isEventForConsumer(p,h){const b=null===h.eventId||!!p.eventId&&p.eventId===h.eventId;return h.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mo(p))}saveEventToCache(p){this.cachedEventUids.add(mo(p)),this.lastProcessedEventTime=Date.now()}}function mo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Ss({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Ms(y){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(y,p={}){return Pt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Ho=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_d=/^https?/;function vd(){return(vd=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Ms(y);for(const h of p)try{if(o_(h))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function o_(y){const p=Fe(),{protocol:h,hostname:b}=new URL(p);if(y.startsWith("chrome-extension://")){const J=new URL(y);return""===J.hostname&&""===b?"chrome-extension:"===h&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===h&&J.hostname===b}if(!_d.test(h))return!1;if(Ho.test(y))return b===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const Fl=new Ht(3e4,6e4);function vu(){const y=Ut().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let h=0;h<y.CP.length;h++)y.CP[h]=null}let ep=null;function tp(y){return ep=ep||function Kb(y){return new Promise((p,h)=>{var b,x,O;function J(){vu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{vu(),h(Ce(y,"network-request-failed"))},timeout:Fl.get()})}if(null!==(x=null===(b=Ut().gapi)||void 0===b?void 0:b.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Ut().gapi)||void 0===O||!O.load){const fe=Ja("iframefcb");return Ut()[fe]=()=>{gapi.load?J():h(Ce(y,"network-request-failed"))},fo(`https://apis.google.com/js/api.js?onload=${fe}`).catch($e=>h($e))}J()}}).catch(p=>{throw ep=null,p})}(y),ep}const Zb=new Ht(5e3,15e3),sg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},np=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bd(y){const p=y.config;$(p.authDomain,y,"auth-domain-config-required");const h=p.emulator?jn(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:y.name,v:he.SDK_VERSION},x=np.get(y.config.apiHost);x&&(b.eid=x);const O=y._getFrameworks();return O.length&&(b.fw=O.join(",")),`${h}?${(0,F.xO)(b).slice(1)}`}function rp(){return rp=(0,f.Z)(function*(y){const p=yield tp(y),h=Ut().gapi;return $(h,y,"internal-error"),p.open({where:document.body,url:bd(y),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sg,dontclear:!0},b=>new Promise(function(){var x=(0,f.Z)(function*(O,J){yield b.restyle({setHideOnLeave:!1});const fe=Ce(y,"network-request-failed"),$e=Ut().setTimeout(()=>{J(fe)},Zb.get());function it(){Ut().clearTimeout($e),O(b)}b.ping(it).then(it,()=>{J(fe)})});return function(O,J){return x.apply(this,arguments)}}()))}),rp.apply(this,arguments)}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class op{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lc(y,p,h,b,x,O){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const J={apiKey:y.config.apiKey,appName:y.name,authType:h,redirectUrl:b,v:he.SDK_VERSION,eventId:x};if(p instanceof ni){p.setDefaultLanguage(y.languageCode),J.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[$e,it]of Object.entries(O||{}))J[$e]=it}if(p instanceof ao){const $e=p.getScopes().filter(it=>""!==it);$e.length>0&&(J.scopes=$e.join(","))}y.tenantId&&(J.tid=y.tenantId);const fe=J;for(const $e of Object.keys(fe))void 0===fe[$e]&&delete fe[$e];return`${function ug({config:y}){return y.emulator?jn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(fe).slice(1)}`}const wd="webStorageSupport";class Ll extends class lp{constructor(p){this.factorId=p}_process(p,h,b){switch(h.type){case"enroll":return this._finalizeEnroll(p,h.credential,b);case"signin":return this._finalizeSignIn(p,h.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ll(p)}_finalizeEnroll(p,h,b){return function Qu(y,p){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(y,p))}(p,{idToken:h,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,h){return function hd(y,p){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",Yt(y,p))}(p,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let u_=(()=>{class y{constructor(){}static assertion(h){return Ll._fromCredential(h)}}return y.FACTOR_ID="phone",y})();var cg="@firebase/auth";class c_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var h=this;return(0,f.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const h=this.auth.onIdTokenChanged(b=>{var x;p((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,h),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const h=this.internalListeners.get(p);!h||(this.internalListeners.delete(p),h(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bl(){return window}function up(){return(up=(0,f.Z)(function*(y,p,h){var b;const{BuildInfo:x}=Bl();Y(p.sessionId,"AuthEvent did not contain a session ID");const O=yield ew(p.sessionId),J={};return Cn()?J.ibi=x.packageName:We()?J.apn=x.packageName:xe(y,"operation-not-supported-in-this-environment"),x.displayName&&(J.appDisplayName=x.displayName),J.sessionId=O,lc(y,h,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,J)})).apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(y){const{BuildInfo:p}=Bl(),h={};Cn()?h.iosBundleId=p.packageName:We()?h.androidPackageName=p.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Ms(y,h)})).apply(this,arguments)}function dp(){return(dp=(0,f.Z)(function*(y,p,h){const{cordova:b}=Bl();let x=()=>{};try{yield new Promise((O,J)=>{let fe=null;function $e(){var lt;O();const On=null===(lt=b.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof On&&On(),"function"==typeof h?.close&&h.close()}function it(){fe||(fe=window.setTimeout(()=>{J(Ce(y,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&it()}p.addPassiveListener($e),document.addEventListener("resume",it,!1),We()&&document.addEventListener("visibilitychange",vt,!1),x=()=>{p.removePassiveListener($e),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",vt,!1),fe&&window.clearTimeout(fe)}})}finally{x()}})).apply(this,arguments)}function ew(y){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(y){const p=hc(y),h=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(h)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hc(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),h=new Uint8Array(p);for(let b=0;b<y.length;b++)h[b]=y.charCodeAt(b);return h}!function Eu(y){(0,he._registerComponent)(new me.wA("auth",(p,{options:h})=>{const b=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:J}=b.options;return((fe,$e)=>{$(O&&!O.includes(":"),"invalid-api-key",{appName:fe.name}),$(!J?.includes(":"),"argument-error",{appName:fe.name});const it={apiKey:O,authDomain:J,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gi(y)},vt=new Pa(fe,$e,it);return function ce(y,p){const h=p?.persistence||[],b=(Array.isArray(h)?h:[h]).map(ee);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(b,p?.popupRedirectResolver)}(vt,h),vt})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,h,b)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new me.wA("auth-internal",p=>{const h=Mn(p.getProvider("auth").getImmediate());return new c_(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(cg,"0.20.4",function Vl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,he.registerVersion)(cg,"0.20.4","esm2017")}("Browser");class $o extends xi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function fp(y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(y){const p=yield gp()._get(fc(y));return p&&(yield gp()._remove(fc(y))),p})).apply(this,arguments)}function tw(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const b=Math.floor(Math.random()*p.length);y.push(p.charAt(b))}return y.join("")}function gp(){return ee(I)}function fc(y){return Bt("authEvent",y.config.apiKey,y.name)}function Ed(y){if(!y?.includes("?"))return{};const[p,...h]=y.split("?");return(0,F.zd)(h.join("?"))}function pg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function yc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function yp(y=(0,F.z$)()){return!("file:"!==yc()&&"ionic:"!==yc()&&"capacitor:"!==yc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function _p(){try{const y=self.localStorage,p=Ke();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Cd(y=(0,F.z$)()){return function gg(){return(0,F.w1)()&&11===document?.documentMode}()||function m_(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch{return Dd()&&(0,F.hl)()}return!1}function Dd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vp(){return(function _c(){return"http:"===yc()||"https:"===yc()}()||(0,F.ru)()||yp())&&!function Er(){return(0,F.b$)()||(0,F.UG)()}()&&_p()&&!Dd()}function bp(){return yp()&&typeof document<"u"}function mg(){return(mg=(0,f.Z)(function*(){return!!bp()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const yo={LOCAL:"local",NONE:"none",SESSION:"session"},fa=$,wp="persistence";function Ad(y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(y){yield y._initializationPromise;const p=__(),h=Bt(wp,y.config.apiKey,y.name);p&&p.setItem(h,y._getPersistence())})).apply(this,arguments)}function __(){var y;try{return(null===(y=function xD(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const iw=$;class sl{constructor(){this.browserResolver=ee(class sp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k,this._completeRedirectFn=ct,this._overrideRedirectResult=yd}_openPopup(p,h,b,x){var O=this;return(0,f.Z)(function*(){var J;Y(null===(J=O.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const fe=lc(p,h,b,Fe(),x);return function wu(y,p,h,b=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),J=Math.max((window.screen.availWidth-b)/2,0).toString();let fe="";const $e=Object.assign(Object.assign({},bu),{width:b.toString(),height:x.toString(),top:O,left:J}),it=(0,F.z$)().toLowerCase();h&&(fe=Hn(it)?"_blank":h),Gn(it)&&(p=p||"http://localhost",$e.scrollbars="yes");const vt=Object.entries($e).reduce((On,[qn,wc])=>`${On}${qn}=${wc},`,"");if(function $n(y=(0,F.z$)()){var p;return Cn(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(it)&&"_self"!==fe)return function lg(y,p){const h=document.createElement("a");h.href=y,h.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(b)}(p||"",fe),new op(null);const lt=window.open(p||"",fe,vt);$(lt,y,"popup-blocked");try{lt.focus()}catch{}return new op(lt)}(p,fe,Ke())})()}_openRedirect(p,h,b,x){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(p),function fr(y){Ut().location.href=y}(lc(p,h,b,Fe(),x)),new Promise(()=>{})})()}_initialize(p){const h=p._key();if(this.eventManagers[h]){const{manager:x,promise:O}=this.eventManagers[h];return x?Promise.resolve(x):(Y(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[h]={promise:b},b.catch(()=>{delete this.eventManagers[h]}),b}initAndGetManager(p){var h=this;return(0,f.Z)(function*(){const b=yield function a_(y){return rp.apply(this,arguments)}(p),x=new xi(p);return b.register("authEvent",O=>($(O?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[p._key()]={manager:x},h.iframes[p._key()]=b,x})()}_isIframeWebStorageSupported(p,h){this.iframes[p._key()].send(wd,{type:wd},x=>{var O;const J=null===(O=x?.[0])||void 0===O?void 0:O[wd];void 0!==J&&h(!!J),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const h=p._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function ig(y){return vd.apply(this,arguments)}(p)),this.originValidationPromises[h]}get _shouldInitProactively(){return Dn()||hr()||Cn()}}),this.cordovaResolver=ee(class mp{constructor(){this._redirectPersistence=k,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ct,this._overrideRedirectResult=yd}_initialize(p){var h=this;return(0,f.Z)(function*(){const b=p._key();let x=h.eventManagers.get(b);return x||(x=new $o(p),h.eventManagers.set(b,x),h.attachCallbackListeners(p,x)),x})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,h,b,x){var O=this;return(0,f.Z)(function*(){!function hp(y){var p,h,b,x,O,J,fe,$e,it,vt;const lt=Bl();$("function"==typeof(null===(p=lt?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(h=lt?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(O=null===(x=null===(b=lt?.cordova)||void 0===b?void 0:b.plugins)||void 0===x?void 0:x.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===($e=null===(fe=null===(J=lt?.cordova)||void 0===J?void 0:J.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===$e?void 0:$e.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(vt=null===(it=lt?.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===vt?void 0:vt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const J=yield O._initialize(p);yield J.initialized(),J.resetRedirect(),function Ol(){mu.clear()}(),yield O._originValidation(p);const fe=function pc(y,p,h=null){return{type:p,eventId:h,urlResponse:null,sessionId:tw(),postBody:null,tenantId:y.tenantId,error:Ce(y,"no-auth-event")}}(p,b,x);yield function pp(y,p){return gp()._set(fc(y),p)}(p,fe);const $e=yield function d_(y,p,h){return up.apply(this,arguments)}(p,fe,h),it=yield function h_(y){const{cordova:p}=Bl();return new Promise(h=>{p.plugins.browsertab.isAvailable(b=>{let x=null;b?p.plugins.browsertab.openUrl(y):x=p.InAppBrowser.open(y,function os(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),h(x)})})}($e);return function cp(y,p,h){return dp.apply(this,arguments)}(p,J,it)})()}_isIframeWebStorageSupported(p,h){throw new Error("Method not implemented.")}_originValidation(p){const h=p._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Xb(y){return cc.apply(this,arguments)}(p)),this.originValidationPromises[h]}attachCallbackListeners(p,h){const{universalLinks:b,handleOpenURL:x,BuildInfo:O}=Bl(),J=setTimeout((0,f.Z)(function*(){yield fp(p),h.onEvent(pg())}),500),fe=function(){var vt=(0,f.Z)(function*(lt){clearTimeout(J);const On=yield fp(p);let qn=null;On&&lt?.url&&(qn=function p_(y,p){var h,b;const x=function gc(y){const p=Ed(y),h=p.link?decodeURIComponent(p.link):void 0,b=Ed(h).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ed(x).link||x||b||h||y}(p);if(x.includes("/__/auth/callback")){const O=Ed(x),J=O.firebaseError?function hg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,fe=null===(b=null===(h=J?.code)||void 0===h?void 0:h.split("auth/"))||void 0===b?void 0:b[1],$e=fe?Ce(fe):null;return $e?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(On,lt.url)),h.onEvent(qn||pg())});return function(On){return vt.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,fe);const $e=x,it=`${O.packageName.toLowerCase()}://`;Bl().handleOpenURL=function(){var vt=(0,f.Z)(function*(lt){if(lt.toLowerCase().startsWith(it)&&fe({url:lt}),"function"==typeof $e)try{$e(lt)}catch(On){console.error(On)}});return function(lt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k,this._completeRedirectFn=ct,this._overrideRedirectResult=yd}_initialize(p){var h=this;return(0,f.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,h,b,x){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,h,b,x)})()}_openRedirect(p,h,b,x){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,h,b,x)})()}_isIframeWebStorageSupported(p,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,h)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return bp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return iw(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const h=yield function nw(){return mg.apply(this,arguments)}();p.underlyingResolver=h?p.cordovaResolver:p.browserResolver})()}}function v_(y){return y.unwrap()}function Gl(y){return vc(y)}function vc(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return wr.credentialFromResult(y);const h=p.providerId;if(!h||"password"===h)return null;let b;switch(h){case"google.com":b=hs;break;case"facebook.com":b=wl;break;case"github.com":b=$s;break;case"twitter.com":b=$i;break;default:const{oauthIdToken:x,oauthAccessToken:O,oauthTokenSecret:J,pendingToken:fe,nonce:$e}=p;return O||J||x||fe?fe?h.startsWith("saml.")?ps._create(h,fe):Gi._fromParams({providerId:h,signInMethod:h,pendingToken:fe,idToken:x,accessToken:O}):new ds(h).credential({idToken:x,accessToken:O,rawNonce:$e}):null}return y instanceof F.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function Xn(y,p){return p.catch(h=>{throw h instanceof F.ZR&&function Ep(y,p){var h,b;const x=null===(h=p.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=p)||void 0===b?void 0:b.code))p.resolver=new Cu(y,function Qn(y,p){var h;const b=(0,F.m9)(y),x=p;return $(p.customData.operationType,b,"argument-error"),$(null===(h=x.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,b,"argument-error"),co._fromError(b,x)}(y,p));else if(x){const O=vc(p),J=p;O&&(J.credential=O,J.tenantId=x.tenantId||void 0,J.email=x.email||void 0,J.phoneNumber=x.phoneNumber||void 0)}}(y,h),h}).then(h=>{const x=h.user;return{operationType:h.operationType,credential:Gl(h),additionalUserInfo:au(h),user:qo.getOrCreate(x)}})}function zo(y,p){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,f.Z)(function*(y,p){const h=yield p;return{verificationId:h.verificationId,confirm:b=>Xn(y,h.confirm(b))}})).apply(this,arguments)}class Cu{constructor(p,h){this.resolver=h,this.auth=function yg(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Xn(v_(this.auth),this.resolver.resolveSignIn(p))}}class qo{constructor(p){this._delegate=p,this.multiFactor=function ad(y){const p=(0,F.m9)(y);return ho.has(p)||ho.set(p,Or._fromUser(p)),ho.get(p)}(p)}static getOrCreate(p){return qo.USER_MAP.has(p)||qo.USER_MAP.set(p,new qo(p)),qo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var h=this;return(0,f.Z)(function*(){return Xn(h.auth,ar(h._delegate,p))})()}linkWithPhoneNumber(p,h){var b=this;return(0,f.Z)(function*(){return zo(b.auth,function tl(y,p,h){return rc.apply(this,arguments)}(b._delegate,p,h))})()}linkWithPopup(p){var h=this;return(0,f.Z)(function*(){return Xn(h.auth,function Rl(y,p,h){return rl.apply(this,arguments)}(h._delegate,p,sl))})()}linkWithRedirect(p){var h=this;return(0,f.Z)(function*(){return yield Ad(Mn(h.auth)),function Me(y,p,h){return function qe(y,p,h){return He.apply(this,arguments)}(y,p,h)}(h._delegate,p,sl)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var h=this;return(0,f.Z)(function*(){return Xn(h.auth,ms(h._delegate,p))})()}reauthenticateWithPhoneNumber(p,h){return zo(this.auth,function Jh(y,p,h){return zn.apply(this,arguments)}(this._delegate,p,h))}reauthenticateWithPopup(p){return Xn(this.auth,function ai(y,p,h){return Pl.apply(this,arguments)}(this._delegate,p,sl))}reauthenticateWithRedirect(p){var h=this;return(0,f.Z)(function*(){return yield Ad(Mn(h.auth)),function U(y,p,h){return function te(y,p,h){return le.apply(this,arguments)}(y,p,h)}(h._delegate,p,sl)})()}sendEmailVerification(p){return function Ti(y,p){return oi.apply(this,arguments)}(this._delegate,p)}unlink(p){var h=this;return(0,f.Z)(function*(){return yield function Mo(y,p){return gs.apply(this,arguments)}(h._delegate,p),h})()}updateEmail(p){return function Wa(y,p){return bs((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function vs(y,p){return bs((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Xh(y,p){return hu.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ra(y,p){return Ro.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,h){return function na(y,p,h){return za.apply(this,arguments)}(this._delegate,p,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qo.USER_MAP=new WeakMap;const Du=$;let li=(()=>{class y{constructor(h,b){if(this.app=h,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=h.options;Du(x,"invalid-api-key",{appName:h.name}),Du(x,"invalid-api-key",{appName:h.name});const O=typeof window<"u"?sl:void 0;this._delegate=b.initialize({options:{persistence:_g(x,h.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,b){!function Ao(y,p,h){const b=Mn(y);$(b._canInitEmulator,b,"emulator-config-failed"),$(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const x=!!h?.disableWarnings,O=Vn(p),{host:J,port:fe}=function Ci(y){const p=Vn(y),h=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!h)return{host:"",port:null};const b=h[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const O=x[1];return{host:O,port:Di(b.substr(O.length+1))}}{const[O,J]=b.split(":");return{host:O,port:Di(J)}}}(p);b.config.emulator={url:`${O}//${J}${null===fe?"":`:${fe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:J,port:fe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function pr(){function y(){const p=document.createElement("p"),h=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,h,b)}applyActionCode(h){return function Cl(y,p){return ke.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Mt(this._delegate,h)}confirmPasswordReset(h,b){return function ja(y,p,h){return No.apply(this,arguments)}(this._delegate,h,b)}createUserWithEmailAndPassword(h,b){var x=this;return(0,f.Z)(function*(){return Xn(x._delegate,function Js(y,p,h){return Po.apply(this,arguments)}(x._delegate,h,b))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function ii(y,p){return ta.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Zu(y,p){return"EMAIL_SIGNIN"===Fa.parseLink(p)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,f.Z)(function*(){Du(vp(),h._delegate,"operation-not-supported-in-this-environment");const b=yield function pt(y,p){return xt.apply(this,arguments)}(h._delegate,sl);return b?Xn(h._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function fg(y,p){Mn(y)._logFramework(p)}(this._delegate,h)}onAuthStateChanged(h,b,x){const{next:O,error:J,complete:fe}=Td(h,b,x);return this._delegate.onAuthStateChanged(O,J,fe)}onIdTokenChanged(h,b,x){const{next:O,error:J,complete:fe}=Td(h,b,x);return this._delegate.onIdTokenChanged(O,J,fe)}sendSignInLinkToEmail(h,b){return function Ha(y,p,h){return Xs.apply(this,arguments)}(this._delegate,h,b)}sendPasswordResetEmail(h,b){return function Ua(y,p,h){return Qs.apply(this,arguments)}(this._delegate,h,b||void 0)}setPersistence(h){var b=this;return(0,f.Z)(function*(){let x;switch(function y_(y,p){fa(Object.values(yo).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?fa(p!==yo.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?fa(p===yo.NONE,y,"unsupported-persistence-type"):Dd()?fa(p===yo.NONE||p===yo.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):fa(p===yo.NONE||_p(),y,"unsupported-persistence-type")}(b._delegate,h),h){case yo.SESSION:x=k;break;case yo.LOCAL:x=(yield ee(po)._isAvailable())?po:I;break;case yo.NONE:x=dn;break;default:return xe("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Xn(this._delegate,function Va(y){return ou.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Xn(this._delegate,Tn(this._delegate,h))}signInWithCustomToken(h){return Xn(this._delegate,function ys(y,p){return ft.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,b){return Xn(this._delegate,function yi(y,p,h){return Tn((0,F.m9)(y),bl.credential(p,h))}(this._delegate,h,b))}signInWithEmailLink(h,b){return Xn(this._delegate,function Yu(y,p,h){return ea.apply(this,arguments)}(this._delegate,h,b))}signInWithPhoneNumber(h,b){return zo(this._delegate,function gd(y,p,h){return nc.apply(this,arguments)}(this._delegate,h,b))}signInWithPopup(h){var b=this;return(0,f.Z)(function*(){return Du(vp(),b._delegate,"operation-not-supported-in-this-environment"),Xn(b._delegate,function md(y,p,h){return oc.apply(this,arguments)}(b._delegate,h,sl))})()}signInWithRedirect(h){var b=this;return(0,f.Z)(function*(){return Du(vp(),b._delegate,"operation-not-supported-in-this-environment"),yield Ad(b._delegate),function A(y,p,h){return function T(y,p,h){return P.apply(this,arguments)}(y,p,h)}(b._delegate,h,sl)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Ga(y,p){return Sn.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=yo,y})();function Td(y,p,h){let b=y;"function"!=typeof y&&({next:b,error:p,complete:h}=y);const x=b;return{next:J=>x(J&&qo.getOrCreate(J)),error:p,complete:h}}function _g(y,p){const h=function rw(y,p){const h=__();if(!h)return[];const b=Bt(wp,y,p);switch(h.getItem(b)){case yo.NONE:return[dn];case yo.LOCAL:return[po,k];case yo.SESSION:return[k];default:return[]}}(y,p);if(typeof self<"u"&&!h.includes(po)&&h.push(po),typeof window<"u")for(const b of[I,k])h.includes(b)||h.push(b);return h.includes(dn)||h.push(dn),h}class bc{constructor(){this.providerId="phone",this._delegate=new wr(v_(re.Z.auth()))}static credential(p,h){return wr.credential(p,h)}verifyPhoneNumber(p,h){return this._delegate.verifyPhoneNumber(p,h)}unwrap(){return this._delegate}}bc.PHONE_SIGN_IN_METHOD=wr.PHONE_SIGN_IN_METHOD,bc.PROVIDER_ID=wr.PROVIDER_ID;const zt=$;class Sd{constructor(p,h,b=re.Z.app()){var x;zt(null===(x=b.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new tg(p,h,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ga(y){y.INTERNAL.registerComponent(new me.wA("auth-compat",p=>{const h=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new li(h,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bl,FacebookAuthProvider:wl,GithubAuthProvider:$s,GoogleAuthProvider:hs,OAuthProvider:ds,SAMLAuthProvider:An,PhoneAuthProvider:bc,PhoneMultiFactorGenerator:u_,RecaptchaVerifier:Sd,TwitterAuthProvider:$i,Auth:li,AuthCredential:vn,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.17")}(re.Z)},8306:(dt,Se,V)=>{"use strict";V.d(Se,{y:()=>Q});var f=V(930),re=V(727),F=V(8822),he=V(4671);var me=V(2416),ge=V(576),Ie=V(2806);let Q=(()=>{class Le{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const ve=new Le;return ve.source=this,ve.operator=Ye,ve}subscribe(Ye,ve,be){const Je=function nt(Le){return Le&&Le instanceof f.Lv||function ie(Le){return Le&&(0,ge.m)(Le.next)&&(0,ge.m)(Le.error)&&(0,ge.m)(Le.complete)}(Le)&&(0,re.Nn)(Le)}(Ye)?Ye:new f.Hp(Ye,ve,be);return(0,Ie.x)(()=>{const{operator:Xe,source:xe}=this;Je.add(Xe?Xe.call(Je,xe):xe?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(ve){Ye.error(ve)}}forEach(Ye,ve){return new(ve=q(ve))((be,Je)=>{const Xe=new f.Hp({next:xe=>{try{Ye(xe)}catch(Ce){Je(Ce),Xe.unsubscribe()}},error:Je,complete:be});this.subscribe(Xe)})}_subscribe(Ye){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ye)}[F.L](){return this}pipe(...Ye){return function we(Le){return 0===Le.length?he.y:1===Le.length?Le[0]:function(Ye){return Le.reduce((ve,be)=>be(ve),Ye)}}(Ye)(this)}toPromise(Ye){return new(Ye=q(Ye))((ve,be)=>{let Je;this.subscribe(Xe=>Je=Xe,Xe=>be(Xe),()=>ve(Je))})}}return Le.create=Re=>new Le(Re),Le})();function q(Le){var Re;return null!==(Re=Le??me.v.Promise)&&void 0!==Re?Re:Promise}},7579:(dt,Se,V)=>{"use strict";V.d(Se,{x:()=>me});var f=V(8306),re=V(727);const he=(0,V(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=V(8737),we=V(2806);let me=(()=>{class Ie extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ie=new ge(this,this);return ie.operator=q,ie}_throwIfClosed(){if(this.closed)throw new he}next(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(q)}})}error(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ie,isStopped:nt,observers:Le}=this;return ie||nt?re.Lc:(this.currentObservers=null,Le.push(q),new re.w0(()=>{this.currentObservers=null,(0,ue.P)(Le,q)}))}_checkFinalizedStatuses(q){const{hasError:ie,thrownError:nt,isStopped:Le}=this;ie?q.error(nt):Le&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return Ie.create=(Q,q)=>new ge(Q,q),Ie})();class ge extends me{constructor(Q,q){super(),this.destination=Q,this.source=q}next(Q){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ie||ie.call(q,Q)}error(Q){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ie||ie.call(q,Q)}complete(){var Q,q;null===(q=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===q||q.call(Q)}_subscribe(Q){var q,ie;return null!==(ie=null===(q=this.source)||void 0===q?void 0:q.subscribe(Q))&&void 0!==ie?ie:re.Lc}}},930:(dt,Se,V)=>{"use strict";V.d(Se,{Hp:()=>Ye,Lv:()=>ie});var f=V(576),re=V(727),F=V(2416),he=V(7849),ue=V(5032);const we=Ie("C",void 0,void 0);function Ie(xe,Ce,Ae){return{kind:xe,value:Ce,error:Ae}}var Q=V(3410),q=V(2806);class ie extends re.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,re.Nn)(Ce)&&Ce.add(this)):this.destination=Xe}static create(Ce,Ae,Ze){return new Ye(Ce,Ae,Ze)}next(Ce){this.isStopped?Je(function ge(xe){return Ie("N",xe,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Je(function me(xe){return Ie("E",void 0,xe)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Je(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function Le(xe,Ce){return nt.call(xe,Ce)}class Re{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ce)}catch(Ze){ve(Ze)}}error(Ce){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ce)}catch(Ze){ve(Ze)}else ve(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Ae){ve(Ae)}}}class Ye extends ie{constructor(Ce,Ae,Ze){let K;if(super(),(0,f.m)(Ce)||!Ce)K={next:Ce??void 0,error:Ae??void 0,complete:Ze??void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(Ce),$.unsubscribe=()=>this.unsubscribe(),K={next:Ce.next&&Le(Ce.next,$),error:Ce.error&&Le(Ce.error,$),complete:Ce.complete&&Le(Ce.complete,$)}):K=Ce}this.destination=new Re(K)}}function ve(xe){F.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(xe):(0,he.h)(xe)}function Je(xe,Ce){const{onStoppedNotification:Ae}=F.v;Ae&&Q.z.setTimeout(()=>Ae(xe,Ce))}const Xe={closed:!0,next:ue.Z,error:function be(xe){throw xe},complete:ue.Z}},727:(dt,Se,V)=>{"use strict";V.d(Se,{Lc:()=>we,w0:()=>ue,Nn:()=>me});var f=V(576);const F=(0,V(3888).d)(Ie=>function(q){Ie(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ie,nt)=>`${nt+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var he=V(8737);class ue{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Le of q)Le.remove(this);else q.remove(this);const{initialTeardown:ie}=this;if((0,f.m)(ie))try{ie()}catch(Le){Q=Le instanceof F?Le.errors:[Le]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const Le of nt)try{ge(Le)}catch(Re){Q=Q??[],Re instanceof F?Q=[...Q,...Re.errors]:Q.push(Re)}}if(Q)throw new F(Q)}}add(Q){var q;if(Q&&Q!==this)if(this.closed)ge(Q);else{if(Q instanceof ue){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(Q)}}_hasParent(Q){const{_parentage:q}=this;return q===Q||Array.isArray(q)&&q.includes(Q)}_addParent(Q){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(Q),q):q?[q,Q]:Q}_removeParent(Q){const{_parentage:q}=this;q===Q?this._parentage=null:Array.isArray(q)&&(0,he.P)(q,Q)}remove(Q){const{_finalizers:q}=this;q&&(0,he.P)(q,Q),Q instanceof ue&&Q._removeParent(this)}}ue.EMPTY=(()=>{const Ie=new ue;return Ie.closed=!0,Ie})();const we=ue.EMPTY;function me(Ie){return Ie instanceof ue||Ie&&"closed"in Ie&&(0,f.m)(Ie.remove)&&(0,f.m)(Ie.add)&&(0,f.m)(Ie.unsubscribe)}function ge(Ie){(0,f.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(dt,Se,V)=>{"use strict";V.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Se,V)=>{"use strict";V.d(Se,{E:()=>re});const re=new(V(8306).y)(ue=>ue.complete())},8996:(dt,Se,V)=>{"use strict";V.d(Se,{D:()=>Ce});var f=V(8421),re=V(5363),F=V(9468),we=V(8306),ge=V(2202),Ie=V(576),Q=V(9672);function ie(Ae,Ze){if(!Ae)throw new Error("Iterable cannot be null");return new we.y(K=>{(0,Q.f)(K,Ze,()=>{const $=Ae[Symbol.asyncIterator]();(0,Q.f)(K,Ze,()=>{$.next().then(pe=>{pe.done?K.complete():K.next(pe.value)})},0,!0)})})}var nt=V(3670),Le=V(8239),Re=V(1144),Ye=V(6495),ve=V(2206),be=V(4532),Je=V(3260);function Ce(Ae,Ze){return Ze?function xe(Ae,Ze){if(null!=Ae){if((0,nt.c)(Ae))return function he(Ae,Ze){return(0,f.Xf)(Ae).pipe((0,F.R)(Ze),(0,re.Q)(Ze))}(Ae,Ze);if((0,Re.z)(Ae))return function me(Ae,Ze){return new we.y(K=>{let $=0;return Ze.schedule(function(){$===Ae.length?K.complete():(K.next(Ae[$++]),K.closed||this.schedule())})})}(Ae,Ze);if((0,Le.t)(Ae))return function ue(Ae,Ze){return(0,f.Xf)(Ae).pipe((0,F.R)(Ze),(0,re.Q)(Ze))}(Ae,Ze);if((0,ve.D)(Ae))return ie(Ae,Ze);if((0,Ye.T)(Ae))return function q(Ae,Ze){return new we.y(K=>{let $;return(0,Q.f)(K,Ze,()=>{$=Ae[ge.h](),(0,Q.f)(K,Ze,()=>{let pe,Y;try{({value:pe,done:Y}=$.next())}catch(ae){return void K.error(ae)}Y?K.complete():K.next(pe)},0,!0)}),()=>(0,Ie.m)($?.return)&&$.return()})}(Ae,Ze);if((0,Je.L)(Ae))return function Xe(Ae,Ze){return ie((0,Je.Q)(Ae),Ze)}(Ae,Ze)}throw(0,be.z)(Ae)}(Ae,Ze):(0,f.Xf)(Ae)}},8421:(dt,Se,V)=>{"use strict";V.d(Se,{Xf:()=>nt});var f=V(655),re=V(1144),F=V(8239),he=V(8306),ue=V(3670),we=V(2206),me=V(4532),ge=V(6495),Ie=V(3260),Q=V(576),q=V(7849),ie=V(8822);function nt(xe){if(xe instanceof he.y)return xe;if(null!=xe){if((0,ue.c)(xe))return function Le(xe){return new he.y(Ce=>{const Ae=xe[ie.L]();if((0,Q.m)(Ae.subscribe))return Ae.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,re.z)(xe))return function Re(xe){return new he.y(Ce=>{for(let Ae=0;Ae<xe.length&&!Ce.closed;Ae++)Ce.next(xe[Ae]);Ce.complete()})}(xe);if((0,F.t)(xe))return function Ye(xe){return new he.y(Ce=>{xe.then(Ae=>{Ce.closed||(Ce.next(Ae),Ce.complete())},Ae=>Ce.error(Ae)).then(null,q.h)})}(xe);if((0,we.D)(xe))return be(xe);if((0,ge.T)(xe))return function ve(xe){return new he.y(Ce=>{for(const Ae of xe)if(Ce.next(Ae),Ce.closed)return;Ce.complete()})}(xe);if((0,Ie.L)(xe))return function Je(xe){return be((0,Ie.Q)(xe))}(xe)}throw(0,me.z)(xe)}function be(xe){return new he.y(Ce=>{(function Xe(xe,Ce){var Ae,Ze,K,$;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,f.KL)(xe);!(Ze=yield Ae.next()).done;)if(Ce.next(Ze.value),Ce.closed)return}catch(pe){K={error:pe}}finally{try{Ze&&!Ze.done&&($=Ae.return)&&(yield $.call(Ae))}finally{if(K)throw K.error}}Ce.complete()})})(xe,Ce).catch(Ae=>Ce.error(Ae))})}},6451:(dt,Se,V)=>{"use strict";V.d(Se,{T:()=>we});var f=V(6131),re=V(8421),F=V(515),he=V(7669),ue=V(8996);function we(...me){const ge=(0,he.yG)(me),Ie=(0,he._6)(me,1/0),Q=me;return Q.length?1===Q.length?(0,re.Xf)(Q[0]):(0,f.J)(Ie)((0,ue.D)(Q,ge)):F.E}},5403:(dt,Se,V)=>{"use strict";V.d(Se,{x:()=>re});var f=V(930);function re(he,ue,we,me,ge){return new F(he,ue,we,me,ge)}class F extends f.Lv{constructor(ue,we,me,ge,Ie,Q){super(ue),this.onFinalize=Ie,this.shouldUnsubscribe=Q,this._next=we?function(q){try{we(q)}catch(ie){ue.error(ie)}}:super._next,this._error=ge?function(q){try{ge(q)}catch(ie){ue.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(q){ue.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(dt,Se,V)=>{"use strict";V.d(Se,{U:()=>F});var f=V(4482),re=V(5403);function F(he,ue){return(0,f.e)((we,me)=>{let ge=0;we.subscribe((0,re.x)(me,Ie=>{me.next(he.call(ue,Ie,ge++))}))})}},6131:(dt,Se,V)=>{"use strict";V.d(Se,{J:()=>Q});var f=V(4004),re=V(8421),F=V(4482),he=V(9672),ue=V(5403),me=V(576);function ge(q,ie,nt=1/0){return(0,me.m)(ie)?ge((Le,Re)=>(0,f.U)((Ye,ve)=>ie(Le,Ye,Re,ve))((0,re.Xf)(q(Le,Re))),nt):("number"==typeof ie&&(nt=ie),(0,F.e)((Le,Re)=>function we(q,ie,nt,Le,Re,Ye,ve,be){const Je=[];let Xe=0,xe=0,Ce=!1;const Ae=()=>{Ce&&!Je.length&&!Xe&&ie.complete()},Ze=$=>Xe<Le?K($):Je.push($),K=$=>{Ye&&ie.next($),Xe++;let pe=!1;(0,re.Xf)(nt($,xe++)).subscribe((0,ue.x)(ie,Y=>{Re?.(Y),Ye?Ze(Y):ie.next(Y)},()=>{pe=!0},void 0,()=>{if(pe)try{for(Xe--;Je.length&&Xe<Le;){const Y=Je.shift();ve?(0,he.f)(ie,ve,()=>K(Y)):K(Y)}Ae()}catch(Y){ie.error(Y)}}))};return q.subscribe((0,ue.x)(ie,Ze,()=>{Ce=!0,Ae()})),()=>{be?.()}}(Le,Re,q,nt)))}var Ie=V(4671);function Q(q=1/0){return ge(Ie.y,q)}},5363:(dt,Se,V)=>{"use strict";V.d(Se,{Q:()=>he});var f=V(9672),re=V(4482),F=V(5403);function he(ue,we=0){return(0,re.e)((me,ge)=>{me.subscribe((0,F.x)(ge,Ie=>(0,f.f)(ge,ue,()=>ge.next(Ie),we),()=>(0,f.f)(ge,ue,()=>ge.complete(),we),Ie=>(0,f.f)(ge,ue,()=>ge.error(Ie),we)))})}},3099:(dt,Se,V)=>{"use strict";V.d(Se,{B:()=>we});var f=V(8996),re=V(5698),F=V(7579),he=V(930),ue=V(4482);function we(ge={}){const{connector:Ie=(()=>new F.x),resetOnError:Q=!0,resetOnComplete:q=!0,resetOnRefCountZero:ie=!0}=ge;return nt=>{let Le=null,Re=null,Ye=null,ve=0,be=!1,Je=!1;const Xe=()=>{Re?.unsubscribe(),Re=null},xe=()=>{Xe(),Le=Ye=null,be=Je=!1},Ce=()=>{const Ae=Le;xe(),Ae?.unsubscribe()};return(0,ue.e)((Ae,Ze)=>{ve++,!Je&&!be&&Xe();const K=Ye=Ye??Ie();Ze.add(()=>{ve--,0===ve&&!Je&&!be&&(Re=me(Ce,ie))}),K.subscribe(Ze),Le||(Le=new he.Hp({next:$=>K.next($),error:$=>{Je=!0,Xe(),Re=me(xe,Q,$),K.error($)},complete:()=>{be=!0,Xe(),Re=me(xe,q),K.complete()}}),(0,f.D)(Ae).subscribe(Le))})(nt)}}function me(ge,Ie,...Q){return!0===Ie?(ge(),null):!1===Ie?null:Ie(...Q).pipe((0,re.q)(1)).subscribe(()=>ge())}},9468:(dt,Se,V)=>{"use strict";V.d(Se,{R:()=>re});var f=V(4482);function re(F,he=0){return(0,f.e)((ue,we)=>{we.add(F.schedule(()=>ue.subscribe(we),he))})}},5698:(dt,Se,V)=>{"use strict";V.d(Se,{q:()=>he});var f=V(515),re=V(4482),F=V(5403);function he(ue){return ue<=0?()=>f.E:(0,re.e)((we,me)=>{let ge=0;we.subscribe((0,F.x)(me,Ie=>{++ge<=ue&&(me.next(Ie),ue<=ge&&me.complete())}))})}},4408:(dt,Se,V)=>{"use strict";V.d(Se,{o:()=>ue});var f=V(727);class re extends f.w0{constructor(me,ge){super()}schedule(me,ge=0){return this}}const F={setInterval(we,me,...ge){const{delegate:Ie}=F;return Ie?.setInterval?Ie.setInterval(we,me,...ge):setInterval(we,me,...ge)},clearInterval(we){const{delegate:me}=F;return(me?.clearInterval||clearInterval)(we)},delegate:void 0};var he=V(8737);class ue extends re{constructor(me,ge){super(me,ge),this.scheduler=me,this.work=ge,this.pending=!1}schedule(me,ge=0){if(this.closed)return this;this.state=me;const Ie=this.id,Q=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Q,Ie,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(Q,this.id,ge),this}requestAsyncId(me,ge,Ie=0){return F.setInterval(me.flush.bind(me,this),Ie)}recycleAsyncId(me,ge,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return ge;F.clearInterval(ge)}execute(me,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(me,ge);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ge){let Q,Ie=!1;try{this.work(me)}catch(q){Ie=!0,Q=q||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:me,scheduler:ge}=this,{actions:Ie}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(Ie,this),null!=me&&(this.id=this.recycleAsyncId(ge,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Se,V)=>{"use strict";V.d(Se,{v:()=>F});var f=V(6063);class re{constructor(ue,we=re.now){this.schedulerActionCtor=ue,this.now=we}schedule(ue,we=0,me){return new this.schedulerActionCtor(this,ue).schedule(me,we)}}re.now=f.l.now;class F extends re{constructor(ue,we=re.now){super(ue,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:we}=this;if(this._active)return void we.push(ue);let me;this._active=!0;do{if(me=ue.execute(ue.state,ue.delay))break}while(ue=we.shift());if(this._active=!1,me){for(;ue=we.shift();)ue.unsubscribe();throw me}}}},4986:(dt,Se,V)=>{"use strict";V.d(Se,{z:()=>F});var f=V(4408);const F=new(V(7565).v)(f.o)},6063:(dt,Se,V)=>{"use strict";V.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(dt,Se,V)=>{"use strict";V.d(Se,{z:()=>f});const f={setTimeout(re,F,...he){const{delegate:ue}=f;return ue?.setTimeout?ue.setTimeout(re,F,...he):setTimeout(re,F,...he)},clearTimeout(re){const{delegate:F}=f;return(F?.clearTimeout||clearTimeout)(re)},delegate:void 0}},2202:(dt,Se,V)=>{"use strict";V.d(Se,{h:()=>re});const re=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Se,V)=>{"use strict";V.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Se,V)=>{"use strict";V.d(Se,{_6:()=>we,jO:()=>he,yG:()=>ue});var f=V(576);function F(me){return me[me.length-1]}function he(me){return(0,f.m)(F(me))?me.pop():void 0}function ue(me){return function re(me){return me&&(0,f.m)(me.schedule)}(F(me))?me.pop():void 0}function we(me,ge){return"number"==typeof F(me)?me.pop():ge}},8737:(dt,Se,V)=>{"use strict";function f(re,F){if(re){const he=re.indexOf(F);0<=he&&re.splice(he,1)}}V.d(Se,{P:()=>f})},3888:(dt,Se,V)=>{"use strict";function f(re){const he=re(ue=>{Error.call(ue),ue.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}V.d(Se,{d:()=>f})},2806:(dt,Se,V)=>{"use strict";V.d(Se,{O:()=>he,x:()=>F});var f=V(2416);let re=null;function F(ue){if(f.v.useDeprecatedSynchronousErrorHandling){const we=!re;if(we&&(re={errorThrown:!1,error:null}),ue(),we){const{errorThrown:me,error:ge}=re;if(re=null,me)throw ge}}else ue()}function he(ue){f.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=ue)}},9672:(dt,Se,V)=>{"use strict";function f(re,F,he,ue=0,we=!1){const me=F.schedule(function(){he(),we?re.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(re.add(me),!we)return me}V.d(Se,{f:()=>f})},4671:(dt,Se,V)=>{"use strict";function f(re){return re}V.d(Se,{y:()=>f})},1144:(dt,Se,V)=>{"use strict";V.d(Se,{z:()=>f});const f=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(dt,Se,V)=>{"use strict";V.d(Se,{D:()=>re});var f=V(576);function re(F){return Symbol.asyncIterator&&(0,f.m)(F?.[Symbol.asyncIterator])}},576:(dt,Se,V)=>{"use strict";function f(re){return"function"==typeof re}V.d(Se,{m:()=>f})},3670:(dt,Se,V)=>{"use strict";V.d(Se,{c:()=>F});var f=V(8822),re=V(576);function F(he){return(0,re.m)(he[f.L])}},6495:(dt,Se,V)=>{"use strict";V.d(Se,{T:()=>F});var f=V(2202),re=V(576);function F(he){return(0,re.m)(he?.[f.h])}},8239:(dt,Se,V)=>{"use strict";V.d(Se,{t:()=>re});var f=V(576);function re(F){return(0,f.m)(F?.then)}},3260:(dt,Se,V)=>{"use strict";V.d(Se,{L:()=>he,Q:()=>F});var f=V(655),re=V(576);function F(ue){return(0,f.FC)(this,arguments,function*(){const me=ue.getReader();try{for(;;){const{value:ge,done:Ie}=yield(0,f.qq)(me.read());if(Ie)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ge)}}finally{me.releaseLock()}})}function he(ue){return(0,re.m)(ue?.getReader)}},4482:(dt,Se,V)=>{"use strict";V.d(Se,{e:()=>F});var f=V(576);function F(he){return ue=>{if(function re(he){return(0,f.m)(he?.lift)}(ue))return ue.lift(function(we){try{return he(we,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(dt,Se,V)=>{"use strict";function f(){}V.d(Se,{Z:()=>f})},7849:(dt,Se,V)=>{"use strict";V.d(Se,{h:()=>F});var f=V(2416),re=V(3410);function F(he){re.z.setTimeout(()=>{const{onUnhandledError:ue}=f.v;if(!ue)throw he;ue(he)})}},4532:(dt,Se,V)=>{"use strict";function f(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>f})},5226:function(dt){dt.exports=function(){"use strict";const Se="SweetAlert2:",f=I=>I.charAt(0).toUpperCase()+I.slice(1),re=I=>Array.prototype.slice.call(I),F=I=>{console.warn("".concat(Se," ").concat("object"==typeof I?I.join(" "):I))},he=I=>{console.error("".concat(Se," ").concat(I))},ue=[],me=(I,D)=>{(I=>{ue.includes(I)||(ue.push(I),F(I))})('"'.concat(I,'" is deprecated and will be removed in the next major release. Please use "').concat(D,'" instead.'))},ge=I=>"function"==typeof I?I():I,Ie=I=>I&&"function"==typeof I.toPromise,Q=I=>Ie(I)?I.toPromise():Promise.resolve(I),q=I=>I&&Promise.resolve(I)===I,ie={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},nt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Le={},Re=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ye=I=>Object.prototype.hasOwnProperty.call(ie,I),ve=I=>-1!==nt.indexOf(I),be=I=>Le[I],Je=I=>{Ye(I)||F('Unknown parameter "'.concat(I,'"'))},Xe=I=>{Re.includes(I)&&F('The parameter "'.concat(I,'" is incompatible with toasts'))},xe=I=>{be(I)&&me(I,be(I))},Ze=I=>{const D={};for(const k in I)D[I[k]]="swal2-"+I[k];return D},K=Ze(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),$=Ze(["success","warning","info","question","error"]),pe=()=>document.body.querySelector(".".concat(K.container)),Y=I=>{const D=pe();return D?D.querySelector(I):null},ae=I=>Y(".".concat(I)),ee=()=>ae(K.popup),ye=()=>ae(K.icon),ce=()=>ae(K.title),Fe=()=>ae(K["html-container"]),ht=()=>ae(K.image),Wt=()=>ae(K["progress-steps"]),Nt=()=>ae(K["validation-message"]),Ge=()=>Y(".".concat(K.actions," .").concat(K.confirm)),Ht=()=>Y(".".concat(K.actions," .").concat(K.deny)),Jt=()=>Y(".".concat(K.loader)),Vt=()=>Y(".".concat(K.actions," .").concat(K.cancel)),nr=()=>ae(K.actions),Yt=()=>ae(K.footer),Pt=()=>ae(K["timer-progress-bar"]),Qr=()=>ae(K.close),cr=()=>{const I=re(ee().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((k,G)=>{const Te=parseInt(k.getAttribute("tabindex")),Ke=parseInt(G.getAttribute("tabindex"));return Te>Ke?1:Te<Ke?-1:0}),D=re(ee().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(k=>"-1"!==k.getAttribute("tabindex"));return(I=>{const D=[];for(let k=0;k<I.length;k++)-1===D.indexOf(I[k])&&D.push(I[k]);return D})(I.concat(D)).filter(k=>nn(k))},_r=()=>st(document.body,K.shown)&&!st(document.body,K["toast-shown"])&&!st(document.body,K["no-backdrop"]),jr=()=>ee()&&st(ee(),K.toast),rr={previousBodyPadding:null},En=(I,D)=>{if(I.textContent="",D){const G=(new DOMParser).parseFromString(D,"text/html");re(G.querySelector("head").childNodes).forEach(Te=>{I.appendChild(Te)}),re(G.querySelector("body").childNodes).forEach(Te=>{I.appendChild(Te)})}},st=(I,D)=>{if(!D)return!1;const k=D.split(/\s+/);for(let G=0;G<k.length;G++)if(!I.classList.contains(k[G]))return!1;return!0},Xt=(I,D,k)=>{if(((I,D)=>{re(I.classList).forEach(k=>{!Object.values(K).includes(k)&&!Object.values($).includes(k)&&!Object.values(D.showClass).includes(k)&&I.classList.remove(k)})})(I,D),D.customClass&&D.customClass[k]){if("string"!=typeof D.customClass[k]&&!D.customClass[k].forEach)return F("Invalid type of customClass.".concat(k,'! Expected string or iterable object, got "').concat(typeof D.customClass[k],'"'));mt(I,D.customClass[k])}},In=(I,D)=>{if(!D)return null;switch(D){case"select":case"textarea":case"file":return I.querySelector(".".concat(K.popup," > .").concat(K[D]));case"checkbox":return I.querySelector(".".concat(K.popup," > .").concat(K.checkbox," input"));case"radio":return I.querySelector(".".concat(K.popup," > .").concat(K.radio," input:checked"))||I.querySelector(".".concat(K.popup," > .").concat(K.radio," input:first-child"));case"range":return I.querySelector(".".concat(K.popup," > .").concat(K.range," input"));default:return I.querySelector(".".concat(K.popup," > .").concat(K.input))}},Ui=I=>{if(I.focus(),"file"!==I.type){const D=I.value;I.value="",I.value=D}},Nr=(I,D,k)=>{!I||!D||("string"==typeof D&&(D=D.split(/\s+/).filter(Boolean)),D.forEach(G=>{Array.isArray(I)?I.forEach(Te=>{k?Te.classList.add(G):Te.classList.remove(G)}):k?I.classList.add(G):I.classList.remove(G)}))},mt=(I,D)=>{Nr(I,D,!0)},sn=(I,D)=>{Nr(I,D,!1)},Zn=(I,D)=>{const k=re(I.childNodes);for(let G=0;G<k.length;G++)if(st(k[G],D))return k[G]},ei=(I,D,k)=>{k==="".concat(parseInt(k))&&(k=parseInt(k)),k||0===parseInt(k)?I.style[D]="number"==typeof k?"".concat(k,"px"):k:I.style.removeProperty(D)},yt=function(I){I.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Ve=I=>{I.style.display="none"},_t=(I,D,k,G)=>{const Te=I.querySelector(D);Te&&(Te.style[k]=G)},dr=function(I,D){D?yt(I,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ve(I)},nn=I=>!(!I||!(I.offsetWidth||I.offsetHeight||I.getClientRects().length)),Gr=I=>I.scrollHeight>I.clientHeight,ir=I=>{const D=window.getComputedStyle(I),k=parseFloat(D.getPropertyValue("animation-duration")||"0"),G=parseFloat(D.getPropertyValue("transition-duration")||"0");return k>0||G>0},Pr=function(I){let D=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const k=Pt();nn(k)&&(D&&(k.style.transition="none",k.style.width="100%"),setTimeout(()=>{k.style.transition="width ".concat(I/1e3,"s linear"),k.style.width="0%"},10))},X=()=>typeof window>"u"||typeof document>"u",Z={},j=I=>new Promise(D=>{if(!I)return D();const k=window.scrollX,G=window.scrollY;Z.restoreFocusTimeout=setTimeout(()=>{Z.previousActiveElement instanceof HTMLElement?(Z.previousActiveElement.focus(),Z.previousActiveElement=null):document.body&&document.body.focus(),D()},100),window.scrollTo(k,G)}),Ee='\n <div aria-labelledby="'.concat(K.title,'" aria-describedby="').concat(K["html-container"],'" class="').concat(K.popup,'" tabindex="-1">\n   <button type="button" class="').concat(K.close,'"></button>\n   <ul class="').concat(K["progress-steps"],'"></ul>\n   <div class="').concat(K.icon,'"></div>\n   <img class="').concat(K.image,'" />\n   <h2 class="').concat(K.title,'" id="').concat(K.title,'"></h2>\n   <div class="').concat(K["html-container"],'" id="').concat(K["html-container"],'"></div>\n   <input class="').concat(K.input,'" />\n   <input type="file" class="').concat(K.file,'" />\n   <div class="').concat(K.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(K.select,'"></select>\n   <div class="').concat(K.radio,'"></div>\n   <label for="').concat(K.checkbox,'" class="').concat(K.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(K.label,'"></span>\n   </label>\n   <textarea class="').concat(K.textarea,'"></textarea>\n   <div class="').concat(K["validation-message"],'" id="').concat(K["validation-message"],'"></div>\n   <div class="').concat(K.actions,'">\n     <div class="').concat(K.loader,'"></div>\n     <button type="button" class="').concat(K.confirm,'"></button>\n     <button type="button" class="').concat(K.deny,'"></button>\n     <button type="button" class="').concat(K.cancel,'"></button>\n   </div>\n   <div class="').concat(K.footer,'"></div>\n   <div class="').concat(K["timer-progress-bar-container"],'">\n     <div class="').concat(K["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),tt=()=>{Z.currentInstance.resetValidationMessage()},or=I=>{const D=(()=>{const I=pe();return!!I&&(I.remove(),sn([document.documentElement,document.body],[K["no-backdrop"],K["toast-shown"],K["has-column"]]),!0)})();if(X())return void he("SweetAlert2 requires document to initialize");const k=document.createElement("div");k.className=K.container,D&&mt(k,K["no-transition"]),En(k,Ee);const G=(I=>"string"==typeof I?document.querySelector(I):I)(I.target);G.appendChild(k),(I=>{const D=ee();D.setAttribute("role",I.toast?"alert":"dialog"),D.setAttribute("aria-live",I.toast?"polite":"assertive"),I.toast||D.setAttribute("aria-modal","true")})(I),(I=>{"rtl"===window.getComputedStyle(I).direction&&mt(pe(),K.rtl)})(G),(()=>{const I=ee(),D=Zn(I,K.input),k=Zn(I,K.file),G=I.querySelector(".".concat(K.range," input")),Te=I.querySelector(".".concat(K.range," output")),Ke=Zn(I,K.select),en=I.querySelector(".".concat(K.checkbox," input")),Ut=Zn(I,K.textarea);D.oninput=tt,k.onchange=tt,Ke.onchange=tt,en.onchange=tt,Ut.oninput=tt,G.oninput=()=>{tt(),Te.value=G.value},G.onchange=()=>{tt(),Te.value=G.value}})()},$t=(I,D)=>{I instanceof HTMLElement?D.appendChild(I):"object"==typeof I?Gn(I,D):I&&En(D,I)},Gn=(I,D)=>{I.jquery?hr(D,I):En(D,I.toString())},hr=(I,D)=>{if(I.textContent="",0 in D)for(let k=0;k in D;k++)I.appendChild(D[k].cloneNode(!0));else I.appendChild(D.cloneNode(!0))},Hn=(()=>{if(X())return!1;const I=document.createElement("div"),D={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const k in D)if(Object.prototype.hasOwnProperty.call(D,k)&&typeof I.style[k]<"u")return D[k];return!1})(),We=(I,D)=>{const k=nr(),G=Jt();D.showConfirmButton||D.showDenyButton||D.showCancelButton?yt(k):Ve(k),Xt(k,D,"actions"),function Ct(I,D,k){const G=Ge(),Te=Ht(),Ke=Vt();Cn(G,"confirm",k),Cn(Te,"deny",k),Cn(Ke,"cancel",k),function rn(I,D,k,G){if(!G.buttonsStyling)return sn([I,D,k],K.styled);mt([I,D,k],K.styled),G.confirmButtonColor&&(I.style.backgroundColor=G.confirmButtonColor,mt(I,K["default-outline"])),G.denyButtonColor&&(D.style.backgroundColor=G.denyButtonColor,mt(D,K["default-outline"])),G.cancelButtonColor&&(k.style.backgroundColor=G.cancelButtonColor,mt(k,K["default-outline"]))}(G,Te,Ke,k),k.reverseButtons&&(k.toast?(I.insertBefore(Ke,G),I.insertBefore(Te,G)):(I.insertBefore(Ke,D),I.insertBefore(Te,D),I.insertBefore(G,D)))}(k,G,D),En(G,D.loaderHtml),Xt(G,D,"loader")};function Cn(I,D,k){dr(I,k["show".concat(f(D),"Button")],"inline-block"),En(I,k["".concat(D,"ButtonText")]),I.setAttribute("aria-label",k["".concat(D,"ButtonAriaLabel")]),I.className=K[D],Xt(I,k,"".concat(D,"Button")),mt(I,k["".concat(D,"ButtonClass")])}const os=(I,D)=>{const k=pe();!k||(function $n(I,D){"string"==typeof D?I.style.background=D:D||mt([document.documentElement,document.body],K["no-backdrop"])}(k,D.backdrop),function ro(I,D){D in K?mt(I,K[D]):(F('The "position" parameter is not valid, defaulting to "center"'),mt(I,K.center))}(k,D.position),function Dn(I,D){if(D&&"string"==typeof D){const k="grow-".concat(D);k in K&&mt(I,K[k])}}(k,D.grow),Xt(k,D,"container"))};var Dt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const gi=["input","file","range","select","radio","checkbox","textarea"],Pa=I=>{if(!vn[I.input])return he('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(I.input,'"'));const D=Di(I.input),k=vn[I.input](D,I);yt(D),setTimeout(()=>{Ui(k)})},ss=(I,D)=>{const k=In(ee(),I);if(k){(I=>{for(let D=0;D<I.attributes.length;D++){const k=I.attributes[D].name;["type","value","style"].includes(k)||I.removeAttribute(k)}})(k);for(const G in D)k.setAttribute(G,D[G])}},Ao=I=>{const D=Di(I.input);"object"==typeof I.customClass&&mt(D,I.customClass.input)},Vn=(I,D)=>{(!I.placeholder||D.inputPlaceholder)&&(I.placeholder=D.inputPlaceholder)},Ci=(I,D,k)=>{if(k.inputLabel){I.id=K.input;const G=document.createElement("label"),Te=K["input-label"];G.setAttribute("for",I.id),G.className=Te,"object"==typeof k.customClass&&mt(G,k.customClass.inputLabel),G.innerText=k.inputLabel,D.insertAdjacentElement("beforebegin",G)}},Di=I=>Zn(ee(),K[I]||K.input),pr=(I,D)=>{["string","number"].includes(typeof D)?I.value="".concat(D):q(D)||F('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof D,'"'))},vn={};vn.text=vn.email=vn.password=vn.number=vn.tel=vn.url=(I,D)=>(pr(I,D.inputValue),Ci(I,I,D),Vn(I,D),I.type=D.input,I),vn.file=(I,D)=>(Ci(I,I,D),Vn(I,D),I),vn.range=(I,D)=>{const k=I.querySelector("input"),G=I.querySelector("output");return pr(k,D.inputValue),k.type=D.input,pr(G,D.inputValue),Ci(k,I,D),I},vn.select=(I,D)=>{if(I.textContent="",D.inputPlaceholder){const k=document.createElement("option");En(k,D.inputPlaceholder),k.value="",k.disabled=!0,k.selected=!0,I.appendChild(k)}return Ci(I,I,D),I},vn.radio=I=>(I.textContent="",I),vn.checkbox=(I,D)=>{const k=In(ee(),"checkbox");k.value="1",k.id=K.checkbox,k.checked=Boolean(D.inputValue);const G=I.querySelector("span");return En(G,D.inputPlaceholder),k},vn.textarea=(I,D)=>{pr(I,D.inputValue),Vn(I,D),Ci(I,I,D);return setTimeout(()=>{if("MutationObserver"in window){const G=parseInt(window.getComputedStyle(ee()).width);new MutationObserver(()=>{const Ke=I.offsetWidth+(G=>parseInt(window.getComputedStyle(G).marginLeft)+parseInt(window.getComputedStyle(G).marginRight))(I);ee().style.width=Ke>G?"".concat(Ke,"px"):null}).observe(I,{attributes:!0,attributeFilter:["style"]})}}),I};const vr=(I,D)=>{const k=Fe();Xt(k,D,"htmlContainer"),D.html?($t(D.html,k),yt(k,"block")):D.text?(k.textContent=D.text,yt(k,"block")):Ve(k),((I,D)=>{const k=ee(),G=Dt.innerParams.get(I),Te=!G||D.input!==G.input;gi.forEach(Ke=>{const en=Zn(k,K[Ke]);ss(Ke,D.inputAttributes),en.className=K[Ke],Te&&Ve(en)}),D.input&&(Te&&Pa(D),Ao(D))})(I,D)},as=(I,D)=>{for(const k in $)D.icon!==k&&sn(I,$[k]);mt(I,$[D.icon]),Bn(I,D),ls(),Xt(I,D,"icon")},ls=()=>{const I=ee(),D=window.getComputedStyle(I).getPropertyValue("background-color"),k=I.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let G=0;G<k.length;G++)k[G].style.backgroundColor=D},Hr=(I,D)=>{let G,k=I.innerHTML;D.iconHtml?G=tu(D.iconHtml):"success"===D.icon?(G='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',k=k.replace(/ style=".*?"/g,"")):G="error"===D.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':tu({question:"?",warning:"!",info:"i"}[D.icon]),k.trim()!==G.trim()&&En(I,G)},Bn=(I,D)=>{if(D.iconColor){I.style.color=D.iconColor,I.style.borderColor=D.iconColor;for(const k of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])_t(I,k,"backgroundColor",D.iconColor);_t(I,".swal2-success-ring","borderColor",D.iconColor)}},tu=I=>'<div class="'.concat(K["icon-content"],'">').concat(I,"</div>"),js=I=>{const D=document.createElement("li");return mt(D,K["progress-step"]),En(D,I),D},Gs=I=>{const D=document.createElement("li");return mt(D,K["progress-step-line"]),I.progressStepsDistance&&ei(D,"width",I.progressStepsDistance),D},us=(I,D)=>{I.className="".concat(K.popup," ").concat(nn(I)?D.showClass.popup:""),D.toast?(mt([document.documentElement,document.body],K["toast-shown"]),mt(I,K.toast)):mt(I,K.modal),Xt(I,D,"popup"),"string"==typeof D.customClass&&mt(I,D.customClass),D.icon&&mt(I,K["icon-".concat(D.icon)])},Wh=(I,D)=>{((I,D)=>{const k=pe(),G=ee();D.toast?(ei(k,"width",D.width),G.style.width="100%",G.insertBefore(Jt(),ye())):ei(G,"width",D.width),ei(G,"padding",D.padding),D.color&&(G.style.color=D.color),D.background&&(G.style.background=D.background),Ve(Nt()),us(G,D)})(0,D),os(0,D),((I,D)=>{const k=Wt();if(!D.progressSteps||0===D.progressSteps.length)return Ve(k);yt(k),k.textContent="",D.currentProgressStep>=D.progressSteps.length&&F("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),D.progressSteps.forEach((G,Te)=>{const Ke=js(G);if(k.appendChild(Ke),Te===D.currentProgressStep&&mt(Ke,K["active-progress-step"]),Te!==D.progressSteps.length-1){const en=Gs(D);k.appendChild(en)}})})(0,D),((I,D)=>{const k=Dt.innerParams.get(I),G=ye();k&&D.icon===k.icon?(Hr(G,D),as(G,D)):D.icon||D.iconHtml?D.icon&&-1===Object.keys($).indexOf(D.icon)?(he('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(D.icon,'"')),Ve(G)):(yt(G),Hr(G,D),as(G,D),mt(G,D.showClass.icon)):Ve(G)})(I,D),((I,D)=>{const k=ht();if(!D.imageUrl)return Ve(k);yt(k,""),k.setAttribute("src",D.imageUrl),k.setAttribute("alt",D.imageAlt),ei(k,"width",D.imageWidth),ei(k,"height",D.imageHeight),k.className=K.image,Xt(k,D,"image")})(0,D),((I,D)=>{const k=ce();dr(k,D.title||D.titleText,"block"),D.title&&$t(D.title,k),D.titleText&&(k.innerText=D.titleText),Xt(k,D,"title")})(0,D),((I,D)=>{const k=Qr();En(k,D.closeButtonHtml),Xt(k,D,"closeButton"),dr(k,D.showCloseButton),k.setAttribute("aria-label",D.closeButtonAriaLabel)})(0,D),vr(I,D),We(0,D),((I,D)=>{const k=Yt();dr(k,D.footer),D.footer&&$t(D.footer,k),Xt(k,D,"footer")})(0,D),"function"==typeof D.didRender&&D.didRender(ee())},ji=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),_l=()=>{re(document.body.children).forEach(D=>{D.hasAttribute("data-previous-aria-hidden")?(D.setAttribute("aria-hidden",D.getAttribute("data-previous-aria-hidden")),D.removeAttribute("data-previous-aria-hidden")):D.removeAttribute("aria-hidden")})},Hs=["swal-title","swal-html","swal-footer"],ti=I=>{const D={};return re(I.querySelectorAll("swal-param")).forEach(k=>{cs(k,["name","value"]);const G=k.getAttribute("name"),Te=k.getAttribute("value");"boolean"==typeof ie[G]&&"false"===Te&&(D[G]=!1),"object"==typeof ie[G]&&(D[G]=JSON.parse(Te))}),D},ed=I=>{const D={};return re(I.querySelectorAll("swal-button")).forEach(k=>{cs(k,["type","color","aria-label"]);const G=k.getAttribute("type");D["".concat(G,"ButtonText")]=k.innerHTML,D["show".concat(f(G),"Button")]=!0,k.hasAttribute("color")&&(D["".concat(G,"ButtonColor")]=k.getAttribute("color")),k.hasAttribute("aria-label")&&(D["".concat(G,"ButtonAriaLabel")]=k.getAttribute("aria-label"))}),D},Gi=I=>{const D={},k=I.querySelector("swal-image");return k&&(cs(k,["src","width","height","alt"]),k.hasAttribute("src")&&(D.imageUrl=k.getAttribute("src")),k.hasAttribute("width")&&(D.imageWidth=k.getAttribute("width")),k.hasAttribute("height")&&(D.imageHeight=k.getAttribute("height")),k.hasAttribute("alt")&&(D.imageAlt=k.getAttribute("alt"))),D},td=I=>{const D={},k=I.querySelector("swal-icon");return k&&(cs(k,["type","color"]),k.hasAttribute("type")&&(D.icon=k.getAttribute("type")),k.hasAttribute("color")&&(D.iconColor=k.getAttribute("color")),D.iconHtml=k.innerHTML),D},nu=I=>{const D={},k=I.querySelector("swal-input");k&&(cs(k,["type","label","placeholder","value"]),D.input=k.getAttribute("type")||"text",k.hasAttribute("label")&&(D.inputLabel=k.getAttribute("label")),k.hasAttribute("placeholder")&&(D.inputPlaceholder=k.getAttribute("placeholder")),k.hasAttribute("value")&&(D.inputValue=k.getAttribute("value")));const G=I.querySelectorAll("swal-input-option");return G.length&&(D.inputOptions={},re(G).forEach(Te=>{cs(Te,["value"]);const Ke=Te.getAttribute("value");D.inputOptions[Ke]=Te.innerHTML})),D},Ra=(I,D)=>{const k={};for(const G in D){const Te=D[G],Ke=I.querySelector(Te);Ke&&(cs(Ke,[]),k[Te.replace(/^swal-/,"")]=Ke.innerHTML.trim())}return k},oo=I=>{const D=Hs.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);re(I.children).forEach(k=>{const G=k.tagName.toLowerCase();-1===D.indexOf(G)&&F("Unrecognized element <".concat(G,">"))})},cs=(I,D)=>{re(I.attributes).forEach(k=>{-1===D.indexOf(k.name)&&F(['Unrecognized attribute "'.concat(k.name,'" on <').concat(I.tagName.toLowerCase(),">."),"".concat(D.length?"Allowed attributes are: ".concat(D.join(", ")):"To set the value, use HTML within the element.")])})};var vl={email:(I,D)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(I)?Promise.resolve():Promise.resolve(D||"Invalid email address"),url:(I,D)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(I)?Promise.resolve():Promise.resolve(D||"Invalid URL")};function Oa(I){(function nd(I){I.inputValidator||Object.keys(vl).forEach(D=>{I.input===D&&(I.inputValidator=vl[D])})})(I),I.showLoaderOnConfirm&&!I.preConfirm&&F("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function rd(I){(!I.target||"string"==typeof I.target&&!document.querySelector(I.target)||"string"!=typeof I.target&&!I.target.appendChild)&&(F('Target parameter is not valid, defaulting to "body"'),I.target="body")}(I),"string"==typeof I.title&&(I.title=I.title.split("\n").join("<br />")),or(I)}class Hi{constructor(D,k){this.callback=D,this.remaining=k,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(D){const k=this.running;return k&&this.stop(),this.remaining+=D,k&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Kh=()=>{null===rr.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(rr.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(rr.previousBodyPadding+(()=>{const I=document.createElement("div");I.className=K["scrollbar-measure"],document.body.appendChild(I);const D=I.getBoundingClientRect().width-I.clientWidth;return document.body.removeChild(I),D})(),"px"))},so=()=>{const I=navigator.userAgent,D=!!I.match(/iPad/i)||!!I.match(/iPhone/i),k=!!I.match(/WebKit/i);D&&k&&!I.match(/CriOS/i)&&ee().scrollHeight>window.innerHeight-44&&(pe().style.paddingBottom="".concat(44,"px"))},bl=()=>{const I=pe();let D;I.ontouchstart=k=>{D=ni(k)},I.ontouchmove=k=>{D&&(k.preventDefault(),k.stopPropagation())}},ni=I=>{const D=I.target,k=pe();return!(ao(I)||ds(I)||D!==k&&(Gr(k)||"INPUT"===D.tagName||"TEXTAREA"===D.tagName||Gr(Fe())&&Fe().contains(D)))},ao=I=>I.touches&&I.touches.length&&"stylus"===I.touches[0].touchType,ds=I=>I.touches&&I.touches.length>1,$s=I=>{const D=pe(),k=ee();"function"==typeof I.willOpen&&I.willOpen(k);const Te=window.getComputedStyle(document.body).overflowY;An(D,k,I),setTimeout(()=>{ps(D,k)},10),_r()&&(fs(D,I.scrollbarPadding,Te),re(document.body.children).forEach(D=>{D===pe()||D.contains(pe())||(D.hasAttribute("aria-hidden")&&D.setAttribute("data-previous-aria-hidden",D.getAttribute("aria-hidden")),D.setAttribute("aria-hidden","true"))})),!jr()&&!Z.previousActiveElement&&(Z.previousActiveElement=document.activeElement),"function"==typeof I.didOpen&&setTimeout(()=>I.didOpen(k)),sn(D,K["no-transition"])},iu=I=>{const D=ee();if(I.target!==D)return;const k=pe();D.removeEventListener(Hn,iu),k.style.overflowY="auto"},ps=(I,D)=>{Hn&&ir(D)?(I.style.overflowY="hidden",D.addEventListener(Hn,iu)):I.style.overflowY="auto"},fs=(I,D,k)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!st(document.body,K.iosfix)){const D=document.body.scrollTop;document.body.style.top="".concat(-1*D,"px"),mt(document.body,K.iosfix),bl(),so()}})(),D&&"hidden"!==k&&Kh(),setTimeout(()=>{I.scrollTop=0})},An=(I,D,k)=>{mt(I,k.showClass.backdrop),D.style.setProperty("opacity","0","important"),yt(D,"grid"),setTimeout(()=>{mt(D,k.showClass.popup),D.style.removeProperty("opacity")},10),mt([document.documentElement,document.body],K.shown),k.heightAuto&&k.backdrop&&!k.toast&&mt([document.documentElement,document.body],K["height-auto"])},$i=I=>{let D=ee();D||new Wr,D=ee();const k=Jt();jr()?Ve(ye()):La(D,I),yt(k),D.setAttribute("data-loading","true"),D.setAttribute("aria-busy","true"),D.focus()},La=(I,D)=>{const k=nr(),G=Jt();!D&&nn(Ge())&&(D=Ge()),yt(k),D&&(Ve(D),G.setAttribute("data-button-to-replace",D.className)),G.parentNode.insertBefore(G,D),mt([I,k],K.loading)},El=I=>I.checked?1:0,Va=I=>I.checked?I.value:null,ou=I=>I.files.length?null!==I.getAttribute("multiple")?I.files:I.files[0]:null,qs=(I,D)=>{const k=ee(),G=Te=>cn[D.input](k,Mo(Te),D);Ie(D.inputOptions)||q(D.inputOptions)?($i(Ge()),Q(D.inputOptions).then(Te=>{I.hideLoading(),G(Te)})):"object"==typeof D.inputOptions?G(D.inputOptions):he("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof D.inputOptions))},id=(I,D)=>{const k=I.getInput();Ve(k),Q(D.inputValue).then(G=>{k.value="number"===D.input?parseFloat(G)||0:"".concat(G),yt(k),k.focus(),I.hideLoading()}).catch(G=>{he("Error in inputValue promise: ".concat(G)),k.value="",yt(k),k.focus(),I.hideLoading()})},cn={select:(I,D,k)=>{const G=Zn(I,K.select),Te=(Ke,en,Ut)=>{const fr=document.createElement("option");fr.value=Ut,En(fr,en),fr.selected=gs(Ut,k.inputValue),Ke.appendChild(fr)};D.forEach(Ke=>{const en=Ke[0],Ut=Ke[1];if(Array.isArray(Ut)){const fr=document.createElement("optgroup");fr.label=en,fr.disabled=!1,G.appendChild(fr),Ut.forEach(Fr=>Te(fr,Fr[1],Fr[0]))}else Te(G,Ut,en)}),G.focus()},radio:(I,D,k)=>{const G=Zn(I,K.radio);D.forEach(Ke=>{const en=Ke[0],Ut=Ke[1],fr=document.createElement("input"),Fr=document.createElement("label");fr.type="radio",fr.name=K.radio,fr.value=en,gs(en,k.inputValue)&&(fr.checked=!0);const Lo=document.createElement("span");En(Lo,Ut),Lo.className=K.label,Fr.appendChild(fr),Fr.appendChild(Lo),G.appendChild(Fr)});const Te=G.querySelectorAll("input");Te.length&&Te[0].focus()}},Mo=I=>{const D=[];return typeof Map<"u"&&I instanceof Map?I.forEach((k,G)=>{let Te=k;"object"==typeof Te&&(Te=Mo(Te)),D.push([G,Te])}):Object.keys(I).forEach(k=>{let G=I[k];"object"==typeof G&&(G=Mo(G)),D.push([k,G])}),D},gs=(I,D)=>D&&D.toString()===I.toString();function Ws(){const I=Dt.innerParams.get(this);if(!I)return;const D=Dt.domCache.get(this);Ve(D.loader),jr()?I.icon&&yt(ye()):Ks(D),sn([D.popup,D.actions],K.loading),D.popup.removeAttribute("aria-busy"),D.popup.removeAttribute("data-loading"),D.confirmButton.disabled=!1,D.denyButton.disabled=!1,D.cancelButton.disabled=!1}const Ks=I=>{const D=I.popup.getElementsByClassName(I.loader.getAttribute("data-button-to-replace"));D.length?yt(D[0],"inline-block"):!nn(Ge())&&!nn(Ht())&&!nn(Vt())&&Ve(I.actions)};var mi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const zi=()=>Ge()&&Ge().click(),Tn=I=>{I.keydownTarget&&I.keydownHandlerAdded&&(I.keydownTarget.removeEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!1)},ar=(I,D,k)=>{const G=cr();if(G.length)return(D+=k)===G.length?D=0:-1===D&&(D=G.length-1),G[D].focus();ee().focus()},Ys=["ArrowRight","ArrowDown"],ms=["ArrowLeft","ArrowUp"],xo=(I,D,k)=>{const G=Dt.innerParams.get(I);!G||D.isComposing||229===D.keyCode||(G.stopKeydownPropagation&&D.stopPropagation(),"Enter"===D.key?zr(I,D,G):"Tab"===D.key?ko(D,G):[...Ys,...ms].includes(D.key)?ys(D.key):"Escape"===D.key&&ft(D,G,k))},zr=(I,D,k)=>{if(ge(k.allowEnterKey)&&D.target&&I.getInput()&&D.target instanceof HTMLElement&&D.target.outerHTML===I.getInput().outerHTML){if(["textarea","file"].includes(k.input))return;zi(),D.preventDefault()}},ko=(I,D)=>{const k=I.target,G=cr();let Te=-1;for(let Ke=0;Ke<G.length;Ke++)if(k===G[Ke]){Te=Ke;break}ar(0,Te,I.shiftKey?-1:1),I.stopPropagation(),I.preventDefault()},ys=I=>{const D=Ge(),k=Ht(),G=Vt();if(document.activeElement instanceof HTMLElement&&![D,k,G].includes(document.activeElement))return;const Te=Ys.includes(I)?"nextElementSibling":"previousElementSibling";let Ke=document.activeElement;for(let en=0;en<nr().children.length;en++){if(Ke=Ke[Te],!Ke)return;if(Ke instanceof HTMLButtonElement&&nn(Ke))break}Ke instanceof HTMLButtonElement&&Ke.focus()},ft=(I,D,k)=>{ge(D.allowEscapeKey)&&(I.preventDefault(),k(ji.esc))};function uo(I,D,k,G){jr()?_s(I,G):(j(k).then(()=>_s(I,G)),Tn(Z)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(D.setAttribute("style","display:none !important"),D.removeAttribute("class"),D.innerHTML=""):D.remove(),_r()&&(null!==rr.previousBodyPadding&&(document.body.style.paddingRight="".concat(rr.previousBodyPadding,"px"),rr.previousBodyPadding=null),(()=>{if(st(document.body,K.iosfix)){const I=parseInt(document.body.style.top,10);sn(document.body,K.iosfix),document.body.style.top="",document.body.scrollTop=-1*I}})(),_l()),function Ba(){sn([document.documentElement,document.body],[K.shown,K["height-auto"],K["no-backdrop"],K["toast-shown"]])}()}function qi(I){I=Cl(I);const D=mi.swalPromiseResolve.get(this),k=Qs(this);this.isAwaitingPromise()?I.isDismissed||(No(this),D(I)):k&&D(I)}const Qs=I=>{const D=ee();if(!D)return!1;const k=Dt.innerParams.get(I);if(!k||st(D,k.hideClass.popup))return!1;sn(D,k.showClass.popup),mt(D,k.hideClass.popup);const G=pe();return sn(G,k.showClass.backdrop),mt(G,k.hideClass.backdrop),ke(I,D,k),!0};const No=I=>{I.isAwaitingPromise()&&(Dt.awaitingPromise.delete(I),Dt.innerParams.get(I)||I._destroy())},Cl=I=>typeof I>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},I),ke=(I,D,k)=>{const G=pe(),Te=Hn&&ir(D);"function"==typeof k.willClose&&k.willClose(D),Te?Mt(I,D,G,k.returnFocus,k.didClose):uo(I,G,k.returnFocus,k.didClose)},Mt=(I,D,k,G,Te)=>{Z.swalCloseEventFinishedCallback=uo.bind(null,I,k,G,Te),D.addEventListener(Hn,function(Ke){Ke.target===D&&(Z.swalCloseEventFinishedCallback(),delete Z.swalCloseEventFinishedCallback)})},_s=(I,D)=>{setTimeout(()=>{"function"==typeof D&&D.bind(I.params)(),I._destroy()})};function Ga(I,D,k){const G=Dt.domCache.get(I);D.forEach(Te=>{G[Te].disabled=k})}function Sn(I,D){if(!I)return!1;if("radio"===I.type){const G=I.parentNode.parentNode.querySelectorAll("input");for(let Te=0;Te<G.length;Te++)G[Te].disabled=D}else I.disabled=D}const $a=I=>{const D={};return Object.keys(I).forEach(k=>{ve(k)?D[k]=I[k]:F("Invalid parameter to update: ".concat(k))}),D};const ii=I=>{ta(I),delete I.params,delete Z.keydownHandler,delete Z.keydownTarget,delete Z.currentInstance},ta=I=>{I.isAwaitingPromise()?(Ti(Dt,I),Dt.awaitingPromise.set(I,!0)):(Ti(mi,I),Ti(Dt,I))},Ti=(I,D)=>{for(const k in I)I[k].delete(D)};var oi=Object.freeze({hideLoading:Ws,disableLoading:Ws,getInput:function bn(I){const D=Dt.innerParams.get(I||this),k=Dt.domCache.get(I||this);return k?In(k.popup,D.input):null},close:qi,isAwaitingPromise:function Ua(){return!!Dt.awaitingPromise.get(this)},rejectPromise:function ja(I){const D=mi.swalPromiseReject.get(this);No(this),D&&D(I)},handleAwaitingPromise:No,closePopup:qi,closeModal:qi,closeToast:qi,enableButtons:function Js(){Ga(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Po(){Ga(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function yi(){return Sn(this.getInput(),!1)},disableInput:function Ha(){return Sn(this.getInput(),!0)},showValidationMessage:function Xs(I){const D=Dt.domCache.get(this),k=Dt.innerParams.get(this);En(D.validationMessage,I),D.validationMessage.className=K["validation-message"],k.customClass&&k.customClass.validationMessage&&mt(D.validationMessage,k.customClass.validationMessage),yt(D.validationMessage);const G=this.getInput();G&&(G.setAttribute("aria-invalid",!0),G.setAttribute("aria-describedby",K["validation-message"]),Ui(G),mt(G,K.inputerror))},resetValidationMessage:function Zu(){const I=Dt.domCache.get(this);I.validationMessage&&Ve(I.validationMessage);const D=this.getInput();D&&(D.removeAttribute("aria-invalid"),D.removeAttribute("aria-describedby"),sn(D,K.inputerror))},getProgressSteps:function Yu(){return Dt.domCache.get(this).progressSteps},update:function ea(I){const D=ee(),k=Dt.innerParams.get(this);if(!D||st(D,k.hideClass.popup))return F("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const G=$a(I),Te=Object.assign({},k,G);Wh(this,Te),Dt.innerParams.set(this,Te),Object.defineProperties(this,{params:{value:Object.assign({},this.params,I),writable:!1,enumerable:!0}})},_destroy:function lr(){const I=Dt.domCache.get(this),D=Dt.innerParams.get(this);D?(I.popup&&Z.swalCloseEventFinishedCallback&&(Z.swalCloseEventFinishedCallback(),delete Z.swalCloseEventFinishedCallback),"function"==typeof D.didDestroy&&D.didDestroy(),ii(this)):ta(this)}});const qa=(I,D)=>{const k=Dt.innerParams.get(I);if(!k.input)return he('The "input" parameter is needed to be set when using returnInputValueOn'.concat(f(D)));const G=((I,D)=>{const k=I.getInput();if(!k)return null;switch(D.input){case"checkbox":return El(k);case"radio":return Va(k);case"file":return ou(k);default:return D.inputAutoTrim?k.value.trim():k.value}})(I,k);k.inputValidator?ra(I,G,D):I.getInput().checkValidity()?"deny"===D?Ro(I,G):bs(I,G):(I.enableButtons(),I.showValidationMessage(k.validationMessage))},ra=(I,D,k)=>{const G=Dt.innerParams.get(I);I.disableInput(),Promise.resolve().then(()=>Q(G.inputValidator(D,G.validationMessage))).then(Ke=>{I.enableButtons(),I.enableInput(),Ke?I.showValidationMessage(Ke):"deny"===k?Ro(I,D):bs(I,D)})},Ro=(I,D)=>{const k=Dt.innerParams.get(I||void 0);k.showLoaderOnDeny&&$i(Ht()),k.preDeny?(Dt.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>Q(k.preDeny(D,k.validationMessage))).then(Te=>{!1===Te?(I.hideLoading(),No(I)):I.closePopup({isDenied:!0,value:typeof Te>"u"?D:Te})}).catch(Te=>vs(I||void 0,Te))):I.closePopup({isDenied:!0,value:D})},Wa=(I,D)=>{I.closePopup({isConfirmed:!0,value:D})},vs=(I,D)=>{I.rejectPromise(D)},bs=(I,D)=>{const k=Dt.innerParams.get(I||void 0);k.showLoaderOnConfirm&&$i(),k.preConfirm?(I.resetValidationMessage(),Dt.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>Q(k.preConfirm(D,k.validationMessage))).then(Te=>{nn(Nt())||!1===Te?(I.hideLoading(),No(I)):Wa(I,typeof Te>"u"?D:Te)}).catch(Te=>vs(I||void 0,Te))):Wa(I,D)},ia=(I,D,k)=>{D.popup.onclick=()=>{const G=Dt.innerParams.get(I);G&&(Oo(G)||G.timer||G.input)||k(ji.close)}},Oo=I=>I.showConfirmButton||I.showDenyButton||I.showCancelButton||I.showCloseButton;let oa=!1;const Dl=I=>{I.popup.onmousedown=()=>{I.container.onmouseup=function(D){I.container.onmouseup=void 0,D.target===I.container&&(oa=!0)}}},Al=I=>{I.container.onmousedown=()=>{I.popup.onmouseup=function(D){I.popup.onmouseup=void 0,(D.target===I.popup||I.popup.contains(D.target))&&(oa=!0)}}},Tl=(I,D,k)=>{D.container.onclick=G=>{const Te=Dt.innerParams.get(I);oa?oa=!1:G.target===D.container&&ge(Te.allowOutsideClick)&&k(ji.backdrop)}},au=I=>I instanceof Element||(I=>"object"==typeof I&&I.jquery)(I);const Fo=()=>{if(Z.timeout)return(()=>{const I=Pt(),D=parseInt(window.getComputedStyle(I).width);I.style.removeProperty("transition"),I.style.width="100%";const G=D/parseInt(window.getComputedStyle(I).width)*100;I.style.removeProperty("transition"),I.style.width="".concat(G,"%")})(),Z.timeout.stop()},Ka=()=>{if(Z.timeout){const I=Z.timeout.start();return Pr(I),I}};let Si=!1;const co={};const Ya=I=>{for(let D=I.target;D&&D!==document;D=D.parentNode)for(const k in co){const G=D.getAttribute(k);if(G)return void co[k].fire({template:G})}};var Qu=Object.freeze({isValidParameter:Ye,isUpdatableParameter:ve,isDeprecatedParameter:be,argsToParams:I=>{const D={};return"object"!=typeof I[0]||au(I[0])?["title","html","icon"].forEach((k,G)=>{const Te=I[G];"string"==typeof Te||au(Te)?D[k]=Te:void 0!==Te&&he("Unexpected type of ".concat(k,'! Expected "string" or "Element", got ').concat(typeof Te))}):Object.assign(D,I[0]),D},isVisible:()=>nn(ee()),clickConfirm:zi,clickDeny:()=>Ht()&&Ht().click(),clickCancel:()=>Vt()&&Vt().click(),getContainer:pe,getPopup:ee,getTitle:ce,getHtmlContainer:Fe,getImage:ht,getIcon:ye,getInputLabel:()=>ae(K["input-label"]),getCloseButton:Qr,getActions:nr,getConfirmButton:Ge,getDenyButton:Ht,getCancelButton:Vt,getLoader:Jt,getFooter:Yt,getTimerProgressBar:Pt,getFocusableElements:cr,getValidationMessage:Nt,isLoading:()=>ee().hasAttribute("data-loading"),fire:function sa(){const I=this;for(var D=arguments.length,k=new Array(D),G=0;G<D;G++)k[G]=arguments[G];return new I(...k)},mixin:function Nn(I){return class D extends(this){_main(G,Te){return super._main(G,Object.assign({},I,Te))}}},showLoading:$i,enableLoading:$i,getTimerLeft:()=>Z.timeout&&Z.timeout.getTimerLeft(),stopTimer:Fo,resumeTimer:Ka,toggleTimer:()=>{const I=Z.timeout;return I&&(I.running?Fo():Ka())},increaseTimer:I=>{if(Z.timeout){const D=Z.timeout.increase(I);return Pr(D,!0),D}},isTimerRunning:()=>Z.timeout&&Z.timeout.isRunning(),bindClickHandler:function Qn(){co[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Si||(document.body.addEventListener("click",Ya),Si=!0)}});let Mi;class Or{constructor(){if(typeof window>"u")return;Mi=this;for(var D=arguments.length,k=new Array(D),G=0;G<D;G++)k[G]=arguments[G];const Te=Object.freeze(this.constructor.argsToParams(k));Object.defineProperties(this,{params:{value:Te,writable:!1,enumerable:!0,configurable:!0}});const Ke=Mi._main(Mi.params);Dt.promise.set(this,Ke)}_main(D){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(I=>{!I.backdrop&&I.allowOutsideClick&&F('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const D in I)Je(D),I.toast&&Xe(D),xe(D)})(Object.assign({},k,D)),Z.currentInstance&&(Z.currentInstance._destroy(),_r()&&_l()),Z.currentInstance=Mi;const G=ad(D,k);Oa(G),Object.freeze(G),Z.timeout&&(Z.timeout.stop(),delete Z.timeout),clearTimeout(Z.restoreFocusTimeout);const Te=Es(Mi);return Wh(Mi,G),Dt.innerParams.set(Mi,G),ho(Mi,Te,G)}then(D){return Dt.promise.get(this).then(D)}finally(D){return Dt.promise.get(this).finally(D)}}const ho=(I,D,k)=>new Promise((G,Te)=>{const Ke=en=>{I.closePopup({isDismissed:!0,dismiss:en})};mi.swalPromiseResolve.set(I,G),mi.swalPromiseReject.set(I,Te),D.confirmButton.onclick=()=>(I=>{const D=Dt.innerParams.get(I);I.disableButtons(),D.input?qa(I,"confirm"):bs(I,!0)})(I),D.denyButton.onclick=()=>(I=>{const D=Dt.innerParams.get(I);I.disableButtons(),D.returnInputValueOnDeny?qa(I,"deny"):Ro(I,!1)})(I),D.cancelButton.onclick=()=>((I,D)=>{I.disableButtons(),D(ji.cancel)})(I,Ke),D.closeButton.onclick=()=>Ke(ji.close),((I,D,k)=>{Dt.innerParams.get(I).toast?ia(I,D,k):(Dl(D),Al(D),Tl(I,D,k))})(I,D,Ke),((I,D,k,G)=>{Tn(D),k.toast||(D.keydownHandler=Te=>xo(I,Te,G),D.keydownTarget=k.keydownListenerCapture?window:ee(),D.keydownListenerCapture=k.keydownListenerCapture,D.keydownTarget.addEventListener("keydown",D.keydownHandler,{capture:D.keydownListenerCapture}),D.keydownHandlerAdded=!0)})(I,Z,k,Ke),((I,D)=>{"select"===D.input||"radio"===D.input?qs(I,D):["text","email","number","tel","textarea"].includes(D.input)&&(Ie(D.inputValue)||q(D.inputValue))&&($i(Ge()),id(I,D))})(I,k),$s(k),aa(Z,k,Ke),uu(D,k),setTimeout(()=>{D.container.scrollTop=0})}),ad=(I,D)=>{const k=(I=>{const D="string"==typeof I.template?document.querySelector(I.template):I.template;if(!D)return{};const k=D.content;return oo(k),Object.assign(ti(k),ed(k),Gi(k),td(k),nu(k),Ra(k,Hs))})(I),G=Object.assign({},ie,D,k,I);return G.showClass=Object.assign({},ie.showClass,G.showClass),G.hideClass=Object.assign({},ie.hideClass,G.hideClass),G},Es=I=>{const D={popup:ee(),container:pe(),actions:nr(),confirmButton:Ge(),denyButton:Ht(),cancelButton:Vt(),loader:Jt(),closeButton:Qr(),validationMessage:Nt(),progressSteps:Wt()};return Dt.domCache.set(I,D),D},aa=(I,D,k)=>{const G=Pt();Ve(G),D.timer&&(I.timeout=new Hi(()=>{k("timer"),delete I.timeout},D.timer),D.timerProgressBar&&(yt(G),Xt(G,D,"timerProgressBar"),setTimeout(()=>{I.timeout&&I.timeout.running&&Pr(D.timer)})))},uu=(I,D)=>{if(!D.toast){if(!ge(D.allowEnterKey))return ud();ld(I,D)||ar(0,-1,1)}},ld=(I,D)=>D.focusDeny&&nn(I.denyButton)?(I.denyButton.focus(),!0):D.focusCancel&&nn(I.cancelButton)?(I.cancelButton.focus(),!0):!(!D.focusConfirm||!nn(I.confirmButton)||(I.confirmButton.focus(),0)),ud=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&Math.random()<.1){const I=document.createElement("div");I.className="leave-russia-now-and-apply-your-skills-to-the-world",En(I,'\n      <div>\n        \u0415\u0441\u043b\u0438 \u043c\u044b \u043d\u0435 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0432\u043e\u0439\u043d\u0443, \u043e\u043d\u0430 \u043f\u0440\u0438\u0434\u0435\u0442 \u0432 \u0434\u043e\u043c <strong>\u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0438\u0437 \u043d\u0430\u0441</strong> \u0438 \u0435\u0451 \u043f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f \u0431\u0443\u0434\u0443\u0442 <strong>\u0443\u0436\u0430\u0441\u0430\u044e\u0449\u0438\u043c\u0438</strong>.\n      </div>\n      <div>\n        \u041f\u0443\u0442\u0438\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u0437\u0430 20 \u0441 \u043b\u0438\u0448\u043d\u0438\u043c \u043b\u0435\u0442 \u0441\u0432\u043e\u0435\u0433\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0434\u043e\u043b\u0431\u0438\u043b \u043d\u0430\u043c, \u0447\u0442\u043e \u043c\u044b \u0431\u0435\u0441\u0441\u0438\u043b\u044c\u043d\u044b \u0438 \u043e\u0434\u0438\u043d \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c. <strong>\u042d\u0442\u043e \u043d\u0435 \u0442\u0430\u043a!</strong>\n      </div>\n      <div>\n        \u0412 \u043d\u0438\u0436\u0435\u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435\u043e \u043e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u043d\u0430\u0441 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u0442\u043e\u043c, <strong>\u0447\u0442\u043e\u0431\u044b \u044d\u0442\u0430 \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u0430\u044f \u0438 \u0431\u0435\u0441\u0447\u0435\u043b\u043e\u0432\u0435\u0447\u043d\u0430\u044f \u0432\u043e\u0439\u043d\u0430 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0430\u0441\u044c</strong>:\n      </div>\n      <iframe width="560" height="315" src="https://www.youtube.com/embed/4CfDhaRkw7I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n      <div>\n        \u041d\u0435\u0442 \u0432\u043e\u0439\u043d\u0435!\n      </div>\n      ');const D=document.createElement("button");D.innerHTML="&times;",D.onclick=()=>I.remove(),I.appendChild(D),window.addEventListener("load",()=>{setTimeout(()=>{document.body.appendChild(I)},1e3)})}Object.assign(Or.prototype,oi),Object.assign(Or,Qu),Object.keys(oi).forEach(I=>{Or[I]=function(){if(Mi)return Mi[I](...arguments)}}),Or.DismissReason=ji,Or.version="11.4.20";const Wr=Or;return Wr.default=Wr,Wr}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Se,V){var f=Se.createElement("style");if(Se.getElementsByTagName("head")[0].appendChild(f),f.styleSheet)f.styleSheet.disabled||(f.styleSheet.cssText=V);else try{f.innerHTML=V}catch{f.innerText=V}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:0 0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:0 0;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:0 0;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:0 0;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.leave-russia-now-and-apply-your-skills-to-the-world{display:flex;position:fixed;z-index:1939;top:0;right:0;bottom:0;left:0;flex-direction:column;align-items:center;justify-content:center;padding:25px 0 20px;background:#20232a;color:#fff;text-align:center}.leave-russia-now-and-apply-your-skills-to-the-world div{max-width:560px;margin:10px;line-height:146%}.leave-russia-now-and-apply-your-skills-to-the-world iframe{max-width:100%;max-height:55.5555555556vmin;margin:16px auto}.leave-russia-now-and-apply-your-skills-to-the-world strong{border-bottom:2px dashed #fff}.leave-russia-now-and-apply-your-skills-to-the-world button{display:flex;position:fixed;z-index:1940;top:0;right:0;align-items:center;justify-content:center;width:48px;height:48px;margin-right:10px;margin-bottom:-10px;border:none;background:0 0;color:#aaa;font-size:48px;font-weight:700;cursor:pointer}.leave-russia-now-and-apply-your-skills-to-the-world button:hover{color:#fff}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(dt,Se,V)=>{"use strict";function he(Y,ae){var ee={};for(var ye in Y)Object.prototype.hasOwnProperty.call(Y,ye)&&ae.indexOf(ye)<0&&(ee[ye]=Y[ye]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(ye=Object.getOwnPropertySymbols(Y);ce<ye.length;ce++)ae.indexOf(ye[ce])<0&&Object.prototype.propertyIsEnumerable.call(Y,ye[ce])&&(ee[ye[ce]]=Y[ye[ce]])}return ee}function ge(Y,ae,ee,ye){return new(ee||(ee=Promise))(function(Fe,ht){function Wt(Ht){try{Ge(ye.next(Ht))}catch(jn){ht(jn)}}function Nt(Ht){try{Ge(ye.throw(Ht))}catch(jn){ht(jn)}}function Ge(Ht){Ht.done?Fe(Ht.value):function ce(Fe){return Fe instanceof ee?Fe:new ee(function(ht){ht(Fe)})}(Ht.value).then(Wt,Nt)}Ge((ye=ye.apply(Y,ae||[])).next())})}function ve(Y){return this instanceof ve?(this.v=Y,this):new ve(Y)}function be(Y,ae,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ye=ee.apply(Y,ae||[]),Fe=[];return ce={},ht("next"),ht("throw"),ht("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function ht(Jt){ye[Jt]&&(ce[Jt]=function(Vt){return new Promise(function(nr,Yt){Fe.push([Jt,Vt,nr,Yt])>1||Wt(Jt,Vt)})})}function Wt(Jt,Vt){try{!function Nt(Jt){Jt.value instanceof ve?Promise.resolve(Jt.value.v).then(Ge,Ht):jn(Fe[0][2],Jt)}(ye[Jt](Vt))}catch(nr){jn(Fe[0][3],nr)}}function Ge(Jt){Wt("next",Jt)}function Ht(Jt){Wt("throw",Jt)}function jn(Jt,Vt){Jt(Vt),Fe.shift(),Fe.length&&Wt(Fe[0][0],Fe[0][1])}}function Xe(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ae=Y[Symbol.asyncIterator];return ae?ae.call(Y):(Y=function ie(Y){var ae="function"==typeof Symbol&&Symbol.iterator,ee=ae&&Y[ae],ye=0;if(ee)return ee.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ye>=Y.length&&(Y=void 0),{value:Y&&Y[ye++],done:!Y}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Fe){ee[Fe]=Y[Fe]&&function(ht){return new Promise(function(Wt,Nt){!function ce(Fe,ht,Wt,Nt){Promise.resolve(Nt).then(function(Ge){Fe({value:Ge,done:Wt})},ht)}(Wt,Nt,(ht=Y[Fe](ht)).done,ht.value)})}}}V.d(Se,{FC:()=>be,KL:()=>Xe,_T:()=>he,mG:()=>ge,qq:()=>ve})},4650:(dt,Se,V)=>{"use strict";V.d(Se,{$8M:()=>Xa,AFp:()=>j0,ALo:()=>Hm,AaK:()=>ge,BQk:()=>Ru,CHM:()=>_s,CRH:()=>eC,CZH:()=>wh,CqO:()=>qp,D6c:()=>wy,EJc:()=>hT,EpF:()=>Tv,F4k:()=>pm,FYo:()=>h0,FiY:()=>mo,G48:()=>Cf,Gf:()=>Km,GfV:()=>BI,Gpc:()=>q,JOm:()=>Yi,KtG:()=>Ga,LFG:()=>He,LSH:()=>Cd,Lbi:()=>di,MAs:()=>Cv,NdJ:()=>Mv,OlP:()=>pn,Oqu:()=>Em,Q6J:()=>wo,QGY:()=>Sv,Qsj:()=>VI,R0b:()=>Io,RDi:()=>ou,Rgc:()=>fh,SBq:()=>sf,TTD:()=>ni,TgZ:()=>$p,W1O:()=>Ym,X6Q:()=>py,Xpm:()=>ne,Y36:()=>wa,YNc:()=>ME,Yjl:()=>or,Yz7:()=>Vt,ZZ4:()=>Af,_Bn:()=>l0,_UZ:()=>Dv,_c5:()=>by,_uU:()=>qE,aQg:()=>vy,cJS:()=>Yt,cg1:()=>Gv,dDg:()=>mT,dqk:()=>Ve,eFA:()=>uy,ekj:()=>vm,eoX:()=>Uu,g9A:()=>ny,h0i:()=>jc,hGG:()=>Tf,hM9:()=>L1,hij:()=>Im,iGM:()=>C0,ifc:()=>yt,ip1:()=>U0,kL8:()=>hI,lG2:()=>Bt,lcZ:()=>$m,lri:()=>$c,n5z:()=>fo,oAB:()=>bt,oxw:()=>NE,q4F:()=>f0,qLn:()=>Iu,qOj:()=>yv,qZA:()=>hm,rWj:()=>EC,sBO:()=>J0,sIi:()=>Rc,s_b:()=>pf,soG:()=>vf,uIk:()=>Fc,vHH:()=>Re,vpe:()=>Ma,wAp:()=>Et,xp6:()=>_w,ynx:()=>zp,zSh:()=>V_,zs3:()=>ul});var f=V(7579),re=V(727),F=V(8306),he=V(6451),ue=V(3099);function we(i){for(let s in i)if(i[s]===we)return s;throw Error("Could not find renamed property on target object.")}function me(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ge(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ge).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ie(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Q=we({__forward_ref__:we});function q(i){return i.__forward_ref__=q,i.toString=function(){return ge(this())},i}function ie(i){return nt(i)?i():i}function nt(i){return"function"==typeof i&&i.hasOwnProperty(Q)&&i.__forward_ref__===q}class Re extends Error{constructor(s,a){super(function Ye(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ve(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i,s){throw new Re(-201,!1)}function Nt(i,s){null==i&&function Ge(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Vt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return Qr(i,jr)||Qr(i,rr)}function Qr(i,s){return i.hasOwnProperty(s)?i[s]:null}function _r(i){return i&&(i.hasOwnProperty(no)||i.hasOwnProperty(En))?i[no]:null}const jr=we({\u0275prov:we}),no=we({\u0275inj:we}),rr=we({ngInjectableDef:we}),En=we({ngInjectorDef:we});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Xr;function In(i){const s=Xr;return Xr=i,s}function Ui(i,s,a){const u=Pt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&st.Optional?null:void 0!==s?s:void Ce(ge(i))}function mt(i){return{toString:i}.toString()}var sn=(()=>((sn=sn||{})[sn.OnPush=0]="OnPush",sn[sn.Default=1]="Default",sn))(),yt=(()=>{return(i=yt||(yt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",yt;var i})();const Ve=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nn={},It=[],Gr=we({\u0275cmp:we}),ir=we({\u0275dir:we}),Pr=we({\u0275pipe:we}),an=we({\u0275mod:we}),X=we({\u0275fac:we}),H=we({__NG_ELEMENT_ID__:we});let Z=0;function ne(i){return mt(()=>{const a=!0===i.standalone,u={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===sn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||It,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||yt.Emulated,id:"c"+Z++,styles:i.styles||It,_:null,setInput:null,schemas:i.schemas||null,tView:null},g=i.dependencies,_=i.features;return d.inputs=dn(i.inputs,u),d.outputs=dn(i.outputs),_&&_.forEach(w=>w(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ee).filter(je):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(hr).filter(je):null,d})}function Ee(i){return $t(i)||Gn(i)}function je(i){return null!==i}const tt={};function bt(i){return mt(()=>{const s={type:i.type,bootstrap:i.bootstrap||It,declarations:i.declarations||It,imports:i.imports||It,exports:i.exports||It,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(tt[i.id]=i.type),s})}function dn(i,s){if(null==i)return nn;const a={};for(const u in i)if(i.hasOwnProperty(u)){let d=i[u],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=u,s&&(s[d]=g)}return a}const Bt=ne;function or(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function $t(i){return i[Gr]||null}function Gn(i){return i[ir]||null}function hr(i){return i[Pr]||null}function Yn(i){return Array.isArray(i)&&"object"==typeof i[1]}function $r(i){return Array.isArray(i)&&!0===i[1]}function js(i){return 0!=(8&i.flags)}function Gs(i){return 2==(2&i.flags)}function To(i){return 1==(1&i.flags)}function Ai(i){return null!==i.template}function us(i){return 0!=(256&i[2])}function so(i,s){return i.hasOwnProperty(X)?i[X]:null}class bl{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function ni(){return ao}function ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=wl),ds}function ds(){const i=$s(this),s=i?.current;if(s){const a=i.previous;if(a===nn)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function wl(i,s,a,u){const d=$s(i)||function iu(i,s){return i[hs]=s}(i,{previous:nn,current:null}),g=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],C=_[w];g[w]=new bl(C&&C.currentValue,s,_===nn),i[u]=s}ni.ngInherit=!0;const hs="__ngSimpleChanges__";function $s(i){return i[hs]||null}let Va;function ou(i){Va=i}function cn(i){return!!i.listen}const Ws={createRenderer:(i,s)=>{throw new Error("Renderer3 disabled")}};function bn(i){for(;Array.isArray(i);)i=i[0];return i}function zi(i,s){return bn(s[i])}function sr(i,s){return bn(s[i.index])}function Tn(i,s){return i.data[s]}function lo(i,s){return i[s]}function ar(i,s){const a=s[i];return Yn(a)?a:a[0]}function Ys(i){return 4==(4&i[2])}function ms(i){return 64==(64&i[2])}function zr(i,s){return null==s?null:i[s]}function ko(i){i[18]=0}function ys(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ft={lFrame:oa(null),bindingsEnabled:!0};function ja(){return ft.bindingsEnabled}function ke(){return ft.lFrame.lView}function Mt(){return ft.lFrame.tView}function _s(i){return ft.lFrame.contextLView=i,i[8]}function Ga(i){return ft.lFrame.contextLView=null,i}function Sn(){let i=Js();for(;null!==i&&64===i.type;)i=i.parent;return i}function Js(){return ft.lFrame.currentTNode}function yi(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function Ha(){return ft.lFrame.isParent}function Xs(){ft.lFrame.isParent=!1}function Ti(){return ft.lFrame.bindingIndex++}function su(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,ra(s)}function ra(i){ft.lFrame.currentDirectiveIndex=i}function Wa(){return ft.lFrame.currentQueryIndex}function vs(i){ft.lFrame.currentQueryIndex=i}function bs(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ws(i,s,a){if(a&st.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&st.Host||(d=bs(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;s=d,i=g}const u=ft.lFrame=Oo();return u.currentTNode=s,u.lView=i,!0}function ia(i){const s=Oo(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Oo(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?oa(i):s}function oa(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Dl(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Al=Dl;function Tl(){const i=Dl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qr(){return ft.lFrame.selectedIndex}function sa(i){ft.lFrame.selectedIndex=i}function Nn(){const i=ft.lFrame;return Tn(i.tView,i.selectedIndex)}function Si(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:M,ngOnDestroy:R}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),M&&((i.viewHooks||(i.viewHooks=[])).push(a,M),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,M)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function co(i,s,a){Qu(i,s,3,a)}function Qn(i,s,a,u){(3&i[2])===a&&Qu(i,s,a,u)}function Ya(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Qu(i,s,a,u){const g=u??-1,_=s.length-1;let w=0;for(let C=void 0!==u?65535&i[18]:0;C<_;C++)if("number"==typeof s[C+1]){if(w=s[C],null!=u&&w>=u)break}else s[C]<0&&(i[18]+=65536),(w<g||-1==g)&&(Mi(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Mi(i,s,a,u){const d=a[u]<0,g=a[u+1],w=i[d?-a[u]:a[u]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ho{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function D(i,s,a){const u=cn(i);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const _=a[d++],w=a[d++],C=a[d++];u?i.setAttribute(s,w,C,_):s.setAttributeNS(_,w,C)}else{const _=g,w=a[++d];G(_)?u&&i.setProperty(s,_,w):u?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function k(i){return 3===i||4===i||6===i}function G(i){return 64===i.charCodeAt(0)}function Te(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const d=s[u];"number"==typeof d?a=d:0===a||Ke(i,a,d,null,-1===a||2===a?s[++u]:null)}}return i}function Ke(i,s,a,u,d){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const w=i[g++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=g-1;break}}}for(;g<i.length;){const w=i[g];if("number"==typeof w)break;if(w===a){if(null===u)return void(null!==d&&(i[g+1]=d));if(u===i[g+1])return void(i[g+2]=d)}g++,null!==u&&g++,null!==d&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==u&&i.splice(g++,0,u),null!==d&&i.splice(g++,0,d)}function en(i){return-1!==i}function Ut(i){return 32767&i}function Fr(i,s){let a=function fr(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Lo=!0;function Qa(i){const s=Lo;return Lo=i,s}let la=0;const Pn={};function Vo(i,s){const a=cu(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,si(u.data,i),si(s,null),si(u.blueprint,null));const d=ua(i,s),g=i.injectorIndex;if(en(d)){const _=Ut(d),w=Fr(d,s),C=w[1].data;for(let M=0;M<8;M++)s[g+M]=w[_+M]|C[_+M]}return s[g+8]=d,g}function si(i,s){i.push(0,0,0,0,0,0,0,0,s)}function cu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ua(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,d=s;for(;null!==d;){if(u=Nl(d),null===u)return-1;if(a++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Is(i,s,a){!function Rn(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(H)&&(u=a[H]),null==u&&(u=a[H]=la++);const d=255&u;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Bo(i,s,a){if(a&st.Optional)return i;Ce()}function Sr(i,s,a,u){if(a&st.Optional&&void 0===u&&(u=null),0==(a&(st.Self|st.Host))){const d=i[9],g=In(void 0);try{return d?d.get(s,u,a&st.Optional):Ui(s,u,a&st.Optional)}finally{In(g)}}return Bo(u,0,a)}function kl(i,s,a,u=st.Default,d){if(null!==i){if(1024&s[2]){const _=function eg(i,s,a,u,d){let g=i,_=s;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const w=dd(g,_,a,u|st.Self,Pn);if(w!==Pn)return w;let C=g.parent;if(!C){const M=_[21];if(M){const R=M.get(a,Pn,u);if(R!==Pn)return R}C=Nl(_),_=_[15]}g=C}return d}(i,s,a,u,Pn);if(_!==Pn)return _}const g=dd(i,s,a,u,Pn);if(g!==Pn)return g}return Sr(s,a,u,d)}function dd(i,s,a,u,d){const g=function Cs(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(H)?i[H]:void 0;return"number"==typeof s?s>=0?255&s:br:s}(a);if("function"==typeof g){if(!ws(s,i,u))return u&st.Host?Bo(d,0,u):Sr(s,a,u,d);try{const _=g(u);if(null!=_||u&st.Optional)return _;Ce()}finally{Al()}}else if("number"==typeof g){let _=null,w=cu(i,s),C=-1,M=u&st.Host?s[16][6]:null;for((-1===w||u&st.SkipSelf)&&(C=-1===w?ua(i,s):s[w+8],-1!==C&&Wi(u,!1)?(_=s[1],w=Ut(C),s=Fr(C,s)):w=-1);-1!==w;){const R=s[1];if(hd(g,w,R.data)){const L=Zh(w,s,a,_,u,M);if(L!==Pn)return L}C=s[w+8],-1!==C&&Wi(u,s[1].data[w+8]===M)&&hd(g,w,s)?(_=R,w=Ut(C),s=Fr(C,s)):w=-1}}return d}function Zh(i,s,a,u,d,g){const _=s[1],w=_.data[i+8],R=Ju(w,_,a,null==u?Gs(w)&&Lo:u!=_&&0!=(3&w.type),d&st.Host&&g===w);return null!==R?po(s,_,R,w):Pn}function Ju(i,s,a,u,d){const g=i.providerIndexes,_=s.data,w=1048575&g,C=i.directiveStart,R=g>>20,z=d?w+R:i.directiveEnd;for(let se=u?w:w+R;se<z;se++){const De=_[se];if(se<C&&a===De||se>=C&&De.type===a)return se}if(d){const se=_[C];if(se&&Ai(se)&&se.type===a)return C}return null}function po(i,s,a,u){let d=i[a];const g=s.data;if(function ad(i){return i instanceof ho}(d)){const _=d;_.resolving&&function Je(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ve(i)}(g[a]));const w=Qa(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?In(_.injectImpl):null;ws(i,u,st.Default);try{d=i[a]=_.factory(void 0,g,i,u),s.firstCreatePass&&a>=u.directiveStart&&function Za(i,s,a){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(u){const _=ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==C&&In(C),Qa(w),_.resolving=!1,Al()}}return d}function hd(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Wi(i,s){return!(i&st.Self||i&st.Host&&s)}class Uo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return kl(this._tNode,this._lView,s,u,a)}}function br(){return new Uo(Sn(),ke())}function fo(i){return mt(()=>{const s=i.prototype.constructor,a=s[X]||Ja(s),u=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==u;){const g=d[X]||Ja(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Ja(i){return nt(i)?()=>{const s=Ja(ie(i));return s&&s()}:so(i)}function Nl(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Xa(i){return function xl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let d=0;for(;d<u;){const g=a[d];if(k(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<u&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(Sn(),i)}const da="__parameters__";function el(i,s,a){return mt(()=>{const u=function Xu(i){return function(...a){if(i){const u=i(...a);for(const d in u)this[d]=u[d]}}}(s);function d(...g){if(this instanceof d)return u.apply(this,g),this;const _=new d(...g);return w.annotation=_,w;function w(C,M,R){const L=C.hasOwnProperty(da)?C[da]:Object.defineProperty(C,da,{value:[]})[da];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(_),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Vt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),wr(u,s)):s!==i&&s.push(u)}return s}function fn(i,s){i.forEach(a=>Array.isArray(a)?fn(a,s):s(a))}function _i(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ha(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ai(i,s,a){let u=Rl(i,s);return u>=0?i[1|u]=a:(u=~u,function pu(i,s,a,u){let d=i.length;if(d==s)i.push(a,u);else if(1===d)i.push(u,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Pl(i,s){const a=Rl(i,s);if(a>=0)return i[1|a]}function Rl(i,s){return function gu(i,s,a){let u=0,d=i.length>>a;for(;d!==u;){const g=u+(d-u>>1),_=i[g<<a];if(s===_)return g<<a;_>s?d=g:u=g+1}return~(d<<a)}(i,s,1)}const Ts={},pa="__NG_DI_FLAG__",A="ngTempTokenPath",P=/\n/gm,te="__source";let le;function Me(i){const s=le;return le=i,s}function qe(i,s=st.Default){if(void 0===le)throw new Re(-203,!1);return null===le?Ui(i,void 0,s):le.get(i,s&st.Optional?null:void 0,s)}function He(i,s=st.Default){return(function Xt(){return Xr}()||qe)(ie(i),s)}function ct(i){const s=[];for(let a=0;a<i.length;a++){const u=ie(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Re(900,!1);let d,g=st.Default;for(let _=0;_<u.length;_++){const w=u[_],C=vi(w);"number"==typeof C?-1===C?d=w.token:g|=C:d=w}s.push(He(d,g))}else s.push(He(u))}return s}function Jn(i,s){return i[pa]=s,i.prototype[pa]=s,i}function vi(i){return i[pa]}const mo=Jn(el("Optional"),8),Ki=Jn(el("SkipSelf"),4);class lp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Vl(i){return i instanceof lp?i.changingThisBreaksApplicationSecurity:i}const hp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Er=(()=>((Er=Er||{})[Er.NONE=0]="NONE",Er[Er.HTML=1]="HTML",Er[Er.STYLE=2]="STYLE",Er[Er.SCRIPT=3]="SCRIPT",Er[Er.URL=4]="URL",Er[Er.RESOURCE_URL=5]="RESOURCE_URL",Er))();function Cd(i){const s=function fa(){const i=ke();return i&&i[12]}();return s?s.sanitize(Er.URL,i)||"":function Eu(i,s){const a=function Qb(i){return i instanceof lp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Vl(i):function hc(i){return(i=String(i)).match(hp)||i.match(dc)?i:"unsafe:"+i}(ve(i))}function Ad(i){return i.ngOriginalError}class Iu{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ad(s);for(;a&&Ad(a);)a=Ad(a);return a||null}}const vc=new Map;let Xn=0;const bc="__ngContext__";function zt(i,s){Yn(s)?(i[bc]=s[20],function Ip(i){vc.set(i[20],i)}(s)):i[bc]=s}function Sd(i){const s=i[bc];return"number"==typeof s?function Cu(i){return vc.get(i)||null}(s):s||null}function Md(i){const s=Sd(i);return s?Yn(s)?s:s.lView:null}const $e=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ve))();var Yi=(()=>((Yi=Yi||{})[Yi.Important=1]="Important",Yi[Yi.DashCase=2]="DashCase",Yi))();function al(i,s){return undefined(i,s)}function Ir(i){const s=i[3];return $r(s)?s[3]:s}function b_(i){return _a(i[13])}function ya(i){return _a(i[4])}function _a(i){for(;null!==i&&!$r(i);)i=i[4];return i}function Nd(i,s,a,u,d){if(null!=u){let g,_=!1;$r(u)?g=u:Yn(u)&&(_=!0,u=u[0]);const w=bn(u);0===i&&null!==a?null==d?E_(s,a,w):ll(s,a,w,d||null,!0):1===i&&null!==a?ll(s,a,w,d||null,!0):2===i?function Tg(i,s,a){const u=Dp(i,s);u&&function uw(i,s,a,u){cn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=g&&function LD(i,s,a,u,d){const g=a[7];g!==bn(a)&&Nd(s,i,u,g,d);for(let w=10;w<a.length;w++){const C=a[w];Mp(C[1],C,i,s,u,g)}}(s,i,g,a,d)}}function Lr(i,s,a){if(cn(i))return i.createElement(s,a);{const u=null!==a?function El(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function Eg(i,s){const a=i[9],u=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,ys(d,-1)),a.splice(u,1)}function Pd(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const d=u[17];null!==d&&d!==i&&Eg(d,u),s>0&&(i[a-1][4]=u[4]);const g=ha(i,10+s);!function sw(i,s){Mp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=g[19];null!==_&&_.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Dc(i,s){if(!(128&s[2])){const a=s[11];cn(a)&&a.destroyNode&&Mp(i,s,a,3,null,null),function PD(i){let s=i[13];if(!s)return w_(i[1],i);for(;s;){let a=null;if(Yn(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)Yn(s)&&w_(s[1],s),s=s[3];null===s&&(s=i),Yn(s)&&w_(s[1],s),a=s&&s[4]}s=a}}(s)}}function w_(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function OD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const d=s[a[u]];if(!(d instanceof ho)){const g=a[u+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const w=d[g[_]],C=g[_+1];try{C.call(w)}finally{}}else try{g.call(d)}finally{}}}}(i,s),function Cp(i,s){const a=i.cleanup,u=s[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],w="function"==typeof _?_(s):bn(s[_]),C=u[d=a[g+2]],M=a[g+3];"boolean"==typeof M?w.removeEventListener(a[g],C,M):M>=0?u[d=M]():u[d=-M].unsubscribe(),g+=2}else{const _=u[d=a[g+1]];a[g].call(_)}if(null!==u){for(let g=d+1;g<u.length;g++)u[g]();s[7]=null}}(i,s),1===s[1].type&&cn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&$r(s[3])){a!==s[3]&&Eg(a,s);const u=s[19];null!==u&&u.detachView(i)}!function qo(i){vc.delete(i[20])}(s)}}function lw(i,s,a){return function Rd(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const d=i.data[u.directiveStart].encapsulation;if(d===yt.None||d===yt.Emulated)return null}return sr(u,a)}(i,s.parent,a)}function ll(i,s,a,u,d){cn(i)?i.insertBefore(s,a,u,d):(C_(s)?s.content:s).insertBefore(a,u,d)}function E_(i,s,a){cn(i)?i.appendChild(s,a):(C_(s)?s.content:s).appendChild(a)}function I_(i,s,a,u,d){null!==u?ll(i,s,a,u,d):E_(i,s,a)}function C_(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}function Dp(i,s){return cn(i)?i.parentNode(s):s.parentNode}let A_=function Ig(i,s,a){return 40&i.type?sr(i,a):null};function Ag(i,s,a,u){const d=lw(i,u,s),g=s[11],w=function D_(i,s,a){return A_(i,s,a)}(u.parent||s[6],u,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)I_(g,d,a[C],w,!1);else I_(g,d,a,w,!1)}function Ap(i,s){if(null!==s){const a=s.type;if(3&a)return sr(s,i);if(4&a)return Tp(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Ap(i,u);{const d=i[s.index];return $r(d)?Tp(-1,d):bn(d)}}if(32&a)return al(s,i)()||bn(i[s.index]);{const u=dw(i,s);return null!==u?Array.isArray(u)?u[0]:Ap(Ir(i[16]),u):Ap(i,s.next)}}return null}function dw(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Tp(i,s){const a=10+i+1;if(a<s.length){const u=s[a],d=u[1].firstChild;if(null!==d)return Ap(u,d)}return s[7]}function Sp(i,s,a,u,d,g,_){for(;null!=a;){const w=u[a.index],C=a.type;if(_&&0===s&&(w&&zt(bn(w),u),a.flags|=4),64!=(64&a.flags))if(8&C)Sp(i,s,a.child,u,d,g,!1),Nd(s,i,d,w,g);else if(32&C){const M=al(a,u);let R;for(;R=M();)Nd(s,i,d,R,g);Nd(s,i,d,w,g)}else 16&C?T_(i,s,u,a,d,g):Nd(s,i,d,w,g);a=_?a.projectionNext:a.next}}function Mp(i,s,a,u,d,g){Sp(a,u,i.firstChild,s,d,g,!1)}function T_(i,s,a,u,d,g){const _=a[16],C=_[6].projection[u.projection];if(Array.isArray(C))for(let M=0;M<C.length;M++)Nd(s,i,d,C[M],g);else Sp(i,s,C,_[3],d,g,!0)}function hw(i,s,a){cn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Sg(i,s,a){cn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function S_(i,s,a){let u=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===u||i.charCodeAt(d+g)<=32)return d}a=d+1}}const pw="ng-template";function UD(i,s,a){let u=0;for(;u<i.length;){let d=i[u++];if(a&&"class"===d){if(d=i[u],-1!==S_(d.toLowerCase(),s,0))return!0}else if(1===d){for(;u<i.length&&"string"==typeof(d=i[u++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function fw(i){return 4===i.type&&i.value!==pw}function jD(i,s,a){return s===(4!==i.type||a?i.value:pw)}function GD(i,s,a){let u=4;const d=i.attrs||[],g=function $D(i){for(let s=0;s<i.length;s++)if(k(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const C=s[w];if("number"!=typeof C){if(!_)if(4&u){if(u=2|1&u,""!==C&&!jD(i,C,a)||""===C&&1===s.length){if(xs(u))return!1;_=!0}}else{const M=8&u?C:s[++w];if(8&u&&null!==i.attrs){if(!UD(i.attrs,M,a)){if(xs(u))return!1;_=!0}continue}const L=gw(8&u?"class":C,d,fw(i),a);if(-1===L){if(xs(u))return!1;_=!0;continue}if(""!==M){let z;z=L>g?"":d[L+1].toLowerCase();const se=8&u?z:null;if(se&&-1!==S_(se,M,0)||2&u&&M!==z){if(xs(u))return!1;_=!0}}}}else{if(!_&&!xs(u)&&!xs(C))return!1;if(_&&xs(C))continue;_=!1,u=C|1&u}}return xs(u)||_}function xs(i){return 0==(1&i)}function gw(i,s,a,u){if(null===s)return-1;let d=0;if(u||!a){let g=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function Tu(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function mw(i,s,a=!1){for(let u=0;u<s.length;u++)if(GD(i,s[u],a))return!0;return!1}function yw(i,s){return i?":not("+s.trim()+")":s}function zD(i){let s=i[0],a=1,u=2,d="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?d+="."+_:4&u&&(d+=" "+_);else""!==d&&!xs(_)&&(s+=yw(g,d),d=""),u=_,g=g||!xs(u);a++}return""!==d&&(s+=yw(g,d)),s}const Rt={};function _w(i){vw(Mt(),ke(),qr()+i,!1)}function vw(i,s,a,u){if(!u)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&co(s,g,a)}else{const g=i.preOrderHooks;null!==g&&Qn(s,g,0,a)}sa(a)}const P_=new pn("ENVIRONMENT_INITIALIZER"),R_=new pn("INJECTOR_DEF_TYPES");function YD(...i){return{\u0275providers:O_(0,i)}}function O_(i,...s){const a=[],u=new Set;let d;return fn(s,g=>{const _=g;xg(_,a,[],u)&&(d||(d=[]),d.push(_))}),void 0!==d&&F_(d,a),a}function F_(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];fn(d,g=>{s.push(g)})}}function xg(i,s,a,u){if(!(i=ie(i)))return!1;let d=null,g=_r(i);const _=!g&&$t(i);if(g||_){if(_&&!_.standalone)return!1;d=i}else{const C=i.ngModule;if(g=_r(C),!g)return!1;d=C}const w=u.has(d);if(_){if(w)return!1;if(u.add(d),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const M of C)xg(M,s,a,u)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let M;u.add(d);try{fn(g.imports,R=>{xg(R,s,a,u)&&(M||(M=[]),M.push(R))})}finally{}void 0!==M&&F_(M,s)}if(!w){const M=so(d)||(()=>new d);s.push({provide:d,useFactory:M,deps:It},{provide:R_,useValue:d,multi:!0},{provide:P_,useValue:()=>He(d),multi:!0})}const C=g.providers;null==C||w||fn(C,R=>{s.push(R)})}}return d!==i&&void 0!==i.providers}const Ew=we({provide:String,useValue:we});function kg(i){return null!==i&&"object"==typeof i&&Ew in i}function Ot(i){return"function"==typeof i}const xn=new pn("INJECTOR",-1);class Ng{get(s,a=Ts){if(a===Ts){const u=new Error(`NullInjectorError: No provider for ${ge(s)}!`);throw u.name="NullInjectorError",u}return a}}const V_=new pn("Set Injector scope."),Mu={},Iw={};let Wn;function qt(){return void 0===Wn&&(Wn=new Ng),Wn}class Kr{}class Cw extends Kr{constructor(s,a,u,d){super(),this.parent=a,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,U_(s,_=>this.processProvider(_)),this.records.set(xn,Fd(void 0,this)),d.has("environment")&&this.records.set(Kr,Fd(void 0,this));const g=this.records.get(V_);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(R_.multi,It,st.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}get(s,a=Ts,u=st.Default){this.assertNotDestroyed();const d=Me(this),g=In(void 0);try{if(!(u&st.SkipSelf)){let w=this.records.get(s);if(void 0===w){const C=function B_(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&Pt(s);w=C&&this.injectableDefInScope(C)?Fd(xp(s),Mu):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(u&st.Self?qt():this.parent).get(s,a=u&st.Optional&&a===Ts?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[A]=_[A]||[]).unshift(ge(s)),d)throw _;return function ol(i,s,a,u){const d=i[A];throw s[te]&&d.unshift(s[te]),i.message=function _u(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ge(s);if(Array.isArray(s))d=s.map(ge).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];g.push(_+":"+("string"==typeof w?JSON.stringify(w):ge(w)))}d=`{${g.join(", ")}}`}return`${a}${u?"("+u+")":""}[${d}]: ${i.replace(P,"\n  ")}`}("\n"+i.message,d,a,u),i.ngTokenPath=d,i[A]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{In(g),Me(d)}}resolveInjectorInitializers(){const s=Me(this),a=In(void 0);try{const u=this.get(P_.multi,It,st.Self);for(const d of u)d()}finally{Me(s),In(a)}}toString(){const s=[],a=this.records;for(const u of a.keys())s.push(ge(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processProvider(s){let a=Ot(s=ie(s))?s:ie(s&&s.provide);const u=function QD(i){return kg(i)?Fd(void 0,i.useValue):Fd(Dw(i),Mu)}(s);if(Ot(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Fd(void 0,Mu,!0),d.factory=()=>ct(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,u)}hydrate(s,a){return a.value===Mu&&(a.value=Iw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ac(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ie(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function xp(i){const s=Pt(i),a=null!==s?s.factory:so(i);if(null!==a)return a;if(i instanceof pn)throw new Re(204,!1);if(i instanceof Function)return function ks(i){const s=i.length;if(s>0)throw function nl(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Jr(i){const s=i&&(i[jr]||i[rr]);if(s){const a=function cr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function Dw(i,s,a){let u;if(Ot(i)){const d=ie(i);return so(d)||xp(d)}if(kg(i))u=()=>ie(i.useValue);else if(function gn(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...ct(i.deps||[]));else if(function wn(i){return!(!i||!i.useExisting)}(i))u=()=>He(ie(i.useExisting));else{const d=ie(i&&(i.useClass||i.provide));if(!function Aw(i){return!!i.deps}(i))return so(d)||xp(d);u=()=>new d(...ct(i.deps))}return u}function Fd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function kp(i){return!!i.\u0275providers}function U_(i,s){for(const a of i)Array.isArray(a)?U_(a,s):kp(a)?U_(a.\u0275providers,s):s(a)}function Tw(i,s=null,a=null,u){const d=j_(i,s,a,u);return d.resolveInjectorInitializers(),d}function j_(i,s=null,a=null,u,d=new Set){const g=[a||It,YD(i)];return u=u||("object"==typeof i?void 0:ge(i)),new Cw(g,s||qt(),u||null,d)}let ul=(()=>{class i{static create(a,u){if(Array.isArray(a))return Tw({name:""},u,a,"");{const d=a.name??"";return Tw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Ts,i.NULL=new Ng,i.\u0275prov=Vt({token:i,providedIn:"any",factory:()=>He(xn)}),i.__NG_ELEMENT_ID__=-1,i})();function wa(i,s=st.Default){const a=ke();return null===a?He(i,s):kl(Sn(),a,ie(i),s)}function $l(i,s){return i<<17|s<<2}function Qi(i){return i>>17&32767}function Rp(i){return 2|i}function Wo(i){return(131068&i)>>2}function X_(i,s){return-131069&i|s<<2}function ev(i){return 1|i}function Wd(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const d=a[u],g=a[u+1];if(-1!==g){const _=i.data[g];vs(d),_.contentQueries(2,s[g],g)}}}function xc(i,s,a,u,d,g,_,w,C,M,R){const L=s.blueprint.slice();return L[0]=d,L[2]=76|u,(null!==R||i&&1024&i[2])&&(L[2]|=1024),ko(L),L[3]=L[15]=i,L[8]=a,L[10]=_||i&&i[10],L[11]=w||i&&i[11],L[12]=C||i&&i[12]||null,L[9]=M||i&&i[9]||null,L[6]=g,L[20]=function zo(){return Xn++}(),L[21]=R,L[16]=2==s.type?i[16]:L,L}function Ns(i,s,a,u,d){let g=i.data[s];if(null===g)g=function qg(i,s,a,u,d){const g=Js(),_=Ha(),C=i.data[s]=function uA(i,s,a,u,d,g){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,u,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(_?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(i,s,a,u,d),function na(){return ft.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=u,g.attrs=d;const _=function Po(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return yi(g,!0),g}function Ko(i,s,a,u){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(u),i.blueprint.push(u),i.data.push(null);return d}function kc(i,s,a){ia(s);try{const u=i.viewQuery;null!==u&&rm(1,u,a);const d=i.template;null!==d&&Lp(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wd(i,s),i.staticViewQueries&&rm(2,i.viewQuery,a);const g=i.components;null!==g&&function Qw(i,s){for(let a=0;a<s.length;a++)wA(i,s[a])}(s,g)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Tl()}}function Ca(i,s,a,u){const d=s[2];if(128!=(128&d)){ia(s);try{ko(s),function ta(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Lp(i,s,a,2,u);const _=3==(3&d);if(_){const M=i.preOrderCheckHooks;null!==M&&co(s,M,null)}else{const M=i.preOrderHooks;null!==M&&Qn(s,M,0,null),Ya(s,0)}if(function vA(i){for(let s=b_(i);null!==s;s=ya(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const d=a[u],g=d[3];0==(512&d[2])&&ys(g,1),d[2]|=512}}}(s),function _A(i){for(let s=b_(i);null!==s;s=ya(s))for(let a=10;a<s.length;a++){const u=s[a],d=u[1];ms(u)&&Ca(d,u,d.template,u[8])}}(s),null!==i.contentQueries&&Wd(i,s),_){const M=i.contentCheckHooks;null!==M&&co(s,M)}else{const M=i.contentHooks;null!==M&&Qn(s,M,1),Ya(s,1)}!function Ia(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const d=a[u];if(d<0)sa(~d);else{const g=d,_=a[++u],w=a[++u];su(_,g),w(2,s[g])}}}finally{sa(-1)}}(i,s);const w=i.components;null!==w&&function ov(i,s){for(let a=0;a<s.length;a++)bA(i,s[a])}(s,w);const C=i.viewQuery;if(null!==C&&rm(2,C,u),_){const M=i.viewCheckHooks;null!==M&&co(s,M)}else{const M=i.viewHooks;null!==M&&Qn(s,M,2),Ya(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,ys(s[3],-1))}finally{Tl()}}}function Jw(i,s,a,u){const d=s[10],_=Ys(s);try{!_&&d.begin&&d.begin(),_&&kc(i,s,u),Ca(i,s,a,u)}finally{!_&&d.end&&d.end()}}function Lp(i,s,a,u,d){const g=qr(),_=2&u;try{sa(-1),_&&s.length>22&&vw(i,s,22,!1),a(u,d)}finally{sa(g)}}function Xw(i,s,a){if(js(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function sv(i,s,a){!ja()||(function oE(i,s,a,u){const d=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Vo(a,s),zt(u,s);const _=a.initialInputs;for(let w=d;w<g;w++){const C=i.data[w],M=Ai(C);M&&cE(s,a,C);const R=po(s,i,w,a);zt(R,s),null!==_&&dE(0,w-d,R,C,0,_),M&&(ar(a.index,s)[8]=R)}}(i,s,a,sr(a,s)),128==(128&a.flags)&&function pA(i,s,a){const u=a.directiveStart,d=a.directiveEnd,g=a.index,_=function qa(){return ft.lFrame.currentDirectiveIndex}();try{sa(g);for(let w=u;w<d;w++){const C=i.data[w],M=s[w];ra(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&sE(C,M)}}finally{sa(-1),ra(_)}}(i,s,a))}function av(i,s,a=sr){const u=s.localNames;if(null!==u){let d=s.index+1;for(let g=0;g<u.length;g+=2){const _=u[g+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function eE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Wg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Wg(i,s,a,u,d,g,_,w,C,M){const R=22+u,L=R+d,z=function aA(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Rt);return a}(R,L),se="function"==typeof M?M():M;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:w,declTNode:s,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:se,incompleteFirstPass:!1}}function nE(i,s,a,u){const d=pE(s);null===a?d.push(u):(d.push(a),i.firstCreatePass&&im(i).push(u,d.length-1))}function rE(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const d=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,d):a[u]=[s,d]}return a}function cv(i,s,a,u){let d=!1;if(ja()){const g=function aE(i,s,a){const u=i.directiveRegistry;let d=null;if(u)for(let g=0;g<u.length;g++){const _=u[g];mw(a,_.selectors,!1)&&(d||(d=[]),Is(Vo(a,s),i,_.type),Ai(_)?(Qg(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===u?null:{"":-1};if(null!==g){d=!0,lE(a,i.data.length,g.length);for(let R=0;R<g.length;R++){const L=g[R];L.providersResolver&&L.providersResolver(L)}let w=!1,C=!1,M=Ko(i,s,g.length,null);for(let R=0;R<g.length;R++){const L=g[R];a.mergedAttrs=Te(a.mergedAttrs,L.hostAttrs),uE(i,a,s,M,L),gA(M,L,_),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const z=L.type.prototype;!w&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!C&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),M++}!function cA(i,s){const u=s.directiveEnd,d=i.data,g=s.attrs,_=[];let w=null,C=null;for(let M=s.directiveStart;M<u;M++){const R=d[M],L=R.inputs,z=null===g||fw(s)?null:mA(L,g);_.push(z),w=rE(L,M,w),C=rE(R.outputs,M,C)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=C}(i,a)}_&&function fA(i,s,a){if(s){const u=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new Re(-301,!1);u.push(s[d],g)}}}(a,u,_)}return a.mergedAttrs=Te(a.mergedAttrs,a.attrs),d}function Yg(i,s,a,u,d,g){const _=g.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const C=~s.index;(function iE(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=C&&w.push(C),w.push(u,d,_)}}function sE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Qg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function gA(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Ai(s)&&(a[""]=i)}}function lE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function uE(i,s,a,u,d){i.data[u]=d;const g=d.factory||(d.factory=so(d.type)),_=new ho(g,Ai(d),wa);i.blueprint[u]=_,a[u]=_,Yg(i,s,0,u,Ko(i,a,d.hostVars,Rt),d)}function cE(i,s,a){const u=sr(s,i),d=eE(a),g=i[10],_=Xg(i,xc(i,d,null,a.onPush?32:16,u,s,g,g.createRenderer(u,a),null,null,null));i[s.index]=_}function Yo(i,s,a,u,d,g){const _=sr(i,s);!function Vp(i,s,a,u,d,g,_){if(null==g)cn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?ve(g):_(g,u||"",d);cn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,g,i.value,a,u,d)}function dE(i,s,a,u,d,g){const _=g[s];if(null!==_){const w=u.setInput;for(let C=0;C<_.length;){const M=_[C++],R=_[C++],L=_[C++];null!==w?u.setInput(a,L,M,R):a[R]=L}}}function mA(i,s){let a=null,u=0;for(;u<s.length;){const d=s[u];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[u+1])),u+=2}else u+=2;else u+=4}return a}function Jg(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function bA(i,s){const a=ar(s,i);if(ms(a)){const u=a[1];48&a[2]?Ca(u,a,u.template,a[8]):a[5]>0&&dv(a)}}function dv(i){for(let u=b_(i);null!==u;u=ya(u))for(let d=10;d<u.length;d++){const g=u[d];if(512&g[2]){const _=g[1];Ca(_,g,_.template,g[8])}else g[5]>0&&dv(g)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const d=ar(a[u],i);ms(d)&&d[5]>0&&dv(d)}}function wA(i,s){const a=ar(s,i),u=a[1];(function EA(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),kc(u,a,a[8])}function Xg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function em(i){for(;i;){i[2]|=32;const s=Ir(i);if(us(i)&&!s)return i;i=s}return null}function hE(i){!function tm(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Md(a);if(null!==u){const d=u[1];Jw(d,u,d.template,a)}}}(i[8])}function rm(i,s,a){vs(0),s(i,a)}const DA=(()=>Promise.resolve(null))();function pE(i){return i[7]||(i[7]=[])}function im(i){return i.cleanup||(i.cleanup=[])}function fE(i,s){const a=i[9],u=a?a.get(Iu,null):null;u&&u.handleError(s)}function gE(i,s,a,u,d){for(let g=0;g<a.length;){const _=a[g++],w=a[g++],C=s[_],M=i.data[_];null!==M.setInput?M.setInput(C,d,u,w):C[w]=d}}function cl(i,s,a){const u=zi(s,i);!function wg(i,s,a){cn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Da(i,s,a){let u=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?g=w:1==g?d=Ie(d,w):2==g&&(u=Ie(u,w+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=d:i.classesWithoutHost=d}function mv(){const i=Sn();Si(ke()[1],i)}function yv(i){let s=function am(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let d;if(Ai(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,!1);d=s.\u0275dir}if(d){if(a){u.push(d);const _=i;_.inputs=_v(i.inputs),_.declaredInputs=_v(i.declaredInputs),_.outputs=_v(i.outputs);const w=d.hostBindings;w&&vv(i,w);const C=d.viewQuery,M=d.contentQueries;if(C&&NA(i,C),M&&PA(i,M),me(i.inputs,d.inputs),me(i.declaredInputs,d.declaredInputs),me(i.outputs,d.outputs),Ai(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const w=g[_];w&&w.ngInherit&&w(i),w===yv&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Gp(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const d=i[u];d.hostVars=s+=d.hostVars,d.hostAttrs=Te(d.hostAttrs,a=Te(a,d.hostAttrs))}}(u)}function _v(i){return i===nn?{}:i===It?[]:i}function NA(i,s){const a=i.viewQuery;i.viewQuery=a?(u,d)=>{s(u,d),a(u,d)}:s}function PA(i,s){const a=i.contentQueries;i.contentQueries=a?(u,d,g)=>{s(u,d,g),a(u,d,g)}:s}function vv(i,s){const a=i.hostBindings;i.hostBindings=a?(u,d)=>{s(u,d),a(u,d)}:s}let lm=null;function Pc(){if(!lm){const i=Ve.Symbol;if(i&&i.iterator)lm=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(lm=u)}}}return lm}function Rc(i){return!!Qd(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pc()in i)}function Qd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ni(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Fc(i,s,a,u){const d=ke();return Ni(d,Ti(),s)&&(Mt(),Yo(Nn(),d,i,s,a,u)),Fc}function ME(i,s,a,u,d,g,_,w){const C=ke(),M=Mt(),R=i+22,L=M.firstCreatePass?function SE(i,s,a,u,d,g,_,w,C){const M=s.consts,R=Ns(s,i,4,_||null,zr(M,w));cv(s,a,R,zr(M,C)),Si(s,R);const L=R.tViews=Wg(2,R,u,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,M);return null!==s.queries&&(s.queries.template(s,R),L.queries=s.queries.embeddedTView(R)),R}(R,M,C,s,a,u,d,g,_):M.data[R];yi(L,!1);const z=C[11].createComment("");Ag(M,C,z,L),zt(z,C),Xg(C,C[R]=Jg(z,C,z,L)),To(L)&&sv(M,C,L),null!=_&&av(C,L,w)}function Cv(i){return lo(function Yu(){return ft.lFrame.contextLView}(),22+i)}function wo(i,s,a){const u=ke();return Ni(u,Ti(),s)&&function Zo(i,s,a,u,d,g,_,w){const C=sr(s,a);let R,M=s.inputs;!w&&null!=M&&(R=M[u])?(gE(i,a,R,u,d),Gs(s)&&function Kg(i,s){const a=ar(s,i);16&a[2]||(a[2]|=32)}(a,s.index)):3&s.type&&(u=function dA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),d=null!=_?_(d,s.value||"",u):d,cn(g)?g.setProperty(C,u,d):G(u)||(C.setProperty?C.setProperty(u,d):C[u]=d))}(Mt(),Nn(),u,i,s,u[11],a,!1),wo}function dm(i,s,a,u,d){const _=d?"class":"style";gE(i,a,s.inputs[_],_,u)}function $p(i,s,a,u){const d=ke(),g=Mt(),_=22+i,w=d[11],C=d[_]=Lr(w,s,function lu(){return ft.lFrame.currentNamespace}()),M=g.firstCreatePass?function FA(i,s,a,u,d,g,_){const w=s.consts,M=Ns(s,i,2,d,zr(w,g));return cv(s,a,M,zr(w,_)),null!==M.attrs&&Da(M,M.attrs,!1),null!==M.mergedAttrs&&Da(M,M.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,M),M}(_,g,d,0,s,a,u):g.data[_];yi(M,!0);const R=M.mergedAttrs;null!==R&&D(w,C,R);const L=M.classes;null!==L&&Sg(w,C,L);const z=M.styles;return null!==z&&hw(w,C,z),64!=(64&M.flags)&&Ag(g,d,C,M),0===function qi(){return ft.lFrame.elementDepthCount}()&&zt(C,d),function Ua(){ft.lFrame.elementDepthCount++}(),To(M)&&(sv(g,d,M),Xw(g,M,d)),null!==u&&av(d,M),$p}function hm(){let i=Sn();Ha()?Xs():(i=i.parent,yi(i,!1));const s=i;!function Qs(){ft.lFrame.elementDepthCount--}();const a=Mt();return a.firstCreatePass&&(Si(a,i),js(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ld(i){return 0!=(16&i.flags)}(s)&&dm(a,s,ke(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function ud(i){return 0!=(32&i.flags)}(s)&&dm(a,s,ke(),s.stylesWithoutHost,!1),hm}function Dv(i,s,a,u){return $p(i,s,a,u),hm(),Dv}function zp(i,s,a){const u=ke(),d=Mt(),g=i+22,_=d.firstCreatePass?function LA(i,s,a,u,d){const g=s.consts,_=zr(g,u),w=Ns(s,i,8,"ng-container",_);return null!==_&&Da(w,_,!0),cv(s,a,w,zr(g,d)),null!==s.queries&&s.queries.elementStart(s,w),w}(g,d,u,s,a):d.data[g];yi(_,!0);const w=u[g]=u[11].createComment("");return Ag(d,u,w,_),zt(w,u),To(_)&&(sv(d,u,_),Xw(d,_,u)),null!=a&&av(u,_),zp}function Ru(){let i=Sn();const s=Mt();return Ha()?Xs():(i=i.parent,yi(i,!1)),s.firstCreatePass&&(Si(s,i),js(i)&&s.queries.elementEnd(i)),Ru}function Tv(){return ke()}function Sv(i){return!!i&&"function"==typeof i.then}function pm(i){return!!i&&"function"==typeof i.subscribe}const qp=pm;function Mv(i,s,a,u){const d=ke(),g=Mt(),_=Sn();return function xE(i,s,a,u,d,g,_,w){const C=To(u),R=i.firstCreatePass&&im(i),L=s[8],z=pE(s);let se=!0;if(3&u.type||w){const Qe=sr(u,s),ot=w?w(Qe):Qe,wt=z.length,Pe=w?gt=>w(bn(gt[u.index])):u.index;if(cn(a)){let gt=null;if(!w&&C&&(gt=function VA(i,s,a,u){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===u){const w=s[7],C=d[g+2];return w.length>C?w[C]:null}"string"==typeof _&&(g+=2)}return null}(i,s,d,u.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=g,gt.__ngLastListenerFn__=g,se=!1;else{g=gm(u,s,L,g,!1);const ln=a.listen(ot,d,g);z.push(g,ln),R&&R.push(d,Pe,wt,wt+1)}}else g=gm(u,s,L,g,!0),ot.addEventListener(d,g,_),z.push(g),R&&R.push(d,Pe,wt,_)}else g=gm(u,s,L,g,!1);const De=u.outputs;let Be;if(se&&null!==De&&(Be=De[d])){const Qe=Be.length;if(Qe)for(let ot=0;ot<Qe;ot+=2){const Un=s[Be[ot]][Be[ot+1]].subscribe(g),Ql=z.length;z.push(g,Un),R&&R.push(d,u.index,Ql,-(Ql+1))}}}(g,d,d[11],_,i,s,!!a,u),Mv}function kE(i,s,a,u){try{return!1!==a(u)}catch(d){return fE(i,d),!1}}function gm(i,s,a,u,d){return function g(_){if(_===Function)return u;em(2&i.flags?ar(i.index,s):s);let C=kE(s,0,u,_),M=g.__ngNextListenerFn__;for(;M;)C=kE(s,0,M,_)&&C,M=M.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function NE(i=1){return function Sl(i){return(ft.lFrame.contextLView=function au(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function Kp(i,s,a,u,d){const g=i[a+1],_=null===s;let w=u?Qi(g):Wo(g),C=!1;for(;0!==w&&(!1===C||_);){const R=i[w+1];Pv(i[w],s)&&(C=!0,i[w+1]=u?ev(R):Rp(R)),w=u?Qi(R):Wo(R)}C&&(i[a+1]=u?Rp(g):ev(g))}function Pv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Rl(i,s)>=0}function vm(i,s){return function Xo(i,s,a,u){const d=ke(),g=Mt(),_=function oi(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function GE(i,s,a,u){const d=i.data;if(null===d[a+1]){const g=d[qr()],_=function jE(i,s){return s>=i.expandoStartIndex}(i,a);(function zE(i,s){return 0!=(i.flags&(s?16:32))})(g,u)&&null===s&&!_&&(s=!1),s=function $A(i,s,a,u){const d=function Ro(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=u?s.residualClasses:s.residualStyles;if(null===d)0===(u?s.classBindings:s.styleBindings)&&(a=ah(a=Yp(null,i,s,a,u),s.attrs,u),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Yp(d,i,s,a,u),null===g){let C=function bm(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Wo(u))return i[Qi(u)]}(i,s,u);void 0!==C&&Array.isArray(C)&&(C=Yp(null,i,s,C[1],u),C=ah(C,s.attrs,u),function wm(i,s,a,u){i[Qi(a?s.classBindings:s.styleBindings)]=u}(i,s,u,C))}else g=function Zp(i,s,a){let u;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)u=ah(u,i[g].hostAttrs,a);return ah(u,s.attrs,a)}(i,s,u)}return void 0!==g&&(u?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,u),function FE(i,s,a,u,d,g){let _=g?s.classBindings:s.styleBindings,w=Qi(_),C=Wo(_);i[u]=a;let R,M=!1;if(Array.isArray(a)){const L=a;R=L[1],(null===R||Rl(L,R)>0)&&(M=!0)}else R=a;if(d)if(0!==C){const z=Qi(i[w+1]);i[u+1]=$l(z,w),0!==z&&(i[z+1]=X_(i[z+1],u)),i[w+1]=function eA(i,s){return 131071&i|s<<17}(i[w+1],u)}else i[u+1]=$l(w,0),0!==w&&(i[w+1]=X_(i[w+1],u)),w=u;else i[u+1]=$l(C,0),0===w?w=u:i[C+1]=X_(i[C+1],u),C=u;M&&(i[u+1]=Rp(i[u+1])),Kp(i,R,u,!0),Kp(i,R,u,!1),function LE(i,s,a,u,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&Rl(g,s)>=0&&(a[u+1]=ev(a[u+1]))}(s,R,i,u,g),_=$l(w,C),g?s.classBindings=_:s.styleBindings=_}(d,g,s,a,_,u)}}(g,i,_,u),s!==Rt&&Ni(d,_,s)&&function Bv(i,s,a,u,d,g,_,w){if(!(3&s.type))return;const C=i.data,M=C[w+1];Qp(function Op(i){return 1==(1&i)}(M)?Os(C,s,a,d,Wo(M),_):void 0)||(Qp(g)||function Ud(i){return 2==(2&i)}(M)&&(g=Os(C,null,a,d,w,_)),function VD(i,s,a,u,d){const g=cn(i);if(s)d?g?i.addClass(a,u):a.classList.add(u):g?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:Yi.DashCase;if(null==d)g?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=Yi.Important),g?i.setStyle(a,u,d,_):a.style.setProperty(u,d,w?"important":"")}}}(u,_,zi(qr(),a),d,g))}(g,g.data[qr()],d,d[11],i,d[_+1]=function zA(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ge(Vl(i)))),i}(s,a),u,_)}(i,s,null,!0),vm}function Yp(i,s,a,u,d){let g=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(g=s[w],u=ah(u,g.hostAttrs,d),g!==i);)w++;return null!==i&&(a.directiveStylingLast=w),u}function ah(i,s,a){const u=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?d=_:d===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ai(i,_,!!a||s[++g]))}return void 0===i?null:i}function Os(i,s,a,u,d,g){const _=null===s;let w;for(;d>0;){const C=i[d],M=Array.isArray(C),R=M?C[1]:C,L=null===R;let z=a[d+1];z===Rt&&(z=L?It:void 0);let se=L?Pl(z,u):R===u?z:void 0;if(M&&!Qp(se)&&(se=Pl(C,u)),Qp(se)&&(w=se,_))return w;const De=i[d+1];d=_?Qi(De):Wo(De)}if(null!==s){let C=g?s.residualClasses:s.residualStyles;null!=C&&(w=Pl(C,u))}return w}function Qp(i){return void 0!==i}function qE(i,s=""){const a=ke(),u=Mt(),d=i+22,g=u.firstCreatePass?Ns(u,d,1,s,null):u.data[d],_=a[d]=function Cc(i,s){return cn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ag(u,a,_,g),yi(g,!1)}function Em(i){return Im("",i,""),Em}function Im(i,s,a){const u=ke(),d=function Xd(i,s,a,u){return Ni(i,Ti(),a)?s+ve(a)+u:Rt}(u,i,s,a);return d!==Rt&&cl(u,qr(),d),Im}const Uc=void 0;var l1=["en",[["a","p"],["AM","PM"],Uc],[["AM","PM"],Uc,Uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uc,"{1} 'at' {0}",Uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function a1(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Jp={};function Gv(i){const s=function u1(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Hv(s);if(a)return a;const u=s.split("-")[0];if(a=Hv(u),a)return a;if("en"===u)return l1;throw new Re(701,!1)}function hI(i){return Gv(i)[Et.PluralCase]}function Hv(i){return i in Jp||(Jp[i]=Ve.ng&&Ve.ng.common&&Ve.ng.common.locales&&Ve.ng.common.locales[i]),Jp[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Cr="en-US";let pI=Cr;function rf(i,s,a,u,d){if(i=ie(i),Array.isArray(i))for(let g=0;g<i.length;g++)rf(i[g],s,a,u,d);else{const g=Mt(),_=ke();let w=Ot(i)?i:ie(i.provide),C=Dw(i);const M=Sn(),R=1048575&M.providerIndexes,L=M.directiveStart,z=M.providerIndexes>>20;if(Ot(i)||!i.multi){const se=new ho(C,d,wa),De=o0(w,s,d?R:R+z,L);-1===De?(Is(Vo(M,_),g,w),r0(g,i,s.length),s.push(w),M.directiveStart++,M.directiveEnd++,d&&(M.providerIndexes+=1048576),a.push(se),_.push(se)):(a[De]=se,_[De]=se)}else{const se=o0(w,s,R+z,L),De=o0(w,s,R,R+z),Be=se>=0&&a[se],Qe=De>=0&&a[De];if(d&&!Qe||!d&&!Be){Is(Vo(M,_),g,w);const ot=function a0(i,s,a,u,d){const g=new ho(i,a,wa);return g.multi=[],g.index=s,g.componentProviders=0,FI(g,d,u&&!a),g}(d?s0:Om,a.length,d,u,C);!d&&Qe&&(a[De].providerFactory=ot),r0(g,i,s.length,0),s.push(w),M.directiveStart++,M.directiveEnd++,d&&(M.providerIndexes+=1048576),a.push(ot),_.push(ot)}else r0(g,i,se>-1?se:De,FI(a[d?De:se],C,!d&&u));!d&&u&&Qe&&a[De].componentProviders++}}}function r0(i,s,a,u){const d=Ot(s),g=function Su(i){return!!i.useClass}(s);if(d||g){const C=(g?ie(s.useClass):s).prototype.ngOnDestroy;if(C){const M=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const R=M.indexOf(a);-1===R?M.push(a,[u,C]):M[R+1].push(u,C)}else M.push(a,C)}}}function FI(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function o0(i,s,a,u){for(let d=a;d<u;d++)if(s[d]===i)return d;return-1}function Om(i,s,a,u){return of(this.multi,[])}function s0(i,s,a,u){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=po(a,a[1],this.providerFactory.index,u);g=w.slice(0,_),of(d,g);for(let C=_;C<w.length;C++)g.push(w[C])}else g=[],of(d,g);return g}function of(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function l0(i,s=[]){return a=>{a.providersResolver=(u,d)=>function OI(i,s,a){const u=Mt();if(u.firstCreatePass){const d=Ai(i);rf(a,u.data,u.blueprint,d,!0),rf(s,u.data,u.blueprint,d,!1)}}(u,d?d(i):i,s)}}class x1{resolveComponentFactory(s){throw function M1(i){const s=Error(`No component factory found for ${ge(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Fm=(()=>{class i{}return i.NULL=new x1,i})();class jc{}class LI{}function P1(){return dh(Sn(),ke())}function dh(i,s){return new sf(sr(i,s))}let sf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=P1,i})();function R1(i){return i instanceof sf?i.nativeElement:i}class h0{}let VI=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function O1(){const i=ke(),a=ar(Sn().index,i);return function p0(i){return i[11]}(Yn(a)?a:i)}(),i})(),F1=(()=>{class i{}return i.\u0275prov=Vt({token:i,providedIn:"root",factory:()=>null}),i})();class BI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const f0=new BI("14.0.4"),Lm={};function af(i,s,a,u,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&u.push(bn(g)),$r(g))for(let w=10;w<g.length;w++){const C=g[w],M=C[1].firstChild;null!==M&&af(C[1],C,M,u)}const _=a.type;if(8&_)af(i,s,a.child,u);else if(32&_){const w=al(a,s);let C;for(;C=w();)u.push(C)}else if(16&_){const w=dw(s,a);if(Array.isArray(w))u.push(...w);else{const C=Ir(s[16]);af(C[1],C,w,u,!0)}}a=d?a.projectionNext:a.next}return u}class hh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return af(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if($r(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Pd(s,u),ha(a,u))}this._attachedToViewContainer=!1}Dc(this._lView[1],this._lView)}onDestroy(s){nE(this._lView[1],this._lView,null,s)}markForCheck(){em(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function nm(i,s,a){const u=s[10];u.begin&&u.begin();try{Ca(i,s,i.template,a)}catch(d){throw fE(s,d),d}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ND(i,s){Mp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=s}}class UI extends hh{constructor(s){super(s),this._view=s}detectChanges(){hE(this._view)}checkNoChanges(){}get context(){return null}}class jI extends Fm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=$t(s);return new lf(a,this.ngModule)}}function GI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class KM{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,u){const d=this.injector.get(s,Lm,u);return d!==Lm||a===Lm?d:this.parentInjector.get(s,a,u)}}class lf extends LI{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Mg(i){return i.map(zD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return GI(this.componentDef.inputs)}get outputs(){return GI(this.componentDef.outputs)}create(s,a,u,d){let g=(d=d||this.ngModule)instanceof Kr?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new KM(s,g):s,w=_.get(h0,Ws),C=_.get(F1,null),M=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",L=u?function lv(i,s,a){if(cn(i))return i.selectRootElement(s,a===yt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(M,u,this.componentDef.encapsulation):Lr(w.createRenderer(null,this.componentDef),R,function WM(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),z=this.componentDef.onPush?288:272,se=function jp(i,s){return{components:[],scheduler:i||$e,clean:DA,playerHandler:s||null,flags:0}}(),De=Wg(0,null,null,1,0,null,null,null,null,null),Be=xc(null,De,se,z,null,null,w,M,C,_,null);let Qe,ot;ia(Be);try{const wt=function gv(i,s,a,u,d,g){const _=a[1];a[22]=i;const C=Ns(_,22,2,"#host",null),M=C.mergedAttrs=s.hostAttrs;null!==M&&(Da(C,M,!0),null!==i&&(D(d,i,M),null!==C.classes&&Sg(d,i,C.classes),null!==C.styles&&hw(d,i,C.styles)));const R=u.createRenderer(i,s),L=xc(a,eE(s),null,s.onPush?32:16,a[22],C,u,R,g||null,null,null);return _.firstCreatePass&&(Is(Vo(C,a),_,s.type),Qg(_,C),lE(C,a.length,1)),Xg(a,L),a[22]=L}(L,this.componentDef,Be,w,M);if(L)if(u)D(M,L,["ng-version",f0.full]);else{const{attrs:Pe,classes:gt}=function Od(i){const s=[],a=[];let u=1,d=2;for(;u<i.length;){let g=i[u];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++u]):8===d&&a.push(g);else{if(!xs(d))break;d=g}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Pe&&D(M,L,Pe),gt&&gt.length>0&&Sg(M,L,gt.join(" "))}if(ot=Tn(De,22),void 0!==a){const Pe=ot.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const ln=a[gt];Pe.push(null!=ln?Array.from(ln):null)}}Qe=function Yd(i,s,a,u,d){const g=a[1],_=function Zg(i,s,a){const u=Sn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),uE(i,u,s,Ko(i,s,1,null),a));const d=po(s,i,u.directiveStart,u);zt(d,s);const g=sr(u,s);return g&&zt(g,s),d}(g,a,s);if(u.components.push(_),i[8]=_,null!==d)for(const C of d)C(_,s);if(s.contentQueries){const C=Sn();s.contentQueries(1,_,C.directiveStart)}const w=Sn();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(sa(w.index),Yg(a[1],w,0,w.directiveStart,w.directiveEnd,s),sE(s,_)),_}(wt,this.componentDef,Be,se,[mv]),kc(De,Be,null)}finally{Tl()}return new HI(this.componentType,Qe,dh(ot,Be),Be,ot)}}class HI extends class N1{}{constructor(s,a,u,d,g){super(),this.location=u,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new UI(d),this.componentType=s}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function L1(i,s){return new g0(i,s??null)}class g0 extends jc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jI(this);const u=function Hn(i,s){const a=i[an]||null;if(!a&&!0===s)throw new Error(`Type ${ge(i)} does not have '\u0275mod' property.`);return a}(s);this._bootstrapComponents=function qn(i){return i instanceof Function?i():i}(u.bootstrap),this._r3Injector=j_(s,a,[{provide:jc,useValue:this},{provide:Fm,useValue:this.componentFactoryResolver}],ge(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(s)}get(s,a=ul.THROW_IF_NOT_FOUND,u=st.Default){return s===ul||s===jc||s===xn?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class uf extends class k1{}{constructor(s){super(),this.moduleType=s}create(s){return new g0(this.moduleType,s)}}function $I(i,s,a,u,d,g){const _=s+a;return Ni(i,_,d)?function Ps(i,s,a){return i[s]=a}(i,_+1,g?u.call(g,d):u(d)):function Bm(i,s){const a=i[s];return a===Rt?void 0:a}(i,_+1)}function Hm(i,s){const a=Mt();let u;const d=i+22;a.firstCreatePass?(u=function y0(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}}(s,a.pipeRegistry),a.data[d]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,u.onDestroy)):u=a.data[d];const g=u.factory||(u.factory=so(u.type)),_=In(wa);try{const w=Qa(!1),C=g();return Qa(w),function cm(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,ke(),d,C),C}finally{In(_)}}function $m(i,s,a){const u=i+22,d=ke(),g=lo(d,u);return function ph(i,s){return i[1].data[s].pure}(d,u)?$I(d,function lr(){const i=ft.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,g.transform,a,g):g.transform(a)}function zm(i){return s=>{setTimeout(i,void 0,s)}}const Ma=class WI extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){let d=s,g=a||(()=>null),_=u;if(s&&"object"==typeof s){const C=s;d=C.next?.bind(C),g=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(g=zm(g),d&&(d=zm(d)),_&&(_=zm(_)));const w=super.subscribe({next:d,error:g,complete:_});return s instanceof re.w0&&s.add(w),w}};function df(){return this._results[Pc()]()}class _0{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pc(),u=_0.prototype;u[a]||(u[a]=df)}get changes(){return this._changes||(this._changes=new Ma)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const d=wr(s);(this._changesDetected=!function hu(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let d=i[u],g=s[u];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(u._results,d,a))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fh=(()=>{class i{}return i.__NG_ELEMENT_ID__=KI,i})();const z1=fh,q1=class extends z1{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s,a){const u=this._declarationTContainer.tViews,d=xc(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(u)),kc(u,d,s),new hh(d)}};function KI(){return hf(Sn(),ke())}function hf(i,s){return 4&i.type?new q1(s,i,dh(i,s)):null}let pf=(()=>{class i{}return i.__NG_ELEMENT_ID__=W1,i})();function W1(){return YI(Sn(),ke())}const K1=pf,ZI=class extends K1{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return dh(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){const s=ua(this._hostTNode,this._hostLView);if(en(s)){const a=Fr(s,this._hostLView),u=Ut(s);return new Uo(a[1].data[u+8],a)}return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=v0(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){let d,g;"number"==typeof u?d=u:null!=u&&(d=u.index,g=u.injector);const _=s.createEmbeddedView(a||{},g);return this.insert(_,d),_}createComponent(s,a,u,d,g){const _=s&&!function go(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const L=a||{};w=L.index,u=L.injector,d=L.projectableNodes,g=L.environmentInjector||L.ngModuleRef}const C=_?s:new lf($t(s)),M=u||this.parentInjector;if(!g&&null==C.ngModule){const z=(_?M:this.parentInjector).get(Kr,null);z&&(g=z)}const R=C.create(M,d,void 0,g);return this.insert(R.hostView,w),R}insert(s,a){const u=s._lView,d=u[1];if(function xo(i){return $r(i[3])}(u)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const L=u[3],z=new ZI(L,L[6],L[3]);z.detach(z.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function RD(i,s,a,u){const d=10+u,g=a.length;u>0&&(a[d-1][4]=s),u<g-10?(s[4]=a[d],_i(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function aw(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(d,u,_,g);const w=Tp(g,_),C=u[11],M=Dp(C,_[7]);return null!==M&&function kD(i,s,a,u,d,g){u[0]=d,u[6]=s,Mp(i,u,a,1,d,g)}(d,_[6],C,u,M,w),s.attachToViewContainerRef(),_i(b0(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=v0(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Pd(this._lContainer,a);u&&(ha(b0(this._lContainer),a),Dc(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Pd(this._lContainer,a);return u&&null!=ha(b0(this._lContainer),a)?new hh(u):null}_adjustIndex(s,a=0){return s??this.length+a}};function v0(i){return i[8]}function b0(i){return i[8]||(i[8]=[])}function YI(i,s){let a;const u=s[i.index];if($r(u))a=u;else{let d;if(8&i.type)d=bn(u);else{const g=s[11];d=g.createComment("");const _=sr(i,s);ll(g,Dp(g,_),d,function cw(i,s){return cn(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=Jg(u,s,d,i),Xg(s,a)}return new ZI(a,i,s)}class w0{constructor(s){this.queryList=s,this.matches=null}clone(){return new w0(this.queryList)}setDirty(){this.queryList.setDirty()}}class E0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<u;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new E0(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ff(s,a).matches&&this.queries[a].setDirty()}}class JI{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class qm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const d=null!==a?a.length:0,g=this.getByIndex(u).embeddedTView(s,d);g&&(g.indexInDeclarationView=u,null!==a?a.push(g):a=[g])}return null!==a?new qm(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Wm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Wm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const g=u[d];this.matchTNodeWithReadOption(s,a,Y1(a,g)),this.matchTNodeWithReadOption(s,a,Ju(a,s,g,!1,!1))}else u===fh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ju(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===sf||d===pf||d===fh&&4&a.type)this.addMatch(a.index,-2);else{const g=Ju(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Y1(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function J1(i,s,a,u){return-1===a?function Q1(i,s){return 11&i.type?dh(i,s):4&i.type?hf(i,s):null}(s,i):-2===a?function ts(i,s,a){return a===sf?dh(s,i):a===fh?hf(s,i):a===pf?YI(s,i):void 0}(i,s,u):po(i,i[1],a,s)}function XI(i,s,a,u){const d=s[19].queries[u];if(null===d.matches){const g=i.data,_=a.matches,w=[];for(let C=0;C<_.length;C+=2){const M=_[C];w.push(M<0?null:J1(s,g[M],_[C+1],a.metadata.read))}d.matches=w}return d.matches}function I0(i,s,a,u){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const _=XI(i,s,d,a);for(let w=0;w<g.length;w+=2){const C=g[w];if(C>0)u.push(_[w/2]);else{const M=g[w+1],R=s[-C];for(let L=10;L<R.length;L++){const z=R[L];z[17]===z[3]&&I0(z[1],z,M,u)}if(null!==R[9]){const L=R[9];for(let z=0;z<L.length;z++){const se=L[z];I0(se[1],se,M,u)}}}}}return u}function C0(i){const s=ke(),a=Mt(),u=Wa();vs(u+1);const d=ff(a,u);if(i.dirty&&Ys(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?I0(a,s,u,[]):XI(a,s,d,u);i.reset(g,R1),i.notifyOnChanges()}return!0}return!1}function Km(i,s,a){const u=Mt();u.firstCreatePass&&(function Zm(i,s,a){null===i.queries&&(i.queries=new qm),i.queries.track(new Wm(s,a))}(u,new JI(i,s,a),-1),2==(2&s)&&(u.staticViewQueries=!0)),function at(i,s,a){const u=new _0(4==(4&a));nE(i,s,u,u.destroy),null===s[19]&&(s[19]=new E0),s[19].queries.push(new w0(u))}(u,ke(),s)}function eC(){return function Kl(i,s){return i[19].queries[s].queryList}(ke(),Wa())}function ff(i,s){return i.queries.getByIndex(s)}function Ym(i,s){return hf(i,s)}function ty(...i){}const U0=new pn("Application Initializer");let wh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ty,this.reject=ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Sv(g))a.push(g);else if(qp(g)){const _=new Promise((w,C)=>{g.subscribe({complete:w,error:C})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(d=>{this.reject(d)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(He(U0,8))},i.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const j0=new pn("AppId",{providedIn:"root",factory:function hC(){return`${_f()}${_f()}${_f()}`}});function _f(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ny=new pn("Platform Initializer"),di=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ei=new pn("appBootstrapListener"),vf=new pn("LocaleId",{providedIn:"root",factory:()=>function xt(i,s=st.Default){return He(i,s)}(vf,st.Optional|st.SkipSelf)||function dT(){return typeof $localize<"u"&&$localize.locale||Cr}()}),hT=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),ry=(()=>Promise.resolve(0))();function bf(i){typeof Zone>"u"?ry.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Io{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),typeof Zone>"u")throw new Re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&a,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function H0(){let i=Ve.requestAnimationFrame,s=Ve.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function bC(i){const s=()=>{!function vC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ve,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,iy(i),i.isCheckStableRunning=!0,Hc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),iy(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,d,g,_,w)=>{try{return wf(i),a.invokeTask(d,g,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),wC(i)}},onInvoke:(a,u,d,g,_,w,C)=>{try{return wf(i),a.invoke(d,g,_,w,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),wC(i)}},onHasTask:(a,u,d,g)=>{a.hasTask(d,g),u===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,iy(i),Hc(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,u,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Io.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(Io.isInAngularZone())throw new Re(909,!1)}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,s,fT,ty,ty);try{return g.runTask(_,a,u)}finally{g.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const fT={};function Hc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function iy(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wf(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wC(i){i._nesting--,Hc(i)}class gT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,d){return s.apply(a,u)}}const $c=new pn(""),EC=new pn("");let Eh,mT=(()=>{class i{constructor(a,u,d){this._ngZone=a,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Eh||(function IC(i){Eh=i}(d),d.addToWindow(u)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Io.assertNotInAngularZone(),bf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,d){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,u,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(He(Io),He(Uu),He(EC))},i.\u0275prov=Vt({token:i,factory:i.\u0275fac}),i})(),Uu=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return Eh?.findTestabilityInTree(this,a,u)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Zl=null;const Ih=new pn("AllowMultipleToken"),oy=new pn("PlatformDestroyListeners");function uy(i,s,a=[]){const u=`Platform: ${s}`,d=new pn(u);return(g=[])=>{let _=zc();if(!_||_.injector.get(Ih,!1)){const w=[...a,...g,{provide:d,useValue:!0}];i?i(w):function $0(i){if(Zl&&!Zl.get(Ih,!1))throw new Re(400,!1);Zl=i;const s=i.get(K0);(function z0(i){const s=i.get(ny,null);s&&s.forEach(a=>a())})(i)}(function cy(i=[],s){return ul.create({name:s,providers:[{provide:V_,useValue:"platform"},{provide:oy,useValue:new Set([()=>Zl=null])},...i]})}(w,u))}return function q0(i){const s=zc();if(!s)throw new Re(401,!1);return s}()}}function zc(){return Zl?.get(K0)??null}let K0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const d=function Z0(i,s){let a;return a="noop"===i?new gT:("zone.js"===i?void 0:i)||new Io(s),a}(u?.ngZone,function AC(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:Io,useValue:d}];return d.run(()=>{const _=ul.create({providers:g,parent:this.injector,name:a.moduleType.name}),w=a.create(_),C=w.injector.get(Iu,null);if(!C)throw new Re(402,!1);return d.runOutsideAngular(()=>{const M=d.onError.subscribe({next:R=>{C.handleError(R)}});w.onDestroy(()=>{If(this._modules,w),M.unsubscribe()})}),function Ef(i,s,a){try{const u=a();return Sv(u)?u.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(C,d,()=>{const M=w.injector.get(wh);return M.runInitializers(),M.donePromise.then(()=>(function $v(i){Nt(i,"Expected localeId to be defined"),"string"==typeof i&&(pI=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(vf,Cr)||Cr),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,u=[]){const d=dy({},u);return function CC(i,s,a){const u=new uf(a);return Promise.resolve(u)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const u=a.injector.get(hy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Re(403,!1);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(oy,null);a&&(a.forEach(u=>u()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(He(ul))},i.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function dy(i,s){return Array.isArray(s)?s.reduce(dy,i):{...i,...s}}let hy=(()=>{class i{constructor(a,u,d){this._zone=a,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new F.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),_=new F.y(w=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Io.assertNotInAngularZone(),bf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{C.unsubscribe(),M.unsubscribe()}});this.isStable=(0,he.T)(g,_.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,u){const d=a instanceof LI;if(!this._injector.get(wh).done)throw!d&&function mh(i){const s=$t(i)||Gn(i)||hr(i);return null!==s&&s.standalone}(a),new Re(405,false);let _;_=d?a:this._injector.get(Fm).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const w=function ay(i){return i.isBoundToModule}(_)?void 0:this._injector.get(jc),M=_.create(ul.NULL,[],u||_.selector,w),R=M.location.nativeElement,L=M.injector.get($c,null);return L?.registerApplication(R),M.onDestroy(()=>{this.detachView(M.hostView),If(this.components,M),L?.unregisterApplication(R)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;If(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Ei,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>If(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(He(Io),He(ul),He(Iu))},i.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function If(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Ch=!0,Q0=!1;function py(){return Q0=!0,Ch}function Cf(){if(Q0)throw new Error("Cannot enable prod mode after platform setup.");Ch=!1}let J0=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ah,i})();function Ah(i){return function X0(i,s,a){if(Gs(i)&&!a){const u=ar(i.index,s);return new hh(u,u)}return 47&i.type?new hh(s[16],s):null}(Sn(),ke(),16==(16&i))}class Yl{constructor(){}supports(s){return Rc(s)}create(s){return new NC(s)}}const kC=(i,s)=>s;class NC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||kC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,d=0,g=null;for(;a||u;){const _=!u||a&&a.currentIndex<OC(u,d,g)?a:u,w=OC(_,d,g),C=_.currentIndex;if(_===u)d--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const M=w-d,R=C-d;if(M!=R){for(let z=0;z<M;z++){const se=z<g.length?g[z]:g[z]=0,De=se+z;R<=De&&De<M&&(g[z]=se+1)}g[_.previousIndex]=R-M}}w!==C&&s(_,w,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Rc(s))throw new Re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)g=s[w],_=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,g,_,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,w),u=!0),a=a._next}else d=0,function Ev(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Pc()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),u=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new PC(a,u),g,d),s}_verifyReinsertion(s,a,u,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new RC),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RC),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class PC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mh{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class RC{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new Mh,this.map.set(a,u)),u.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OC(i,s,a){const u=i.previousIndex;if(null===u)return u;let d=0;return a&&u<a.length&&(d=a[u]),u+s+d}class nb{constructor(){}supports(s){return s instanceof Map||Qd(s)}create(){return new bT}}class bT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Qd(s)))throw new Re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,u);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const u=new FC(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class FC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rb(){return new Af([new Yl])}let Af=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const d=u.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||rb()),deps:[[i,new Ki,new mo]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(null!=u)return u;throw new Re(901,!1)}}return i.\u0275prov=Vt({token:i,providedIn:"root",factory:rb}),i})();function ib(){return new vy([new nb])}let vy=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const d=u.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||ib()),deps:[[i,new Ki,new mo]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(u)return u;throw new Re(901,!1)}}return i.\u0275prov=Vt({token:i,providedIn:"root",factory:ib}),i})();const by=uy(null,"core",[]);let Tf=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(He(hy))},i.\u0275mod=bt({type:i}),i.\u0275inj=Yt({}),i})();function wy(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(dt,Se,V)=>{"use strict";V.d(Se,{Z:()=>Re});var f=V(2090),re=V(4859),F=V(9681),he=V(1877);class ue{constructor(ve,be){this._delegate=ve,this.firebase=be,(0,F._addComponent)(ve,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ve,be=F._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(ve);return!Xe.isInitialized()&&"EXPLICIT"===(null===(Je=Xe.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:be})}_removeServiceInstance(ve,be=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(be)}_addComponent(ve){(0,F._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,F._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Ie(){const Ye=function ge(Ye){const ve={},be={__esModule:!0,initializeApp:function xe(K,$={}){const pe=F.initializeApp(K,$);if((0,f.r3)(ve,pe.name))return ve[pe.name];const Y=new Ye(pe,be);return ve[pe.name]=Y,Y},app:Xe,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ae(K){const $=K.name,pe=$.replace("-compat","");if(F._registerComponent(K)&&"PUBLIC"===K.type){const Y=(ae=Xe())=>{if("function"!=typeof ae[pe])throw me.create("invalid-app-argument",{appName:$});return ae[pe]()};void 0!==K.serviceProps&&(0,f.ZB)(Y,K.serviceProps),be[pe]=Y,Ye.prototype[pe]=function(...ae){return this._getService.bind(this,$).apply(this,K.multipleInstances?ae:[])}}return"PUBLIC"===K.type?be[pe]:null},removeApp:function Je(K){delete ve[K]},useAsService:function Ze(K,$){return"serverAuth"===$?null:$},modularAPIs:F}};function Xe(K){if(!(0,f.r3)(ve,K=K||F._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:K});return ve[K]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ce(){return Object.keys(ve).map(K=>ve[K])}}),Xe.App=Ye,be}(ue);return Ye.INTERNAL=Object.assign(Object.assign({},Ye.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function ve(be){(0,f.ZB)(Ye,be)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ye}(),q=new he.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ye=self.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=Q;!function Le(Ye){(0,F.registerVersion)("@firebase/app-compat","0.1.28",Ye)}()},9681:(dt,Se,V)=>{"use strict";V.r(Se),V.d(Se,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>jr,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>Vt,_apps:()=>Ht,_clearComponents:()=>Qr,_components:()=>jn,_getProvider:()=>Yt,_registerComponent:()=>nr,_removeServiceInstance:()=>Pt,deleteApp:()=>st,getApp:()=>rr,getApps:()=>En,initializeApp:()=>no,onLog:()=>In,registerVersion:()=>Xt,setLogLevel:()=>Ui});var f=V(5861),re=V(4859),F=V(1877),he=V(2090),ue=V(8766);class we{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(Ee=>{if(function me(ne){return"VERSION"===ne.getComponent()?.type}(Ee)){const je=Ee.getImmediate();return`${je.library}/${je.version}`}return null}).filter(Ee=>Ee).join(" ")}}const ge="@firebase/app",Q=new F.Yd("@firebase/app"),Nt="[DEFAULT]",Ge={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,jn=new Map;function Jt(ne,j){try{ne.container.addComponent(j)}catch(Ee){Q.debug(`Component ${j.name} failed to register with FirebaseApp ${ne.name}`,Ee)}}function Vt(ne,j){ne.container.addOrOverwriteComponent(j)}function nr(ne){const j=ne.name;if(jn.has(j))return Q.debug(`There were multiple attempts to register component ${j}.`),!1;jn.set(j,ne);for(const Ee of Ht.values())Jt(Ee,ne);return!0}function Yt(ne,j){const Ee=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return Ee&&Ee.triggerHeartbeat(),ne.container.getProvider(j)}function Pt(ne,j,Ee=Nt){Yt(ne,j).clearInstance(Ee)}function Qr(){jn.clear()}const cr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class _r{constructor(j,Ee,je){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},Ee),this._name=Ee.name,this._automaticDataCollectionEnabled=Ee.automaticDataCollectionEnabled,this._container=je,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const jr="9.8.4";function no(ne,j={}){"object"!=typeof j&&(j={name:j});const Ee=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},j),je=Ee.name;if("string"!=typeof je||!je)throw cr.create("bad-app-name",{appName:String(je)});const tt=Ht.get(je);if(tt){if((0,he.vZ)(ne,tt.options)&&(0,he.vZ)(Ee,tt.config))return tt;throw cr.create("duplicate-app",{appName:je})}const bt=new re.H0(je);for(const dn of jn.values())bt.addComponent(dn);const un=new _r(ne,Ee,bt);return Ht.set(je,un),un}function rr(ne=Nt){const j=Ht.get(ne);if(!j)throw cr.create("no-app",{appName:ne});return j}function En(){return Array.from(Ht.values())}function st(ne){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(ne){const j=ne.name;Ht.has(j)&&(Ht.delete(j),yield Promise.all(ne.container.getProviders().map(Ee=>Ee.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function Xt(ne,j,Ee){var je;let tt=null!==(je=Ge[ne])&&void 0!==je?je:ne;Ee&&(tt+=`-${Ee}`);const bt=tt.match(/\s|\//),un=j.match(/\s|\//);if(bt||un){const dn=[`Unable to register library "${tt}" with version "${j}":`];return bt&&dn.push(`library name "${tt}" contains illegal characters (whitespace or "/")`),bt&&un&&dn.push("and"),un&&dn.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void Q.warn(dn.join(" "))}nr(new re.wA(`${tt}-version`,()=>({library:tt,version:j}),"VERSION"))}function In(ne,j){if(null!==ne&&"function"!=typeof ne)throw cr.create("invalid-log-argument");(0,F.Am)(ne,j)}function Ui(ne){(0,F.Ub)(ne)}const sn="firebase-heartbeat-store";let Zn=null;function ei(){return Zn||(Zn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(ne,j)=>{0===j&&ne.createObjectStore(sn)}}).catch(ne=>{throw cr.create("storage-open",{originalErrorMessage:ne.message})})),Zn}function Ve(){return(Ve=(0,f.Z)(function*(ne){var j;try{return(yield ei()).transaction(sn).objectStore(sn).get(nn(ne))}catch(Ee){throw cr.create("storage-get",{originalErrorMessage:null===(j=Ee)||void 0===j?void 0:j.message})}})).apply(this,arguments)}function _t(ne,j){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(ne,j){var Ee;try{const tt=(yield ei()).transaction(sn,"readwrite");return yield tt.objectStore(sn).put(j,nn(ne)),tt.done}catch(je){throw cr.create("storage-set",{originalErrorMessage:null===(Ee=je)||void 0===Ee?void 0:Ee.message})}})).apply(this,arguments)}function nn(ne){return`${ne.name}!${ne.options.appId}`}class ir{constructor(j){this.container=j,this._heartbeatsCache=null;const Ee=this.container.getProvider("app").getImmediate();this._storage=new X(Ee),this._heartbeatsCachePromise=this._storage.read().then(je=>(this._heartbeatsCache=je,je))}triggerHeartbeat(){var j=this;return(0,f.Z)(function*(){const je=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tt=Pr();if(null===j._heartbeatsCache&&(j._heartbeatsCache=yield j._heartbeatsCachePromise),j._heartbeatsCache.lastSentHeartbeatDate!==tt&&!j._heartbeatsCache.heartbeats.some(bt=>bt.date===tt))return j._heartbeatsCache.heartbeats.push({date:tt,agent:je}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(bt=>{const un=new Date(bt.date).valueOf();return Date.now()-un<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,f.Z)(function*(){if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null===j._heartbeatsCache||0===j._heartbeatsCache.heartbeats.length)return"";const Ee=Pr(),{heartbeatsToSend:je,unsentEntries:tt}=function an(ne,j=1024){const Ee=[];let je=ne.slice();for(const tt of ne){const bt=Ee.find(un=>un.agent===tt.agent);if(bt){if(bt.dates.push(tt.date),H(Ee)>j){bt.dates.pop();break}}else if(Ee.push({agent:tt.agent,dates:[tt.date]}),H(Ee)>j){Ee.pop();break}je=je.slice(1)}return{heartbeatsToSend:Ee,unsentEntries:je}}(j._heartbeatsCache.heartbeats),bt=(0,he.L)(JSON.stringify({version:2,heartbeats:je}));return j._heartbeatsCache.lastSentHeartbeatDate=Ee,tt.length>0?(j._heartbeatsCache.heartbeats=tt,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),bt})()}}function Pr(){return(new Date).toISOString().substring(0,10)}class X{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,f.Z)(function*(){return(yield j._canUseIndexedDBPromise)&&(yield function yt(ne){return Ve.apply(this,arguments)}(j.app))||{heartbeats:[]}})()}overwrite(j){var Ee=this;return(0,f.Z)(function*(){var je;if(yield Ee._canUseIndexedDBPromise){const bt=yield Ee.read();return _t(Ee.app,{lastSentHeartbeatDate:null!==(je=j.lastSentHeartbeatDate)&&void 0!==je?je:bt.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var Ee=this;return(0,f.Z)(function*(){var je;if(yield Ee._canUseIndexedDBPromise){const bt=yield Ee.read();return _t(Ee.app,{lastSentHeartbeatDate:null!==(je=j.lastSentHeartbeatDate)&&void 0!==je?je:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...j.heartbeats]})}})()}}function H(ne){return(0,he.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function Z(ne){nr(new re.wA("platform-logger",j=>new we(j),"PRIVATE")),nr(new re.wA("heartbeat",j=>new ir(j),"PRIVATE")),Xt(ge,"0.7.27",ne),Xt(ge,"0.7.27","esm2017"),Xt("fire-js","")}("")},4859:(dt,Se,V)=>{"use strict";V.d(Se,{H0:()=>ge,wA:()=>F,zt:()=>ue});var f=V(5861),re=V(2090);class F{constructor(Q,q,ie){this.name=Q,this.instanceFactory=q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const he="[DEFAULT]";class ue{constructor(Q,q){this.name=Q,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const q=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(q)){const ie=new re.BH;if(this.instancesDeferred.set(q,ie),this.isInitialized(q)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:q});nt&&ie.resolve(nt)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(Q){var q;const ie=this.normalizeInstanceIdentifier(Q?.identifier),nt=null!==(q=Q?.optional)&&void 0!==q&&q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Le){if(nt)return null;throw Le}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function me(Ie){return"EAGER"===Ie.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[q,ie]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(q);try{const Le=this.getOrInitializeService({instanceIdentifier:nt});ie.resolve(Le)}catch{}}}}clearInstance(Q=he){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,f.Z)(function*(){const q=Array.from(Q.instances.values());yield Promise.all([...q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=he){return this.instances.has(Q)}getOptions(Q=he){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:q={}}=Q,ie=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:ie,options:q});for(const[Le,Re]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Le)&&Re.resolve(nt);return nt}onInit(Q,q){var ie;const nt=this.normalizeInstanceIdentifier(q),Le=null!==(ie=this.onInitCallbacks.get(nt))&&void 0!==ie?ie:new Set;Le.add(Q),this.onInitCallbacks.set(nt,Le);const Re=this.instances.get(nt);return Re&&Q(Re,nt),()=>{Le.delete(Q)}}invokeOnInitCallbacks(Q,q){const ie=this.onInitCallbacks.get(q);if(ie)for(const nt of ie)try{nt(Q,q)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:q={}}){let ie=this.instances.get(Q);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=Q,Ie===he?void 0:Ie),options:q}),this.instances.set(Q,ie),this.instancesOptions.set(Q,q),this.invokeOnInitCallbacks(ie,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ie)}catch{}var Ie;return ie||null}normalizeInstanceIdentifier(Q=he){return this.component?this.component.multipleInstances?Q:he:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const q=this.getProvider(Q.name);if(q.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);q.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const q=new ue(Q,this);return this.providers.set(Q,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Se,V)=>{"use strict";V.d(Se,{Am:()=>Ie,Ub:()=>ge,Yd:()=>me,in:()=>re});const f=[];var re=(()=>{return(Q=re||(re={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",re;var Q})();const F={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},he=re.INFO,ue={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},we=(Q,q,...ie)=>{if(q<Q.logLevel)return;const nt=(new Date).toISOString(),Le=ue[q];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Le](`[${nt}]  ${Q.name}:`,...ie)};class me{constructor(q){this.name=q,this._logLevel=he,this._logHandler=we,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in re))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?F[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...q),this._logHandler(this,re.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...q),this._logHandler(this,re.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,re.INFO,...q),this._logHandler(this,re.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,re.WARN,...q),this._logHandler(this,re.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...q),this._logHandler(this,re.ERROR,...q)}}function ge(Q){f.forEach(q=>{q.setLogLevel(Q)})}function Ie(Q,q){for(const ie of f){let nt=null;q&&q.level&&(nt=F[q.level]),ie.userLogHandler=null===Q?null:(Le,Re,...Ye)=>{const ve=Ye.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");Re>=(nt??Le.logLevel)&&Q({level:re[Re].toLowerCase(),message:ve,args:Ye,type:Le.name})}}}},8766:(dt,Se,V)=>{"use strict";V.d(Se,{Lj:()=>xe,X3:()=>Xe});var f=V(5861);let F,he;const me=new WeakMap,ge=new WeakMap,Ie=new WeakMap,Q=new WeakMap,q=new WeakMap;let Le={get($,pe,Y){if($ instanceof IDBTransaction){if("done"===pe)return ge.get($);if("objectStoreNames"===pe)return $.objectStoreNames||Ie.get($);if("store"===pe)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return be($[pe])},set:($,pe,Y)=>($[pe]=Y,!0),has:($,pe)=>$ instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in $};function ve($){return"function"==typeof $?function Ye($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...pe){return $.apply(Je(this),pe),be(me.get(this))}:function(...pe){return be($.apply(Je(this),pe))}:function(pe,...Y){const ae=$.call(Je(this),pe,...Y);return Ie.set(ae,pe.sort?pe.sort():[pe]),be(ae)}}($):($ instanceof IDBTransaction&&function nt($){if(ge.has($))return;const pe=new Promise((Y,ae)=>{const ee=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",ce),$.removeEventListener("abort",ce)},ye=()=>{Y(),ee()},ce=()=>{ae($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",ye),$.addEventListener("error",ce),$.addEventListener("abort",ce)});ge.set($,pe)}($),(($,pe)=>pe.some(Y=>$ instanceof Y))($,function ue(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Le):$)}function be($){if($ instanceof IDBRequest)return function ie($){const pe=new Promise((Y,ae)=>{const ee=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",ce)},ye=()=>{Y(be($.result)),ee()},ce=()=>{ae($.error),ee()};$.addEventListener("success",ye),$.addEventListener("error",ce)});return pe.then(Y=>{Y instanceof IDBCursor&&me.set(Y,$)}).catch(()=>{}),q.set(pe,$),pe}($);if(Q.has($))return Q.get($);const pe=ve($);return pe!==$&&(Q.set($,pe),q.set(pe,$)),pe}const Je=$=>q.get($);function Xe($,pe,{blocked:Y,upgrade:ae,blocking:ee,terminated:ye}={}){const ce=indexedDB.open($,pe),Fe=be(ce);return ae&&ce.addEventListener("upgradeneeded",ht=>{ae(be(ce.result),ht.oldVersion,ht.newVersion,be(ce.transaction))}),Y&&ce.addEventListener("blocked",()=>Y()),Fe.then(ht=>{ye&&ht.addEventListener("close",()=>ye()),ee&&ht.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Fe}function xe($,{blocked:pe}={}){const Y=indexedDB.deleteDatabase($);return pe&&Y.addEventListener("blocked",()=>pe()),be(Y).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ze=new Map;function K($,pe){if(!($ instanceof IDBDatabase)||pe in $||"string"!=typeof pe)return;if(Ze.get(pe))return Ze.get(pe);const Y=pe.replace(/FromIndex$/,""),ae=pe!==Y,ee=Ae.includes(Y);if(!(Y in(ae?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ce.includes(Y))return;const ye=function(){var ce=(0,f.Z)(function*(Fe,...ht){const Wt=this.transaction(Fe,ee?"readwrite":"readonly");let Nt=Wt.store;return ae&&(Nt=Nt.index(ht.shift())),(yield Promise.all([Nt[Y](...ht),ee&&Wt.done]))[0]});return function(ht){return ce.apply(this,arguments)}}();return Ze.set(pe,ye),ye}!function Re($){Le=$(Le)}($=>({...$,get:(pe,Y,ae)=>K(pe,Y)||$.get(pe,Y,ae),has:(pe,Y)=>!!K(pe,Y)||$.has(pe,Y)}))},5861:(dt,Se,V)=>{"use strict";function f(F,he,ue,we,me,ge,Ie){try{var Q=F[ge](Ie),q=Q.value}catch(ie){return void ue(ie)}Q.done?he(q):Promise.resolve(q).then(we,me)}function re(F){return function(){var he=this,ue=arguments;return new Promise(function(we,me){var ge=F.apply(he,ue);function Ie(q){f(ge,we,me,Ie,Q,"next",q)}function Q(q){f(ge,we,me,Ie,Q,"throw",q)}Ie(void 0)})}}V.d(Se,{Z:()=>re})}},dt=>{dt(dt.s=5699)}]);